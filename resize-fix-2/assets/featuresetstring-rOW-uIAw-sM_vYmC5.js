import{a,$ as m,k as h,p as f,K as c,C as v,l as A,j as l,i as y,o as T,D as b,B as x,O as F,q as g,u as O,W as V}from"./aiServices-u5nRiq9H-7ZUGreWk.js";import{l as d,r as u}from"./enum-g1DWyQyu-kiyCESWw.js";import{w as p}from"./shared-DttuBH5Z-DwD-x3PG.js";import"./TimeOnly-CGkId3bj-_svlPvq1.js";import"./main-166dfadA.js";import"./UnknownTimeZone-DxjyzFvs-DHiLp542.js";import"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import"./number-mnL_JN3f-BDmnr_3H.js";import"./commonProperties-D1Pjvz5u-DHiB1uzW.js";import"./utils-BO8hgPs3-hXN24Cjf.js";import"./Field-BIQ-quF4-_aOBtzg2.js";import"./fieldType-PhcL4ff8-B53C9lP5.js";function w(i,t){return i&&i.domain?i.domain.type==="coded-value"||i.domain.type==="codedValue"?l.convertObjectToArcadeDictionary({type:"codedValue",name:i.domain.name,dataType:p[i.field.type],codedValues:i.domain.codedValues.map(e=>({name:e.name,code:e.code}))},y(t)):l.convertObjectToArcadeDictionary({type:"range",name:i.domain.name,dataType:p[i.field.type],min:i.domain.minValue,max:i.domain.maxValue},y(t)):null}function H(i){i.mode==="async"&&(i.functions.domain=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,2,3,t,e),m(n[0]))return w(h(n[0],f(n[1]),n[2]===void 0?void 0:n[2]),t);if(c(n[0]))return await n[0]._ensureLoaded(),w(v(f(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),t);throw new d(t,u.InvalidParameter,e)})},i.functions.subtypes=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,1,1,t,e),m(n[0])){const r=A(n[0]);return r?l.convertObjectToArcadeDictionary(r,y(t)):null}if(c(n[0])){await n[0]._ensureLoaded();const r=n[0].subtypeMetaData();return r?l.convertObjectToArcadeDictionary(r,y(t)):null}throw new d(t,u.InvalidParameter,e)})},i.functions.domainname=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,2,4,t,e),m(n[0]))return T(n[0],f(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(c(n[0])){await n[0]._ensureLoaded();const r=v(f(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return b(r,n[2])}throw new d(t,u.InvalidParameter,e)})},i.signatures.push({name:"domainname",min:2,max:4}),i.functions.domaincode=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,2,4,t,e),m(n[0]))return x(n[0],f(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(c(n[0])){await n[0]._ensureLoaded();const r=v(f(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return F(r,n[2])}throw new d(t,u.InvalidParameter,e)})},i.signatures.push({name:"domaincode",min:2,max:4}),i.functions.text=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,1,2,t,e),c(n[0])){const r=g(n[1],"");if(r==="")return n[0].castToText();if(r.toLowerCase()==="schema")return n[0].convertToText("schema",o.abortSignal);if(r.toLowerCase()==="featureset")return n[0].convertToText("featureset",o.abortSignal);throw new d(t,u.InvalidParameter,e)}return O(n[0],n[1])})},i.functions.gdbversion=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,1,1,t,e),m(n[0]))return n[0].gdbVersion();if(c(n[0]))return(await n[0].load()).gdbVersion;throw new d(t,u.InvalidParameter,e)})},i.functions.schema=function(t,e){return i.standardFunctionAsync(t,e,async(o,s,n)=>{if(a(n,1,1,t,e),c(n[0]))return await n[0].load(),l.convertObjectToArcadeDictionary(n[0].schema(),y(t));if(m(n[0])){const r=V(n[0]);return r?l.convertObjectToArcadeDictionary(r,y(t)):null}throw new d(t,u.InvalidParameter,e)})})}export{H as registerFunctions};
