import{gI as j,ao as B,lx as C,aH as K}from"./main-D8UjLOIQ.js";function b(n,o,r,e){if(n.type==="point")return n.x+=o,n.y+=r,n.hasZ&&e!=null,n;if(n.type==="multipoint"){const i=n.points;for(let x=0;x<i.length;x++)i[x]=D(i[x],o,r,e);return n}if(n.type==="extent")return n.xmin+=o,n.xmax+=o,n.ymin+=r,n.ymax+=r,n;const m=j(n),t=n.type==="polyline"?n.paths:n.rings;for(let i=0;i<m.length;i++){const x=m[i];for(let s=0;s<x.length;s++)x[s]=D(x[s],o,r,e)}return"paths"in n?n.paths=t:n.rings=t,n}function N(n,o,r,e,m){const t=n.clone(),i=e.resolution;if(t.type==="point"){if(m)b(t,o*i,-r*i);else{const x=e.state.transform,s=e.state.inverseTransform,y=x[0]*t.x+x[2]*t.y+x[4],f=x[1]*t.x+x[3]*t.y+x[5];t.x=s[0]*(y+o)+s[2]*(f+r)+s[4],t.y=s[1]*(y+o)+s[3]*(f+r)+s[5]}return t}if(t.type==="multipoint"){if(m)b(t,o*i,-r*i);else{const x=t.points,s=e.state.transform,y=e.state.inverseTransform;for(let f=0;f<x.length;f++){const a=x[f],p=s[0]*a[0]+s[2]*a[1]+s[4],v=s[1]*a[0]+s[3]*a[1]+s[5],c=y[0]*(p+o)+y[2]*(v+r)+y[4],u=y[1]*(p+o)+y[3]*(v+r)+y[5];x[f]=G(a,c,u)}}return t}if(t.type==="extent"){if(m)b(t,o*i,-r*i);else{const x=e.state.transform,s=e.state.inverseTransform,y=x[0]*t.xmin+x[2]*t.ymin+x[4],f=x[1]*t.xmin+x[3]*t.ymin+x[5],a=x[0]*t.xmax+x[2]*t.ymax+x[4],p=x[1]*t.xmax+x[3]*t.ymax+x[5];t.xmin=s[0]*(y+o)+s[2]*(f+r)+s[4],t.ymin=s[1]*(y+o)+s[3]*(f+r)+s[5],t.xmax=s[0]*(a+o)+s[2]*(p+r)+s[4],t.ymax=s[1]*(a+o)+s[3]*(p+r)+s[5]}return t}if(m)b(t,o*i,-r*i);else{const x=j(t),s=t.type==="polyline"?t.paths:t.rings,y=e.state.transform,f=e.state.inverseTransform;for(let a=0;a<x.length;a++){const p=x[a];for(let v=0;v<p.length;v++){const c=p[v],u=y[0]*c[0]+y[2]*c[1]+y[4],h=y[1]*c[0]+y[3]*c[1]+y[5],M=f[0]*(u+o)+f[2]*(h+r)+f[4],g=f[1]*(u+o)+f[3]*(h+r)+f[5];p[v]=G(c,M,g)}}"paths"in t?t.paths=s:t.rings=s}return t}function Z(n,o,r,e){if(n.type==="point"){const{x:c,y:u}=n,h=e?e[0]:c,M=e?e[1]:u,g=n.clone(),T=(c-h)*o+h,l=(u-M)*r+M;return g.x=T,g.y=l,g}if(n.type==="multipoint"){const c=j(n),u=B(),[h,M,g,T]=C(u,[c]),l=e?e[0]:(h+g)/2,q=e?e[1]:(T+M)/2,d=n.clone(),k=d.points;for(let I=0;I<k.length;I++){const w=k[I],[E,F]=w,H=(E-l)*o+l,J=(F-q)*r+q;k[I]=G(w,H,J)}return d}if(n.type==="extent"){const{xmin:c,xmax:u,ymin:h,ymax:M}=n,g=e?e[0]:(c+u)/2,T=e?e[1]:(M+h)/2,l=n.clone();if(l.xmin=(c-g)*o+g,l.ymax=(M-T)*r+T,l.xmax=(u-g)*o+g,l.ymin=(h-T)*r+T,l.xmin>l.xmax){const q=l.xmin,d=l.xmax;l.xmin=d,l.xmax=q}if(l.ymin>l.ymax){const q=l.ymin,d=l.ymax;l.ymin=d,l.ymax=q}return l}const m=j(n),t=B(),[i,x,s,y]=C(t,m),f=e?e[0]:(i+s)/2,a=e?e[1]:(y+x)/2,p=n.clone(),v=p.type==="polyline"?p.paths:p.rings;for(let c=0;c<m.length;c++){const u=m[c];for(let h=0;h<u.length;h++){const M=u[h],[g,T]=M,l=(g-f)*o+f,q=(T-a)*r+a;v[c][h]=G(M,l,q)}}return"paths"in p?p.paths=v:p.rings=v,p}function z(n,o,r,e,m,t){const i=Math.sqrt((r-n)*(r-n)+(e-o)*(e-o));return Math.sqrt((m-n)*(m-n)+(t-o)*(t-o))/i}function A(n,o,r,e=!1){const m=Math.atan2(o.y-r.y,o.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x),t=Math.atan2(Math.sin(m),Math.cos(m));return e?t:K(t)}function D(n,o,r,e){return G(n,n[0]+o,n[1]+r,n[2]!=null&&e!=null?n[2]+e:void 0)}function G(n,o,r,e){const m=[o,r];return n.length>2&&m.push(n[2]),n.length>3&&m.push(n[3]),m}export{N as J,Z as K,z as L,A as N};
