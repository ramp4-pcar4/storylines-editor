const O=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],N=["آ","أ","إ","ا"],X=["ﻵ","ﻷ","ﻹ","ﻻ"],uu=["ﻶ","ﻸ","ﻺ","ﻼ"],j=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],tu=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],ru=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],Fu=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],eu=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],W=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],Eu=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Z=["ء","ف"],nu=["غ","ي"],iu=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ou=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,n=1,a=2,l=3,u=4,D=5,I=6,t=7,d=8,U=9,m=10,T=11,F=12,fu=13,Au=14,su=15,au=16,Tu=17,s=18,hu=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],R=100,Bu=[R+0,r,r,r,r,R+1,R+2,R+3,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,R+4,u,u,u,r,u,r,u,r,u,u,u,r,r,u,u,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,r,r,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,R+5,t,t,R+6,R+7],cu=[[s,s,s,s,s,s,s,s,s,I,D,I,d,D,s,s,s,s,s,s,s,s,s,s,s,s,s,s,D,D,D,I,d,u,u,T,T,T,u,u,u,u,u,m,U,m,U,U,a,a,a,a,a,a,a,a,a,a,U,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,s,s,s,s,s,s,D,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,U,u,T,T,T,T,u,u,u,u,r,u,u,s,u,u,T,T,a,a,u,r,u,u,u,a,r,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,n,F,n,F,F,n,F,F,n,F,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,u,u,u,u,u,n,n,n,n,n,u,u,u,u,u,u,u,u,u,u,u],[l,l,l,l,u,u,u,u,t,T,T,t,U,t,u,u,F,F,F,F,F,F,F,F,F,F,F,t,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,l,l,l,l,l,l,l,l,l,l,T,l,l,t,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,l,u,F,F,F,F,F,F,t,t,F,F,u,F,F,F,F,t,t,a,a,a,a,a,a,a,a,a,a,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,F,F,F,F,F,F,F,F,F,n,n,u,u,u,u,n,u,u,u,u,u],[d,d,d,d,d,d,d,d,d,d,d,s,s,s,r,n,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,d,D,fu,Au,su,au,Tu,U,T,T,T,T,T,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,d,s,s,s,s,s,u,u,u,u,u,s,s,s,s,s,s,a,r,u,u,a,a,a,a,a,a,m,m,u,u,u,r,a,a,a,a,a,a,a,a,a,a,m,m,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u],[r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,u,u,u,u,u,n,F,n,n,n,n,n,n,n,n,n,n,m,n,n,n,n,n,n,n,n,n,n,n,n,n,u,n,n,n,n,n,u,n,u,n,n,u,n,n,u,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,u,U,u,u,U,u,u,u,u,u,u,u,u,u,T,u,u,m,m,u,u,u,u,u,T,T,u,u,u,u,u,t,t,t,t,t,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,s],[u,u,u,T,T,T,u,u,u,u,u,m,U,m,U,U,a,a,a,a,a,a,a,a,a,a,U,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,u,u,u,T,T,u,u,u,T,T,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u]];class Pu{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,o){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Vu(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,o))return e;i=this.inputFormat,o=this.outputFormat;let f=e;const A=Ou,B=G(i.charAt(1)),h=G(o.charAt(1)),c=(i.charAt(0)==="I"?"L":i.charAt(0))+B,L=(o.charAt(0)==="I"?"L":o.charAt(0))+h,C=i.charAt(2)+o.charAt(2);A.defInFormat=c,A.defOutFormat=L,A.defSwap=C;const p=v(e,c,L,C,A);let S=!1;return o.charAt(1)==="R"?S=!0:o.charAt(1)!=="C"&&o.charAt(1)!=="D"||(S=this.checkContextual(p)==="rtl"),this.sourceToTarget=g,this.targetToSource=xu(this.sourceToTarget),P=this.targetToSource,f=i.charAt(3)===o.charAt(3)?p:o.charAt(3)==="S"?lu(S,p):Uu(p,S,!0),this.sourceToTarget=g,this.targetToSource=P,this.levels=y,f}_inputFormatSetter(e){if(!H.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!H.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=k(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return ku.test(e)}}function v(E,e,i,o,f){const A=Lu(E,{inFormat:e,outFormat:i,swap:o},f);if(A.inFormat===A.outFormat)return E;e=A.inFormat,i=A.outFormat,o=A.swap;const B=e.slice(0,1),h=e.slice(1,4),c=i.slice(0,1),L=i.slice(1,4);if(f.inFormat=e,f.outFormat=i,f.swap=o,B==="L"&&i==="VLTR"){if(h==="LTR")return f.dir=w,_(E,f);if(h==="RTL")return f.dir=V,_(E,f)}if(B==="V"&&c==="V")return f.dir=h==="RTL"?V:w,M(E,f);if(B==="L"&&i==="VRTL")return h==="LTR"?(f.dir=w,E=_(E,f)):(f.dir=V,E=_(E,f)),M(E);if(e==="VLTR"&&i==="LLTR")return f.dir=w,_(E,f);if(B==="V"&&c==="L"&&h!==L)return E=M(E),h==="RTL"?v(E,"LLTR","VLTR",o,f):v(E,"LRTL","VRTL",o,f);if(e==="VRTL"&&i==="LRTL")return v(E,"LRTL","VRTL",o,f);if(B==="L"&&c==="L"){const C=f.swap;return f.swap=C.slice(0,1)+"N",h==="RTL"?(f.dir=V,E=_(E,f),f.swap="N"+C.slice(1,3),f.dir=w,E=_(E,f)):(f.dir=w,E=_(E,f),f.swap="N"+C.slice(1,3),E=v(E,"VLTR","LRTL",f.swap,f)),E}return E}function Lu(E,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const o=e.inFormat.slice(0,1),f=e.outFormat.slice(0,1);let A,B=e.inFormat.slice(1,4),h=e.outFormat.slice(1,4);return B.charAt(0)==="C"&&(A=k(E),B=A==="ltr"||A==="rtl"?A.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=o+B),h.charAt(0)==="C"&&(A=k(E),A==="rtl"?h="RTL":A==="ltr"?(A=du(E),h=A.toUpperCase()):h=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=f+h),e}function lu(E,e,i){if(e.length===0)return"";E===void 0&&(E=!0);const o=(e=String(e)).split("");let f=0,A=1,B=o.length;E||(f=o.length-1,A=-1,B=1);const h=Cu(o,f,A,B);let c="";for(let L=0;L<o.length;L++)Du(h,h.length,L)>-1?(Q(P,L,!E,-1),g.splice(L,1)):c+=o[L];return c}function Cu(E,e,i,o,f){let A=0;const B=[];let h=0;for(let c=e;c*i<o;c+=i)if(K(E[c])||x(E[c])){if(E[c]==="ل"&&_u(E,c+i,i,o)){E[c]=vu(E[c+i],A===0?X:uu),c+=i,Nu(E,c,i,o),B[h]=c,h++,A=0;continue}const L=E[c];A===1?E[c]=$(E,c+i,i,o)?wu(E[c]):z(E[c],ru):$(E,c+i,i,o)===!0?E[c]=z(E[c],eu):E[c]=z(E[c],tu),x(L)||(A=1),bu(L)===!0&&(A=0)}else A=0;return B}function k(E){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(E);return e?e[0]<="z"?"ltr":"rtl":""}function du(E){const e=E.split("");return e.reverse(),k(e.join(""))}function Uu(E,e,i){if(E.length===0)return"";e===void 0&&(e=!0);let o="";const f=(E=String(E)).split("");for(let A=0;A<E.length;A++){let B=!1;if(f[A]>="ﹰ"&&f[A]<"\uFEFF"){const h=E.charCodeAt(A);f[A]>="ﻵ"&&f[A]<="ﻼ"?(e?(A>0&&i&&f[A-1]===" "?o=o.slice(0,-1)+"ل":(o+="ل",B=!0),o+=N[(h-65269)/2]):(o+=N[(h-65269)/2],o+="ل",A+1<E.length&&i&&f[A+1]===" "?A++:B=!0),B&&(Q(P,A,!0,1),g.splice(A,0,g[A]))):o+=Eu[h-65136]}else o+=f[A]}return o}function _(E,e){const i=E.split(""),o=[];return J(i,o,e),mu(i,o,e),q(2,i,o,e),q(1,i,o,e),y=o,i.join("")}function J(E,e,i){const o=E.length,f=i.dir?ou:iu;let A=0,B=-1;const h=[],c=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let L=0;L<o;L++)h[L]=Ru(E[L]);for(let L=0;L<o;L++){const C=A,p=pu(E,h,c,L,i);c[L]=p,A=f[C][p];const S=240&A;A&=15;const Y=f[A][Iu];if(e[L]=Y,S>0)if(S===16){for(let b=B;b<L;b++)e[b]=1;B=-1}else B=-1;if(f[A][ju])B===-1&&(B=L);else if(B>-1){for(let b=B;b<L;b++)e[b]=Y;B=-1}h[L]===D&&(e[L]=0),i.hiLevel|=Y}i.hasUbatS&&gu(h,e,o,i)}function gu(E,e,i,o){for(let f=0;f<i;f++)if(E[f]===I){e[f]=o.dir;for(let A=f-1;A>=0&&E[A]===d;A--)e[A]=o.dir}}function mu(E,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let o=0;o<E.length;o++)e[o]===1&&(E[o]=Su(E[o]))}function Ru(E){const e=E.charCodeAt(0),i=Bu[e>>8];return i<R?i:cu[i-R][255&e]}function M(E,e){const i=E.split("");if(e){const o=[];J(i,o,e),y=o}return i.reverse(),g.reverse(),i.join("")}function Du(E,e,i){for(let o=0;o<e;o++)if(E[o]===i)return o;return-1}function K(E){for(let e=0;e<Z.length;e++)if(E>=Z[e]&&E<=nu[e])return!0;return!1}function $(E,e,i,o){for(;e*i<o&&x(E[e]);)e+=i;return!!(e*i<o&&K(E[e]))}function _u(E,e,i,o){for(;e*i<o&&x(E[e]);)e+=i;let f=" ";if(!(e*i<o))return!1;f=E[e];for(let A=0;A<N.length;A++)if(N[A]===f)return!0;return!1}function q(E,e,i,o){if(o.hiLevel<E)return;if(E===1&&o.dir===V&&!o.hasUbatB)return e.reverse(),void g.reverse();const f=e.length;let A,B,h,c,L,C=0;for(;C<f;){if(i[C]>=E){for(A=C+1;A<f&&i[A]>=E;)A++;for(B=C,h=A-1;B<h;B++,h--)c=e[B],e[B]=e[h],e[h]=c,L=g[B],g[B]=g[h],g[h]=L;C=A}C++}}function pu(E,e,i,o,f){const A=e[o];return{UBAT_L:()=>(f.lastArabic=!1,r),UBAT_R:()=>(f.lastArabic=!1,n),UBAT_ON:()=>u,UBAT_AN:()=>l,UBAT_EN:()=>f.lastArabic?l:a,UBAT_AL:()=>(f.lastArabic=!0,f.hasUbatAl=!0,n),UBAT_WS:()=>u,UBAT_CS:()=>{let B,h;return o<1||o+1>=e.length||(B=i[o-1])!==a&&B!==l||(h=e[o+1])!==a&&h!==l?u:(f.lastArabic&&(h=l),h===B?h:u)},UBAT_ES:()=>(o>0?i[o-1]:D)===a&&o+1<e.length&&e[o+1]===a?a:u,UBAT_ET:()=>{if(o>0&&i[o-1]===a)return a;if(f.lastArabic)return u;let B=o+1;const h=e.length;for(;B<h&&e[B]===T;)B++;return B<h&&e[B]===a?a:u},UBAT_NSM:()=>{if(f.inFormat==="VLTR"){const B=e.length;let h=o+1;for(;h<B&&e[h]===F;)h++;if(h<B){const c=E[o].charCodeAt(0),L=c>=1425&&c<=2303||c===64286,C=e[h];if(L&&(C===n||C===t))return n}}return o<1||e[o-1]===D?u:i[o-1]},UBAT_B:()=>(f.lastArabic=!0,f.hasUbatB=!0,f.dir),UBAT_S:()=>(f.hasUbatS=!0,u),UBAT_LRE:()=>(f.lastArabic=!1,u),UBAT_RLE:()=>(f.lastArabic=!1,u),UBAT_LRO:()=>(f.lastArabic=!1,u),UBAT_RLO:()=>(f.lastArabic=!1,u),UBAT_PDF:()=>(f.lastArabic=!1,u),UBAT_BN:()=>u}[hu[A]]()}function Su(E){let e,i=0,o=O.length-1;for(;i<=o;)if(e=Math.floor((i+o)/2),E<O[e][0])o=e-1;else{if(!(E>O[e][0]))return O[e][1];i=e+1}return E}function bu(E){for(let e=0;e<W.length;e++)if(W[e]===E)return!0;return!1}function wu(E){for(let e=0;e<j.length;e++)if(E===j[e])return Fu[e];return E}function z(E,e){for(let i=0;i<j.length;i++)if(E===j[i])return e[i];return E}function x(E){return E>="ً"&&E<="ٕ"}function G(E){return E==="L"?"LTR":E==="R"?"RTL":E==="C"?"CLR":E==="D"?"CRL":""}function Nu(E,e,i,o){for(;e*i<o&&x(E[e]);)e+=i;return e*i<o&&(E[e]=" ",!0)}function vu(E,e){for(let i=0;i<N.length;i++)if(E===N[i])return e[i];return E}function Vu(E,e,i){g=[],y=[];for(let o=0;o<i;o++)E[o]=o,e[o]=o,g[o]=o}function xu(E){const e=new Array(E.length);for(let i=0;i<E.length;i++)e[E[i]]=i;return e}function Q(E,e,i,o){for(let f=0;f<E.length;f++)(E[f]>e||!i&&E[f]===e)&&(E[f]+=o)}let g=[],P=[],y=[];const Ou={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Iu=5,ju=6,w=0,V=1,H=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,ku=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Pu as d};
