import{im as h,io as S}from"./main-D8UjLOIQ.js";import{G,V as E,Z as y,s as P,B as T}from"./Point2D-CaHJVGk1-DPGpS6fb.js";import{c as v}from"./OperatorShapePreservingLength-CqNxsr-k-DyUgyfMV.js";import{H as q,K as w,b as B,m as C,A as D,T as I,q as X,Z as L,C as Y,D as b}from"./ProjectionTransformation-DQ4GElxa-CsEvA0Qr.js";import"./Envelope2D-DlBzXkgv-BnYfKOnq.js";import"./Transformation2D-CXWnDKXs-CSiy3rK5.js";import"./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js";import"./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js";class j{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,m){return!1}canAccelerateGeometry(t){return!1}execute(t,r,m,s){if(m===4)return new v().execute(t,r,s);if(r.getCoordinateSystemType()===0&&G(""),E(t),t.isEmpty()||t.getDimension()<1)return 0;const a=r.getGCS(),o=q();a.querySpheroidData(o);const c=o.majorSemiAxis,l=o.e2,u=a.getUnit().getUnitToBaseFactor();let e;const n=t.getGeometryType();if(n===y.enumPolygon?e=t.getBoundary():n===y.enumEnvelope?e=w(t):P(n)?(e=new B({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new C().execute(e,0,r.getTolerance(0),0,s)),a!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=D(e,r),n===y.enumPolyline&&e===t&&(e=t.clone());const x=new T;r.getPannableExtent().queryIntervalX(x);for(let g=0,d=e.getPointCount();g<d;g++){const p=e.getXY(g);p.x=I(p.x,x),e.setXY(g,p)}}const f=e.createInstance();e=L(i,e,f,s)?f:new X().execute(e,i,s)}return this._ExecuteMultiPathGeodeticLength(e,m,c,l,u)}_ExecuteMultiPathGeodeticLength(t,r,m,s,a){const o={stack:[],error:void 0,hasError:!1};try{const c=h(o,new Y,!1);let l=0;const u=t.querySegmentIterator();for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment(),n=e.getStartXY(),i=e.getEndXY();n.scale(a),i.scale(a),b.geodeticDistance(m,s,n.x,n.y,i.x,i.y,c,null,null,r),l+=c.val}return l}catch(c){o.error=c,o.hasError=!0}finally{S(o)}}}export{j as OperatorGeodeticLength};
