import{v as e,S as i,w as a,i as H,q as pt,F as Re,aL as Ue,aU as u,n as l,eg as lt,a3 as at,eh as ut,bB as z,b as te,bG as dt,ei as De,ej as yt,ek as ct,aS as $,X as F,aV as Me,el as mt,em as ht,bx as ft,bw as vt,da as xt,d$ as Ke,en as Ye,eo as wt,ep as Ne,eq as Ve,er as ke}from"./main-D8UjLOIQ.js";import{a as Xe,t as gt}from"./Field-BIQ-quF4-BPjMRpni.js";import{o as bt}from"./layerContainerType-ChWdCT09-G5sdAsSy.js";import{i as jt}from"./HeightModelInfo-C4voFc4k-BMChpcj0.js";import{n as It,d as Et,p as St,i as Ft}from"./OperationalLayer-CbXUnTH0-ChxAUDYz.js";import{C as ue}from"./timeZoneUtils-d5p0Jda1-BeP90iup.js";import{I as Ot,L as Ae,Y as Mt,W as ie,G as Tt,k as Rt,V as Ut}from"./labelingInfo-DuLk-IW_-B3e5aVmf.js";import{e as Dt}from"./LayerFloorInfo-CkeH-P4_-Dfjm_5o-.js";import{e as Nt}from"./Relationship-B6fQjk3--1Gx3gzqD.js";import{F as Vt}from"./serviceCapabilitiesUtils-BerH-9mt-lcpLrWNX.js";import{o as kt,f as At}from"./portalItemUtils-BfWDJg-S-BOOGT6Io.js";var de;let R=de=class extends F{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new de({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([i({type:String,json:{write:!0}})],R.prototype,"expression",void 0),e([i({type:String,json:{write:!0}})],R.prototype,"name",void 0),e([i({type:["boolean","date","number","string"],json:{write:!0}})],R.prototype,"returnType",void 0),e([i({type:String,json:{write:!0}})],R.prototype,"title",void 0),R=de=e([l("esri.form.ExpressionInfo")],R);const Bt=R;let U=class extends F{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e([i({type:String,json:{write:!0}})],U.prototype,"description",void 0),e([i({type:String,json:{write:!0}})],U.prototype,"label",void 0),e([i()],U.prototype,"type",void 0),e([i({type:String,json:{write:!0}})],U.prototype,"visibilityExpression",void 0),U=e([l("esri.form.elements.Element")],U);const M=U;let Z=class extends $.ClonableMixin(F){constructor(t){super(t),this.type=null}};e([i()],Z.prototype,"type",void 0),Z=e([l("esri.form.elements.inputs.attachments.Input")],Z);const T=Z,ee=["any","capture","upload"];let N=class extends T{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};e([i({type:["audio"],readOnly:!0,json:{write:!0}})],N.prototype,"type",void 0),e([i({type:ee,json:{write:!0}})],N.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],N.prototype,"maxDuration",void 0),N=e([l("esri.form.elements.inputs.attachments.AudioInput")],N);const Be=N;let W=class extends T{constructor(t){super(t),this.type="document",this.maxFileSize=null}};e([i({type:["document"],readOnly:!0,json:{write:!0}})],W.prototype,"type",void 0),e([i({type:Number,json:{write:!0}})],W.prototype,"maxFileSize",void 0),W=e([l("esri.form.elements.inputs.attachments.DocumentInput")],W);const Ce=W;let V=class extends T{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};e([i({type:["image"],readOnly:!0,json:{write:!0}})],V.prototype,"type",void 0),e([i({type:ee,json:{write:!0}})],V.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],V.prototype,"maxImageSize",void 0),V=e([l("esri.form.elements.inputs.attachments.ImageInput")],V);const Le=V;let P=class extends T{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};e([i({type:["signature"],readOnly:!0,json:{write:!0}})],P.prototype,"type",void 0),e([i({type:ee,json:{write:!0}})],P.prototype,"inputMethod",void 0),P=e([l("esri.form.elements.inputs.attachments.SignatureInput")],P);const qe=P;let k=class extends T{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};e([i({type:["video"],readOnly:!0,json:{write:!0}})],k.prototype,"type",void 0),e([i({type:ee,json:{write:!0}})],k.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],k.prototype,"maxDuration",void 0),k=e([l("esri.form.elements.inputs.attachments.VideoInput")],k);const Ge=k;function et(t){return{nestableTypes:{base:T,key:"type",typeMap:{audio:Be,document:Ce,image:Le,signature:qe,video:Ge}},allTypes:{base:T,key:"type",typeMap:{attachment:t,audio:Be,document:Ce,image:Le,signature:qe,video:Ge}}}}function Ct(t,r,n){return t?t.map(s=>Ke(r.nestableTypes,s)):null}function Lt(t,r,n){if(!t)return null;const s=r.nestableTypes.typeMap;return t.filter(o=>s[o.type]).map(o=>s[o.type].fromJSON(o))}function qt(t,r,n){if(!t)return null;const s=r.nestableTypes.typeMap;return t.filter(o=>s[o.type]).map(o=>o.toJSON())}let g=class extends T{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return Ct(t,re)}readInputs(t,r){return Lt(r.inputTypes,re)}writeInputs(t,r){r.inputTypes=qt(t,re)}};e([i({type:["attachment"],readOnly:!0,json:{write:!0}})],g.prototype,"type",void 0),e([i({type:["any","exact","exactOrNone"],json:{write:!0}})],g.prototype,"attachmentAssociationType",void 0),e([i({json:{write:{isRequired:!0}}})],g.prototype,"inputTypes",void 0),e([Me("inputTypes")],g.prototype,"castInputs",null),e([a("inputTypes")],g.prototype,"readInputs",null),e([u("inputTypes")],g.prototype,"writeInputs",null),g=e([l("esri.form.elements.inputs.attachments.AttachmentInput")],g);const re=et(g),Gt=g;var ye;const Ht=et(Gt);let c=ye=class extends M{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new ye({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};e([i({type:Boolean,json:{write:!0}})],c.prototype,"allowUserRename",void 0),e([i({type:String,json:{write:{isRequired:!0}}})],c.prototype,"attachmentKeyword",void 0),e([i({type:Boolean,json:{write:!0}})],c.prototype,"displayFilename",void 0),e([i({type:String,json:{write:!0}})],c.prototype,"editableExpression",void 0),e([i({type:String,json:{write:!0}})],c.prototype,"filenameExpression",void 0),e([i({types:Ht.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],c.prototype,"input",void 0),e([i({type:Number,json:{write:!0}})],c.prototype,"maxAttachmentCount",void 0),e([i({type:Number,json:{write:!0}})],c.prototype,"minAttachmentCount",void 0),e([i({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0),e([i({type:Boolean,json:{write:!0}})],c.prototype,"useOriginalFilename",void 0),c=ye=e([l("esri.form.elements.AttachmentElement")],c);const He=c;let J=class extends F{constructor(t){super(t),this.type=null}};e([i()],J.prototype,"type",void 0),J=e([l("esri.form.elements.inputs.Input")],J);const O=J;let Q=class extends O{constructor(t){super(t),this.maxLength=null,this.minLength=0}};e([i({type:Number,json:{write:!0}})],Q.prototype,"maxLength",void 0),e([i({type:Number,json:{write:!0}})],Q.prototype,"minLength",void 0),Q=e([l("esri.form.elements.inputs.TextInput")],Q);const Te=Q;var ce;let K=ce=class extends Te{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new ce({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["barcode-scanner"],json:{read:!1,write:!0}})],K.prototype,"type",void 0),K=ce=e([l("esri.form.elements.inputs.BarcodeScannerInput")],K);const $t=K;var me;let A=me=class extends O{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new me({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e([i({type:String,json:{write:!0}})],A.prototype,"noValueOptionLabel",void 0),e([i({type:Boolean,json:{write:!0}})],A.prototype,"showNoValueOption",void 0),e([i({type:["combo-box"],json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=me=e([l("esri.form.elements.inputs.ComboBoxInput")],A);const Wt=A;var he;function $e(t){return t??null}function We(t){return t??null}let w=he=class extends O{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,r){return $e(r.max)}writeMax(t,r){r.max=We(t)}readMin(t,r){return $e(r.min)}writeMin(t,r){r.min=We(t)}clone(){return new he({max:this.max,min:this.min})}};e([i({type:String,json:{type:String,write:!0}})],w.prototype,"max",void 0),e([a("max")],w.prototype,"readMax",null),e([u("max")],w.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],w.prototype,"min",void 0),e([a("min")],w.prototype,"readMin",null),e([u("min")],w.prototype,"writeMin",null),e([i({type:["date-picker"],json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=he=e([l("esri.form.elements.inputs.DatePickerInput")],w);const Pt=w;var fe;function oe(t){return t??null}function se(t){return t??null}let d=fe=class extends O{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,r){return oe(r.max)}writeMax(t,r){r.max=se(t)}readMin(t,r){return oe(r.min)}writeMin(t,r){r.min=se(t)}readTimeResolution(t,r){return oe(r.timeResolution)}writeTimeResolution(t,r){r.timeResolution=se(t)}clone(){return new fe({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([i({type:Boolean,json:{write:!0}})],d.prototype,"includeTimeOffset",void 0),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e([a("max")],d.prototype,"readMax",null),e([u("max")],d.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e([a("min")],d.prototype,"readMin",null),e([u("min")],d.prototype,"writeMin",null),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e([a("timeResolution")],d.prototype,"readTimeResolution",null),e([u("timeResolution")],d.prototype,"writeTimeResolution",null),e([i({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=fe=e([l("esri.form.elements.inputs.DateTimeOffsetPickerInput")],d);const Qt=d;var ve;function Pe(t){return t!=null?new Date(t):null}function Qe(t){return t?t.getTime():null}let f=ve=class extends O{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,r){return Pe(r.max)}writeMax(t,r){r.max=Qe(t)}readMin(t,r){return Pe(r.min)}writeMin(t,r){r.min=Qe(t)}clone(){return new ve({includeTime:this.includeTime,max:this.max,min:this.min})}};e([i({type:Boolean,json:{write:!0}})],f.prototype,"includeTime",void 0),e([i({type:Date,json:{type:Number,write:!0}})],f.prototype,"max",void 0),e([a("max")],f.prototype,"readMax",null),e([u("max")],f.prototype,"writeMax",null),e([i({type:Date,json:{type:Number,write:!0}})],f.prototype,"min",void 0),e([a("min")],f.prototype,"readMin",null),e([u("min")],f.prototype,"writeMin",null),e([i({type:["datetime-picker"],json:{read:!1,write:!0}})],f.prototype,"type",void 0),f=ve=e([l("esri.form.elements.inputs.DateTimePickerInput")],f);const _t=f;var xe;let B=xe=class extends O{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new xe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e([i({type:String,json:{write:!0}})],B.prototype,"noValueOptionLabel",void 0),e([i({type:Boolean,json:{write:!0}})],B.prototype,"showNoValueOption",void 0),e([i({type:["radio-buttons"],json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=xe=e([l("esri.form.elements.inputs.RadioButtonsInput")],B);const zt=B;var we;let C=we=class extends O{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new we({offValue:this.offValue,onValue:this.onValue})}};e([i({type:[String,Number],json:{write:!0}})],C.prototype,"offValue",void 0),e([i({type:[String,Number],json:{write:!0}})],C.prototype,"onValue",void 0),e([i({type:["switch"],json:{read:!1,write:!0}})],C.prototype,"type",void 0),C=we=e([l("esri.form.elements.inputs.SwitchInput")],C);const Zt=C;var ge;let Y=ge=class extends Te{constructor(t){super(t),this.type="text-area"}clone(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["text-area"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0),Y=ge=e([l("esri.form.elements.inputs.TextAreaInput")],Y);const Jt=Y;var be;let X=be=class extends Te{constructor(t){super(t),this.type="text-box"}clone(){return new be({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["text-box"],json:{read:!1,write:!0}})],X.prototype,"type",void 0),X=be=e([l("esri.form.elements.inputs.TextBoxInput")],X);const Kt=X;var je;function ne(t){return t??null}function pe(t){return t??null}let m=je=class extends O{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,r){return ne(r.max)}writeMax(t,r){r.max=pe(t)}readMin(t,r){return ne(r.min)}writeMin(t,r){r.min=pe(t)}readTimeResolution(t,r){return ne(r.timeResolution)}writeTimeResolution(t,r){r.timeResolution=pe(t)}clone(){return new je({max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([i({type:String,json:{type:String,write:!0}})],m.prototype,"max",void 0),e([a("max")],m.prototype,"readMax",null),e([u("max")],m.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],m.prototype,"min",void 0),e([a("min")],m.prototype,"readMin",null),e([u("min")],m.prototype,"writeMin",null),e([i({type:String,json:{type:String,write:!0}})],m.prototype,"timeResolution",void 0),e([a("timeResolution")],m.prototype,"readTimeResolution",null),e([u("timeResolution")],m.prototype,"writeTimeResolution",null),e([i({type:["time-picker"],json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=je=e([l("esri.form.elements.inputs.TimePickerInput")],m);const Yt=m,Xt={base:O,key:"type",typeMap:{"barcode-scanner":$t,"combo-box":Wt,"date-picker":Pt,"datetime-picker":_t,"datetimeoffset-picker":Qt,"radio-buttons":zt,switch:Zt,"text-area":Jt,"text-box":Kt,"time-picker":Yt}};var Ie;let h=Ie=class extends M{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Ie({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e([i({types:gt,json:{read:{reader:Xe},write:!0}})],h.prototype,"domain",void 0),e([i({type:Boolean,json:{write:!0}})],h.prototype,"editable",void 0),e([i({type:String,json:{write:!0}})],h.prototype,"editableExpression",void 0),e([i({type:String,json:{write:!0}})],h.prototype,"fieldName",void 0),e([i({type:String,json:{write:!0}})],h.prototype,"hint",void 0),e([i({types:Xt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],h.prototype,"input",void 0),e([i({type:String,json:{write:!0}})],h.prototype,"requiredExpression",void 0),e([i({type:String,json:{read:!1,write:!0}})],h.prototype,"type",void 0),e([i({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),h=Ie=e([l("esri.form.elements.FieldElement")],h);const _e=h;var Ee;let I=Ee=class extends M{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ee({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:H(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e([i({type:Number,json:{write:!0}})],I.prototype,"displayCount",void 0),e([i({type:["list"],json:{write:!0}})],I.prototype,"displayType",void 0),e([i({type:String,json:{write:!0}})],I.prototype,"editableExpression",void 0),e([i({type:[mt],json:{write:!0}})],I.prototype,"orderByFields",void 0),e([i({type:Number,json:{write:!0}})],I.prototype,"relationshipId",void 0),e([i({type:["relationship"],json:{read:!1,write:!0}})],I.prototype,"type",void 0),I=Ee=e([l("esri.form.elements.RelationshipElement")],I);const ze=I;var Se;let L=Se=class extends M{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Se({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};e([i({type:String,json:{write:!0}})],L.prototype,"text",void 0),e([i({type:String,json:{write:!0}})],L.prototype,"textFormat",void 0),e([i({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=Se=e([l("esri.form.elements.TextElement")],L);const Ze=L;let q=class extends $.ClonableMixin(M){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};e([i({type:[ht],json:{write:{isRequired:!0}}})],q.prototype,"associationTypes",void 0),e([i({type:String,json:{write:!0}})],q.prototype,"editableExpression",void 0),e([i({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],q.prototype,"type",void 0),q=e([l("esri.form.elements.UtilityNetworkAssociationsElement")],q);const Je=q,ei=t=>t.type==="field",ti=t=>t.type==="group",ii=t=>t.type==="text";function tt(t){return{typesWithGroup:{base:M,key:"type",typeMap:{attachment:He,field:_e,group:t,relationship:ze,text:Ze,utilityNetworkAssociations:Je}},typesWithoutGroup:{base:M,key:"type",typeMap:{attachment:He,field:_e,relationship:ze,text:Ze,utilityNetworkAssociations:Je}}}}function it(t,r,n=!0){if(!t)return null;const s=n?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return t.filter(o=>s[o.type]).map(o=>s[o.type].fromJSON(o))}function rt(t,r,n=!0){if(!t)return null;const s=n?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return t.filter(o=>s[o.type]).map(o=>o.toJSON())}function ot(t,r,n=!0){return t?t.map(s=>Ke(n?r.typesWithGroup:r.typesWithoutGroup,s)):null}var Fe;let b=Fe=class extends M{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return ot(t,le,!1)}readElements(t,r){return it(r.formElements,le,!1)}writeElements(t,r){r.formElements=rt(t,le,!1)}clone(){return new Fe({description:this.description,elements:H(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e([i({json:{write:!0}})],b.prototype,"elements",void 0),e([Me("elements")],b.prototype,"castElements",null),e([a("elements",["formElements"])],b.prototype,"readElements",null),e([u("elements")],b.prototype,"writeElements",null),e([i({type:["collapsed","expanded"],json:{write:!0}})],b.prototype,"initialState",void 0),e([i({type:String,json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=Fe=e([l("esri.form.elements.GroupElement")],b);const le=tt(b),ri=b;var Oe;const ae=tt(ri);let v=Oe=class extends F{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return ot(t,ae)}readElements(t,r){return it(r.formElements,ae)}writeElements(t,r){r.formElements=rt(t,ae)}clone(){return new Oe({description:this.description,expressionInfos:H(this.expressionInfos),elements:H(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,r){const n=new Set,{description:s,elements:o,expressionInfos:p,title:y}=this;if(_(n,t,s),_(n,t,y),!o)return[];const x=oi(o,p).map(D=>xt(n,t,D));await Promise.all(x);for(const D of o)st(n,{fieldsIndex:t,relationships:r},D);return Array.from(n).sort()}};function st(t,r,n){const{fieldsIndex:s}=r;if(!s||s.fields.length!==t.size)switch(_(t,s,n.label),_(t,s,n.description),n.type){case"field":Ne(t,s,n.fieldName);break;case"group":n.elements.forEach(o=>st(t,r,o));break;case"relationship":if(r.relationships){const o=r.relationships.find(p=>p.id===n.relationshipId);o&&Ne(t,s,o.keyField)}Ye(t,s,n.orderByFields?.map(o=>o.field));break;case"text":_(t,s,n.text)}}function oi(t,r){if(!r||r.length===0)return[];const n=nt(t),s=[];for(const o of r)n.has(o.name)&&s.push(o.expression);return s}function nt(t){const r=new Set;for(const n of t)if(Ve(r,n.visibilityExpression),!ii(n)){if(ti(n))ke(r,nt(n.elements));else if(Ve(r,n.editableExpression),ei(n)){const{requiredExpression:s,valueExpression:o}=n;ke(r,[s,o])}}return r}function _(t,r,n){Ye(t,r,wt(n))}e([i({type:String,json:{write:!0}})],v.prototype,"description",void 0),e([i({json:{write:!0}})],v.prototype,"elements",void 0),e([Me("elements")],v.prototype,"castElements",null),e([a("elements",["formElements"])],v.prototype,"readElements",null),e([u("elements")],v.prototype,"writeElements",null),e([i({type:[Bt],json:{write:!0}})],v.prototype,"expressionInfos",void 0),e([i({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"preserveFieldValuesWhenHidden",void 0),e([i({type:String,json:{write:!0}})],v.prototype,"title",void 0),v=Oe=e([l("esri.form.FormTemplate")],v);const fi=v;let E=class extends $.ClonableMixin(F){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([i()],E.prototype,"creatorField",void 0),e([i()],E.prototype,"creationDateField",void 0),e([i()],E.prototype,"editorField",void 0),e([i()],E.prototype,"editDateField",void 0),e([i()],E.prototype,"realm",void 0),e([i(ue("dateFieldsTimeReference",!0))],E.prototype,"timeZone",void 0),E=e([l("esri.layers.support.EditFieldsInfo")],E);let j=class extends $.ClonableMixin(F){constructor(t){super(t)}};e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"name",void 0),e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"fields",void 0),e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"isAscending",void 0),e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"indexType",void 0),e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"isUnique",void 0),e([i({constructOnly:!0,json:{write:!0}})],j.prototype,"description",void 0),j=e([l("esri.layers.support.FeatureIndex")],j);let G=class extends $.ClonableMixin(F){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([i({type:String,json:{read:{source:"shapeAreaFieldName"}}})],G.prototype,"shapeAreaField",void 0),e([i({type:String,json:{read:{source:"shapeLengthFieldName"}}})],G.prototype,"shapeLengthField",void 0),e([i({type:String,json:{read:t=>ft.read(t)||vt.read(t)}})],G.prototype,"units",void 0),G=e([l("esri.layers.support.GeometryFieldsInfo")],G);let S=class extends $.ClonableMixin(F){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const n of Object.keys(t))r[n]=Xe(t[n]);return r}writeDomains(t,r){if(!t)return;const n={};for(const s of Object.keys(t))t[s]&&(n[s]=t[s]?.toJSON());r.domains=n}};e([i({type:Number,json:{write:!0}})],S.prototype,"code",void 0),e([i({type:Object,json:{write:!0}})],S.prototype,"defaultValues",void 0),e([i({json:{write:!0}})],S.prototype,"domains",void 0),e([a("domains")],S.prototype,"readDomains",null),e([u("domains")],S.prototype,"writeDomains",null),e([i({type:String,json:{write:!0}})],S.prototype,"name",void 0),S=e([l("esri.layers.support.Subtype")],S);const vi=t=>{let r=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Re.ofType(j)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ue.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(s){return this.fieldsIndex.get(s)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:s}=this;if(s){const{query:p,operations:y,editing:x}=s;if(!p.supportsQueryByOthers||!p.supportsQueryByAnonymous||y.supportsEditing&&!(x.supportsUpdateByOthers&&x.supportsUpdateByAnonymous&&x.supportsDeleteByOthers&&x.supportsDeleteByAnonymous))return"load"}if(Ae(this.serviceDefinitionExpression)||Ae(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Mt(this))return"load";if(this.hasUpdateItemRestrictions)return s.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const o=this.editFieldsInfo;return(o?.creatorField||o?.editorField)&&s?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(s,o){return Vt(o,this.url)}readEditingInfo(s,o){const{editingInfo:p}=o;return p?{lastEditDate:p.lastEditDate!=null?new Date(p.lastEditDate):null}:null}get effectiveCapabilities(){const s=this.capabilities;if(!s)return null;const o=H(s),{operations:p,editing:y}=o;return ie(this)?(this.userHasUpdateItemPrivileges&&(p.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(p.supportsAdd=p.supportsDelete=p.supportsEditing=p.supportsQuery=p.supportsUpdate=y.supportsDeleteByOthers=y.supportsGeometryUpdate=y.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&p.supportsEditing&&(p.supportsAdd=p.supportsDelete=p.supportsUpdate=y.supportsGeometryUpdate=!0),o)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(s,o){return Tt(o)}get hasFullEditingRestrictions(){const s=this.capabilities;if(!s||ie(this))return!1;const{operations:o,editing:p}=s;return o.supportsEditing&&!(o.supportsAdd&&o.supportsDelete&&o.supportsUpdate&&p.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const s=this.capabilities;if(!s)return!1;const{operations:o,editing:p}=s;return ie(this)?!o.supportsQuery:!(o.supportsAdd&&o.supportsDelete&&o.supportsEditing&&o.supportsQuery&&o.supportsUpdate&&p.supportsDeleteByOthers&&p.supportsGeometryUpdate&&p.supportsUpdateByOthers)}readIsTableFromService(s,o){return o.type==="Table"}readMaxScale(s,o){return o.effectiveMaxScale||s||0}readMinScale(s,o){return o.effectiveMinScale||s||0}readObjectIdFieldFromService(s,o){return Rt(o)}readServiceDefinitionExpression(s,o){return o.definitionQuery||o.definitionExpression}readUniqueIdFields(s,o){return o.uniqueIdInfo?.OIDFieldContainsHashValue?o.uniqueIdInfo.fields:null}set url(s){if(s==null)return void this._set("url",s);const o=lt({layer:this,url:s,nonStandardUrlAllowed:!0,logger:at.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}writeUrl(s,o,p,y){ut(this,s,null,o,y)}readVersion(s,o){return Ut(o)}get isUrlHostModified(){const{loaded:s,url:o,_isUrlHostModified:p}=this;if(p)return!0;if(!s||!o||this.originIdOf("url")<z.USER)return!1;const y=this.sourceJSON?.preferredHost;if(!y||!te(o,`https://${y}`,!0))return!1;for(let x=z.USER-1;x>=z.PORTAL_ITEM;x--){const D=this.getAtOrigin("url",dt(x));if(D)return!te(o,D,!0)}return!1}applyPreferredHost(s){const{url:o,portalItem:p}=this;!o||De(p)}applyHostFromPortalItem(){const{url:s,portalItem:o}=this;if(!s||this.originIdOf("url")===z.USER||!o?.url||!De(o)||!kt(o,At.HOSTED_SERVICE)||te(s,o.url,!0)||!this._isUrlHostModificationEnabled)return;const p=yt(o.url);this._set("url",ct(s,p)),this._isUrlHostModified=!0}};return e([i({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),e([i({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),e([i({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),e([a("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),e([i(ue("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),e([i({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),e([i({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),e([i({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),e([i({readOnly:!0,type:E})],r.prototype,"editFieldsInfo",void 0),e([i({readOnly:!0})],r.prototype,"editingInfo",void 0),e([a("editingInfo")],r.prototype,"readEditingInfo",null),e([i({readOnly:!0})],r.prototype,"effectiveCapabilities",null),e([i()],r.prototype,"effectiveEditingEnabled",null),e([i((()=>{const n=H(It),s=n.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},n})())],r.prototype,"elevationInfo",void 0),e([i()],r.prototype,"fieldsIndex",void 0),e([i({type:Dt,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:bt}}})],r.prototype,"floorInfo",void 0),e([i({type:pt,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),e([i()],r.prototype,"gdbVersion",void 0),e([i({readOnly:!0,type:G,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),e([i({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Ot.read}}}})],r.prototype,"geometryType",void 0),e([i({type:String})],r.prototype,"globalIdField",void 0),e([a("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),e([i({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),e([i({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),e([i({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),e([i({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),e([i({readOnly:!0,type:jt})],r.prototype,"heightModelInfo",void 0),e([i({type:Date})],r.prototype,"historicMoment",void 0),e([i({type:Re.ofType(j),readOnly:!0})],r.prototype,"indexes",void 0),e([i({readOnly:!0})],r.prototype,"isTable",void 0),e([a("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),e([i({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),e([i(Et)],r.prototype,"maxScale",void 0),e([a("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),e([i(St)],r.prototype,"minScale",void 0),e([a("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),e([i({type:String})],r.prototype,"objectIdField",void 0),e([a("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),e([i(ue("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),e([i({type:[Nt],readOnly:!0})],r.prototype,"relationships",void 0),e([i({type:Boolean})],r.prototype,"returnM",void 0),e([i({type:Boolean})],r.prototype,"returnZ",void 0),e([i({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),e([i({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),e([a("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),e([i({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),e([i()],r.prototype,"sourceJSON",void 0),e([i({type:Ue,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),e([i({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),e([i({type:[S],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),e([i({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),e([i({type:[String],readOnly:!0})],r.prototype,"uniqueIdFields",void 0),e([a("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],r.prototype,"readUniqueIdFields",null),e([i(Ft)],r.prototype,"url",null),e([u("url")],r.prototype,"writeUrl",null),e([i({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),e([a("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),e([i({readOnly:!0})],r.prototype,"isUrlHostModified",null),r=e([l("esri.layers.mixins.FeatureLayerBase")],r),r};export{fi as n,vi as r};
