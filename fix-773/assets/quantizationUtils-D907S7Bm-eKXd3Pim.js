import"./main-D8UjLOIQ.js";function O(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function q(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function w(t){if(q(t))return t;const{originPosition:n,scale:r,translate:l}=t,s=r[0]??1,o=r[1]??1;return{originPosition:"lowerLeft",scale:[s,n==="lowerLeft"?o:-o,r[2]??1,r[3]??1],translate:[l[0]??0,l[1]??0,l[2]??0,l[3]??0]}}function p({scale:t,translate:n},r){return Math.round((r-n[0])/t[0])}function M({scale:t,translate:n},r){return Math.round((r-n[1])/t[1])}function m({scale:t,translate:n},r){return Math.round(((r??0)-n[2])/t[2])}function Z({scale:t,translate:n},r){return r?Math.round((r-n[3])/t[3]):0}function j(t,n){return t&&n?D:t&&!n?B:!t&&n?C:v}const v=(t,n)=>{const r=[];if(!n.length)return null;const l=n[0];let s=p(t,l[0]),o=M(t,l[1]);r.push([s,o]);for(let e=1;e<n.length;e++){const[u,i]=n[e],c=p(t,u),a=M(t,i);c===s&&a===o||r.push([c-s,a-o]),s=c,o=a}return r},B=(t,n)=>{const r=[];if(!n.length)return null;const l=n[0];let s=p(t,l[0]),o=M(t,l[1]),e=m(t,l[2]);r.push([s,o,e]);for(let u=1;u<n.length;u++){const[i,c,a]=n[u],h=p(t,i),f=M(t,c),g=m(t,a);h===s&&f===o&&g===e||r.push([h-s,f-o,g]),s=h,o=f,e=g}return r},C=(t,n)=>{const r=[];if(!n.length)return null;const l=n[0];let s=p(t,l[0]),o=M(t,l[1]),e=Z(t,l[2]);r.push([s,o,e]);for(let u=1;u<n.length;u++){const[i,c,a]=n[u],h=p(t,i),f=M(t,c),g=Z(t,a);h===s&&f===o&&g===e||r.push([h-s,f-o,g]),s=h,o=f,e=g}return r},D=(t,n)=>{const r=[];if(!n.length)return null;const l=n[0];let s=p(t,l[0]),o=M(t,l[1]),e=m(t,l[2]),u=Z(t,l[3]);r.push([s,o,e,u]);for(let i=1;i<n.length;i++){const[c,a,h,f]=n[i],g=p(t,c),x=M(t,a),A=m(t,h),d=Z(t,f);g===s&&x===o&&A===e&&d===u||r.push([g-s,x-o,A,d]),s=g,o=x,e=A,u=d}return r};function E(t,n,r,l){const s=[],o=j(r,l);for(let e=0;e<n.length;e++){const u=o(t,n[e]);u&&u.length>=3&&s.push(u)}return s.length?s:null}function G(t,n,r,l){const s=[],o=j(r,l);for(let e=0;e<n.length;e++){const u=o(t,n[e]);u&&u.length>=2&&s.push(u)}return s.length?s:null}function L({scale:t,translate:n},r){return r*t[0]+n[0]}function z({scale:t,translate:n},r){return r*t[1]+n[1]}function P({scale:t,translate:n},r){return(r??0)*t[2]+n[2]}function y({scale:t,translate:n},r){return r?r*t[3]+n[3]:0}function b(t,n){return t&&n?K:t&&!n?I:!t&&n?J:H}const H=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const l=n[0];let s=L(t,l[0]),o=z(t,l[1]);r[0]=[s,o];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<n.length;a++){const[h,f]=n[a];s+=i*h,o+=c*f,r[a]=[s,o]}return r},I=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const l=n[0];let s=L(t,l[0]),o=z(t,l[1]);r[0]=[s,o,P(t,l[2])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<n.length;a++){const[h,f,g]=n[a];s+=i*h,o+=c*f,r[a]=[s,o,P(t,g)]}return r},J=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const l=n[0];let s=L(t,l[0]),o=z(t,l[1]);r[0]=[s,o,y(t,l[2])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<n.length;a++){const[h,f,g]=n[a];s+=i*h,o+=c*f,r[a]=[s,o,y(t,g)]}return r},K=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const l=n[0];let s=L(t,l[0]),o=z(t,l[1]);r[0]=[s,o,P(t,l[2]),y(t,l[3])];const{scale:e,originPosition:u}=t,i=e[0],c=u==="lowerLeft"?e[1]:-e[1];for(let a=1;a<n.length;a++){const[h,f,g,x]=n[a];s+=i*h,o+=c*f,r[a]=[s,o,P(t,g),y(t,x)]}return r};function k(t,n,r){const l=new Array(r.length);for(let s=0;s<r.length;s++)l[s]=n(t,r[s]);return l}function Q(t,n,r){const l=w(t);return n.x=p(l,r.x),n.y=M(l,r.y),r.z!=null&&(n.z=m(l,r.z)),r.m!=null&&(n.m=Z(l,r.m)),n}function R(t,n,r){const l=E(w(t),r.rings,r.hasZ,r.hasM);return l?(n.rings=l,n.hasZ=r.hasZ??!1,n.hasM=r.hasM??!1,n):null}function S(t,n,r){const l=G(w(t),r.paths,r.hasZ,r.hasM);return l?(n.paths=l,n.hasZ=r.hasZ??!1,n.hasM=r.hasM??!1,n):null}function T(t,n,r,l=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const o=w(t);n.points=b(l,s)(o,r.points),n.hasZ=l,n.hasM=s}return n}function U(t,n,r,l=r?.z!=null,s=r?.m!=null){if(r==null)return n;const o=w(t);return n.x=L(o,r.x),n.y=z(o,r.y),l&&(n.z=P(o,r.z)),s&&(n.m=y(o,r.m)),n}function V(t,n,r,l=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const o=w(t);n.rings=k(o,b(l,s),r.rings),n.hasZ=l,n.hasM=s}return n}function F(t,n,r,l=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const o=w(t);n.paths=k(o,b(l,s),r.paths),n.hasZ=l,n.hasM=s}return n}export{O as C,M,Q as N,R as O,S as Q,T as R,U as S,V as T,F as V,p,w};
