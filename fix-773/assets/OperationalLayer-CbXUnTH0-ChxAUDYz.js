import{v as e,S as a,w as A,aU as b,bk as B,cX as V,n as u,bR as q,h as f,cY as k,cZ as P,c_ as J,aS as v,X as G,i as M,bj as j,q as C,aL as H}from"./main-D8UjLOIQ.js";import{o}from"./layerContainerType-ChWdCT09-G5sdAsSy.js";import{r as X}from"./ElevationInfo-DE5to86a-CZCBo6F8.js";import{l as O}from"./TimeExtent-Cf2Pienb-C5SbX69U.js";const E={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},x={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},R={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},z={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":E,"web-map/basemap":x,"web-map/tables":R,"link-chart/operational-layers":{...E,LinkChartLayer:!0},"link-chart/basemap":x,"link-chart/tables":R,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let d=class extends G{constructor(i){super(i),this.description=null,this.label=null,this.type=null}};e([a({type:String,json:{write:!0}})],d.prototype,"description",void 0),e([a({type:String,json:{write:!0}})],d.prototype,"label",void 0),e([a()],d.prototype,"type",void 0),d=e([u("esri.tables.elements.AttributeTableElement")],d);const c=d;let m=class extends v.ClonableMixin(c){constructor(i){super(i),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};e([a({type:["auto"],json:{write:!0}})],m.prototype,"displayType",void 0),e([a({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],m.prototype,"type",void 0),m=e([u("esri.tables.elements.AttributeTableAttachmentElement")],m);const N=m;let p=class extends v.ClonableMixin(c){constructor(i){super(i),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};e([a({type:String,json:{read:!1,write:!1}})],p.prototype,"description",void 0),e([a({type:String,json:{write:{enabled:!0,isRequired:!0}}})],p.prototype,"fieldName",void 0),e([a({type:String,json:{read:!1,write:!1}})],p.prototype,"label",void 0),e([a({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],p.prototype,"type",void 0),p=e([u("esri.tables.elements.AttributeTableFieldElement")],p);const W=p;let S=class extends v.ClonableMixin(c){constructor(i){super(i),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};e([a({type:Number,json:{type:B,write:{enabled:!0,isRequired:!0}}})],S.prototype,"relationshipId",void 0),e([a({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S.prototype,"type",void 0),S=e([u("esri.tables.elements.AttributeTableRelationshipElement")],S);const D=S,F={base:c,key:"type",typeMap:{attachment:N,field:W,relationship:D}};function K(i){return{typesWithGroup:{base:c,key:"type",typeMap:{attachment:N,field:W,group:i,relationship:D}},typesWithoutGroup:F}}let g=class extends v.ClonableMixin(c){constructor(i){super(i),this.elements=null,this.type="group"}clone(){return super.clone()}};e([a({types:[F],json:{name:"attributeTableElements",write:!0}})],g.prototype,"elements",void 0),e([a({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=e([u("esri.tables.elements.AttributeTableGroupElement")],g);const Y=g;let w=class extends v.ClonableMixin(G){constructor(i){super(i),this.field=null,this.order=null}};e([a({type:String,json:{write:!0}})],w.prototype,"field",void 0),e([a({type:["asc","desc"],json:{write:!0}})],w.prototype,"order",void 0),w=e([u("esri.tables.support.FieldOrder")],w);const Z=w;var T;const U=K(Y);let L=T=class extends G{constructor(i){super(i),this.elements=null,this.orderByFields=null}clone(){return new T({elements:M(this.elements),orderByFields:M(this.orderByFields)})}};e([a({types:[U.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],L.prototype,"elements",void 0),e([a({type:[Z],json:{write:!0}})],L.prototype,"orderByFields",void 0),L=T=e([u("esri.tables.AttributeTableTemplate")],L);const _=L,ae={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:o}}},ne={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(i,r)=>!r.disablePopup},write:{enabled:!0,writer(i,r,t){r[t]=!i}}}},se={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:o}}},oe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:J}}},le={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:o}}},ue={value:null,type:X,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:o}}};function ye(i){return{type:i,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const $={write:{enabled:!0,layerContainerTypes:o},read:!0},h={type:Number,json:{origins:{"web-document":$,"portal-item":{write:{layerContainerTypes:o}}}}},pe={...h,json:{...h.json,origins:{"web-document":{...$,write:{enabled:!0,layerContainerTypes:o,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(i,r,t)=>t&&t.origin!=="service"||!r.drawingInfo||r.drawingInfo.transparency===void 0?r.layerDefinition?.drawingInfo&&r.layerDefinition.drawingInfo.transparency!==void 0?j(r.layerDefinition.drawingInfo.transparency):void 0:j(r.drawingInfo.transparency)}}},de={type:C,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(i,r)=>{const t=C.fromJSON(i);return r.spatialReference!=null&&typeof r.spatialReference=="object"&&(t.spatialReference=H.fromJSON(r.spatialReference)),t}}}},read:!1}},ce={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},be={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:o}}},me={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:o}}},Q={json:{write:{ignoreOrigin:!0,layerContainerTypes:o},origins:{"web-map":{read:!1,write:!1}}}},Se={type:_,json:{name:"attributeTableInfo",write:!0}},ge=i=>{let r=class extends i{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(t,n,s){return s?.portalItem?.type==="Group Layer"?void 0:t}writeListMode(t,n,s,l){(l&&l.layerContainerType==="ground"||t&&q(this,s,{},l))&&(n[s]=t)}writeOperationalLayerType(t,n,s){t&&(n[s]=t)}writeTitle(t,n){n.title=t??"Layer"}readVisibilityTimeExtent(t){return t?O.fromArray(t):null}writeVisibilityTimeExtent(t,n,s,l){t&&l.layerContainerType!=="tables"&&(t.isEmpty?l?.messages&&l.messages.push(new f("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=t.toArray())}read(t,n){n&&(n.layer=this),k(this,t,s=>super.read(t,s),n)}write(t,n){if(!this.persistenceEnabled&&!n?.ignorePersistenceEnabled)return null;if(n?.origin){const y=`${n.origin}/${n.layerContainerType||"operational-layers"}`;let I=!!z[y]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&y==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&y==="web-map/operational-layers"&&(I=!1),!I)return n.messages?.push(new f("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${y}'`,{layer:this})),null}const s=super.write(t,{...n,layer:this}),l=!!n&&!!n.messages&&!!n.messages.filter(y=>y instanceof f&&y.name==="web-document-write:property-required").length;return P(s?.url)?(n?.messages?.push(new f("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return e([a({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),e([A("id",["id"])],r.prototype,"readId",null),e([a(Q)],r.prototype,"listMode",void 0),e([b("listMode")],r.prototype,"writeListMode",null),e([a({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:o,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),e([b("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),e([a(h)],r.prototype,"opacity",void 0),e([a({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),e([a({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),e([b("title"),b(["web-scene"],"title")],r.prototype,"writeTitle",null),e([a({type:O,json:{origins:{"web-scene":{write:{layerContainerTypes:o}}}}})],r.prototype,"visibilityTimeExtent",void 0),e([A("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),e([b(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[B,V]]}})],r.prototype,"writeVisibilityTimeExtent",null),e([a({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:o}}})],r.prototype,"visible",void 0),r=e([u("esri.layers.mixins.OperationalLayer")],r),r};export{Q as $,h as T,_ as V,le as a,Se as c,me as d,ae as e,oe as i,de as l,ue as n,pe as o,be as p,ne as r,ye as s,se as t,ge as u,ce as y};
