import{fU as re,fv as W,hQ as xe,fz as ye,fC as ie,fZ as ue,fA as H,hd as ke,hf as y,fB as U,gb as we,g0 as Me,f_ as ve,fJ as q,fR as u,fL as n,fM as t,f$ as s,fK as k,fY as l,hB as x,fS as M,m3 as R,m4 as I,hY as p,fQ as Z,m5 as ce,g4 as w,he as Ce,m6 as j,fT as Te,fO as se,fP as oe,h4 as _,fw as J,hM as T,hD as Se,m7 as ae,fD as pe,hA as ge,hg as ze,hK as Ve,h3 as Ae,fV as me}from"./main-D8UjLOIQ.js";import{u as He}from"./marked.esm-DgqJBp_S-BHXu-cO7.js";const Ee=["type","aria-label","checked","disabled","content"],ne=W({__name:"checkbox",props:{value:{type:Object,required:!0},legendItem:{type:Object,required:!0},checked:{type:Boolean},label:{type:String},isRadio:{type:Boolean},disabled:{type:Boolean}},setup(e){const{t:S}=ie(),o=e,c=H(o.legendItem.visibility);pe(()=>{o.legendItem.checkVisibilityRules(),c.value=o.legendItem.visibility===o.checked});const b=r=>!r.symbologyStack.some(f=>f.visibility),E=()=>{if(o.value instanceof ze)o.legendItem.toggleVisibility();else if(o.legendItem instanceof y){if(b(o.legendItem)?(o.legendItem.setSymbologyVisibility(void 0,!1),o.legendItem.setSymbologyVisibility(o.value.uid,!0),o.legendItem.toggleVisibility(!0)):o.legendItem.setSymbologyVisibility(o.value.uid,!o.value.lastVisbility),b(o.legendItem)&&o.legendItem.toggleVisibility(!1),o.legendItem.layer?.supportsFeatures){const r=o.legendItem.symbologyStack.filter(V=>V.lastVisbility===!0).map(V=>V.definitionClause||"");let f="";r.length===0?f="1=2":r.length<o.legendItem.symbologyStack.length&&(f=r.join(" OR ")),o.legendItem.layer?.setSqlFilter(Ve.SYMBOL,f)}c.value=!0}};return(r,f)=>{const V=q("tippy");return t(),n("div",{class:"relative",onMouseover:f[3]||(f[3]=x(()=>{},["stop"]))},[k(s("input",{type:e.isRadio?"radio":"checkbox","aria-label":l(S)(e.checked?`legend.visibility.hide${e.label}`:`legend.visibility.show${e.label}`),onClick:f[0]||(f[0]=x(D=>E(),["stop"])),checked:e.checked&&c.value,onKeypress:f[1]||(f[1]=ge(x(()=>{},["prevent"]),["enter"])),onKeyup:f[2]||(f[2]=ge(x(D=>E(),["stop"]),["enter"])),class:M([[e.disabled?"text-gray-400 border-gray-300":"text-black cursor-pointer border-gray-500 hover:border-black"],"mx-5 h-15 w-15"]),tabindex:"-1",disabled:e.disabled,content:l(S)(e.checked?`legend.visibility.hide${e.label}`:`legend.visibility.show${e.label}`)},null,42,Ee),[[V,{placement:"top-end",hideOnClick:!1}]])],32)}}}),Be=["aria-label"],Ze=["aria-label"],_e=["aria-label"],Re=["aria-label"],Ue=["aria-label"],De=["aria-label"],Oe=["content","aria-label"],Pe=W({__name:"legend-options",props:{legendItem:y},emits:["focusItem"],setup(e,{emit:S}){const{t:o}=ie(),c=ue("iApi"),b=H(),E=H(!1),r=ye(),f=H(r.mobileView),V=S,D=H(0),v=e,Y=()=>{v.legendItem.layerControlAvailable(p.Symbology)&&v.legendItem.toggleSymbology()},B=()=>{v.legendItem.layerControlAvailable(p.Datatable)&&C("grid")&&c.event.emit(J.GRID_TOGGLE,v.legendItem.layer)},F=()=>{v.legendItem.layerControlAvailable(p.Settings)&&C("settings")&&c.event.emit(J.SETTINGS_TOGGLE,v.legendItem.layer)},$=()=>{if(v.legendItem.layerControlAvailable(p.Metadata)&&C("metadata")){const g=v.legendItem?.layer?.config.metadata||v.legendItem?.layer?.parentLayer?.config?.metadata||{},m=g?.name||v.legendItem?.layer?.name||"",G=v.legendItem?.layer?.config?.catalogueUrl||v.legendItem?.layer?.layerType==="sublayer"&&v.legendItem?.layer?.parentLayer?.config?.catalogueUrl||void 0;if(g.url){const P=g.url.split("."),A=P[P.length-1],te=A==="xml"||A==="md"?A:"html";c.event.emit(J.METADATA_TOGGLE,{type:te,layerName:m,url:g.url,catalogueUrl:G,layer:v.legendItem.layer,xmlType:g.xmlType,treatXmlAsMarkdown:g.treatXmlAsMarkdown})}else console.warn("Layer does not have a metadata url defined")}},N=()=>{v.legendItem.layerControlAvailable(p.BoundaryZoom)&&v.legendItem?.layer?.zoomToLayerBoundary()},X=()=>{v.legendItem.layerControlAvailable(p.Remove)&&c.geo.map.removeLayer(v.legendItem.layerUid)},ee=g=>{O.value&&T(v.legendItem.layer).reload().then(()=>{D.value+=1,g.pointerType!=="mouse"&&V("focusItem")})},O=U(()=>v.legendItem.layerControlAvailable(p.Reload)&&v.legendItem instanceof y&&T(v.legendItem.layer)?.canReload),le=g=>{E.value=!0,setTimeout(()=>{E.value&&(f.value||g._tippy?.show())},300)},C=g=>{try{return c.fixture.exists(g)}catch{return!1}};return(g,m)=>{const G=ve("dropdown-menu"),P=q("tippy");return t(),n("div",{onClick:m[3]||(m[3]=x(()=>{},["stop"])),onMouseover:m[4]||(m[4]=x(()=>{},["stop"])),class:"options display-block cursor-auto"},[(t(),Z(G,{class:"flex-shrink-0",position:"bottom-end",tooltip:l(o)("legend.layer.options"),tooltipPlacement:"left",tooltipPlacementAlt:"left",ref_key:"dropdown",ref:b,key:D.value},{header:me(()=>m[5]||(m[5]=[s("div",{class:"flex p-4 justify-center items-center"},[s("svg",{class:"inline-block fill-current w-18 h-18 mx-4",viewBox:"0 0 23 21"},[s("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)])),default:me(()=>[s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).Metadata)||!C("metadata")}]),onClick:$,role:"button","aria-label":l(o)("legend.layer.controls.metadata")},[m[6]||(m[6]=s("svg",{class:"setting-svg",viewBox:"0 0 23 21"},[s("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})],-1)),_(" "+w(l(o)("legend.layer.controls.metadata")),1)],10,Be),s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).Settings)||!C("settings")}]),onClick:F,role:"button","aria-label":l(o)("legend.layer.controls.settings")},[m[7]||(m[7]=s("svg",{class:"setting-svg",viewBox:"0 0 23 21"},[s("g",null,[s("path",{d:"M 3,17L 3,19L 9,19L 9,17L 3,17 Z M 3,5L 3,7L 13,7L 13,5L 3,5 Z M 13,21L 13,19L 21,19L 21,17L 13,17L 13,15L 11,15L 11,21L 13,21 Z M 7,9L 7,11L 3,11L 3,13L 7,13L 7,15L 9,15L 9,9L 7,9 Z M 21,13L 21,11L 11,11L 11,13L 21,13 Z M 15,9L 17,9L 17,7L 21,7L 21,5L 17,5L 17,3L 15,3L 15,9 Z "})])],-1)),_(" "+w(l(o)("legend.layer.controls.settings")),1)],10,Ze),s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).Datatable)||!C("grid")}]),onClick:B,role:"button","aria-label":l(o)("legend.layer.controls.datatable")},[m[8]||(m[8]=s("svg",{class:"setting-svg",viewBox:"0 0 23 21"},[s("path",{d:"M 4.00002,3L 20,3C 21.1046,3 22,3.89543 22,5L 22,20C 22,21.1046 21.1046,22 20,22L 4.00001,22C 2.89544,22 2.00001,21.1046 2.00001,20L 2.00002,5C 2.00002,3.89543 2.89545,3 4.00002,3 Z M 4.00002,7L 4.00001,10L 8,10L 8,7.00001L 4.00002,7 Z M 10,7.00001L 9.99999,10L 14,10L 14,7.00001L 10,7.00001 Z M 20,10L 20,7L 16,7.00001L 16,10L 20,10 Z M 4.00002,12L 4.00002,15L 8,15L 8,12L 4.00002,12 Z M 4.00001,20L 8,20L 8,17L 4.00002,17L 4.00001,20 Z M 9.99999,12L 9.99999,15L 14,15L 14,12L 9.99999,12 Z M 9.99999,20L 14,20L 14,17L 9.99999,17L 9.99999,20 Z M 20,20L 20,17L 16,17L 16,20L 20,20 Z M 20,12L 16,12L 16,15L 20,15L 20,12 Z "})],-1)),_(" "+w(l(o)("legend.layer.controls.datatable")),1)],10,_e),s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).Symbology)}]),onClick:Y,role:"button","aria-label":l(o)("legend.layer.controls.symbology")},[m[9]||(m[9]=s("svg",{class:"setting-svg",viewBox:"0 0 23 21"},[s("path",{d:"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"})],-1)),_(" "+w(l(o)("legend.layer.controls.symbology")),1)],10,Re),s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).BoundaryZoom)}]),onClick:N,role:"button","aria-label":l(o)("legend.layer.controls.boundaryzoom")},[m[10]||(m[10]=s("svg",{class:"setting-svg",viewBox:"0 0 24 24"},[s("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),s("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})],-1)),_(" "+w(l(o)("legend.layer.controls.boundaryzoom")),1)],10,Ue),s("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!e.legendItem.layerControlAvailable(l(p).Remove)}]),onClick:X,role:"button","aria-label":l(o)("legend.layer.controls.remove")},[m[11]||(m[11]=s("svg",{class:"setting-svg",viewBox:"0 0 23 21"},[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)),_(" "+w(l(o)("legend.layer.controls.remove")),1)],10,De),k((t(),n("a",{href:"javascript:;",class:M(["flex leading-snug items-center text-left w-auto",{disabled:!O.value}]),key:+O.value,content:O.value?null:l(o)("legend.layer.controls.reloadDisabled"),onMouseover:m[0]||(m[0]=x(A=>le(A.currentTarget),["stop"])),onMouseout:m[1]||(m[1]=A=>(f.value||A.currentTarget?._tippy?.hide(),E.value=!1)),onClick:m[2]||(m[2]=A=>ee(A)),role:"button","aria-label":l(o)("legend.layer.controls.reload")},[m[12]||(m[12]=s("svg",{class:"setting-svg",viewBox:"0 0 24 24"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)),_(" "+w(l(o)("legend.layer.controls.reload")),1)],42,Oe)),[[P,{placement:"top-start",trigger:"manual focus",aria:"describedby"}]])]),_:1},8,["tooltip"]))],32)}}}),$e=re(Pe,[["__scopeId","data-v-34fa4433"]]),Ge={key:0},je={key:0,class:"relative left-3"},qe=["innerHTML"],Fe=["src"],Ne={key:1,class:"symbologyIcon w-32 h-32"},Qe=["innerHTML"],Ke=["src"],Je={key:1,class:"h-32 w-32 inline-flex justify-center items-center"},We=W({__name:"symbology-stack",props:{visible:{type:Boolean,required:!0},legendItem:{type:Object,required:!0}},setup(e){const S=e,o=H([]);return pe(()=>{S.legendItem.loadPromise.then(()=>{S.legendItem.layerUid!==void 0&&Promise.all(T(S.legendItem.symbologyStack).map(c=>c.drawPromise)).then(()=>{o.value=T(S.legendItem).symbologyStack})})}),(c,b)=>e.visible?(t(),n("div",Je,b[0]||(b[0]=[s("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[s("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)]))):(t(),n("div",Ge,[o.value.length>1?(t(),n("div",je,[(t(!0),n(se,null,oe(o.value.slice(0,3).reverse(),(E,r)=>(t(),n("div",{class:M(["absolute",[r==0?"symbol-0":r==1?"left-3 symbol-1":"left-6 symbol-2"]]),style:Ae({"z-index":3-r}),key:r},[o.value[r].svgcode?(t(),n("span",{key:0,class:"symbologyIcon w-28 h-28",innerHTML:o.value[r].svgcode},null,8,qe)):o.value[r].imgUrl?(t(),n("img",{key:1,class:"symbologyIcon w-28 h-28",src:o.value[r].imgUrl},null,8,Fe)):u("",!0)],6))),128))])):o.value.length>0?(t(),n("div",Ne,[o.value[0].svgcode?(t(),n("span",{key:0,innerHTML:o.value[0].svgcode},null,8,Qe)):o.value[0].imgUrl?(t(),n("img",{key:1,class:"symbologyIcon w-full h-full",src:o.value[0].imgUrl},null,8,Ke)):u("",!0)])):u("",!0)]))}}),Ye=re(We,[["__scopeId","data-v-34dfeccd"]]),Xe={class:"relative"},el=["content"],ll={key:0,class:"flex p-5 mr-[13px]"},tl={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"24px",height:"24px"},al={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"24px",height:"24px"},nl=["disabled","content","aria-label"],sl=["src"],ol={class:"h-auto break-words text-ellipsis"},rl={key:4,class:"flex-1 pointer-events-none p-5"},il={key:5,class:"flex-1"},dl={key:0,class:"text-lg font-bold"},cl={key:1},gl={key:2},ml=["src"],yl=["innerHTML"],ul={key:6,class:"relative"},vl=["content","aria-label"],pl={key:8,class:"relative"},Il=["content","aria-label"],bl={class:"flex p-5"},hl={key:0,class:"fill-current w-18 h-18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},fl={key:1,class:"inline-block fill-current w-18 h-18 mr-1",viewBox:"0 1 23 22"},Ll=["content"],xl=["content"],kl={key:11,class:"relative top-1"},wl=["content"],Ml={key:0,class:"h-3 w-full absolute bottom-0"},Cl={key:0,class:"symbology-stack default-focus-style"},Tl={key:0},Sl={key:0,class:"m-5"},zl={key:0,class:"items-center grid-cols-1"},Vl={key:0,class:"symbologyIcon w-full p-5"},Al=["src"],Hl=["innerHTML"],El={key:2,class:"flex-1 p-5 bg-black-75 text-white"},Bl={key:1,class:"flex items-center"},Zl={key:0,class:"symbologyIcon"},_l=["src"],Rl={key:1,class:"symbologyIcon"},Ul=["innerHTML"],Dl={class:"flex-1 ml-15"},Ol={key:1},Pl={class:"flex p-5 ml-48"},$l={key:0,class:"relative animate-spin spinner h-20 w-20 mr-10 pt-2"},Gl={class:"flex-1 text-gray-500"},jl={key:1,class:"legend-group border-l-2 ml-4 pl-4"},ql=W({__name:"item",props:{legendItem:{type:Object,required:!0}},setup(e){const S=xe(),o=ye(),{t:c}=ie(),b=ue("iApi"),E=H(),r=e,f=ke(),V=f.multilineItems,D=(r.legendItem instanceof y&&r.legendItem.maxLines)??f.maxLines,v=H(o.mobileView),Y=U(()=>S.layerConfigs),B=H([]),F=H(!1),$=H(!1),N=we("legendFocusItem"),X=U(()=>r.legendItem instanceof y?T(r.legendItem.layer)?.layerType:""),ee=U(()=>r.legendItem instanceof y&&T(r.legendItem.layer)?.canModifyLayer),O=U(()=>{if(r.legendItem instanceof y){const i=T(r.legendItem.layer);return i?i.canReload:!0}else return!1}),le=U(()=>b.animate),C=U(()=>r.legendItem.children.length>0||r.legendItem instanceof y&&T(r.legendItem.layer)?.sublayers.length>0),g=i=>i===R.Expand||i===R.Visibility?r.legendItem.controlAvailable(i):r.legendItem.layerControlAvailable(i),m=i=>He(i),G=()=>{r.legendItem.children.length===0||!g(R.Expand)||(r.legendItem.toggleExpanded(),b.updateAlert(c(`legend.alert.group${r.legendItem.expanded?"Expanded":"Collapsed"}`)))},P=()=>{if(g(p.Symbology)){const i=r.legendItem.toggleSymbology();b.updateAlert(c(`legend.alert.symbology${i?"Expanded":"Collapsed"}`))}},A=()=>{g(p.Datatable)&&Q()&&b.event.emit(J.GRID_TOGGLE,r.legendItem.layer)},te=i=>{const a=document.createElement("span");a.innerHTML=i.svgcode;const h=a.firstElementChild;return h?.classList.add("max-w-full"),h?.classList.add("h-full"),h?.setAttribute("height",i.imgHeight),h?.setAttribute("width",i.imgWidth),a.outerHTML},Q=()=>{try{return b.fixture.exists("grid")}catch{return!1}},Ie=()=>{r.legendItem.reload(),setTimeout(()=>{const i=r.legendItem;let a=!0;if(i.layer)T(i.layer).reload(),a=!1;else if(i.isSublayer&&i.parentLayerId){const h=b.geo.layer.getLayer(i.parentLayerId);h&&(T(h).reload(),a=!1)}if(a){const h=i.isSublayer?i.parentLayerId:i.layerId,L=Y.value.find(z=>z.id===h);L!==void 0&&be(L)}r.legendItem.loadPromise.catch(()=>{})},400)},be=async i=>{try{const a=b.geo.layer.getLayer(i.id);if(a){const[h]=await Se(T(a).reload());if(h)throw new Error;return a}else{const h=b.geo.layer.createLayer(i);return await b.geo.map.addLayer(h).catch(()=>{throw new Error}),h}}catch{return}},he=()=>{const i=T(r.legendItem);let a=0;if(i.type===I.Error){r.legendItem.toggleHidden(!0);const h=setInterval(()=>{const L=i.layer;(L&&(L.layerExists||L.initiationState===ae.NEW||L.initiationState===ae.TERMINATING||L.initiationState===ae.TERMINATED)||a>1200)&&(clearInterval(h),L&&b.geo.map.removeLayer(L),S.removeLayerConfig(i.layerId),b.fixture.get("legend")?.removeLayerItem(i.layerId)),a++},250)}else{r.legendItem.error();const h=setInterval(()=>{const L=i.parentLayerId||i.layerId,z=b.geo.layer.getLayer(L);z&&(clearInterval(h),z.cancelLoad(),(b.fixture.get("legend")?.getLayerBoundItems(z)||[]).forEach(K=>K.error())),a>1200&&clearInterval(h),a++},50)}},de=()=>{r.legendItem.loadPromise.then(()=>{if(B.value=[],!r.legendItem.layer){console.warn("Attempted to mount legend item component with undefined layer");return}Promise.all(T(r.legendItem.symbologyStack.map(i=>i.drawPromise))).then(()=>{B.value=r.legendItem.symbologyStack,F.value=!0})}).catch(()=>{})},fe=i=>{$.value=!0,setTimeout(()=>{$.value&&(v.value||i._tippy?.show())},300)};return r.legendItem instanceof y&&(de(),Me(()=>r.legendItem.symbologyStack,()=>{de()})),(i,a)=>{const h=ve("item",!0),L=q("tippy"),z=q("truncate"),K=q("focus-item");return e.legendItem.hidden?u("",!0):(t(),n("div",{key:`${e.legendItem.uid}`,ref_key:"el",ref:E},[s("div",Xe,[k((t(),n("div",{class:M(["flex items-center hover:bg-gray-200 default-focus-style !p-5",[e.legendItem.type===l(I).Item?"loaded-item":e.legendItem.type===l(I).Error?"non-loaded-item bg-red-200":"non-loaded-item",C.value&&g(l(R).Expand)||!C.value&&e.legendItem instanceof l(y)&&g(l(p).Datatable)&&Q()&&e.legendItem.type===l(I).Item?"cursor-pointer":"cursor-default",l(V)?"multilined":"singlelined"]]),onMouseover:a[10]||(a[10]=x(d=>fe(d.currentTarget),["stop"])),onMouseout:a[11]||(a[11]=d=>(v.value||d.currentTarget?._tippy?.hide(),$.value=!1)),onClick:a[12]||(a[12]=()=>{!C.value&&e.legendItem instanceof l(y)&&g(l(p).Datatable)&&Q()&&e.legendItem.type===l(I).Item?A():C.value&&G()}),content:C.value&&g(l(R).Expand)?l(c)(e.legendItem.expanded?"legend.group.collapse":"legend.group.expand"):e.legendItem instanceof l(y)&&e.legendItem.type===l(I).Item&&g(l(p).Datatable)&&Q()?l(c)("legend.layer.data"):"","truncate-trigger":"",ref_key:"legendFocusItem",ref:N},[e.legendItem.type!==l(I).Item?(t(),n("div",ll,[e.legendItem.type===l(I).Placeholder?(t(),n("svg",tl,a[14]||(a[14]=[ce('<path d="M0 0h24v24H0V0z" fill="none" data-v-ea22b3ac></path><path d="M0 0h24v24H0V0z" fill="none" data-v-ea22b3ac></path><circle cx="15.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="8.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="15.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="8.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-2.5c2.33 0 4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2s-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5z" data-v-ea22b3ac></path>',7)]))):(t(),n("svg",al,a[15]||(a[15]=[ce('<path d="M0 0h24v24H0V0z" fill="none" data-v-ea22b3ac></path><path d="M0 0h24v24H0V0z" fill="none" data-v-ea22b3ac></path><circle cx="15.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="8.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="15.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><circle cx="8.5" cy="9.5" r="1.5" data-v-ea22b3ac></circle><path d="M 20,12C 20,7.6 16.4,4 12,4C 7.6,4 4,7.6 4,12C 4,16.4 7.6,20 12,20C 16.4,20 20,16.4 20,12 Z M 22,12C 22,17.5 17.5,22 12,22C 6.5,22 2,17.5 2,12C 2,6.5 6.5,2.00001 12,2.00001C 17.5,2.00001 22,6.5 22,12 Z M 15.5,8C 16.3,8 17,8.7 17,9.5C 17,10.3 16.3,11 15.5,11C 14.7,11 14,10.3 14,9.5C 14,8.7 14.7,8 15.5,8 Z M 10,9.5C 10,10.3 9.3,11 8.5,11C 7.7,11 7,10.3 7,9.5C 7,8.7 7.7,8 8.5,8C 9.3,8 10,8.7 10,9.5 Z M 12,14C 13.7524,14 15.2943,14.7212 16.1871,15.8129L 14.7697,17.2302C 14.3175,16.5078 13.2477,16 12,16C 10.7523,16 9.68254,16.5078 9.23024,17.2302L 7.81291,15.8129C 8.7057,14.7212 10.2476,14 12,14 Z" data-v-ea22b3ac></path>',7)])))])):u("",!0),e.legendItem.type===l(I).Item&&e.legendItem instanceof l(y)&&e.legendItem.layer.legend.length>0?(t(),n("div",{key:1,class:"relative w-32 h-32 mr-15",onMouseover:a[0]||(a[0]=x(()=>{},["stop"]))},[k((t(),n("button",{type:"button",onClick:x(P,["stop"]),class:M([g(l(p).Symbology)?"cursor-pointer":"cursor-default"]),disabled:!g(l(p).Symbology),content:e.legendItem instanceof l(y)&&e.legendItem.symbologyExpanded?l(c)("legend.symbology.hide"):l(c)("legend.symbology.expand"),"aria-label":e.legendItem instanceof l(y)&&e.legendItem.symbologyExpanded?l(c)("legend.symbology.hide"):l(c)("legend.symbology.expand")},[e.legendItem.coverIcon?(t(),n("img",{key:1,class:M([{"pointer-events-none":!g(l(p).Symbology)},"w-32 h-32 hover:scale-105"]),src:e.legendItem.coverIcon,alt:"Cover icon not found :("},null,10,sl)):(t(),Z(Ye,{key:0,class:M([{"pointer-events-none":!g(l(p).Symbology)},"w-32 h-32"]),visible:e.legendItem instanceof l(y)&&e.legendItem.symbologyExpanded,legendItem:e.legendItem},null,8,["class","visible","legendItem"]))],10,nl)),[[L,{placement:"top-start"}]])],32)):u("",!0),C.value&&g(l(R).Expand)?(t(),n("div",{key:2,class:M(["expand-toggle p-8 pointer-events-none",{"rotate-180":e.legendItem.expanded}])},a[16]||(a[16]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 0 24 24",width:"18"},[s("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)):u("",!0),e.legendItem instanceof l(y)&&l(V)?k((t(),n("div",{key:3,class:M(["flex-1 pointer-events-none m-5",`line-clamp-${l(D)}`])},[s("span",ol,w(e.legendItem.name??(e.legendItem?.layer?.name?e.legendItem.layer?.name:e.legendItem.layerId)),1)],2)),[[z,{externalTrigger:!0,noTruncateClass:!0}]]):e.legendItem instanceof l(y)?k((t(),n("div",rl,[s("span",null,w(e.legendItem.name??(!e.legendItem.layer||e.legendItem?.layer?.name===""?e.legendItem.layerId:e.legendItem.layer?.name)),1)])),[[z,{externalTrigger:!0}]]):e.legendItem instanceof l(Ce)?(t(),n("div",il,[e.legendItem.infoType===l(j).Title&&e.legendItem.content?(t(),n("h3",dl,w(e.legendItem.content),1)):e.legendItem.infoType===l(j).Title?(t(),n("h3",cl,w(e.legendItem.name),1)):e.legendItem.infoType===l(j).Text?(t(),n("p",gl,w(e.legendItem.content),1)):e.legendItem.infoType===l(j).Image?(t(),n("img",{key:3,src:e.legendItem.content,alt:"InfoType image not found :("},null,8,ml)):e.legendItem.infoType===l(j).Markdown?(t(),n("div",{key:4,class:"ramp-markdown",innerHTML:m(e.legendItem.content)},null,8,yl)):(t(),Z(Te(`${e.legendItem.uid}-info-section`),{key:5}))])):u("",!0),e.legendItem.type===l(I).Error&&O.value?(t(),n("div",ul,[k((t(),n("button",{type:"button",class:"text-gray-500 hover:text-black",content:l(c)("legend.layer.controls.reload"),onMouseover:a[1]||(a[1]=x(()=>{},["stop"])),onClick:x(Ie,["stop"]),"aria-label":l(c)("legend.layer.controls.reload")},a[17]||(a[17]=[s("div",{class:"flex p-8"},[s("svg",{class:"inline-block fill-current w-18 h-18",viewBox:"0 0 24 24"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})])],-1)]),40,vl)),[[L,{placement:"top-start"}]])])):u("",!0),(e.legendItem.type===l(I).Item||e.legendItem.type===l(I).Placeholder&&l(V))&&e.legendItem instanceof l(y)?(t(),Z($e,{key:7,class:M({invisible:e.legendItem.type===l(I).Placeholder}),legendItem:e.legendItem,onFocusItem:a[2]||(a[2]=()=>i.$emit("focusItem",l(N)))},null,8,["class","legendItem"])):u("",!0),e.legendItem.type!==l(I).Item&&e.legendItem instanceof l(y)?(t(),n("div",pl,[k((t(),n("button",{type:"button",class:"text-gray-500 hover:text-black",content:e.legendItem.type===l(I).Error?l(c)("legend.layer.controls.remove"):l(c)("legend.layer.controls.cancel"),onMouseover:a[3]||(a[3]=x(()=>{},["stop"])),onClick:x(he,["stop"]),"aria-label":e.legendItem.type===l(I).Error?l(c)("legend.layer.controls.remove"):l(c)("legend.layer.controls.cancel")},[s("div",bl,[e.legendItem.type===l(I).Placeholder?(t(),n("svg",hl,a[18]||(a[18]=[s("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1)]))):(t(),n("svg",fl,a[19]||(a[19]=[s("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},null,-1)])))])],40,Il)),[[L,{placement:"top-start"}]])])):u("",!0),e.legendItem.type===l(I).Item&&e.legendItem instanceof l(y)&&e.legendItem.layerOffscale?k((t(),n("div",{key:9,class:"relative p-4 cursor-default",content:l(c)("legend.layer.offscale"),onMouseover:a[4]||(a[4]=x(()=>{},["stop"])),onClick:a[5]||(a[5]=x(()=>{},["stop"])),"focus-icon":""},a[20]||(a[20]=[s("svg",{class:"inline-block fill-gray-400 w-18 h-18",viewBox:"0 0 24 24"},[s("path",{d:"M19.81 14.99l1.19-.92-1.43-1.43-1.19.92 1.43 1.43zm-.45-4.72L21 9l-9-7-2.91 2.27 7.87 7.88 2.4-1.88zM3.27 1L2 2.27l4.22 4.22L3 9l1.63 1.27L12 16l2.1-1.63 1.43 1.43L12 18.54l-7.37-5.73L3 14.07l9 7 4.95-3.85L20.73 21 22 19.73 3.27 1z"})],-1)]),40,Ll)),[[L,{placement:"top-start"}]]):u("",!0),e.legendItem.type===l(I).Item&&e.legendItem instanceof l(y)&&!e.legendItem.layer?.mapLayer?k((t(),n("div",{key:10,class:"relative p-4 cursor-default",content:l(c)("legend.layer.data.only"),onMouseover:a[6]||(a[6]=x(()=>{},["stop"])),onClick:a[7]||(a[7]=x(()=>{},["stop"])),"focus-icon":""},a[21]||(a[21]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 -960 960 960",width:"18",class:"inline-block fill-gray-400"},[s("path",{d:"m776.109-63.565-73.435-69.196q-51.302 32.573-106.091 59.145-54.788 26.572-116.255 26.572-88.94 0-167.803-33.893-78.862-33.894-138.052-93.239-59.19-59.346-93.19-138.205-34-78.86-34-167.619 0-64.607 19.12-125.521Q85.521-666.435 120-719.674l-50.848-50.848 68.761-68.761L844.87-132.326l-68.761 68.76Zm-345.392-92.653v-72.5l-52.25-52.086v-50.009l-219.01-218.752q-3 17.015-5 34.031-2 17.015-2 35.136 0 124.449 78.826 214.674 78.826 90.224 199.434 109.506Zm410.392-85.412-76.739-77.74q21.288-37.275 32.35-77.847 11.062-40.572 11.062-84.059 0-95.003-56.304-169.853-56.304-74.849-145.391-108.893v.522l-174.413 76.087v31.348L241.87-842.109q52.483-34.989 113.387-52.918 60.903-17.93 125.159-17.93 89.709 0 168.127 33.869 78.418 33.868 137.435 93.28 59.016 59.413 92.997 137.683 33.982 78.269 33.982 167.993 0 64.203-18.43 125.111-18.429 60.907-53.418 113.391Z"})],-1)]),40,xl)),[[L,{placement:"top-end"}]]):u("",!0),e.legendItem.type===l(I).Item&&e.legendItem instanceof l(y)&&e.legendItem.layerOffscale?(t(),n("div",kl,[k((t(),n("button",{type:"button",class:"p-4",content:l(c)("legend.layer.zoomToVisible"),onMouseover:a[8]||(a[8]=x(()=>{},["stop"])),onClick:a[9]||(a[9]=x(d=>e.legendItem.layer.zoomToVisibleScale(),["stop"]))},a[22]||(a[22]=[s("svg",{class:"m-auto",xmlns:"http://www.w3.org/2000/svg",height:"18",viewBox:"0 0 24 24",width:"18"},[s("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),s("path",{d:"M0 0h24v24H0V0z",fill:"none"}),s("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})],-1)]),40,wl)),[[L,{placement:"top-start"}]])])):e.legendItem.type===l(I).Item&&g(l(R).Visibility)?(t(),Z(ne,{key:12,checked:e.legendItem.visibility,value:e.legendItem,isRadio:e.legendItem.parent&&e.legendItem.parent.exclusive,legendItem:e.legendItem,disabled:e.legendItem instanceof l(y)&&!e.legendItem.layerControlAvailable(l(p).Visibility),label:C.value?"Group":"Layer"},null,8,["checked","value","isRadio","legendItem","disabled","label"])):u("",!0)],42,el)),[[K,"show-truncate"],[L,{placement:"top-start",trigger:"manual focus",aria:"describedby"}]]),e.legendItem.type===l(I).Placeholder||e.legendItem instanceof l(y)&&e.legendItem.layerRedrawing&&e.legendItem.visibility?(t(),n("div",Ml,a[23]||(a[23]=[s("div",{class:"progress-line"},null,-1)]))):u("",!0)]),e.legendItem instanceof l(y)&&e.legendItem.symbologyExpanded?k((t(),n("div",Cl,[B.value.length>0?(t(),n("div",Tl,[e.legendItem instanceof l(y)&&e.legendItem.description?(t(),n("p",Sl,w(e.legendItem.description),1)):u("",!0),(t(!0),n(se,null,oe(B.value,d=>(t(),n("div",{class:"m-5",key:d.uid},[d.imgUrl&&e.legendItem.symbologyRenderStyle==="images"||!d.imgUrl&&X.value==="ogc-wms"?(t(),n("div",zl,[d.imgUrl?(t(),n("div",Vl,[s("img",{class:"max-w-full",src:d.imgUrl},null,8,Al)])):d.imgHeight?(t(),n("div",{key:1,class:"symbologyIcon w-full p-5",innerHTML:te(d)},null,8,Hl)):u("",!0),d.label?k((t(),n("div",El,[s("span",null,w(d.label),1),!d.imgUrl&&B.value.length>1||d.imgUrl&&d.definitionClause?(t(),Z(ne,{key:0,class:"float-right",value:d,legendItem:e.legendItem,checked:d.visibility,disabled:!g(l(p).Visibility),label:"Symbol"},null,8,["value","legendItem","checked","disabled"])):u("",!0)])),[[z]]):u("",!0)])):(t(),n("div",Bl,[d.imgUrl?(t(),n("div",Zl,[s("img",{class:"w-32 h-32",src:d.imgUrl},null,8,_l)])):d.svgcode?(t(),n("div",Rl,[s("span",{innerHTML:d.svgcode},null,8,Ul)])):u("",!0),k((t(),n("div",Dl,[_(w(d.label),1)])),[[z]]),ee.value&&e.legendItem.layer.supportsFeatures&&(!d.imgUrl&&B.value.length>1||d.imgUrl&&d.definitionClause)?(t(),Z(ne,{key:2,value:d,legendItem:e.legendItem,checked:d.visibility,disabled:!g(l(p).Visibility),label:"Symbol"},null,8,["value","legendItem","checked","disabled"])):u("",!0)]))]))),128))])):u("",!0),F.value?u("",!0):(t(),n("div",Ol,[k((t(),n("div",Pl,[le.value?(t(),n("div",$l)):u("",!0),k((t(),n("div",Gl,[s("span",null,w(l(c)("legend.symbology.loading")),1)])),[[z]])])),[[z]])]))])),[[K]]):u("",!0),e.legendItem.expanded?(t(),n("div",jl,[(t(!0),n(se,null,oe(e.legendItem.children,d=>(t(),Z(h,{legendItem:d,key:d.uid,onFocusItem:a[13]||(a[13]=Le=>i.$emit("focusItem",Le))},null,8,["legendItem"]))),128))])):u("",!0)]))}}}),Ql=re(ql,[["__scopeId","data-v-ea22b3ac"]]);export{Ql as default};
