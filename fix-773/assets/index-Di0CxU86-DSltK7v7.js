import{fy as E,fU as w,fv as _,fC as y,fZ as M,fA as d,gc as l,fD as T,fw as i,fG as A,fL as R,fM as x,f$ as L,g4 as D,fY as $}from"./main-D8UjLOIQ.js";const C={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}},I={class:"pg-label"},P=_({__name:"map-panguard",setup(f){const{t:p}=y(),s=M("iApi"),t=d(),r=d(-1),o=l([]),n=l([]);T(()=>{u(),n.push(s.event.on(i.MAP_CREATED,()=>{u()})),n.push(s.event.on(i.MAP_DESTROYED,()=>{o.forEach(e=>e.remove())})),n.push(s.event.on(i.MAP_REFRESH_START,()=>{o.forEach(e=>e.remove())})),n.push(s.event.on(i.MAP_REFRESH_END,()=>{u()}))}),A(()=>{n.forEach(e=>s.event.off(e)),o.forEach(e=>e.remove())});const u=()=>{const e=new Map;s.geo.map.viewPromise.then(()=>{o.push(s.geo.map.esriView.on("pointer-down",a=>{a.pointerType==="touch"&&e.set(a.pointerId,{x:a.x,y:a.y})})),o.push(s.geo.map.esriView.on(["pointer-up","pointer-leave"],a=>{a.pointerType==="touch"&&window.setTimeout(()=>{e.delete(a.pointerId)},200)})),o.push(s.geo.map.esriView.on("pointer-move",a=>{const{pointerId:h,pointerType:v,x:m,y:g}=a,c=e.get(h);if(!c||v!=="touch"||e.size!==1){t.value.classList.remove("pg-active");return}Math.sqrt(Math.pow(m-c.x,2)+Math.pow(g-c.y,2))<20||(t.value.classList.add("pg-active"),r.value!==-1&&clearTimeout(r.value),r.value=window.setTimeout(()=>{t.value.classList.remove("pg-active")},2e3))}))})};return(e,a)=>(x(),R("div",{class:"pg",ref_key:"panGuard",ref:t},[L("p",I,D($(p)("panguard.instructions")),1)],512))}}),S=w(P,[["__scopeId","data-v-22ab9ef7"]]);class F extends E{added(){Object.entries(C).forEach(t=>this.$iApi.$i18n.mergeLocaleMessage(...t));const{destroy:p,el:s}=this.mount(S,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(s.childNodes[0]),this.removed=()=>{p()}}}export{F as default};
