import{el as m,em as N,en as s,eo as l,ep as S}from"./main-BrXQBr3M.js";function V(e,n){return{...n,filterMode:e.mode}}function b(e,n){return I(e,n).next().value??null}function v(e,n,i){const r=x(e);if(r&&(s(n,r[0])||l(i,r[1])))return"";const t=Array.from(I(e,n,i)),o=T(t,n,i)?"1=1":t.map(u=>u.where||"1=1").reduce((u,f)=>S(u,f),"");return o&&o!=="1=1"?o:""}function x(e){if(d(e)==="manual")return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)n[0]=Math.max(n[0],a(i)),n[1]=Math.min(n[1],c(r));return n}function*I(e,n,i){if(d(e)==="manual"){const r=e.filters.find(t=>t.id===e.activeFilterId);r&&(yield r)}else{typeof n=="object"&&(n=n.scale);for(const r of e.filters)h(r.minScale,r.maxScale,n,i)&&(yield r)}}function T(e,n,i){if(e.length===0)return!0;const r=a(e.at(0)?.minScale),t=c(e.at(-1)?.maxScale);if(l(r,n)||s(t,i))return!0;for(let o=0;o<e.length-1;o++){const u=e[o],f=e[o+1];if(l(a(f.minScale),c(u.maxScale)))return!0}return!1}function h(e,n,i,r){return e=a(e),i=a(i),n=c(n),!(!m(i,e)&&(r??i)>e)&&!N(n,i)&&(r===void 0||!m(r,e))}function d(e){return"mode"in e?e.mode:e.filterMode}function a(e){return e||Number.POSITIVE_INFINITY}function c(e){return e||0}export{v as T,V as b,b as x};
