import{s as m,bc as c}from"./main-BrXQBr3M.js";function u(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function h(t){let e=0,r=0;for(let s=0;s<t.length;s++){const n=t[s].size;typeof n=="number"&&(e+=n,r++)}return e/r}function p(t,e){return typeof t=="number"?t:t?.stops?.length?h(t.stops):e}function b(t,e){if(!e)return t;const r=e.filter(i=>i.type==="size").map(i=>{const{maxSize:a,minSize:f}=i;return(p(a,t)+p(f,t))/2});let s=0;const n=r.length;if(n===0)return t;for(let i=0;i<n;i++)s+=r[i];const o=Math.floor(s/n);return Math.max(o,t)}function M(t){const e=t?.renderer,r=t?.pointerType,s=r==="touch"?9:6;if(!e)return s;const n="visualVariables"in e?b(s,e.visualVariables):s;if(e.type==="simple")return u(n,e.symbol);if(e.type==="unique-value"){let o=n;return e.uniqueValueInfos?.forEach(i=>{o=u(o,i.symbol)}),o}if(e.type==="class-breaks"){let o=n;return e.classBreakInfos.forEach(i=>{o=u(o,i.symbol)}),o}return e.type==="dot-density"||e.type,n}function d(t,e,r,s=new m){let n=0;if(r.type==="2d")n=e*(r.resolution??0);else if(r.type==="3d"){const x=r.overlayPixelSizeInMapUnits(t),l=r.basemapSpatialReference;n=l==null||l.equals(r.spatialReference)?e*x:c(l)/c(r.spatialReference)}const o=t.x-n,i=t.y-n,a=t.x+n,f=t.y+n,{spatialReference:y}=r;return s.xmin=Math.min(o,a),s.ymin=Math.min(i,f),s.xmax=Math.max(o,a),s.ymax=Math.max(i,f),s.spatialReference=y,s}function R(t,e,r){const s=r.toMap(t);return s==null?!1:d(s,M(),r,z).intersects(e)}const z=new m;export{d as x,M as y,R as z};
