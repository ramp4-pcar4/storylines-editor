import{a8 as c,c as l}from"./main-BrXQBr3M.js";import{R as m,V as g,T as p,S as y}from"./quantizationUtils-Cndke4AR-CpcVDbiy.js";function h(n,r,e,o,t){if(n==null)return null;const s=n.references("geometry")&&t?d(r,o,t):r,a=n.repurposeFeature(s);try{return n.evaluate({...e,$feature:a},n.services)}catch(i){return c.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",i),null}}const u=new Map;function d(n,r,e){const{transform:o,hasZ:t,hasM:s}=e;u.has(r)||u.set(r,f(r));const a=u.get(r)(n.geometry,o,t,s);return{...n,geometry:a}}function f(n){const r={};switch(n){case"esriGeometryPoint":return(e,o,t,s)=>y(o,r,e,t,s);case"esriGeometryPolygon":return(e,o,t,s)=>p(o,r,e,t,s);case"esriGeometryPolyline":return(e,o,t,s)=>g(o,r,e,t,s);case"esriGeometryMultipoint":return(e,o,t,s)=>m(o,r,e,t,s);default:return c.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l("mapview-arcade",`Unable to handle geometryType: ${n}`)),e=>e}}export{h as default};
