const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./layersLoader-JnzSqnBy-CSSDvsye.js","./main-BrXQBr3M.js","./main-BFPx82v4.css","./fetchService-Bp_4TwIU-DQ8ew91H.js","./loadUtils-qPQbuxA4-C1lFW5LP.js","./associatedFeatureServiceUtils-DCapzd9d-BBA68iME.js","./PortalItem-CJetnHeq-DARRzPZU.js","./jsonContext-D_JQG_uA-BzpGXUfv.js","./portalItemUtils-DsrxEt4W-DPSqOdgS.js","./projection-m8vi7Cxv-DG9zGNlV.js","./styleUtils-DbPBpaXg-DJNds7J4.js"])))=>i.map(i=>d[i]);
import{v as s,I as l,a1 as se,J as G,U as m,bN as J,t as u,z as j,Y as ne,S as me,bO as ge,ab as M,bP as be,bQ as Se,N as f,ak as ve,b9 as oe,bR as fe,bS as we,s as z,T as Ie,bT as Le,c as L,bU as Te,bV as Ee,aC as Oe,_ as Ge,H as Me,R as Ae,a8 as _e,G as S,A as je,l as A,bW as Pe,bX as Ce,an as q,Z,bM as Ne,b as Re,bY as Ue,bd as xe,bZ as x,O as b,b_ as Fe,b$ as $e}from"./main-BrXQBr3M.js";import{o as y}from"./layerContainerType-ChWdCT09-G5sdAsSy.js";import{S as De}from"./ElevationInfo-DkWlof50-Bezaxy73.js";import{j as K}from"./TimeExtent-gZaEUVeW-D2eGsof2.js";import P from"./PortalItem-CJetnHeq-DARRzPZU.js";import{R as We}from"./portalItemUtils-DsrxEt4W-DPSqOdgS.js";let Be=class le{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(x),this._values=new Map,this.multipleOriginsSupported=!0}clone(r){const e=new le,t=this._originStores[b.DEFAULTS];t&&t.forEach((i,n)=>{e.set(n,j(i),b.DEFAULTS)});for(let i=b.SERVICE;i<x;i++){const n=this._originStores[i];n&&n.forEach((o,p)=>{r&&r.has(p)||e.set(p,j(o),i)})}return e}get(r,e){const t=e===void 0?this._values:this._originStores[e];return t?t.get(r):void 0}keys(r){const e=r==null?this._values:this._originStores[r];return e?[...e.keys()]:[]}set(r,e,t=b.USER){let i=this._originStores[t];if(i||(i=new Map,this._originStores[t]=i),i.set(r,e),!this._values.has(r)||this._propertyOriginMap.get(r)<=t){const n=this._values.get(r);return this._values.set(r,e),this._propertyOriginMap.set(r,t),n!==e}return!1}delete(r,e=b.USER){const t=this._originStores[e];if(!t)return;const i=t.get(r);if(t.delete(r),this._values.has(r)&&this._propertyOriginMap.get(r)===e){this._values.delete(r);for(let n=e-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(r)){this._values.set(r,o.get(r)),this._propertyOriginMap.set(r,n);break}}}return i}has(r,e){const t=e===void 0?this._values:this._originStores[e];return!!t&&t.has(r)}revert(r,e){for(;e>0&&!this.has(r,e);)--e;const t=this._originStores[e],i=t?.get(r),n=this._values.get(r);return this._values.set(r,i),this._propertyOriginMap.set(r,e),n!==i}originOf(r){return this._propertyOriginMap.get(r)||b.DEFAULTS}forEach(r){this._values.forEach(r)}};const pe=a=>{let r=class extends a{constructor(...e){super(...e);const t=M(this),i=t.store,n=new Be;t.store=n,be(t,i,n)}read(e,t){Se(this,e,t)}getAtOrigin(e,t){const i=C(this),n=f(t);if(typeof e=="string")return i.get(e,n);const o={};return e.forEach(p=>{o[p]=i.get(p,n)}),o}originOf(e){return ve(this.originIdOf(e))}originIdOf(e){return C(this).originOf(e)}revert(e,t){const i=C(this),n=f(t),o=M(this);let p;p=typeof e=="string"?e==="*"?i.keys(n):[e]:e,p.forEach(d=>{o.invalidate(d),i.revert(d,n),o.commit(d)})}};return r=s([u("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function C(a){return M(a).store}let Y=class extends pe(oe){};Y=s([u("esri.core.ReadOnlyMultiOriginJSONSupport")],Y);const Ve=a=>{let r=class extends a{constructor(...e){super(...e)}clear(e,t="user"){return N(this).delete(e,f(t))}write(e,t){return Fe(this,e=e||{},t),e}setAtOrigin(e,t,i){M(this).setAtOrigin(e,t,f(i))}removeOrigin(e){const t=N(this),i=f(e),n=t.keys(i);for(const o of n)t.originOf(o)===i&&t.set(o,t.get(o,i),b.USER)}updateOrigin(e,t){const i=N(this),n=f(t),o=$e(this,e);for(let p=n+1;p<x;++p)i.delete(e,p);i.set(e,o,n)}toJSON(e){return this.write({},e)}};return r=s([u("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function N(a){return M(a).store}const ke=a=>{let r=class extends Ve(pe(a)){constructor(...e){super(...e)}};return r=s([u("esri.core.MultiOriginJSONSupport")],r),r};let X=class extends ke(oe){};X=s([u("esri.core.MultiOriginJSONSupport")],X);const Q={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},ee={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},te={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},He={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Q,"web-map/basemap":ee,"web-map/tables":te,"link-chart/operational-layers":{...Q,LinkChartLayer:!0},"link-chart/basemap":ee,"link-chart/tables":te,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let v=class extends ne{constructor(a){super(a),this.description=null,this.label=null,this.type=null}};s([l({type:String,json:{write:!0}})],v.prototype,"description",void 0),s([l({type:String,json:{write:!0}})],v.prototype,"label",void 0),s([l()],v.prototype,"type",void 0),v=s([u("esri.tables.elements.AttributeTableElement")],v);const w=v;var F;let T=F=class extends w{constructor(a){super(a),this.displayType="auto",this.type="attachment"}clone(){return new F({description:this.description,displayType:this.displayType,label:this.label})}};s([l({type:["auto"],json:{write:!0}})],T.prototype,"displayType",void 0),s([l({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=F=s([u("esri.tables.elements.AttributeTableAttachmentElement")],T);const re=T;var $;let E=$=class extends w{constructor(a){super(a),this.fieldName=null,this.type="field"}clone(){return new $({description:this.description,fieldName:this.fieldName,label:this.label})}};s([l({type:String,json:{write:!0}})],E.prototype,"fieldName",void 0),s([l({type:String,json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=$=s([u("esri.tables.elements.AttributeTableFieldElement")],E);const ie=E;var D;let O=D=class extends w{constructor(a){super(a),this.relationshipId=null,this.type="relationship"}clone(){return new D({description:this.description,label:this.label,relationshipId:this.relationshipId})}};s([l({type:Number,json:{write:!0}})],O.prototype,"relationshipId",void 0),s([l({type:["relationship"],json:{read:!1,write:!0}})],O.prototype,"type",void 0),O=D=s([u("esri.tables.elements.AttributeTableRelationshipElement")],O);const ae=O;function ye(a){return{typesWithGroup:{base:w,key:"type",typeMap:{attachment:re,field:ie,group:a,relationship:ae}},typesWithoutGroup:{base:w,key:"type",typeMap:{attachment:re,field:ie,relationship:ae}}}}function ue(a,r,e=!0){if(!a)return null;const t=e?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return a.filter(i=>t[i.type]).map(i=>t[i.type].fromJSON(i))}function ce(a,r,e=!0){if(!a)return null;const t=e?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return a.filter(i=>t[i.type]).map(i=>i.toJSON())}function de(a,r,e=!0){return a?a.map(t=>fe(e?r.typesWithGroup:r.typesWithoutGroup,t)):null}var W;let c=W=class extends w{constructor(a){super(a),this.elements=null,this.type="group"}castElements(a){return de(a,R,!1)}readElements(a,r){return ue(r.attributeTableElements,R,!1)}writeElements(a,r){r.attributeTableElements=ce(a,R,!1)}clone(){return new W({description:this.description,elements:j(this.elements),label:this.label})}};s([l({json:{write:!0}})],c.prototype,"elements",void 0),s([se("elements")],c.prototype,"castElements",null),s([G("elements",["attributeTableElements"])],c.prototype,"readElements",null),s([m("elements")],c.prototype,"writeElements",null),s([l({type:String,json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=W=s([u("esri.tables.elements.AttributeTableGroupElement")],c);const R=ye(c),Je=c;var B;const U=ye(Je);let h=B=class extends ne{constructor(a){super(a),this.elements=null,this.orderByFields=null}castElements(a){return de(a,U)}readElements(a,r){return ue(r.attributeTableElements,U)}writeElements(a,r){r.attributeTableElements=ce(a,U)}clone(){return new B({elements:j(this.elements),orderByFields:this.orderByFields})}};s([l({json:{write:!0}})],h.prototype,"elements",void 0),s([se("elements")],h.prototype,"castElements",null),s([G("elements",["attributeTableElements"])],h.prototype,"readElements",null),s([m("elements")],h.prototype,"writeElements",null),s([l({type:[Object],json:{write:!0}})],h.prototype,"orderByFields",void 0),h=B=s([u("esri.tables.AttributeTableTemplate")],h);const ze=h,tt={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:y}}},rt={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(a,r)=>!r.disablePopup},write:{enabled:!0,writer(a,r,e){r[e]=!a}}}},it={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:y}}},at={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:we}}},st={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:y}}},nt={value:null,type:De,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:y}}};function ot(a){return{type:a,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const he={write:{enabled:!0,layerContainerTypes:y},read:!0},V={type:Number,json:{origins:{"web-document":he,"portal-item":{write:{layerContainerTypes:y}}}}},lt={...V,json:{...V.json,origins:{"web-document":{...he,write:{enabled:!0,layerContainerTypes:y,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(a,r,e)=>e&&e.origin!=="service"||!r.drawingInfo||r.drawingInfo.transparency===void 0?r.layerDefinition?.drawingInfo&&r.layerDefinition.drawingInfo.transparency!==void 0?J(r.layerDefinition.drawingInfo.transparency):void 0:J(r.drawingInfo.transparency)}}},pt={type:z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(a,r)=>{const e=z.fromJSON(a);return r.spatialReference!=null&&typeof r.spatialReference=="object"&&(e.spatialReference=Ie.fromJSON(r.spatialReference)),e}}}},read:!1}},yt={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ut={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:y}}},ct={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:y}}},qe={json:{write:{ignoreOrigin:!0,layerContainerTypes:y},origins:{"web-map":{read:!1,write:!1}}}},dt={type:ze,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}},ht=a=>{let r=class extends a{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,i){return i?.portalItem?.type==="Group Layer"?void 0:e}writeListMode(e,t,i,n){(n&&n.layerContainerType==="ground"||e&&Le(this,i,{},n))&&(t[i]=e)}writeOperationalLayerType(e,t,i){e&&(t[i]=e)}writeTitle(e,t){t.title=e??"Layer"}readVisibilityTimeExtent(e){return e?K.fromArray(e):null}writeVisibilityTimeExtent(e,t,i,n){e&&n.layerContainerType!=="tables"&&(e.isEmpty?n?.messages&&n.messages.push(new L("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[i]=e.toArray())}read(e,t){t&&(t.layer=this),Te(this,e,i=>super.read(e,i),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const o=`${t.origin}/${t.layerContainerType||"operational-layers"}`;let p=!!He[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(p=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(p=!1),!p)return t.messages?.push(new L("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const i=super.write(e,{...t,layer:this}),n=!!t&&!!t.messages&&!!t.messages.filter(o=>o instanceof L&&o.name==="web-document-write:property-required").length;return Ee(i?.url)?(t?.messages?.push(new L("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:i}beforeSave(){}};return s([l({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),s([G("id",["id"])],r.prototype,"readId",null),s([l(qe)],r.prototype,"listMode",void 0),s([m("listMode")],r.prototype,"writeListMode",null),s([l({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:y,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),s([m("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),s([l(V)],r.prototype,"opacity",void 0),s([l({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),s([l({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),s([m("title"),m(["web-scene"],"title")],r.prototype,"writeTitle",null),s([l({type:K,json:{origins:{"web-scene":{write:{layerContainerTypes:y}}}}})],r.prototype,"visibilityTimeExtent",void 0),s([G("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),s([m(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[me,ge]]}})],r.prototype,"writeVisibilityTimeExtent",null),s([l({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:y}}})],r.prototype,"visible",void 0),r=s([u("esri.layers.mixins.OperationalLayer")],r),r},mt=a=>{let r=class extends a{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Oe(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new P({id:t.itemId,portal:i?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await Ge(()=>import("./layersLoader-JnzSqnBy-CSSDvsye.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url);return Me(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(i){throw Ae(i)||_e.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(t=>(S(t),!0)))}async setUserPrivileges(e,t){if(!je.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:i,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(i){S(i)}}async _fetchUserPrivileges(e,t){let i=this.portalItem;if(!e||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=!A?.findCredential(this.url),o=e===i.id;if(o&&i.portal.user)return this._getUserPrivileges(i,n);let p,d;if(o)p=i.portal.url;else try{p=await Pe(this.url,t)}catch(g){S(g)}if(!p||!Ce(p,i.portal.url))return this._fetchFallbackUserPrivileges(t);try{const g=t!=null?t.signal:null;d=await A?.getCredential(`${p}/sharing`,{prompt:!1,signal:g})}catch(g){S(g)}const I=!0,k=!1,H=!1;if(!d)return{features:{edit:I,fullEdit:k},content:{updateItem:H}};try{if(o?await i.reload():(i=new P({id:e,portal:{url:p}}),await i.load(t)),i.portal.user)return this._getUserPrivileges(i,n)}catch(g){S(g)}return{features:{edit:I,fullEdit:k},content:{updateItem:H}}}_getUserPrivileges(e,t){const i=We(e);return t&&(i.features.edit=!0),i}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(i){S(i)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?A?.findCredential(this.url):null;if(!t)return!0;const i=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=i,i?.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=A?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const n=`${i.owningSystemUrl}/sharing/rest`,o=q.getDefault();if(o&&o.loaded&&Z(o.restUrl)===Z(n))return o.user;const p=`${n}/community/self`,d=e!=null?e.signal:null,I=await Ne(Re(p,{authMode:"no-prompt",query:{f:"json"},signal:d}));return I.ok?Ue.fromJSON(I.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||q.getDefault());return i&&n&&!xe(n.restUrl,i.restUrl)?(t.messages&&t.messages.push(new L("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return s([l({type:P})],r.prototype,"portalItem",null),s([G("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),s([m("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),s([l({clonable:!1})],r.prototype,"resourceReferences",void 0),s([l({type:Boolean,readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),s([l({type:Boolean,readOnly:!0})],r.prototype,"userHasFullEditingPrivileges",void 0),s([l({type:Boolean,readOnly:!0})],r.prototype,"userHasUpdateItemPrivileges",void 0),r=s([u("esri.layers.mixins.PortalLayer")],r),r},_={credential:null,user:null};export{X as F,tt as K,it as Q,at as X,st as Y,nt as Z,yt as a,ut as b,ot as e,ze as h,ke as i,V as j,mt as l,qe as m,dt as n,ht as o,pt as r,ct as s,lt as t,rt as z};
