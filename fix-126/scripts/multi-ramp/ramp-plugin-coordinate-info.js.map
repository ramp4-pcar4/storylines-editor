{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../ramp-plugin-coordinate-info/dist/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","CoordinateInfo","e","default","this","urls","nts","utm","alti","decli","init","api","button","mapI","addPluginButton","translations","_RV","getCurrentLang","coordButtonLabel","onMenuItemClick","mapDiv","getAttributeNode","layers","identifyMode","panel","close","destroy","toggleActive","handler","document","createAttribute","setAttributeNode","unsubscribe","setMapCursor","isActive","removeAttributeNode","click","subscribe","clickHandler","xy","spatialReference","convertDDToDMS","y","x","Date","toISOString","substr","split","a","parseInt","push","Promise","$","ajax","url","cache","data","bbox","dataType","success","parseNTS","features","parseUtm","lat","lon","altitude","u","lat1","lon1","startYear","startMonth","startDay","resultFormat","parseDecli","result","error","all","then","generateOutput","toFixed","String","fromCharCode","template","replace","zone","outPt","nts250","nts50","magSection","magnetic","annChange","compass","panels","element","css","bottom","width","addClass","header","closeButton","title","body","open","length","properties","identifier","projectGeometry","declination","declnation_sv","coordSection","coordLat","coordLong","coordDecimal","coordDMS","utmSection","utmZone","utmEast","utmNorth","ntsSection","altiSection","magDate","magDecli","magChange","magDecliOut","magCompassOut","coordInfo"],"mappings":"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","file":"ramp-plugin-coordinate-info.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n \tvar sriHashes = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 425);\n","window.CoordinateInfo=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(1),i=function(){function t(){this.urls={nts:\"https://geogratis.gc.ca/services/delimitation/en/nts?\",utm:\"https://geogratis.gc.ca/services/delimitation/en/utmzone?\",alti:\"https://geogratis.gc.ca/services/elevation/cdem/altitude?\",decli:\"https://ngdc.noaa.gov/geomag-web/calculators/calculateDeclination?\"}}return t.prototype.init=function(e){this.api=e,this.button=this.api.mapI.addPluginButton(t.prototype.translations[this._RV.getCurrentLang()].coordButtonLabel,this.onMenuItemClick()),null!==this.api.mapDiv[0].getAttributeNode(\"coord-info-active\")&&(this.api.layers.identifyMode=\"none\",void 0!==this.panel&&(this.panel.close({destroy:!0}),this.panel=void 0),this.toggleActive())},t.prototype.onMenuItemClick=function(){var t,e=this;return function(){if(void 0===e.handler){t=e.toggleActive();var n=document.createAttribute(\"coord-info-active\");e.api.mapDiv[0].setAttributeNode(n)}else{e.handler.unsubscribe(),e.handler=void 0,e._RV.setMapCursor(\"\"),e.button.isActive=!1,e.api.layers.identifyMode=t;n=e.api.mapDiv[0].getAttributeNode(\"coord-info-active\");e.api.mapDiv[0].removeAttributeNode(n)}}},t.prototype.toggleActive=function(){var t=this;this.handler=this.api.click.subscribe((function(e){return t.clickHandler(e)})),this.button.isActive=!0,this._RV.setMapCursor(\"crosshair\");var e=this.api.layers.identifyMode;return this.api.layers.identifyMode=\"none\",e},t.prototype.clickHandler=function(t){var e=this,n=(this._RV.getCurrentLang(),t.xy);n.spatialReference=4326;var o=this._RV.convertDDToDMS(n.y,n.x),i=(new Date).toISOString().substr(0,10),r=i.split(\"-\"),a=parseInt(r[0]),s=parseInt(r[1]),c=parseInt(r[2]),l=[];l.push(new Promise((function(t){$.ajax({url:e.urls.nts,cache:!1,data:{bbox:n.x+\",\"+n.y+\",\"+n.x+\",\"+n.y},dataType:\"jsonp\",success:function(n){return t(e.parseNTS(n.features))}})}))),l.push(new Promise((function(t){$.ajax({url:e.urls.utm,cache:!1,data:{bbox:n.x+\",\"+n.y+\",\"+n.x+\",\"+n.y},dataType:\"jsonp\",success:function(o){return t(e.parseUtm(o.features,n))}})}))),l.push(new Promise((function(t){$.ajax({url:e.urls.alti,cache:!1,data:{lat:n.y,lon:n.x},dataType:\"jsonp\",success:function(e){return t(null!==e.altitude?e.altitude:0)}})})));var u={lat1:n.y,lon1:n.x,startYear:a,startMonth:s,startDay:c,resultFormat:\"json\"};l.push(new Promise((function(t){$.ajax({url:e.urls.decli,cache:!0,data:u,success:function(n){return t(e.parseDecli(n.result[0]))},error:function(){t(void 0)}})}))),Promise.all(l).then((function(t){e.generateOutput(t,n,o,i)}))},t.prototype.generateOutput=function(t,e,n,i){var r=e.y>0?\"\"+e.y.toFixed(6)+String.fromCharCode(176)+\" N\":\"\"+-e.y.toFixed(6)+String.fromCharCode(176)+\" S\",a=e.x>0?\"\"+e.x.toFixed(6)+String.fromCharCode(176)+\" E\":\"\"+-e.x.toFixed(6)+String.fromCharCode(176)+\" W\",s=o.template.replace(/{pt.y}/,r).replace(/{pt.x}/,a).replace(/{dms.y}/,n.y).replace(/{dms.x}/,n.x).replace(/{zone}/,t[1].zone).replace(/{outPt.x}/,t[1].outPt.x).replace(/{outPt.y}/,t[1].outPt.y).replace(/{nts250}/,t[0].nts250).replace(/{nts50}/,t[0].nts50).replace(/{elevation}/,t[2]);if(t[3]){var c=o.magSection.replace(/{date}/,i).replace(/{magnetic}/,t[3].magnetic).replace(/{annChange}/,t[3].annChange).replace(/{compass}/,t[3].compass);s=s.replace(/{magSection}/,c)}else s=s.replace(/{magSection}/,\"\");if(this.panel)this.panel.close();else{this.panel=this.api.panels.create(\"coord-info\"),this.panel.element.css({bottom:\"0em\",width:\"400px\"}),this.panel.element.addClass(\"mobile-fullscreen\");this.panel.header.closeButton;this.panel.header.title=\"plugins.coordInfo.coordButtonLabel\"}this.panel.body=s,this.panel.open()},t.prototype.parseNTS=function(t){return{nts250:t.length>0?t[0].properties.identifier+\"-\"+t[0].properties.name:\"\",nts50:t.length>1?t[1].properties.identifier+\"-\"+t[1].properties.name:\"\"}},t.prototype.parseUtm=function(t,e){if(0===t.length)return{zone:\"Error\",outPt:{x:\"-\",y:\"-\"}};var n=t[0].properties.identifier;n<10&&(n=\"0\"+n);var o=this._RV.projectGeometry(e,parseInt(\"326\"+n));return{zone:n,outPt:{x:o.x,y:o.y}}},t.prototype.parseDecli=function(t){var e=\"---\";if(null!==t.declination){var n=t.declination.toFixed(2);e=t.declination>0?\"\"+n+String.fromCharCode(176)+\" E\":\"\"+-n+String.fromCharCode(176)+\" W\"}var o=\"---\";if(null!==t.declnation_sv){n=t.declnation_sv.toFixed(2);o=t.declnation_sv>0?\"\"+n+String.fromCharCode(176)+\" E\":\"\"+-n+String.fromCharCode(176)+\" W\"}return{magnetic:e,annChange:o}},t}();e.default=i,i.prototype.translations={\"en-CA\":{coordButtonLabel:\"Coords Info\",title:\"Map location information\",coordSection:\"Geographic Coordinates\",coordLat:\"Latitude: \",coordLong:\"Longitude: \",coordDecimal:\"Degrees Decimal: \",coordDMS:\"Degrees Minutes Seconds (DMS): \",utmSection:\"UTM Coordinates\",utmZone:\"Zone: \",utmEast:\"Easting: \",utmNorth:\"Northing: \",ntsSection:\"NTS Mapsheet\",altiSection:\"Elevation\",magSection:\"Magnetic declination\",magDate:\"Date: \",magDecli:\"Magnetic declination (DD): \",magChange:\"Annual change (minutes/year): \",magDecliOut:\"-WARNING- Out of scope.\",magCompassOut:\"-WARNING- Compass erratic for this coordinate.\"},\"fr-CA\":{coordButtonLabel:\"Info coords\",title:\"Information de localisation sur la carte\",coordSection:\"Coordonnées géographiques\",coordLat:\"Latitude : \",coordLong:\"Longitude : \",coordDecimal:\"Degrés décimaux : \",coordDMS:\"Degrés minutes secondes (DMS) : \",utmSection:\"Coordonnées UTM\",utmZone:\"Zone : \",utmEast:\"Abscisse : \",utmNorth:\"Ordonnée : \",ntsSection:\"Carte du SNRC\",altiSection:\"Élévation\",magSection:\"Déclinaison magnétique\",magDate:\"Date : \",magDecli:\"Déclinaison magnétique (DD) : \",magChange:\"Changement annuel (minutes/année) : \",magDecliOut:\"-ATTENTION- Hors de portée.\",magCompassOut:\"-ATTENTION- Boussole peu fiable pour cette coordonnée.\"}},window.coordInfo=i},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.template=\"<div tabindex=\\\"-2\\\"><ul class=\\\"rv-list\\\">\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.coordSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordDecimal' | translate }}</div>\\n            <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordLat' | translate }}{pt.y}</div>\\n            <div>{{ 'plugins.coordInfo.coordLong' | translate }}{pt.x}</div>\\n            </div>\\n            <div>{{ 'plugins.coordInfo.coordDMS' | translate }}</div>\\n            <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.coordLat' | translate }}{dms.y}</div>\\n            <div>{{ 'plugins.coordInfo.coordLong' | translate}}{dms.x}</div>\\n            </div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.utmSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{{ 'plugins.coordInfo.utmZone' | translate }}{zone}</div>\\n            <div>{{ 'plugins.coordInfo.utmEast' | translate }}{outPt.x}</div>\\n            <div>{{ 'plugins.coordInfo.utmNorth' | translate }}{outPt.y}</div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.ntsSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">\\n            <div>{nts250}</div>\\n            <div>{nts50}</div>\\n        </div>\\n    </li>\\n    <li>\\n        <strong>{{ 'plugins.coordInfo.altiSection' | translate }}</strong>\\n        <div class=\\\"rv-subsection\\\">{elevation} m</div>\\n    </li>\\n    {magSection}\\n</ul></div>\",e.magSection=\"<li>\\n<strong>{{ 'plugins.coordInfo.magSection' | translate }}</strong>\\n<div class=\\\"rv-subsection\\\">\\n    <div>{{ 'plugins.coordInfo.magDate' | translate }}{date}</div>\\n    <div>{{ 'plugins.coordInfo.magDecli' | translate }}{magnetic}</div>\\n    <div>{{ 'plugins.coordInfo.magChange' | translate }}{annChange}</div>\\n</div>\\n</li>\"}]).default;"],"sourceRoot":""}