const O=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],N=["آ","أ","إ","ا"],X=["ﻵ","ﻷ","ﻹ","ﻻ"],uu=["ﻶ","ﻸ","ﻺ","ﻼ"],j=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],tu=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],ru=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],Fu=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],Eu=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],W=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],eu=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Z=["ء","ف"],nu=["غ","ي"],iu=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ou=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,n=1,T=2,C=3,u=4,D=5,I=6,t=7,U=8,l=9,m=10,h=11,F=12,Au=13,fu=14,su=15,Tu=16,hu=17,s=18,Bu=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],R=100,cu=[R+0,r,r,r,r,R+1,R+2,R+3,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,R+4,u,u,u,r,u,r,u,r,u,u,u,r,r,u,u,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,u,u,r,r,u,u,r,r,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,R+5,t,t,R+6,R+7],au=[[s,s,s,s,s,s,s,s,s,I,D,I,U,D,s,s,s,s,s,s,s,s,s,s,s,s,s,s,D,D,D,I,U,u,u,h,h,h,u,u,u,u,u,m,l,m,l,l,T,T,T,T,T,T,T,T,T,T,l,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,s,s,s,s,s,s,D,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,l,u,h,h,h,h,u,u,u,u,r,u,u,s,u,u,h,h,T,T,u,r,u,u,u,T,r,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,r,r,r,r,r,r,r,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,r,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,n,F,n,F,F,n,F,F,n,F,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,u,u,u,u,u,n,n,n,n,n,u,u,u,u,u,u,u,u,u,u,u],[C,C,C,C,u,u,u,u,t,h,h,t,l,t,u,u,F,F,F,F,F,F,F,F,F,F,F,t,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,C,C,C,C,C,C,C,C,C,C,h,C,C,t,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,C,u,F,F,F,F,F,F,t,t,F,F,u,F,F,F,F,t,t,T,T,T,T,T,T,T,T,T,T,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,t,t,F,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,F,F,F,F,F,F,F,F,F,F,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,F,F,F,F,F,F,F,F,F,n,n,u,u,u,u,n,u,u,u,u,u],[U,U,U,U,U,U,U,U,U,U,U,s,s,s,r,n,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,D,Au,fu,su,Tu,hu,l,h,h,h,h,h,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,l,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,U,s,s,s,s,s,u,u,u,u,u,s,s,s,s,s,s,T,r,u,u,T,T,T,T,T,T,m,m,u,u,u,r,T,T,T,T,T,T,T,T,T,T,m,m,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u],[r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,u,u,u,u,u,n,F,n,n,n,n,n,n,n,n,n,n,m,n,n,n,n,n,n,n,n,n,n,n,n,n,u,n,n,n,n,n,u,n,u,n,n,u,n,n,u,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,F,F,F,F,F,F,F,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,l,u,l,u,u,l,u,u,u,u,u,u,u,u,u,h,u,u,m,m,u,u,u,u,u,h,h,u,u,u,u,u,t,t,t,t,t,u,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,u,u,s],[u,u,u,h,h,h,u,u,u,u,u,m,l,m,l,l,T,T,T,T,T,T,T,T,T,T,l,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,u,u,u,u,u,u,u,u,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,u,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,r,r,r,u,u,r,r,r,u,u,u,h,h,u,u,u,h,h,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u]];class Pu{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(E,i,o){if(this.sourceToTarget=[],this.targetToSource=[],!E)return"";if(Vu(this.sourceToTarget,this.targetToSource,E.length),!this.checkParameters(i,o))return E;i=this.inputFormat,o=this.outputFormat;let A=E;const f=Ou,c=G(i.charAt(1)),B=G(o.charAt(1)),a=(i.charAt(0)==="I"?"L":i.charAt(0))+c,L=(o.charAt(0)==="I"?"L":o.charAt(0))+B,d=i.charAt(2)+o.charAt(2);f.defInFormat=a,f.defOutFormat=L,f.defSwap=d;const p=v(E,a,L,d,f);let S=!1;return o.charAt(1)==="R"?S=!0:o.charAt(1)!=="C"&&o.charAt(1)!=="D"||(S=this.checkContextual(p)==="rtl"),this.sourceToTarget=g,this.targetToSource=xu(this.sourceToTarget),P=this.targetToSource,A=i.charAt(3)===o.charAt(3)?p:o.charAt(3)==="S"?Cu(S,p):lu(p,S,!0),this.sourceToTarget=g,this.targetToSource=P,this.levels=y,A}_inputFormatSetter(E){if(!H.test(E))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=E}_outputFormatSetter(E){if(!H.test(E))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=E}checkParameters(E,i){return E?this._inputFormatSetter(E):E=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,E!==i}checkContextual(E){let i=k(E);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(E){return ku.test(E)}}function v(e,E,i,o,A){const f=Lu(e,{inFormat:E,outFormat:i,swap:o},A);if(f.inFormat===f.outFormat)return e;E=f.inFormat,i=f.outFormat,o=f.swap;const c=E.slice(0,1),B=E.slice(1,4),a=i.slice(0,1),L=i.slice(1,4);if(A.inFormat=E,A.outFormat=i,A.swap=o,c==="L"&&i==="VLTR"){if(B==="LTR")return A.dir=w,_(e,A);if(B==="RTL")return A.dir=V,_(e,A)}if(c==="V"&&a==="V")return A.dir=B==="RTL"?V:w,M(e,A);if(c==="L"&&i==="VRTL")return B==="LTR"?(A.dir=w,e=_(e,A)):(A.dir=V,e=_(e,A)),M(e);if(E==="VLTR"&&i==="LLTR")return A.dir=w,_(e,A);if(c==="V"&&a==="L"&&B!==L)return e=M(e),B==="RTL"?v(e,"LLTR","VLTR",o,A):v(e,"LRTL","VRTL",o,A);if(E==="VRTL"&&i==="LRTL")return v(e,"LRTL","VRTL",o,A);if(c==="L"&&a==="L"){const d=A.swap;return A.swap=d.slice(0,1)+"N",B==="RTL"?(A.dir=V,e=_(e,A),A.swap="N"+d.slice(1,3),A.dir=w,e=_(e,A)):(A.dir=w,e=_(e,A),A.swap="N"+d.slice(1,3),e=v(e,"VLTR","LRTL",A.swap,A)),e}return e}function Lu(e,E,i){if(E.inFormat===void 0&&(E.inFormat=i.defInFormat),E.outFormat===void 0&&(E.outFormat=i.defOutFormat),E.swap===void 0&&(E.swap=i.defSwap),E.inFormat===E.outFormat)return E;const o=E.inFormat.slice(0,1),A=E.outFormat.slice(0,1);let f,c=E.inFormat.slice(1,4),B=E.outFormat.slice(1,4);return c.charAt(0)==="C"&&(f=k(e),c=f==="ltr"||f==="rtl"?f.toUpperCase():E.inFormat.charAt(2)==="L"?"LTR":"RTL",E.inFormat=o+c),B.charAt(0)==="C"&&(f=k(e),f==="rtl"?B="RTL":f==="ltr"?(f=Uu(e),B=f.toUpperCase()):B=E.outFormat.charAt(2)==="L"?"LTR":"RTL",E.outFormat=A+B),E}function Cu(e,E,i){if(E.length===0)return"";e===void 0&&(e=!0);const o=(E=String(E)).split("");let A=0,f=1,c=o.length;e||(A=o.length-1,f=-1,c=1);const B=du(o,A,f,c);let a="";for(let L=0;L<o.length;L++)Du(B,B.length,L)>-1?(Q(P,L,!e,-1),g.splice(L,1)):a+=o[L];return a}function du(e,E,i,o,A){let f=0;const c=[];let B=0;for(let a=E;a*i<o;a+=i)if(K(e[a])||x(e[a])){if(e[a]==="ل"&&_u(e,a+i,i,o)){e[a]=vu(e[a+i],f===0?X:uu),a+=i,Nu(e,a,i,o),c[B]=a,B++,f=0;continue}const L=e[a];f===1?e[a]=$(e,a+i,i,o)?wu(e[a]):z(e[a],ru):$(e,a+i,i,o)===!0?e[a]=z(e[a],Eu):e[a]=z(e[a],tu),x(L)||(f=1),bu(L)===!0&&(f=0)}else f=0;return c}function k(e){const E=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return E?E[0]<="z"?"ltr":"rtl":""}function Uu(e){const E=e.split("");return E.reverse(),k(E.join(""))}function lu(e,E,i){if(e.length===0)return"";E===void 0&&(E=!0);let o="";const A=(e=String(e)).split("");for(let f=0;f<e.length;f++){let c=!1;if(A[f]>="ﹰ"&&A[f]<"\uFEFF"){const B=e.charCodeAt(f);A[f]>="ﻵ"&&A[f]<="ﻼ"?(E?(f>0&&i&&A[f-1]===" "?o=o.slice(0,-1)+"ل":(o+="ل",c=!0),o+=N[(B-65269)/2]):(o+=N[(B-65269)/2],o+="ل",f+1<e.length&&i&&A[f+1]===" "?f++:c=!0),c&&(Q(P,f,!0,1),g.splice(f,0,g[f]))):o+=eu[B-65136]}else o+=A[f]}return o}function _(e,E){const i=e.split(""),o=[];return J(i,o,E),mu(i,o,E),q(2,i,o,E),q(1,i,o,E),y=o,i.join("")}function J(e,E,i){const o=e.length,A=i.dir?ou:iu;let f=0,c=-1;const B=[],a=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let L=0;L<o;L++)B[L]=Ru(e[L]);for(let L=0;L<o;L++){const d=f,p=pu(e,B,a,L,i);a[L]=p,f=A[d][p];const S=240&f;f&=15;const Y=A[f][Iu];if(E[L]=Y,S>0)if(S===16){for(let b=c;b<L;b++)E[b]=1;c=-1}else c=-1;if(A[f][ju])c===-1&&(c=L);else if(c>-1){for(let b=c;b<L;b++)E[b]=Y;c=-1}B[L]===D&&(E[L]=0),i.hiLevel|=Y}i.hasUbatS&&gu(B,E,o,i)}function gu(e,E,i,o){for(let A=0;A<i;A++)if(e[A]===I){E[A]=o.dir;for(let f=A-1;f>=0&&e[f]===U;f--)E[f]=o.dir}}function mu(e,E,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let o=0;o<e.length;o++)E[o]===1&&(e[o]=Su(e[o]))}function Ru(e){const E=e.charCodeAt(0),i=cu[E>>8];return i<R?i:au[i-R][255&E]}function M(e,E){const i=e.split("");if(E){const o=[];J(i,o,E),y=o}return i.reverse(),g.reverse(),i.join("")}function Du(e,E,i){for(let o=0;o<E;o++)if(e[o]===i)return o;return-1}function K(e){for(let E=0;E<Z.length;E++)if(e>=Z[E]&&e<=nu[E])return!0;return!1}function $(e,E,i,o){for(;E*i<o&&x(e[E]);)E+=i;return!!(E*i<o&&K(e[E]))}function _u(e,E,i,o){for(;E*i<o&&x(e[E]);)E+=i;let A=" ";if(!(E*i<o))return!1;A=e[E];for(let f=0;f<N.length;f++)if(N[f]===A)return!0;return!1}function q(e,E,i,o){if(o.hiLevel<e)return;if(e===1&&o.dir===V&&!o.hasUbatB)return E.reverse(),void g.reverse();const A=E.length;let f,c,B,a,L,d=0;for(;d<A;){if(i[d]>=e){for(f=d+1;f<A&&i[f]>=e;)f++;for(c=d,B=f-1;c<B;c++,B--)a=E[c],E[c]=E[B],E[B]=a,L=g[c],g[c]=g[B],g[B]=L;d=f}d++}}function pu(e,E,i,o,A){const f=E[o];return{UBAT_L:()=>(A.lastArabic=!1,r),UBAT_R:()=>(A.lastArabic=!1,n),UBAT_ON:()=>u,UBAT_AN:()=>C,UBAT_EN:()=>A.lastArabic?C:T,UBAT_AL:()=>(A.lastArabic=!0,A.hasUbatAl=!0,n),UBAT_WS:()=>u,UBAT_CS:()=>{let c,B;return o<1||o+1>=E.length||(c=i[o-1])!==T&&c!==C||(B=E[o+1])!==T&&B!==C?u:(A.lastArabic&&(B=C),B===c?B:u)},UBAT_ES:()=>(o>0?i[o-1]:D)===T&&o+1<E.length&&E[o+1]===T?T:u,UBAT_ET:()=>{if(o>0&&i[o-1]===T)return T;if(A.lastArabic)return u;let c=o+1;const B=E.length;for(;c<B&&E[c]===h;)c++;return c<B&&E[c]===T?T:u},UBAT_NSM:()=>{if(A.inFormat==="VLTR"){const c=E.length;let B=o+1;for(;B<c&&E[B]===F;)B++;if(B<c){const a=e[o].charCodeAt(0),L=a>=1425&&a<=2303||a===64286,d=E[B];if(L&&(d===n||d===t))return n}}return o<1||E[o-1]===D?u:i[o-1]},UBAT_B:()=>(A.lastArabic=!0,A.hasUbatB=!0,A.dir),UBAT_S:()=>(A.hasUbatS=!0,u),UBAT_LRE:()=>(A.lastArabic=!1,u),UBAT_RLE:()=>(A.lastArabic=!1,u),UBAT_LRO:()=>(A.lastArabic=!1,u),UBAT_RLO:()=>(A.lastArabic=!1,u),UBAT_PDF:()=>(A.lastArabic=!1,u),UBAT_BN:()=>u}[Bu[f]]()}function Su(e){let E,i=0,o=O.length-1;for(;i<=o;)if(E=Math.floor((i+o)/2),e<O[E][0])o=E-1;else{if(!(e>O[E][0]))return O[E][1];i=E+1}return e}function bu(e){for(let E=0;E<W.length;E++)if(W[E]===e)return!0;return!1}function wu(e){for(let E=0;E<j.length;E++)if(e===j[E])return Fu[E];return e}function z(e,E){for(let i=0;i<j.length;i++)if(e===j[i])return E[i];return e}function x(e){return e>="ً"&&e<="ٕ"}function G(e){return e==="L"?"LTR":e==="R"?"RTL":e==="C"?"CLR":e==="D"?"CRL":""}function Nu(e,E,i,o){for(;E*i<o&&x(e[E]);)E+=i;return E*i<o&&(e[E]=" ",!0)}function vu(e,E){for(let i=0;i<N.length;i++)if(e===N[i])return E[i];return e}function Vu(e,E,i){g=[],y=[];for(let o=0;o<i;o++)e[o]=o,E[o]=o,g[o]=o}function xu(e){const E=new Array(e.length);for(let i=0;i<e.length;i++)E[e[i]]=i;return E}function Q(e,E,i,o){for(let A=0;A<e.length;A++)(e[A]>E||!i&&e[A]===E)&&(e[A]+=o)}let g=[],P=[],y=[];const Ou={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Iu=5,ju=6,w=0,V=1,H=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,ku=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Pu as d};
