import{o as a,H as m,M as T,j as f,w as c,O as p,N as b,c as l,K as y,P as A,Q as h,$ as g,R as x,J as D,S as F,T as O}from"./arcade-Dg73dEoh-IZ3O3KOw.js";import{a as d,r as s}from"./unitConversion-BXECx7w3-QDITrM1B.js";import{w as v}from"./shared-Y9GMqi1u-CK7BCoY2.js";import"./main-BonCaL_y.js";import"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import"./number-ZeBaww6r-jWuFX_rO.js";import"./TimeOnly-C3SOkmg2-WgWsYONB.js";import"./featureConversionUtils-DRaHTjrY-B6dx31Se.js";import"./OptimizedFeatureSet-D6mgsKNr-BRkOoX9E.js";import"./memoryEstimations-iHVpvWPf-BlZ912G2.js";import"./OptimizedGeometry-1qDYm3YK-D4QKD2d0.js";import"./FieldsIndex-Y7EBAYp0-P7MdU9TL.js";import"./timeZoneUtils-z3WjfjXQ-IaKhaoqk.js";import"./WhereClause-nZnXFKnG-BTGgXuF0.js";import"./uuid-Dj9mdEVg-BaKSCiyT.js";import"./Field-Cj6Pz3TI-6sXN3xsI.js";import"./fieldType-VTpxE-EM-DAmmhhQW.js";function w(i,t){return i&&i.domain?i.domain.type==="coded-value"||i.domain.type==="codedValue"?l.convertObjectToArcadeDictionary({type:"codedValue",name:i.domain.name,dataType:v[i.field.type],codedValues:i.domain.codedValues.map(e=>({name:e.name,code:e.code}))},y(t)):l.convertObjectToArcadeDictionary({type:"range",name:i.domain.name,dataType:v[i.field.type],min:i.domain.minValue,max:i.domain.maxValue},y(t)):null}function R(i){i.mode==="async"&&(i.functions.domain=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,2,3,t,e),m(n[0]))return w(T(n[0],f(n[1]),n[2]===void 0?void 0:n[2]),t);if(c(n[0]))return await n[0]._ensureLoaded(),w(p(f(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),t);throw new d(t,s.InvalidParameter,e)})},i.functions.subtypes=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,1,1,t,e),m(n[0])){const r=b(n[0]);return r?l.convertObjectToArcadeDictionary(r,y(t)):null}if(c(n[0])){await n[0]._ensureLoaded();const r=n[0].subtypeMetaData();return r?l.convertObjectToArcadeDictionary(r,y(t)):null}throw new d(t,s.InvalidParameter,e)})},i.functions.domainname=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,2,4,t,e),m(n[0]))return A(n[0],f(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(c(n[0])){await n[0]._ensureLoaded();const r=p(f(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return h(r,n[2])}throw new d(t,s.InvalidParameter,e)})},i.signatures.push({name:"domainname",min:2,max:4}),i.functions.domaincode=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,2,4,t,e),m(n[0]))return g(n[0],f(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(c(n[0])){await n[0]._ensureLoaded();const r=p(f(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return x(r,n[2])}throw new d(t,s.InvalidParameter,e)})},i.signatures.push({name:"domaincode",min:2,max:4}),i.functions.text=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,1,2,t,e),c(n[0])){const r=D(n[1],"");if(r==="")return n[0].castToText();if(r.toLowerCase()==="schema")return n[0].convertToText("schema",o.abortSignal);if(r.toLowerCase()==="featureset")return n[0].convertToText("featureset",o.abortSignal);throw new d(t,s.InvalidParameter,e)}return F(n[0],n[1])})},i.functions.gdbversion=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,1,1,t,e),m(n[0]))return n[0].gdbVersion();if(c(n[0]))return(await n[0].load()).gdbVersion;throw new d(t,s.InvalidParameter,e)})},i.functions.schema=function(t,e){return i.standardFunctionAsync(t,e,async(o,u,n)=>{if(a(n,1,1,t,e),c(n[0]))return await n[0].load(),l.convertObjectToArcadeDictionary(n[0].schema(),y(t));if(m(n[0])){const r=O(n[0]);return r?l.convertObjectToArcadeDictionary(r,y(t)):null}throw new d(t,s.InvalidParameter,e)})})}export{R as registerFunctions};
