import{im as h,io as S}from"./main-D8YsASU7.js";import{G,V as E,Z as y,s as P,B as T}from"./Point2D-CaHJVGk1-JqvJXjLr.js";import{c as v}from"./OperatorShapePreservingLength-CqNxsr-k-B_0MW1Sj.js";import{K as q,b as w,m as B,A as C,T as D,Z as I,q as X,C as L,D as Y,H as b}from"./ProjectionTransformation-DQ4GElxa-CCNi_kpp.js";import"./Envelope2D-DlBzXkgv-eKRxGysX.js";import"./Transformation2D-CXWnDKXs-CjsleQQw.js";import"./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js";import"./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js";class j{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,m){return!1}canAccelerateGeometry(t){return!1}execute(t,r,m,s){if(m===4)return new v().execute(t,r,s);if(r.getCoordinateSystemType()===0&&G(""),E(t),t.isEmpty()||t.getDimension()<1)return 0;const a=r.getGCS(),o=b();a.querySpheroidData(o);const c=o.majorSemiAxis,u=o.e2,g=a.getUnit().getUnitToBaseFactor();let e;const n=t.getGeometryType();if(n===y.enumPolygon?e=t.getBoundary():n===y.enumEnvelope?e=q(t):P(n)?(e=new w({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new B().execute(e,0,r.getTolerance(0),0,s)),a!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=C(e,r),n===y.enumPolyline&&e===t&&(e=t.clone());const d=new T;r.getPannableExtent().queryIntervalX(d);for(let l=0,f=e.getPointCount();l<f;l++){const p=e.getXY(l);p.x=D(p.x,d),e.setXY(l,p)}}const x=e.createInstance();e=I(i,e,x,s)?x:new X().execute(e,i,s)}return this._ExecuteMultiPathGeodeticLength(e,m,c,u,g)}_ExecuteMultiPathGeodeticLength(t,r,m,s,a){const o={stack:[],error:void 0,hasError:!1};try{const c=h(o,new L,!1);let u=0;const g=t.querySegmentIterator();for(;g.nextPath();)for(;g.hasNextSegment();){const e=g.nextSegment(),n=e.getStartXY(),i=e.getEndXY();n.scale(a),i.scale(a),Y.geodeticDistance(m,s,n.x,n.y,i.x,i.y,c,null,null,r),u+=c.val}return u}catch(c){o.error=c,o.hasError=!0}finally{S(o)}}}export{j as OperatorGeodeticLength};
