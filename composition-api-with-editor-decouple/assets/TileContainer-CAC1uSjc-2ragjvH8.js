import{an as n}from"./main-D8YsASU7.js";import{j as l}from"./enums-CQnCd4Rx-DsOji4hp.js";import{F as i,X as a,l as o}from"./WGLContainer-qQmF3DRB-CLTJ1xIa.js";const c=(t,e)=>t.key.level-e.key.level!==0?t.key.level-e.key.level:t.key.row-e.key.row!==0?t.key.row-e.key.row:t.key.col-e.key.col;class u extends i{constructor(e){super(),this.tileInfoView=e,this.sortFunction=c}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(e){const r=super.prepareRenderPasses(e);return r.push(e.registerRenderPass({name:"stencil",brushes:[a],drawPhase:l.DEBUG|l.MAP|l.HIGHLIGHT|l.LABEL,target:()=>this.getStencilTarget()})),n("esri-tiles-debug")&&r.push(e.registerRenderPass({name:"tileInfo",brushes:[o],drawPhase:l.DEBUG,target:()=>this.children})),r}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{u as h};
