const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lyr3DWorker-BAXzyQVJ-CXxADQ-9.js","./_commonjsHelpers-BITg13Vk-KnjfkSck.js"])))=>i.map(i=>d[i]);
import{_ as f,bn as d}from"./main-DJKotNeA.js";import{a as u}from"./ILyr3DWasmPerSceneView-ChV4bxX0-B4BXvxji.js";function m(){return new Promise(t=>f(()=>import("./lyr3DWorker-BAXzyQVJ-CXxADQ-9.js"),__vite__mapDeps([0,1]),import.meta.url).then(s=>s.l).then(({default:s})=>{const r=s({locateFile:h,onRuntimeInitialized:()=>t(r)})})).catch(t=>{throw t})}function h(t){return d(`esri/libs/lyr3d/${t}`)}let o,n;async function y(t){await _();const s={status:u.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(t.inputs.length<1)return{result:s,transferList:[]};const r={ptrs:[],sizes:[]};for(const e of t.inputs){const p=n._malloc(e.byteLength);new Uint8Array(n.HEAPU8.buffer,p,e.byteLength).set(new Uint8Array(e)),r.ptrs.push(p),r.sizes.push(e.byteLength)}const i=n.process(t.jobDescJson,t.id,r,t.isMissingResourceCase);s.status=i.status,s.missingInputUrls=i.missingInputUrls.slice();const l=i.status===u.Succeeded&&i.data,c=s.status===u.MissingInputs&&s.missingInputUrls.length>0;s.jobDescJson=i.jobDescJson.slice(),s.error=i.error.slice(),l?s.data=i.data.slice():c&&(s.originalInputs=t.inputs.slice());for(let e=0;e<r.ptrs.length;++e)n._free(r.ptrs[e]);const a=[];if(l)a.push(s.data.buffer);else if(c)for(const e of t.inputs)a.push(e);return{result:s,transferList:a}}function w(){n&&(n.uninitialize_lyr3d_worker_wasm(),n=null)}function _(){return n?Promise.resolve():(o||(o=m().then(t=>{n=t,n.initialize_lyr3d_worker_wasm(),o=null})),o)}export{w as destroyWasm,_ as initialize,y as process};
