(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t){},"012b":function(e,t,i){},"034f":function(e,t,i){"use strict";i("abba")},1:function(e,t,i){e.exports=i("cd49")},1921:function(e,t,i){"use strict";i("5e1d")},2208:function(e,t,i){"use strict";i("d932")},"30ce":function(e,t,i){},"38c8":function(e,t,i){},"3b76":function(e,t,i){"use strict";i("b3f9")},"3d6d":function(e,t){var i=[{key:"chapters.title",enValue:"Chapters",enValid:"1",frValue:"Chapitres",frValid:"1"},{key:"chapters.return",enValue:"Return to top",enValid:"1",frValue:"Retournez en haut",frValid:"1"},{key:"chapters.menu",enValue:"Toggle menu",enValid:"1",frValue:"Menu à bascule",frValid:"1"},{key:"scrollguard.desc",enValue:"Use ctrl + scroll to zoom the map",enValid:"1",frValue:"Utilisez les touches Ctrl et + pour faire un zoom de la carte",frValid:"1"},{key:"story.window.title",enValue:"RAMP Storylines",enValid:"1",frValue:"Scénarios de la PCAR",frValid:"1"},{key:"story.date",enValue:"Date modified:",enValid:"1",frValue:"Date de modification:",frValid:"1"},{key:"story.error",enValue:"An error occurred while loading this Storylines product. See developer console for more information.",enValid:"1",frValue:"Une erreur est survenue pendant le chargement ce scénarios produit. Voir la console du promoteur pour obtenir de plus amples renseignements.",frValid:"1"},{key:"image.fullscreen",enValue:"Full Screen",enValid:"1",frValue:"Plein Écran",frValid:"1"},{key:"dynamic.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"0"},{key:"dynamic.textSection",enValue:"Text Section",enValid:"1",frValue:"Section de texte",frValid:"1"},{key:"dynamic.panel.collection",enValue:"Panel Collection",enValid:"1",frValue:"Collection de panneaux",frValid:"1"},{key:"dynamic.panel.id",enValue:"Panel ID",enValid:"1",frValue:"No d’identification du panneau",frValid:"1"},{key:"dynamic.panel.type",enValue:"Panel Type",enValid:"1",frValue:"Type de panneaux",frValid:"1"},{key:"dynamic.panel.actions",enValue:"Panel Actions",enValid:"1",frValue:"Actions du panneau",frValid:"1"},{key:"dynamic.panel.idTaken",enValue:"Panel ID is already",enValid:"1",frValue:"Le nom du panneau est déjà utilisé",frValid:"1"},{key:"dynamic.panel.editor",enValue:"Panel Editor:",enValid:"1",frValue:"Éditeur de panneaux:",frValid:"1"},{key:"timeslider.expand",enValue:"Expand",enValid:"1",frValue:"Développer",frValid:"1"},{key:"timeslider.minimize",enValue:"Minimize",enValid:"1",frValue:"Réduire",frValid:"1"},{key:"timeslider.play",enValue:"Play",enValid:"1",frValue:"Lecture",frValid:"1"},{key:"timeslider.pause",enValue:"Pause",enValid:"1",frValue:"Pause",frValid:"1"},{key:"fullscreen.activate",enValue:"Enter Fullscreen",enValid:"1",frValue:"Afficher le mode plein écran",frValid:"1"},{key:"fullscreen.deactivate",enValue:"Exit Fullscreen",enValid:"1",frValue:"Quitter le mode plein écran",frValid:"1"},{key:"editor.feedback",enValue:"Send Us Feedback",enValid:"1",frValue:"Envoyez-nous vos commentaires",frValid:"0"},{key:"editor.feedback.subject",enValue:"Storylines Editor Feedback",enValid:"1",frValue:"Commentaires de l'éditeur de scénarios",frValid:"0"},{key:"editor.window.title",enValue:"RAMP Storylines Editor",enValid:"1",frValue:"Éditeur de scénarios de la PCAR",frValid:"1"},{key:"editor.createProduct",enValue:"Create New Storylines Product",enValid:"1",frValue:"Créer un nouveau produit de scénarios",frValid:"1"},{key:"editor.editProduct",enValue:"Edit Existing Storylines Product",enValid:"1",frValue:"Modifier un produit de scénarios",frValid:"1"},{key:"editor.editMetadata",enValue:"Edit Project Metadata",enValid:"1",frValue:"Modifier les métadonnées d’un projet",frValid:"1"},{key:"editor.productDetails",enValue:"Storylines product details",enValid:"1",frValue:"Détails du produit de scénarios",frValid:"1"},{key:"editor.metadata.instructions",enValue:'Fill in metadata details about your new Storylines product. Use the "Preview" button to see what your slides will look like.',enValid:"1",frValue:"Inscrivez les métadonnées de votre nouveau produit de scénario. Utilisez la fonction « Afficher l’aperçu » pour voir à quoi ressemblent vos diapositives.",frValid:"1"},{key:"editor.uuid",enValue:"UUID",enValid:"1",frValue:"UUID",frValid:"1"},{key:"editor.uuid.new",enValue:"New UUID",enValid:"1",frValue:"New UUID",frValid:"0"},{key:"editor.warning.uuid",enValue:"UUID already exists. Saving this will overwrite existing product.",enValid:"1",frValue:"L’IDUU existe déjà. Enregistrer ce produit écrasera le produit existant.",frValid:"1"},{key:"editor.warning.rename",enValue:"UUID already in use. Please choose a different ID.",enValid:"1",frValue:"UUID déjà utilisé. Veuillez choisir un autre identifiant.",frValid:"0"},{key:"editor.changeUuid",enValue:"Click here to change UUID",enValid:"1",frValue:"Click here to change UUID",frValid:"0"},{key:"editor.changingUuid",enValue:"You are changing this product UUID to {changeUuid}. Save changes required.",enValid:"1",frValue:"You are changing this product UUID to {changeUuid}. Save changes required.",frValid:"0"},{key:"editor.title",enValue:"Title",enValid:"1",frValue:"Titre",frValid:"1"},{key:"editor.logo",enValue:"Logo",enValid:"1",frValue:"Logo",frValid:"1"},{key:"editor.logoPreview",enValue:"Logo Preview",enValid:"1",frValue:"Aperçu du logo",frValid:"1"},{key:"editor.logoAltText",enValue:"Logo Alt Text",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.logoAltText.desc",enValue:"For accessibility purposes, provide description text for the logo.",enValid:"1",frValue:"Pour des raisons d'accessibilité, fournissez un texte descriptif pour le logo.",frValid:"0"},{key:"editor.contextLink",enValue:"Context Link",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.contextLink.info",enValue:"Context link shows up at the bottom of the page to provide additional resources for interested users.",enValid:"1",frValue:"Le lien contextuel apparaît au bas de la page et fournit des ressources supplémentaires aux utilisateurs intéressés.",frValid:"1"},{key:"editor.contextLabel",enValue:"Context Label",enValid:"1",frValue:"Étiquette de contexte",frValid:"1"},{key:"editor.contextLabel.info",enValue:"Context label shows up before the context link to explain what the link is for",enValid:"1",frValue:"L’étiquette de contexte apparaît avant le lien contextuel et explique à quoi sert le lien.",frValid:"1"},{key:"editor.dateModified",enValue:"Date Modified",enValid:"1",frValue:"Date de modification",frValid:"1"},{key:"editor.load",enValue:"Load",enValid:"1",frValue:"Charger",frValid:"1"},{key:"editor.loadPrevious",enValue:"Load Previous",enValid:"1",frValue:"[FR] Load Previous",frValid:"0"},{key:"editor.viewHistory",enValue:"View Previous",enValid:"1",frValue:"[FR] View Previous",frValid:"0"},{key:"editor.rename",enValue:"Rename",enValid:"1",frValue:"Rename",frValid:"0"},{key:"editor.browse",enValue:"Browse",enValid:"1",frValue:"Parcourir",frValid:"1"},{key:"editor.remove",enValue:"Remove",enValid:"1",frValue:"Supprimer",frValid:"1"},{key:"editor.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"1"},{key:"editor.next",enValue:"Next",enValid:"1",frValue:"Suivant",frValid:"1"},{key:"editor.preview",enValue:"Preview",enValid:"1",frValue:"Afficher l’aperçu",frValid:"1"},{key:"editor.confirm",enValue:"Confirm",enValid:"1",frValue:"Confirmer",frValid:"1"},{key:"editor.cancel",enValue:"Cancel",enValid:"1",frValue:"Annuler",frValid:"1"},{key:"editor.unsavedChanges",enValue:"Unsaved changes",enValid:"1",frValue:"Modifications non enregistrées",frValid:"1"},{key:"editor.saveChanges",enValue:"Save Changes",enValid:"1",frValue:"Enregistrer les modifications",frValid:"1"},{key:"editor.label.or",enValue:"or",enValid:"1",frValue:"ou",frValid:"1"},{key:"editor.label.browse",enValue:"browse",enValid:"1",frValue:"parcourir",frValid:"1"},{key:"editor.label.upload",enValue:"to upload",enValid:"1",frValue:"téléverser",frValid:"1"},{key:"editor.savingChanges",enValue:"Saving...",enValid:"1",frValue:"Enregistrement...",frValid:"1"},{key:"editor.confirmOverwrite",enValue:"Are you sure you want to overwrite product '{uuid}'?",enValid:"1",frValue:"Are you sure you want to overwrite product '{uuid}'?",frValid:"0"},{key:"editor.resetChanges",enValue:"Reset Changes",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.refreshChanges.modal",enValue:"Are you sure you want to reload the product? All unsaved changes will be lost.",enValid:"1",frValue:"Voulez-vous vraiment recharger ce produit? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.changeLang.modal",enValue:"Are you sure you want to switch languages? Unsaved changes may be lost.",enValid:"1",frValue:"Voulez-vous vraiment changer de langue? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.frenchConfig",enValue:"View French Config",enValid:"1",frValue:"Afficher la configuration en français",frValid:"1"},{key:"editor.englishConfig",enValue:"View English Config",enValid:"1",frValue:"Afficher la configuration en anglais",frValid:"1"},{key:"editor.returnToLanding",enValue:"Return to Landing",enValid:"1",frValue:"Retour à la page d’accueil",frValid:"1"},{key:"editor.image.delete",enValue:"Delete Image",enValid:"1",frValue:"Supprimer l'image",frValid:"1"},{key:"editor.image.label.drag",enValue:"Drag your images here",enValid:"1",frValue:"Faites glisser vos images ici",frValid:"1"},{key:"editor.image.label.caption",enValue:"Caption",enValid:"1",frValue:"Légende",frValid:"1"},{key:"editor.image.reorder",enValue:"Click and drag to reorder images",enValid:"1",frValue:"Cliquez sur les images et faites-les glisser pour changer l’ordre.",frValid:"1"},{key:"editor.image.altTag",enValue:"Alt tag",enValid:"1",frValue:"Texte de remplacement",frValid:"1"},{key:"editor.image.slideshowCaption",enValue:"Slideshow Caption",enValid:"1",frValue:"Légende du diaporama",frValid:"1"},{key:"editor.image.loadingError",enValue:"An error occurred when trying to load image",enValid:"1",frValue:"Une erreur est survenue lors du chargement de l’image.",frValid:"1"},{key:"editor.video.title",enValue:"Video Title",enValid:"1",frValue:"Titre de la vidéo",frValid:"1"},{key:"editor.video.label.drag",enValue:"Drag your video file here",enValid:"1",frValue:"Glissez votre fichier vidéo ici",frValid:"1"},{key:"editor.video.label.captions",enValue:"Video Captions",enValid:"1",frValue:"Sous-titres",frValid:"1"},{key:"editor.video.label.transcript",enValue:"Video Transcript",enValid:"1",frValue:"Transcription",frValid:"1"},{key:"editor.video.label.upload",enValue:"Upload",enValid:"1",frValue:"Télécharger",frValid:"1"},{key:"editor.video.delete",enValue:"Delete Video",enValid:"1",frValue:"Supprimer la vidéo",frValid:"1"},{key:"editor.video.pasteUrl",enValue:"Paste the URL to a video",enValid:"1",frValue:"Paste the URL to a video",frValid:"0"},{key:"editor.chart.delete",enValue:"Delete Chart",enValid:"1",frValue:"Supprimer le graphique",frValid:"1"},{key:"editor.chart.label.name",enValue:"Name",enValid:"1",frValue:"Nom",frValid:"1"},{key:"editor.chart.label.edit",enValue:"Edit",enValid:"1",frValue:"Éditer",frValid:"1"},{key:"editor.chart.label.empty",enValue:"Empty",enValid:"1",frValue:"Vide",frValid:"1"},{key:"editor.chart.label.create",enValue:"Add new chart",enValid:"1",frValue:"Ajouter un nouveau graphique",frValid:"1"},{key:"editor.chart.label.info",enValue:"Interactive chart",enValid:"1",frValue:"[FR] Interactive chart",frValid:"0"},{key:"editor.chart.label.nameExists",enValue:"There is already an existing chart with the name {name}.",enValid:"1",frValue:"There is already an existing chart with the name {name}.",frValid:"0"},{key:"editor.chart.label.info",enValue:"Interactive charts ({num})",enValid:"1",frValue:"Graphiques interactifs ({num})",frValid:"1"},{key:"editor.chart.delete.confirm",enValue:"Are you sure you want to delete the chart {name}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer le graphique {nom}?",frValid:"1"},{key:"editor.map.title",enValue:"Map title",enValid:"1",frValue:"Titre de la carte",frValid:"1"},{key:"editor.map.edit.cancel",enValue:"Cancel editing",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.map.edit",enValue:"Map editor",enValid:"1",frValue:"Éditeur de carte",frValid:"1"},{key:"editor.map.label.name",enValue:"Map config name",enValid:"1",frValue:"Nom de la configuration de la carte",frValid:"1"},{key:"editor.map.label.create",enValue:"Create New Configuration File",enValid:"1",frValue:"Créer un nouveau fichier de configuration",frValid:"1"},{key:"editor.map.label.edit",enValue:"Edit Map Configuration",enValid:"1",frValue:"Modifier la configuration de la carte",frValid:"1"},{key:"editor.map.scrollguard.enable",enValue:"Enable scrollguard",enValid:"1",frValue:"Activer le contrôle du défilement",frValid:"1"},{key:"editor.map.timeslider.enable",enValue:"Enable Time Slider:",enValid:"1",frValue:"Activer le curseur temporel:",frValid:"1"},{key:"editor.map.timeslider.edit",enValue:"Edit Time Slider Config",enValid:"1",frValue:"Modifier la configuration du curseur temporel",frValid:"1"},{key:"editor.map.timeslider.range",enValue:"Range:",enValid:"1",frValue:"Tranche:",frValid:"1"},{key:"editor.map.timeslider.start",enValue:"Start:",enValid:"1",frValue:"Début:",frValid:"1"},{key:"editor.map.timeslider.attribute",enValue:"Attribute:",enValid:"1",frValue:"Caractéristique:",frValid:"1"},{key:"editor.map.timeslider.layers",enValue:"(OPTIONAL) Comma separated Layer IDs:",enValid:"1",frValue:"(OPTIONAL) Comma separated Layer IDs:",frValid:"0"},{key:"editor.map.timeslider.to",enValue:"to",enValid:"1",frValue:"to",frValid:"0"},{key:"editor.map.timeslider.warning",enValue:"⚠️Warning! Please ensure that:",enValid:"1",frValue:"⚠️Avertissement! Veuillez vous assurer de ce qui suit:",frValid:"1"},{key:"editor.map.timeslider.warning.bullet1",enValue:"All range and start values are positive integers.",enValid:"1",frValue:"Toutes les valeurs de la tranche et du début sont des nombres entiers positifs.",frValid:"1"},{key:"editor.map.timeslider.warning.bullet2",enValue:'The "to" value is greater than or equal to the "from" value.',enValid:"1",frValue:"La valeur « À » est supérieure ou égale à la valeur « De ».",frValid:"1"},{key:"editor.map.timeslider.warning.end",enValue:"Otherwise, your time slider config cannot be saved.",enValid:"1",frValue:"Autrement",frValid:" la configuration du curseur temporel ne pourra pas être enregistrée."},{key:"editor.slideshow.label.info",enValue:"Slideshow items ({num})",enValid:"1",frValue:"[FR] Slideshow items ({num})",frValid:"0"},{key:"editor.slideshow.label.create",enValue:"Add new item",enValid:"1",frValue:"[FR] Add new item",frValid:"0"},{key:"editor.slideshow.label.edit",enValue:"Edit existing item",enValid:"1",frValue:"[FR] Edit existing item",frValid:"0"},{key:"editor.slideshow.label.type",enValue:"Type",enValid:"1",frValue:"[FR] Type",frValid:"0"},{key:"editor.slideshow.label.add",enValue:"Add",enValid:"1",frValue:"[FR] Add",frValid:"0"},{key:"editor.slides.title",enValue:"SLIDES",enValid:"1",frValue:"DIAPOSITIVES",frValid:"1"},{key:"editor.slides.addSlide",enValue:"New Slide",enValid:"1",frValue:"Nouvelle diapositive",frValid:"1"},{key:"editor.slides.copyFromLang",enValue:"Copy slides from the other language",enValid:"1",frValue:"Copier les diapositives de l’autre langue",frValid:"1"},{key:"editor.slides.deleteSlide.confirm",enValue:"Are you sure you want to delete the slide {title}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer la diapositive {titre}?",frValid:"1"},{key:"editor.slides.changeSlide.confirm",enValue:"Are you sure you want to change the slide {title}? All unsaved progress will be lost.",enValid:"1",frValue:"Voulez-vous vraiment modifier la diapositive {titre}? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.slides.makeFull",enValue:"Make the right panel the full slide",enValid:"1",frValue:"Mettre la diapositive complète dans le panneau de droite",frValid:"1"},{key:"editor.slides.centerPanel",enValue:"Center panel content",enValid:"1",frValue:"Contenu de la diapositive centrale",frValid:"0"},{key:"editor.slides.centerSlide",enValue:"Center slide content",enValid:"1",frValue:"Contenu du panneau central",frValid:"0"},{key:"editor.slides.copyAll",enValue:"Copy all",enValid:"1",frValue:"Copier tout",frValid:"1"},{key:"editor.slides.copy",enValue:"Copy",enValid:"1",frValue:"Copier",frValid:"1"},{key:"editor.slides.slide",enValue:"Slide",enValid:"1",frValue:"Diapositive",frValid:"1"},{key:"editor.slides.previousSlide",enValue:"Previous slide",enValid:"1",frValue:"Diapositive précédente",frValid:"1"},{key:"editor.slides.nextSlide",enValue:"Next slide",enValid:"1",frValue:"Diapositive suivante",frValid:"1"},{key:"editor.slides.leftPanel",enValue:"Left panel",enValid:"1",frValue:"Panneau de gauche",frValid:"1"},{key:"editor.slides.rightPanel",enValue:"Right panel",enValid:"1",frValue:"Panneau de droite",frValid:"1"},{key:"editor.slides.fullscreenPanel",enValue:"Fullscreen panel",enValid:"1",frValue:"Panneau plein écran",frValid:"1"},{key:"editor.slides.advanced",enValue:"Advanced",enValid:"1",frValue:"Avancé",frValid:"0"},{key:"editor.slides.contentType",enValue:"Content type",enValid:"1",frValue:"Type de contenu",frValid:"1"},{key:"editor.slides.content",enValue:"Content",enValid:"1",frValue:"Contenu",frValid:"1"},{key:"editor.slides.select",enValue:"Please select a slide to edit",enValid:"1",frValue:"Veuillez sélectionner une diapositive à modifier",frValid:"1"},{key:"editor.slides.panel.body",enValue:"Panel body",enValid:"1",frValue:"Corps du panneau",frValid:"1"},{key:"editor.slides.panel.title",enValue:"Panel title",enValid:"1",frValue:"Titre du panneau",frValid:"1"},{key:"editor.slides.intro",enValue:"Intro subtitle",enValid:"1",frValue:"Sous-titre de l’introduction",frValid:"1"},{key:"editor.slides.title",enValue:"Intro title",enValid:"1",frValue:"Titre de l’introduction",frValid:"1"},{key:"editor.tocOrientation",enValue:"Table of Contents Orientation",enValid:"1",frValue:"Orientation de la table des matières",frValid:"0"},{key:"editor.tocOrientation.info",enValue:"The table of contents orientation will be set to vertical in mobile view.",enValid:"1",frValue:"L'orientation de la table des matières sera définie sur verticale en vue mobile.",frValid:"0"},{key:"editor.tocOrientation.vertical",enValue:"Vertical",enValid:"1",frValue:"Vertical",frValid:"0"},{key:"editor.tocOrientation.horizontal",enValue:"Horizontal",enValid:"1",frValue:"Horizontal",frValid:"0"},{key:"editor.landing.greeting",enValue:"Hello",enValid:"1",frValue:"Bonjour",frValid:"1"}];i.columns=["key","enValue","enValid","frValue","frValid"],e.exports=i},4397:function(e,t,i){"use strict";i("30ce")},"480b":function(e,t,i){"use strict";i("012b")},"569f":function(e,t,i){},5896:function(e,t,i){"use strict";i("606e")},"5ada":function(e,t,i){"use strict";i("c62c")},"5e1d":function(e,t,i){},"5efc":function(e,t,i){"use strict";i("cb17")},"606e":function(e,t,i){},"63b8":function(e,t,i){},"72c3":function(e,t,i){"use strict";i("e593")},"87c9":function(e,t,i){},8846:function(e,t,i){"use strict";i("63b8")},"94db":function(e,t,i){"use strict";i("9bd2")},"9bd2":function(e,t,i){},"9c68":function(e,t,i){"use strict";i("d364")},"9f5c":function(e,t,i){"use strict";i("ef88")},a0ea:function(e){e.exports=JSON.parse('{"startingFixtures":["export","geosearch","overviewmap","basemap","legend","mapnav","help","appbar","help","grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"],"configs":{"en":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/en/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/en/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/en/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/en/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":"The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"The Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Simple","description":"Canada Base Map - Simple","altText":"Canada base map - Simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Elevation (CBME)","description":"The Canada Base Map - Elevation (CBME) web mapping services of the Earth Sciences Sector at Natural Resources Canada, is intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Elevation (CBME)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":" The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Imagery","description":"World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide.","altText":"World Imagery","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Physical Map","description":"This map presents the Natural Earth physical map at 1.24km per pixel for the world and 500m for the coterminous United States.","altText":"World Physical Map","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Shaded Relief","description":"This map portrays surface elevation as shaded relief. This map is used as a basemap layer to add shaded relief to other GIS maps, such as the ArcGIS Online World Street Map.","altText":"World Shaded Relief","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Street Map","description":"This worldwide street map presents highway-level data for the world.","altText":"ESWorld Street Map","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Terrain Base","description":"This map is designed to be used as a base map by GIS professionals to overlay other thematic layers such as demographics or land cover.","altText":"World Terrain Base","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Topographic Map","description":"This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone.","altText":"World Topographic Map","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}},"fr":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/fr/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/fr/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/fr/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/fr/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada – transport (CBCT) avec étiquettes","description":"La carte de base du Canada – transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada – transport (CBCT)","layers":[{"id":"CBCT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBCT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - simple","description":"La carte de base du Canada - simple","altText":"La carte de base du Canada - simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1},{"id":"SMW","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_TXT_3978/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - élevation (CBCE)","description":"La carte de base du Canada - élevation (CBCE) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - élevation (CBCE)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - transport (CBCT)","description":"La carte de base du Canada - transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - transport (CBCT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Imagerie mondiale","description":"L\'imagerie mondiale fournit une imagerie satellitaire et aérienne dans de nombreuses régions du monde avec une résolution de 1 mètres et moins et des images satellitaires de résolution inférieure dans le monde entier.","altText":"L\'imagerie mondiale","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde physique","description":"La carte du monde physique représente l\'aspect physique naturel de la Terre à 1.24 kilomètres par pixel pour le monde et à 500 mètres pour les États-Unis.","altText":"La carte du monde physique","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde en relief ombragé","description":"La carte du monde en relief ombragé représente l\'élévation de la surface de la terre comme un relief ombragé. Cette carte est utilisée comme couche de fond afin d\'ajouter un relief ombragé à d\'autres cartes SIG, comme la carte ArcGIS Online World Street Map.","altText":"La carte du monde en relief ombragé","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde routier","description":"La carte du monde routier présente des données au niveau des autoroutes pour le monde.","altText":"La carte du monde routier","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde terrain","description":"La carte du monde terrain est conçue pour être utilisée comme une carte de base par les professionnels du SIG pour superposer d\'autres couches thématiques comme la démographie ou la couverture terrestre.","altText":"La carte du monde terrain","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde topographique","description":"La carte du monde topographique est conçue pour être utilisé comme une carte de base par les professionnels du SIG et comme une carte de référence par quiconque.","altText":"La carte du monde topographique","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}}}}')},a828:function(e,t,i){"use strict";i("d1aa")},a928:function(e,t,i){"use strict";i("cdea")},abba:function(e,t,i){},b3f9:function(e,t,i){},b949:function(e,t,i){"use strict";i("e8ca")},bacc:function(e,t,i){},c62c:function(e,t,i){},c639:function(e,t,i){"use strict";i("bacc")},cb17:function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);var a=i("7a23");const l={id:"app",class:"storyramp-app bg-white"};function o(e,t,i,o,r,n){const s=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.$route.path}))])}var r=i("9ab4"),n=i("1b40"),s=i("be92");const c=Object(s["b"])("user",{state:()=>({userProfile:{}}),actions:{async fetchUserProfile(){const e="https://localhost:44371";try{const t=await fetch(e+"/api/user/profile",{method:"GET",credentials:"include"});if(t.ok){const e=await t.json();this.userProfile=e}else console.error("Failed to fetch the user profile.")}catch(t){console.error("Error fetching user profile: ",t)}}}});class d extends n["c"]{onRouteUpdate(e){var t;this.$i18n.locale=null!==(t=e.params.lang)&&void 0!==t?t:"en",e.params.lang&&(document.title=this.$t(e.meta.title))}mounted(){c(this.$pinia)}}Object(r["a"])([Object(n["d"])("$route",{immediate:!0})],d.prototype,"onRouteUpdate",null);i("a828");var u=i("6b0d"),m=i.n(u);const b=m()(d,[["render",o]]);var p=b,h=i("ce1f");h["b"].registerHooks(["beforeRouterEnter","beforeRouteLeave","beforeRouteUpdate"]);const g={class:"relative"},f={class:"absolute top-0 right-0 bg-white text-black p-2"},v={class:"flex justify-center"},O={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},j={class:"text-2xl font-bold"},y={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},V={class:"text-2xl font-bold"};function S(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",g,[Object(a["createElementVNode"])("div",f,Object(a["toDisplayString"])(e.$t("editor.landing.greeting"))+" "+Object(a["toDisplayString"])(e.userName)+"! ",1),Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",O,[Object(a["createVNode"])(n,{to:{name:"metadataNew"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",j,"+ "+Object(a["toDisplayString"])(e.$t("editor.createProduct")),1)]),_:1})]),Object(a["createElementVNode"])("div",y,[Object(a["createVNode"])(n,{to:{name:"metadataExisting"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",V,Object(a["toDisplayString"])(e.$t("editor.editProduct")),1)]),_:1})])])])}class C extends n["c"]{get userName(){const e=c();return e.userProfile.userName||"Guest"}}i("9c68");const E=m()(C,[["render",S]]);var w=E;const x={class:"editor-container"},k={class:"px-20 py-5"},N={class:"flex"},T={class:"flex flex-1 text-2xl font-bold mb-5"},_={class:"border py-5 w-5/6"},$={key:0,class:"flex flex-row items-center"},L={class:"editor-label"},I=["disabled"],B={key:0,class:"inline-flex align-middle mb-1"},M={key:1,class:"flex flex-row items-center"},D={class:"editor-label"},F={key:0,class:"text-red-500"},P={class:"relative w-1/3 inline-block"},U={class:"absolute z-10 w-full bg-white border border-gray-200 mt-1"},R=["onMousedown"],A={key:2,class:"inline-flex align-middle mb-1"},z={key:3,class:"ml-10"},W=["onClick"],H=["disabled"],q={key:0,class:"text-yellow-500 rounded p-1"},J=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),X=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m2.095 19.886 9.248-16.5c.133-.237.384-.384.657-.384.272 0 .524.147.656.384l9.248 16.5c.064.115.096.241.096.367 0 .385-.309.749-.752.749h-18.496c-.44 0-.752-.36-.752-.749 0-.126.031-.252.095-.367zm9.907-6.881c-.414 0-.75.336-.75.75v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5c0-.414-.336-.75-.75-.75zm-.002-3c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z","fill-rule":"nonzero"})])],-1),G={class:"align-center inline-block select-none text-sm"},Z=Object(a["createElementVNode"])("br",null,null,-1),Y={key:1,class:"text-yellow-500 rounded p-1"},Q=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),K=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m2.095 19.886 9.248-16.5c.133-.237.384-.384.657-.384.272 0 .524.147.656.384l9.248 16.5c.064.115.096.241.096.367 0 .385-.309.749-.752.749h-18.496c-.44 0-.752-.36-.752-.749 0-.126.031-.252.095-.367zm9.907-6.881c-.414 0-.75.336-.75.75v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5c0-.414-.336-.75-.75-.75zm-.002-3c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z","fill-rule":"nonzero"})])],-1),ee={class:"align-center inline-block select-none text-sm"},te=Object(a["createElementVNode"])("br",null,null,-1),ie={key:2,class:"p-1"},ae=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),le=Object(a["createElementVNode"])("br",null,null,-1),oe={class:"mb-4"},re={class:"editor-h3"},ne={class:"flex mt-8"},se={class:"ml-auto"},ce={class:"editor-button"},de=["onClick"],ue={slot:"header",class:"text-lg font-bold"},me={class:"w-full flex justify-end"};function be(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("metadata-content"),c=Object(a["resolveComponent"])("router-link"),d=Object(a["resolveComponent"])("confirmation-modal"),u=Object(a["resolveComponent"])("vue-final-modal"),m=Object(a["resolveComponent"])("editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",x,[e.loadEditor?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",k,[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("div",T,Object(a["toDisplayString"])(e.editExisting?e.$t("editor.editProduct"):e.$t("editor.createProduct")),1),Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=t=>e.swapLang())},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),1)]),Object(a["createElementVNode"])("div",_,[e.renaming?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$,[Object(a["createElementVNode"])("label",L,Object(a["toDisplayString"])(e.$t("editor.uuid.new"))+": ",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:Object(a["normalizeClass"])(["editor-input w-1/3 mt-0",{"input-error":e.error||!e.reqFields.uuid}]),type:"text",onInput:t[1]||(t[1]=t=>{e.error=!1,e.checkUuid(!0)}),"onUpdate:modelValue":t[2]||(t[2]=t=>e.changeUuid=t)},null,34),[[a["vModelText"],e.changeUuid]]),Object(a["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...t)=>e.renameProduct&&e.renameProduct(...t)),class:Object(a["normalizeClass"])(["editor-button bg-black text-white hover:bg-gray-800",{"input-error":e.error}]),disabled:0===e.changeUuid.length||e.checkingUuid||"rename"===e.warning},Object(a["toDisplayString"])(e.$t("editor.rename")),11,I),e.checkingUuid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",B,[Object(a["createVNode"])(n,{size:"24px",color:"#009cd1",class:"mx-2 my-auto"})])):Object(a["createCommentVNode"])("",!0)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",M,[Object(a["createElementVNode"])("label",D,["uuid"in e.reqFields?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",F,"*")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.uuid"))+": ",1)]),Object(a["createElementVNode"])("div",P,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:Object(a["normalizeClass"])(["editor-input w-full mt-0",{"input-error":e.error||!e.reqFields.uuid}]),type:"text",onInput:t[4]||(t[4]=t=>{e.error=!1,e.reqFields.uuid=!0,e.checkUuid()}),"onUpdate:modelValue":t[5]||(t[5]=t=>e.uuid=t),onFocus:t[6]||(t[6]=t=>e.showDropdown=!0),onBlur:t[7]||(t[7]=t=>e.showDropdown=!1)},null,34),[[a["vModelText"],e.uuid]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.getStorylines,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.uuid,onMousedown:Object(a["withModifiers"])(i=>e.selectUuid(t.uuid),["prevent"]),class:Object(a["normalizeClass"])(["p-2 hover:bg-gray-100 cursor-pointer",t.isUserStoryline?"bg-gray-200":""])},Object(a["toDisplayString"])(t.uuid),43,R))),128))])],512),[[a["vShow"],e.showDropdown]])]),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[8]||(t[8]=(...t)=>e.generateRemoteConfig&&e.generateRemoteConfig(...t)),class:Object(a["normalizeClass"])(["editor-button bg-black text-white hover:bg-gray-800",{"input-error":e.error}])},Object(a["toDisplayString"])(e.$t("editor.load")),3)):Object(a["createCommentVNode"])("",!0),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[9]||(t[9]=(...t)=>e.fetchHistory&&e.fetchHistory(...t)),class:Object(a["normalizeClass"])(["bg-black editor-button text-white hover:bg-gray-800",{"input-error":e.error}])},Object(a["toDisplayString"])(e.$t("editor.viewHistory")),3)):Object(a["createCommentVNode"])("",!0),"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,[Object(a["createVNode"])(n,{size:"24px",color:"#009cd1",class:"mx-2 my-auto"})])):Object(a["createCommentVNode"])("",!0),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",z,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.storylineHistory,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.id,onClick:i=>e.selectHistory(t),class:Object(a["normalizeClass"])(["p-2 cursor-pointer",{"bg-blue-200":e.selectedHistory&&t.id===e.selectedHistory.id}])},Object(a["toDisplayString"])(e.formatDate(t.created)),11,W))),128))]),Object(a["createElementVNode"])("button",{disabled:!e.selectedHistory||e.selectedHistory.storylineUUID!==e.uuid,class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[10]||(t[10]=t=>e.loadHistory())},Object(a["toDisplayString"])(e.$t("editor.loadPrevious")),9,H)])):Object(a["createCommentVNode"])("",!0)])),Object(a["createElementVNode"])("div",null,["none"!==e.warning?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",q,[J,X,Object(a["createElementVNode"])("span",G,Object(a["toDisplayString"])(e.$t("editor.warning."+e.warning)),1),Z])):Object(a["createCommentVNode"])("",!0),!e.renaming&&e.renamed?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Y,[Q,K,Object(a["createElementVNode"])("span",ee,Object(a["toDisplayString"])(e.$t("editor.changingUuid",{changeUuid:e.renamed})),1),te])):Object(a["createCommentVNode"])("",!0),e.editExisting&&"loaded"==e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",ie,[ae,Object(a["createElementVNode"])("button",{class:"align-center inline-block select-none text-sm",onClick:t[11]||(t[11]=t=>{e.renaming=!e.renaming,e.changeUuid="",e.warning="rename"==e.warning?"none":e.warning})},Object(a["toDisplayString"])(e.renaming?e.$t("editor.cancel"):e.$t("editor.changeUuid")),1)])):Object(a["createCommentVNode"])("",!0)])]),le,Object(a["createElementVNode"])("div",oe,[Object(a["createElementVNode"])("h3",re,Object(a["toDisplayString"])(e.$t("editor.productDetails")),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.$t("editor.metadata.instructions")),1)]),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"])]),Object(a["createElementVNode"])("div",ne,[e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[12]||(t[12]=t=>e.saveMetadata(!0)),class:"editor-button"},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",se,[Object(a["createVNode"])(c,{to:{name:"home"},target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",ce,Object(a["toDisplayString"])(e.$t("editor.back")),1)]),_:1}),Object(a["createElementVNode"])("button",{onClick:t[13]||(t[13]=t=>"none"===e.warning?e.continueToEditor():e.$vfm.open("confirm-uuid-overwrite")),class:"editor-button bg-black text-white"},Object(a["toDisplayString"])(e.$t("editor.next")),1),Object(a["createVNode"])(d,{name:"confirm-uuid-overwrite",message:e.$t("editor.confirmOverwrite",{uuid:e.uuid}),onOk:t[14]||(t[14]=t=>e.continueToEditor())},null,8,["message"])])])],64)),e.loadEditor&&"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(m,{key:1,configs:e.configs,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,metadata:e.metadata,slides:e.slides,configLang:e.configLang,saving:e.saving,unsavedChanges:e.unsavedChanges,onSaveChanges:e.generateConfig,onSaveStatus:e.updateSaveStatus,onRefreshConfig:e.refreshConfig,ref:"mainEditor"},{langModal:Object(a["withCtx"])(i=>[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:Object(a["withModifiers"])(t=>i.unsavedChanges?e.$vfm.open("change-lang"):e.swapLang(),["stop"])},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),9,de),Object(a["createVNode"])(d,{name:"change-lang",message:e.$t("editor.changeLang.modal"),onOk:t[15]||(t[15]=t=>e.swapLang())},null,8,["message"])]),metadataModal:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{modalId:"metadata-edit-modal","content-class":"flex flex-col max-h-full overflow-y-auto max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",ue,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"]),Object(a["createElementVNode"])("div",me,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[16]||(t[16]=t=>e.saveMetadata(!1))}," Done ")])]),_:1})]),_:1},8,["configs","configFileStructure","sourceCounts","metadata","slides","configLang","saving","unsavedChanges","onSaveChanges","onSaveStatus","onRefreshConfig"])):Object(a["createCommentVNode"])("",!0)])}var pe,he=i("ade3"),ge=(i("14d9"),i("88a7"),i("271a"),i("5494"),i("9d32"));(function(e){e["Text"]="text",e["Image"]="image",e["Map"]="map",e["Chart"]="chart",e["Video"]="video",e["Audio"]="audio",e["Slideshow"]="slideshow",e["Dynamic"]="dynamic",e["Loading"]="loading"})(pe||(pe={}));var fe=i("0a4f"),ve=i("2926"),Oe=i("327a");const je=e=>(Object(a["pushScopeId"])("data-v-51a5ce08"),e=e(),Object(a["popScopeId"])(),e),ye={class:"sticky top-20 h-auto self-start flex-grow m-5"},Ve={key:0},Se={class:"flex"},Ce={class:"flex flex-col w-full"},Ee=je(()=>Object(a["createElementVNode"])("label",{class:"editor-label"},"Slide title:",-1)),we={class:"flex"},xe=je(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),ke=["disabled"],Ne=["disabled"],Te={class:"flex mt-3"},_e={class:"mx-2 font-bold"},$e=["disabled"],Le={class:"mx-2 font-bold"},Ie=["disabled"],Be={class:"mx-2 font-bold"},Me=["disabled"],De=je(()=>Object(a["createElementVNode"])("br",null,null,-1)),Fe={key:0,class:"flex border-b border-black"},Pe=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span><span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span>',2),Ue={class:"align-middle inline-block pl-1"},Re=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span><span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span>',2),Ae={class:"align-middle inline-block pl-1"},ze={class:"align-middle inline-block pl-1"},We={key:1,class:"border-b border-black"},He=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span><span class="align-middle inline-block" data-v-51a5ce08><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-51a5ce08><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-51a5ce08></path></svg></span>',2),qe={class:"align-middle inline-block pl-1"},Je={class:"align-middle inline-block pl-1"},Xe={class:"flex mt-4"},Ge={class:"font-bold text-xl"},Ze=je(()=>Object(a["createElementVNode"])("span",{class:"ml-auto flex-grow"},null,-1)),Ye={key:0,class:"flex flex-col mr-8"},Qe={class:"editor-label text-left text-lg"},Ke=["value"],et=["value"],tt={key:1,class:"flex h-full mt-4 justify-center text-gray-600 text-xl"};function it(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("custom-editor"),s=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ye,[e.currentSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ve,[Object(a["createElementVNode"])("div",Se,[Object(a["createElementVNode"])("div",Ce,[Ee,Object(a["createElementVNode"])("div",we,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.currentSlide.title=t),placeholder:"Add a title",class:"editor-input w-2/3"},null,512),[[a["vModelText"],e.currentSlide.title]]),xe,Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex-1),["stop"])),disabled:0===e.slideIndex,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.previousSlide")),9,ke),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex+1),["stop"])),disabled:e.isLast,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.nextSlide")),9,Ne)]),Object(a["createElementVNode"])("div",Te,[Object(a["createElementVNode"])("span",_e,Object(a["toDisplayString"])(e.$t("editor.slides.makeFull")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[3]||(t[3]=t=>e.rightOnly=t),disabled:e.rightOnly&&"dynamic"===e.determineEditorType(e.currentSlide.panel[e.panelIndex]),onChange:t[4]||(t[4]=Object(a["withModifiers"])(t=>e.$vfm.open("right-only-"+e.slideIndex),["stop"]))},null,40,$e),[[a["vModelCheckbox"],e.rightOnly]]),Object(a["createElementVNode"])("span",Le,Object(a["toDisplayString"])(e.$t("editor.slides.centerSlide")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[5]||(t[5]=t=>e.centerSlide=t),disabled:e.centerPanel,onChange:t[6]||(t[6]=Object(a["withModifiers"])(t=>e.toggleCenterSlide(),["stop"]))},null,40,Ie),[[a["vModelCheckbox"],e.centerSlide]]),Object(a["createElementVNode"])("span",Be,Object(a["toDisplayString"])(e.$t("editor.slides.centerPanel")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[7]||(t[7]=t=>e.centerPanel=t),disabled:e.centerSlide,onChange:t[8]||(t[8]=Object(a["withModifiers"])(t=>e.toggleCenterPanel(),["stop"]))},null,40,Me),[[a["vModelCheckbox"],e.centerPanel]])])])]),De,2===e.currentSlide.panel.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Fe,[Object(a["createElementVNode"])("button",{onClick:t[9]||(t[9]=()=>{e.panelIndex=0,e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",0!=e.panelIndex||e.advancedEditorView?"border-white":"border-black"])},[Pe,Object(a["createElementVNode"])("span",Ue,Object(a["toDisplayString"])(e.$t("editor.slides.leftPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[10]||(t[10]=()=>{e.panelIndex=1,e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",1!=e.panelIndex||e.advancedEditorView?"border-white":"border-black"])},[Re,Object(a["createElementVNode"])("span",Ae,Object(a["toDisplayString"])(e.$t("editor.slides.rightPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[11]||(t[11]=()=>{e.advancedEditorView=!0,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-black":"border-white"])},[Object(a["createElementVNode"])("span",ze,Object(a["toDisplayString"])(e.$t("editor.slides.advanced")),1)],2)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",We,[Object(a["createElementVNode"])("button",{onClick:t[12]||(t[12]=()=>{e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-white":"border-black"])},[He,Object(a["createElementVNode"])("span",qe,Object(a["toDisplayString"])(e.$t("editor.slides.fullscreenPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[13]||(t[13]=()=>{e.advancedEditorView=!0,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-black":"border-white"])},[Object(a["createElementVNode"])("span",Je,Object(a["toDisplayString"])(e.$t("editor.slides.advanced")),1)],2)])),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",Xe,[Object(a["createElementVNode"])("span",Ge,Object(a["toDisplayString"])(e.$t("editor.slides.content"))+":",1),Ze,!e.advancedEditorView||e.rightOnly?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ye,[Object(a["createElementVNode"])("label",Qe,Object(a["toDisplayString"])(e.$t("editor.slides.contentType"))+":",1),Object(a["createElementVNode"])("select",{ref:"typeSelector",onInput:t[14]||(t[14]=t=>{e.$vfm.open("change-slide-"+e.slideIndex),e.newType=t.target.value}),value:e.determineEditorType(e.currentSlide.panel[e.panelIndex])},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors).filter(e=>"loading"!==e),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,et))),128))],40,Ke)])):Object(a["createCommentVNode"])("",!0)]),e.advancedEditorView?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0,ref:"editor",config:e.currentSlide,slideIndex:e.slideIndex,onSlideEdit:t[15]||(t[15]=t=>e.$emit("slide-edit")),onConfigEdited:t[16]||(t[16]=(t,i=!1)=>e.$emit("custom-slide-updated",t,i))},null,8,["config","slideIndex"])):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.currentSlide.panel[e.panelIndex])]),{ref:"editor",key:e.panelIndex+e.determineEditorType(e.currentSlide.panel[e.panelIndex]),panel:e.currentSlide.panel[e.panelIndex],configFileStructure:e.configFileStructure,lang:e.lang,uid:e.uid,sourceCounts:e.sourceCounts,centerSlide:e.centerSlide,dynamicSelected:e.dynamicSelected,onSlideEdit:t[17]||(t[17]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","uid","sourceCounts","centerSlide","dynamicSelected"]))])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",tt,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.slides.select")),1)])),Object(a["createVNode"])(s,{name:"change-slide-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[18]||(t[18]=t=>{e.changePanelType(e.determineEditorType(e.currentSlide.panel[e.panelIndex]),e.newType),e.toggleCenterPanel(),e.toggleCenterSlide()}),onCancel:e.cancelTypeChange},null,8,["name","message","onCancel"]),Object(a["createVNode"])(s,{name:"right-only-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[19]||(t[19]=t=>e.toggleRightOnly()),onCancel:t[20]||(t[20]=t=>e.rightOnly=!e.rightOnly)},null,8,["name","message"])])}const at={class:"block"},lt={class:"flex items-center"},ot={class:"font-bold px-4"},rt=["disabled"],nt={class:"flex items-center"},st=Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),ct={class:"px-2"},dt=Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1),ut={key:0,class:"m-4"},mt={class:"italic text-gray-400"},bt={class:"flex flex-wrap list-none"};function pt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ChartPreview"),s=Object(a["resolveComponent"])("draggable"),c=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",at,[Object(a["createElementVNode"])("div",lt,[Object(a["createElementVNode"])("span",ot,Object(a["toDisplayString"])(e.$t("editor.chart.label.info",{num:e.chartConfigs.length})),1),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:"modal-btn",onClick:t[0]||(t[0]=t=>e.clearEditor()),disabled:!e.allowMany&&e.chartConfigs.length>0},[Object(a["createElementVNode"])("div",nt,[st,Object(a["createElementVNode"])("span",ct,Object(a["toDisplayString"])(e.$t("editor.chart.label.create")),1)])],8,rt)]),dt,0===e.chartConfigs.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ut,[Object(a["createElementVNode"])("span",mt,Object(a["toDisplayString"])(e.$t("editor.chart.label.empty")),1)])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createElementVNode"])("ul",bt,[Object(a["createVNode"])(s,{modelValue:e.chartConfigs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.chartConfigs=t),handle:".handle",onUpdate:e.onChartsEdited,class:"w-full flex flex-wrap list-none","item-key":"name"},{item:Object(a["withCtx"])(({element:t,index:i})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${t.name}-${i}`,chart:t,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,lang:e.lang,onEdit:e.editChart,onDelete:a=>e.$vfm.open(`${t.name}-${i}`)},null,8,["chart","configFileStructure","sourceCounts","lang","onEdit","onDelete"]))]),_:1},8,["modelValue","onUpdate"])],512),[[a["vShow"],e.chartConfigs.length]]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.chartConfigs,(t,i)=>(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:`${t.name}-${i}`,name:`${t.name}-${i}`,message:e.$t("editor.chart.delete.confirm",{name:t.name}),onOk:i=>e.deleteChart(t)},null,8,["name","message","onOk"]))),128))])}const ht=e=>(Object(a["pushScopeId"])("data-v-d8aa8408"),e=e(),Object(a["popScopeId"])(),e),gt={class:"chart-item items-center mt-8 mx-5 overflow-hidden"},ft={class:"relative border-solid border-2 items-center justify-center text-center w-full"},vt=["content"],Ot=ht(()=>Object(a["createElementVNode"])("svg",{class:"absolute transform -translate-x-1/2 -translate-y-1/2",height:"22px",width:"22px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),jt=[Ot],yt=ht(()=>Object(a["createElementVNode"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full bottom-2 -right-1 p-0 z-10 handle"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M8,18 C9.1045695,18 10,18.8954305 10,20 C10,21.1045695 9.1045695,22 8,22 C6.8954305,22 6,21.1045695 6,20 C6,18.8954305 6.8954305,18 8,18 Z M16,18 C17.1045695,18 18,18.8954305 18,20 C18,21.1045695 17.1045695,22 16,22 C14.8954305,22 14,21.1045695 14,20 C14,18.8954305 14.8954305,18 16,18 Z M8,10 C9.1045695,10 10,10.8954305 10,12 C10,13.1045695 9.1045695,14 8,14 C6.8954305,14 6,13.1045695 6,12 C6,10.8954305 6.8954305,10 8,10 Z M16,10 C17.1045695,10 18,10.8954305 18,12 C18,13.1045695 17.1045695,14 16,14 C14.8954305,14 14,13.1045695 14,12 C14,10.8954305 14.8954305,10 16,10 Z M8,2 C9.1045695,2 10,2.8954305 10,4 C10,5.1045695 9.1045695,6 8,6 C6.8954305,6 6,5.1045695 6,4 C6,2.8954305 6.8954305,2 8,2 Z M16,2 C17.1045695,2 18,2.8954305 18,4 C18,5.1045695 17.1045695,6 16,6 C14.8954305,6 14,5.1045695 14,4 C14,2.8954305 14.8954305,2 16,2 Z"})])],-1)),Vt={class:"flex mt-4 items-center"},St={class:"editor-label name-label font-bold flex-2"},Ct={class:"font-normal"},Et=["id"],wt={class:"flex items-center"},xt=ht(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M 18 2 L 15.585938 4.4140625 L 19.585938 8.4140625 L 22 6 L 18 2 z M 14.076172 5.9238281 L 3 17 L 3 21 L 7 21 L 18.076172 9.9238281 L 14.076172 5.9238281 z"})],-1)),kt={class:"px-2"};function Nt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("storylines-chart"),s=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",gt,[Object(a["createElementVNode"])("div",ft,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-2 left-0 p-0 z-10 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.chart)),content:e.$t("editor.chart.delete")},jt,8,vt)),[[s,{placement:"top",hideOnClick:!1,animateFill:!0}]]),yt,e.loading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(n,{class:"w-full h-full",config:e.chartConfig,key:e.chartIdx,configFileStructure:e.configFileStructure,onLoaded:e.loadChart},null,8,["config","configFileStructure","onLoaded"]))]),Object(a["createElementVNode"])("div",Vt,[Object(a["createElementVNode"])("label",St,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.chart.label.name"))+": ",1),Object(a["createElementVNode"])("span",Ct,Object(a["toDisplayString"])(e.chartName),1)]),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:`edit-${e.chart.name}-btn`},[Object(a["createElementVNode"])("div",wt,[xt,Object(a["createElementVNode"])("span",kt,Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),1)])],8,Et)])])}class Tt extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"chart",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"loading",!0),Object(he["a"])(this,"chartIdx",0),Object(he["a"])(this,"chartConfig",{}),Object(he["a"])(this,"chartName",""),Object(he["a"])(this,"modalEditor",void 0)}mounted(){this.chartConfig=this.chart,this.chartName=this.chart.name||"",this.loading=!1}loadChart(e){var t;if(!this.modalEditor){if(this.modalEditor=highed.ModalEditor(`edit-${this.chartName}-btn`,{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"},defaultChartOptions:e},e=>{const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0&&t.title.text!=this.chart.name)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,config:t,src:""};this.$emit("edit",{oldChart:this.chart,newChart:e}),this.chartConfig=e,this.chartName=e.name,this.chartIdx+=1}}),void 0!==(null===(t=e.data)||void 0===t?void 0:t.csv)){const t=e.data.csv;this.modalEditor.editor.dataTable.loadCSV({csv:t})}else this.convertSeriesToCSV(e);this.modalEditor.editor.chart.options.setAll(e)}}convertSeriesToCSV(e){var t;if("pie"===(null===(t=e.chart)||void 0===t?void 0:t.type)){const t=null===e||void 0===e?void 0:e.series.data;if(t){var i;const a=[`${null===e||void 0===e?void 0:e.series.name};${null===e||void 0===e||null===(i=e.yAxis)||void 0===i?void 0:i.title.text}`,...t.map(e=>`${e.name};${e.y}`)];this.modalEditor.editor.dataTable.loadCSV({csv:a.join("\n")})}}else if(null!==e&&void 0!==e&&e.series&&null!==e&&void 0!==e&&e.series.length){let t=null===e||void 0===e?void 0:e.series.map(e=>[e.name,...e.data]);if(void 0!==e.xAxis){var a,l;const i=[null===(a=e.xAxis)||void 0===a||null===(a=a.title)||void 0===a?void 0:a.text].concat(null===(l=e.xAxis)||void 0===l?void 0:l.categories);t.unshift(i)}let i=t[0].map((e,i)=>t.map(e=>e[i]).join(";"));this.modalEditor.editor.dataTable.loadCSV({csv:i.join("\n")})}}}Object(r["a"])([Object(n["b"])()],Tt.prototype,"chart",void 0),Object(r["a"])([Object(n["b"])()],Tt.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Tt.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],Tt.prototype,"lang",void 0);i("2208");const _t=m()(Tt,[["render",Nt],["__scopeId","data-v-d8aa8408"]]);var $t=_t;const Lt={slot:"header",class:"text-lg font-bold"},It={class:"w-full flex justify-end"};function Bt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(n,{modalId:e.name,class:"flex justify-center items-center","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white dark:bg-gray-900 border dark:border-gray-700 rounded-lg space-y-2"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",Lt,Object(a["toDisplayString"])(e.message),1),Object(a["createElementVNode"])("div",It,[Object(a["createElementVNode"])("button",{class:"editor-button confirm-button hover:bg-gray-800",onClick:t[0]||(t[0]=Object(a["withModifiers"])((...t)=>e.onOk&&e.onOk(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.confirm")),1),Object(a["createElementVNode"])("button",{class:"editor-button cancel-button hover:bg-gray-100",onClick:t[1]||(t[1]=Object(a["withModifiers"])((...t)=>e.onCancel&&e.onCancel(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.cancel")),1)])]),_:1},8,["modalId"])}let Mt=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"message",void 0),Object(he["a"])(this,"name",void 0)}onOk(){this.$emit("ok"),this.$vfm.close(this.name)}onCancel(){this.$emit("Cancel"),this.$vfm.close(this.name)}};Object(r["a"])([Object(n["b"])()],Mt.prototype,"message",void 0),Object(r["a"])([Object(n["b"])()],Mt.prototype,"name",void 0),Mt=Object(r["a"])([Object(n["a"])({components:{"vue-final-modal":ve["a"]}})],Mt);var Dt=Mt;i("72c3");const Ft=m()(Dt,[["render",Bt],["__scopeId","data-v-468630e0"]]);var Pt=Ft,Ut=i("b76a"),Rt=i.n(Ut);let At=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"allowMany",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"edited",!1),Object(he["a"])(this,"chartConfigs",[]),Object(he["a"])(this,"modalEditor",{})}mounted(){highed.ready(()=>{this.modalEditor=highed.ModalEditor("modal-btn",{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"}},e=>{this.createNewChart(e.toString())})});const e=this.panel.type===pe.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];if(this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles+="text-align: left;";else if(!this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles=(e[t].customStyles||"").replace("text-align: left;","");void 0!==e&&e.length&&(this.chartConfigs=e.map(e=>{let t="";if(e.options&&e.options.title)t=e.options.title;else{const i=e.src.match(/.*\/(.*)$/);t=i?i[1].replace(/\.[^/.]+$/,"").replace(/\./g," "):e.src}return{name:t,...e}}))}clearEditor(){let e={title:{text:"Chart "+(this.chartConfigs.length+1)},subtitle:{text:""},credits:{enabled:!1}};e="en"===this.lang?Object.assign({},e,{lang:{thousandsSep:","}}):Object.assign({},e,{lang:{thousandsSep:" "}}),this.modalEditor.editor.chart.options.setAll(e);const t='"Column 1";"Column 2"\n" "";" "';this.modalEditor.editor.dataTable.loadCSV({csv:t})}createNewChart(e){const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,src:i};this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1,this.configFileStructure.charts[this.lang].file(t.title.text+".json",JSON.stringify(t,null,4)),this.chartConfigs.push(e)}this.onChartsEdited()}editChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.oldChart.name);if(-1!==t){const i=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.oldChart.name}.json`;this.sourceCounts[i]-=1,0===this.sourceCounts[i]&&this.configFileStructure.charts[this.lang].remove(e.oldChart.name+".json");const a=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`;this.sourceCounts[a]?this.sourceCounts[a]+=1:this.sourceCounts[a]=1,this.configFileStructure.charts[this.lang].file(e.newChart.name+".json",JSON.stringify(e.newChart.config,null,4)),e.newChart.src=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`,this.chartConfigs[t]={name:e.newChart.name,src:e.newChart.src}}this.onChartsEdited()}deleteChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.name);-1!==t&&(this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]-=1,0===this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]&&this.configFileStructure.charts[this.lang].remove(e.name+".json"),this.chartConfigs.splice(t,1)),this.onChartsEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.chartConfigs.length)this.panel.type=pe.Chart,this.panel.src="";else if(1===this.chartConfigs.length){this.panel.type=pe.Chart;const e=this.chartConfigs[0];Object.keys(e).forEach(t=>{this.panel[t]=e[t]})}else this.panel.type=pe.Slideshow,this.panel.items=this.chartConfigs.map(e=>({...e,type:pe.Chart}));this.edited=!1}onChartsEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],At.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],At.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],At.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],At.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],At.prototype,"allowMany",void 0),Object(r["a"])([Object(n["b"])({default:!1})],At.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],At.prototype,"dynamicSelected",void 0),At=Object(r["a"])([Object(n["a"])({components:{ChartPreview:$t,"confirmation-modal":Pt,draggable:Rt.a}})],At);var zt=At;i("8846");const Wt=m()(zt,[["render",pt]]);var Ht=Wt;const qt={class:"mt-4"};function Jt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("json-editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",qt,[Object(a["createVNode"])(n,{modelValue:e.updatedConfig,"onUpdate:modelValue":t[0]||(t[0]=t=>e.updatedConfig=t),lang:"en",mode:"text","show-btns":!0,expandedOnStart:!0,onJsonChange:t[1]||(t[1]=t=>{e.updatedConfig=t,e.edited=!0,e.$emit("slide-edit")}),onJsonSave:e.onJsonSave},null,8,["modelValue","onJsonSave"])])}var Xt=i("c45b");let Gt=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"config",void 0),Object(he["a"])(this,"slideIndex",void 0),Object(he["a"])(this,"schemaUrl","./StorylinesSlideSchema.json"),Object(he["a"])(this,"updatedConfig",""),Object(he["a"])(this,"edited",!1),Object(he["a"])(this,"jsonValidator",i("a41b").Validator),Object(he["a"])(this,"validator",new this.jsonValidator),Object(he["a"])(this,"storylinesSchema","")}mounted(){fetch(this.schemaUrl).then(e=>{e.json().then(e=>{this.storylinesSchema=e},e=>{console.error(e)})}),this.updatedConfig=this.config}onJsonSave(){const e=this.validator.validate(this.updatedConfig,this.storylinesSchema);e.valid?this.$emit("config-edited",this.updatedConfig,!0):(alert("Attempted to save a custom config that violates the Storylines schema."),console.error(e.errors))}saveChanges(){this.$emit("config-edited",this.updatedConfig),this.edited=!1}};Object(r["a"])([Object(n["b"])()],Gt.prototype,"config",void 0),Object(r["a"])([Object(n["b"])()],Gt.prototype,"slideIndex",void 0),Gt=Object(r["a"])([Object(n["a"])({components:{"json-editor":Xt["a"]}})],Gt);var Zt=Gt;i("5896");const Yt=m()(Zt,[["render",Jt],["__scopeId","data-v-30135c04"]]);var Qt=Yt;const Kt=e=>(Object(a["pushScopeId"])("data-v-4ee6d780"),e=e(),Object(a["popScopeId"])(),e),ei={class:"block"},ti={class:"editor-label flex drag-label cursor-pointer"},ii=Kt(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M14 9l-2.519 4-2.481-1.96-5 6.96h16l-6-9zm8-5v16h-20v-16h20zm2-2h-24v20h24v-20zm-20 6c0-1.104.896-2 2-2s2 .896 2 2c0 1.105-.896 2-2 2s-2-.895-2-2z"})])],-1)),ai={class:"align-middle inline-block"},li={class:"text-blue-400 font-bold"},oi=["multiple"],ri={key:1,class:"flex justify-center"},ni={class:"flex mt-4 items-center w-full text-left"},si={class:"editor-label text-label"},ci=["onUpdate:modelValue"],di={class:"flex mt-4 items-center w-full text-left"},ui={class:"editor-label text-label"},mi=["onUpdate:modelValue"],bi={class:"flex items-center w-full text-left"},pi={class:"editor-label text-label"};function hi(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ImagePreview"),s=Object(a["resolveComponent"])("draggable");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ei,[e.allowMany||!e.allowMany&&0===e.imagePreviews.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(["upload-image flex items-center justify-center m-5 p-12 bg-blue-100 border-4 border-dashed border-blue-300",{dragging:e.isDragging}]),onDragover:t[1]||(t[1]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[2]||(t[2]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.dropImages(t),["prevent"]))},[Object(a["createElementVNode"])("label",ti,[ii,Object(a["createElementVNode"])("span",ai,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.image.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",li,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{type:"file",class:"cursor-pointer",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t)),multiple:!!e.allowMany},null,40,oi)])])],34)):Object(a["createCommentVNode"])("",!0),e.allowMany||!e.allowMany&&0===e.imagePreviews.length?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("span",ri,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.image.reorder")),1)],512)),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])(s,{modelValue:e.imagePreviews,"onUpdate:modelValue":t[6]||(t[6]=t=>e.imagePreviews=t),class:"flex flex-wrap list-none border my-4",onUpdate:e.onImagesEdited,"item-key":"id"},{item:Object(a["withCtx"])(({element:i,index:l})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${i.id}-${l}`,imageFile:i,onDelete:e.deleteImage},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",ni,[Object(a["createElementVNode"])("label",si,Object(a["toDisplayString"])(e.$t("editor.image.altTag"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.altText=e,onChange:t[4]||(t[4]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,ci),[[a["vModelText"],i.altText]])]),Object(a["createElementVNode"])("div",di,[Object(a["createElementVNode"])("label",ui,Object(a["toDisplayString"])(e.$t("editor.image.label.caption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.caption=e,onChange:t[5]||(t[5]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,mi),[[a["vModelText"],i.caption]])])]),_:2},1032,["imageFile","onDelete"]))]),_:1},8,["modelValue","onUpdate"]),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",bi,[Object(a["createElementVNode"])("label",pi,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-3/5",type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.slideshowCaption=t),onChange:t[8]||(t[8]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,544),[[a["vModelText"],e.slideshowCaption]])],512),[[a["vShow"],e.imagePreviews.length>1]])])}const gi=e=>(Object(a["pushScopeId"])("data-v-1c58f06c"),e=e(),Object(a["popScopeId"])(),e),fi={class:"image-item items-center my-8 mx-4 overflow-hidden"},vi={class:"relative items-center justify-center text-center w-full grabbable"},Oi=["content"],ji=gi(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),yi=[ji],Vi={class:"flex-grow image-container"},Si=["title","src","alt"];function Ci(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",fi,[Object(a["createElementVNode"])("div",vi,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.imageFile)),content:e.$t("editor.image.delete")},yi,8,Oi)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",Vi,[Object(a["createElementVNode"])("img",{class:"image-file object-cover",title:e.imageFile.id,src:e.imageFile.src,alt:e.imageFile.altText},null,8,Si)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}class Ei extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"imageFile",void 0)}}Object(r["a"])([Object(n["b"])()],Ei.prototype,"imageFile",void 0);i("eae8");const wi=m()(Ei,[["render",Ci],["__scopeId","data-v-1c58f06c"]]);var xi=wi;let ki=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"allowMany",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"dragging",!1),Object(he["a"])(this,"edited",!1),Object(he["a"])(this,"imagePreviewsLoading",!1),Object(he["a"])(this,"imagePreviewPromises",[]),Object(he["a"])(this,"imagePreviews",[]),Object(he["a"])(this,"slideshowCaption","")}get isDragging(){return this.dragging}mounted(){const e=this.panel.type===pe.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];if(this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles+="text-align: left;";else if(!this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles=(e[t].customStyles||"").replace("text-align: left;","");void 0!==e&&e.length&&(this.imagePreviewsLoading=!0,e.map(e=>{const t=""+e.src.substring(e.src.indexOf("/")+1),i=e.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&this.imagePreviewPromises.push(a.async("blob").then(t=>({...e,id:i||e.src,src:URL.createObjectURL(t)})))}),Promise.all(this.imagePreviewPromises).then(e=>{this.imagePreviews=e,this.imagePreviewsLoading=!1}),this.slideshowCaption=this.panel.caption)}onFileChange(e){const t=Array.from(e.target.files);this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.onImagesEdited()}dropImages(e){if(null!==e.dataTransfer){let t=[...e.dataTransfer.files];this.allowMany||(t=[t[0]]),this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.dragging=!1}this.onImagesEdited()}deleteImage(e){const t=this.imagePreviews.findIndex(t=>t.id===e.id);if(-1!==t){const e=`${this.configFileStructure.uuid}/assets/${this.lang}/${this.imagePreviews[t].id}`;this.sourceCounts[e]-=1,0===this.sourceCounts[e]&&(this.configFileStructure.assets[this.lang].remove(this.imagePreviews[t].id),URL.revokeObjectURL(this.imagePreviews[t].src)),this.imagePreviews.splice(t,1)}this.onImagesEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.imagePreviews.length)this.panel.type=pe.Image,this.panel.src="";else if(1===this.imagePreviews.length){this.panel.type=pe.Image;const e=this.imagePreviews[0];Object.keys(e).forEach(t=>{"id"!==t&&(this.panel[t]=e[t])}),this.panel.src=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`}else{var e;this.panel.type=pe.Slideshow,this.panel.caption=null!==(e=this.slideshowCaption)&&void 0!==e?e:void 0,this.panel.items=this.imagePreviews.map(e=>({...e,src:`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`,type:pe.Image}))}this.edited=!1}onImagesEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],ki.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],ki.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],ki.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],ki.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],ki.prototype,"allowMany",void 0),Object(r["a"])([Object(n["b"])({default:!1})],ki.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],ki.prototype,"dynamicSelected",void 0),ki=Object(r["a"])([Object(n["a"])({components:{ImagePreview:xi,draggable:Rt.a}})],ki);var Ni=ki;i("4397");const Ti=m()(Ni,[["render",hi],["__scopeId","data-v-4ee6d780"]]);var _i=Ti;const $i={class:"flex flex-col mt-4"},Li={class:"editor-label text-left"},Ii={class:"editor-label text-left mt-2"};function Bi(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("v-md-editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$i,[Object(a["createElementVNode"])("label",Li,Object(a["toDisplayString"])(e.$t("editor.slides.panel.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("label",Ii,Object(a["toDisplayString"])(e.$t("editor.slides.panel.body"))+":",1),Object(a["createVNode"])(n,{modelValue:e.panel.content,"onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.content=t),height:"400px","left-toolbar":"undo redo clear | h bold italic strikethrough quote subsuper | ul ol table hr | addLink image code | save",toolbar:e.toolbar},null,8,["modelValue","toolbar"])])}class Mi extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"toolbar",{subsuper:{title:"Superscript/Subscript",text:"T",menus:[{name:"Superscript",text:"Superscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sup>${t}</sup>`,selected:e}})}},{name:"Subscript",text:"Subscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sub>${t}</sub>`,selected:e}})}}]},addLink:{title:"Insert Link",icon:"v-md-icon-link",menus:[{name:"Add External Link (New Tab)",text:"Add External Link (New Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`[${t}](http://)`,selected:e}})}},{name:"Add External Link (Same Tab)",text:"Add External Link (Same Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`<a href='http://' target='_self'>${t}</a>`,selected:e}})}},{name:"Add Dynamic Link",text:"Add Dynamic Link",action(e){e.insert(e=>{const t=e||"";return{text:`<a panel='panel-id-here'>${t}</a>`,selected:e}})}}]}})}mounted(){this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;",""))}}Object(r["a"])([Object(n["b"])()],Mi.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Mi.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Mi.prototype,"dynamicSelected",void 0);i("9f5c");const Di=m()(Mi,[["render",Bi],["__scopeId","data-v-37b76b8f"]]);var Fi=Di;const Pi=e=>(Object(a["pushScopeId"])("data-v-62693dea"),e=e(),Object(a["popScopeId"])(),e),Ui={class:"flex flex-col"},Ri={class:"editor-label text-left"},Ai={class:"editor-label mt-6"},zi=Pi(()=>Object(a["createElementVNode"])("span",{class:"mx-4"},null,-1)),Wi=Pi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Hi={key:1,class:"mb-4"},qi={class:"ramp-editor mt-5",ref:"editor",style:{width:"70vw",height:"80vh"}},Ji={slot:"header",class:"text-lg font-bold"},Xi={class:"w-full flex justify-end"},Gi=["disabled"];function Zi(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("time-slider-editor"),s=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ui,[Object(a["createElementVNode"])("label",Ri,Object(a["toDisplayString"])(e.$t("editor.map.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",Ai,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.enable")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"checkbox",onChange:t[1]||(t[1]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.usingTimeSlider=t)},null,544),[[a["vModelCheckbox"],e.usingTimeSlider]]),zi,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[3]||(t[3]=t=>e.$vfm.open("time-slider-edit-modal")),class:"editor-button bg-black text-white hover:bg-gray-800 mt-3"},Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1)):Object(a["createCommentVNode"])("",!0),Wi,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Hi)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",qi,null,512)]),Object(a["createVNode"])(s,{modalId:"time-slider-edit-modal","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",Ji,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1),Object(a["createVNode"])(n,{config:e.timeSliderConf,error:e.timeSliderError,onTimeSliderChanged:e.onTimeSliderInput},null,8,["config","error","onTimeSliderChanged"]),Object(a["createElementVNode"])("div",Xi,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["editor-button",e.timeSliderError?"":"bg-black text-white hover:bg-gray-800"]),disabled:e.timeSliderError,onClick:t[4]||(t[4]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t))}," Done ",10,Gi)])]),_:1})])}var Yi=i("a0ea");const Qi=e=>(Object(a["pushScopeId"])("data-v-98eacf1c"),e=e(),Object(a["popScopeId"])(),e),Ki={class:"px-5"},ea={class:"flex items-center"},ta={class:"editor-label"},ia=["value"],aa={class:"mx-3"},la=["value"],oa=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ra={class:"flex items-center"},na={class:"editor-label"},sa=["value"],ca={class:"mx-3"},da=["value"],ua=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ma={key:0,class:"border-black border-2 p-3 w-2/3"},ba={class:"editor-label w-full"},pa=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ha={class:"list-disc my-2 ml-8"},ga={key:1},fa={class:"editor-label"},va=["value"],Oa=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ja={class:"editor-label"},ya=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Va=["value"],Sa=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Ca=Qi(()=>Object(a["createElementVNode"])("br",null,null,-1));function Ea(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ki,[Object(a["createElementVNode"])("div",ea,[Object(a["createElementVNode"])("label",ta,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.range")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[0],onInput:t[0]||(t[0]=t=>e.$emit("time-slider-changed","range",0,t.target.value))},null,40,ia),Object(a["createElementVNode"])("span",aa,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[1],onInput:t[1]||(t[1]=t=>e.$emit("time-slider-changed","range",1,t.target.value))},null,40,la)]),oa,Object(a["createElementVNode"])("div",ra,[Object(a["createElementVNode"])("label",na,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.start")),1),Object(a["createElementVNode"])("input",{class:"editor-input ml-3",type:"number",value:e.config.start[0],onInput:t[2]||(t[2]=t=>e.$emit("time-slider-changed","start",0,t.target.value))},null,40,sa),Object(a["createElementVNode"])("span",ca,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.start[1],onInput:t[3]||(t[3]=t=>e.$emit("time-slider-changed","start",1,t.target.value))},null,40,da)]),ua,e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ma,[Object(a["createElementVNode"])("label",ba,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning")),1),pa,Object(a["createElementVNode"])("ul",ha,[Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet1")),1),Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet2")),1)]),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.end")),1)])):Object(a["createCommentVNode"])("",!0),e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("br",ga)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",fa,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.attribute")),1),Object(a["createElementVNode"])("input",{class:"editor-input",value:e.config.attribute,onInput:t[4]||(t[4]=t=>e.$emit("time-slider-changed","attribute",void 0,t.target.value))},null,40,va)]),Oa,Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",ja,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.layers")),1),ya,Object(a["createElementVNode"])("input",{class:"editor-input w-full",value:e.config.layers||"",onInput:t[5]||(t[5]=t=>e.$emit("time-slider-changed","layers",void 0,t.target.value))},null,40,Va)]),Sa,Ca])}class wa extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"config",void 0),Object(he["a"])(this,"error",void 0)}}Object(r["a"])([Object(n["b"])()],wa.prototype,"config",void 0),Object(r["a"])([Object(n["b"])()],wa.prototype,"error",void 0);i("b949");const xa=m()(wa,[["render",Ea],["__scopeId","data-v-98eacf1c"]]);var ka=xa,Na=i("ce19");i("fb28");let Ta=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"rampEditorApi",""),Object(he["a"])(this,"newFileName",""),Object(he["a"])(this,"usingTimeSlider",!1),Object(he["a"])(this,"timeSliderError",!1),Object(he["a"])(this,"timeSliderConf",{range:[],start:[],attribute:""}),Object(he["a"])(this,"status","default"),Object(he["a"])(this,"strippedFileName","")}mounted(){var e,t,i,a,l,o;this.usingTimeSlider=!!this.panel.timeSlider,this.status=""!==this.panel.config?"default":"creating",this.strippedFileName=""!==this.panel.config?this.panel.config.split("/")[2].split(".")[0]:"",this.timeSliderConf=JSON.parse(JSON.stringify({range:null!==(e=null===(t=this.panel.timeSlider)||void 0===t?void 0:t.range)&&void 0!==e?e:[1e3,(new Date).getFullYear()],start:null!==(i=null===(a=this.panel.timeSlider)||void 0===a?void 0:a.start)&&void 0!==i?i:[1e3,(new Date).getFullYear()],attribute:null!==(l=null===(o=this.panel.timeSlider)||void 0===o?void 0:o.attribute)&&void 0!==l?l:""})),window.addEventListener("ramp4-config-edited",this.onConfigEdit),this.validateTimeSlider(),"creating"===this.status&&this.createNewConfig(),this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;","")),this.openEditor()}beforeDestroy(){window.removeEventListener("ramp4-config-edited",this.onConfigEdit)}createNewConfig(){this.panel.config=`${this.configFileStructure.uuid}/ramp-config/${this.configFileStructure.uuid}-map-${this.getNumberOfMaps()+1}.json`,this.strippedFileName=this.panel.config.split("/")[2].split(".")[0],this.sourceCounts[this.panel.config]?this.sourceCounts[this.panel.config]+=1:this.sourceCounts[this.panel.config]=1,this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(Yi,null,4)),this.status="default"}openEditor(){if(""!==this.panel.config&&(this.status="editing",this.panel.config)){const e=""+this.panel.config.substring(this.panel.config.indexOf("/")+1),t=this.configFileStructure.zip.file(e);t?t.async("string").then(e=>{const t=JSON.parse(e);this.rampEditorApi=Object(Na["a"])(this.$refs.editor,t)}):fetch(this.panel.config).then(e=>{e.json().then(e=>{let t=JSON.stringify(e);const i=JSON.parse(t);this.rampEditorApi=Object(Na["a"])(this.$refs.editor,i)})})}}saveTimeSlider(){this.timeSliderError&&this.usingTimeSlider||(this.panel.timeSlider=this.usingTimeSlider?this.timeSliderConf:void 0),this.$emit("slide-edit"),this.$vfm.close("time-slider-edit-modal")}saveChanges(){this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(this.rampEditorApi.getConfig(),null,4))}onConfigEdit(){this.$emit("slide-edit")}onTimeSliderInput(e,t,i){"layers"===e?i&&""!==i?this.timeSliderConf["layers"]=i.split(",").map(e=>e.trim()):delete this.timeSliderConf["layers"]:"attribute"===e?this.timeSliderConf[e]=i:this.timeSliderConf[e][t]=Number(i),this.validateTimeSlider()}validateTimeSlider(){this.timeSliderError=this.timeSliderConf.range.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.start.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.range[1]<this.timeSliderConf.range[0]||this.timeSliderConf.start[1]<this.timeSliderConf.start[0]}getNumberOfMaps(){let e=0;return this.configFileStructure.rampConfig.forEach(t=>{e+=1}),e}};Object(r["a"])([Object(n["b"])()],Ta.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Ta.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Ta.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Ta.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Ta.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Ta.prototype,"dynamicSelected",void 0),Ta=Object(r["a"])([Object(n["a"])({components:{"time-slider-editor":ka,"vue-final-modal":ve["a"]}})],Ta);var _a=Ta;i("c639");const $a=m()(_a,[["render",Zi],["__scopeId","data-v-62693dea"]]);var La=$a;const Ia=e=>(Object(a["pushScopeId"])("data-v-33605cfc"),e=e(),Object(a["popScopeId"])(),e),Ba={class:"block"},Ma={class:"flex mt-4 items-center w-full text-left"},Da={class:"editor-label text-label"},Fa={class:"flex editor-label drag-label cursor-pointer"},Pa=Ia(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 -2 30 30"},[Object(a["createElementVNode"])("path",{d:"M599,692 C597.896,692 597,692.896 597,694 L597,698 L575,698 L575,694 C575,692.896 574.104,692 573,692 C571.896,692 571,692.896 571,694 L571,701 C571,701.479 571.521,702 572,702 L600,702 C600.604,702 601,701.542 601,701 L601,694 C601,692.896 600.104,692 599,692 L599,692 Z M582,684 L584,684 L584,693 C584,694.104 584.896,695 586,695 C587.104,695 588,694.104 588,693 L588,684 L590,684 C590.704,684 591.326,684.095 591.719,683.7 C592.11,683.307 592.11,682.668 591.719,682.274 L586.776,676.283 C586.566,676.073 586.289,675.983 586.016,675.998 C585.742,675.983 585.465,676.073 585.256,676.283 L580.313,682.274 C579.921,682.668 579.921,683.307 580.313,683.7 C580.705,684.095 581.608,684 582,684 L582,684 Z",transform:"translate(-571.000000, -676.000000)"})])],-1)),Ua={class:"align-middle inline-block"},Ra={class:"text-blue-400 font-bold"},Aa={class:"flex mt-4 items-center w-full text-left"},za={class:"editor-label text-label"},Wa={key:1,ref:"videoUrl",class:"editor-input w-3/5",type:"search"};function Ha(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("VideoPreview");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ba,[Object(a["createElementVNode"])("div",Ma,[Object(a["createElementVNode"])("label",Da,Object(a["toDisplayString"])(e.$t("editor.video.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-3/5",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.videoPreview.title=t),onChange:t[1]||(t[1]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t))},null,544),[[a["vModelText"],e.videoPreview.title]])]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["upload-video flex justify-center text-center m-5 p-12 bg-gray-100 border-4 border-dashed border-gray-300",{dragging:e.isDragging}]),onDragover:t[3]||(t[3]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[4]||(t[4]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[5]||(t[5]=Object(a["withModifiers"])(t=>e.dropVideo(t),["prevent"]))},[Object(a["createElementVNode"])("label",Fa,[Pa,Object(a["createElementVNode"])("span",Ua,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.video.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",Ra,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{ref:"videoFileInput",type:"file",class:"cursor-pointer",onChange:t[2]||(t[2]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544)])])],34),Object(a["createElementVNode"])("div",Aa,[Object(a["createElementVNode"])("label",za,Object(a["toDisplayString"])(e.$t("editor.label.or")+" "+e.$t("editor.video.pasteUrl"))+":",1),"local"!==e.videoPreview.videoType?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",{key:0,ref:"videoUrl",class:"editor-input w-3/5",type:"search","onUpdate:modelValue":t[6]||(t[6]=t=>e.videoPreview.src=t)},null,512)),[[a["vModelText"],e.videoPreview.src]]):(Object(a["openBlock"])(),Object(a["createElementBlock"])("input",Wa,null,512)),Object(a["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...t)=>e.uploadVideoUrl&&e.uploadVideoUrl(...t)),class:"editor-button bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.video.label.upload")),1)]),e.videoPreviewLoading||0===Object.keys(e.videoPreview).length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:"flex flex-wrap justify-center list-none border my-4",onUpdate:t[8]||(t[8]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t)),"item-key":"id"},[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:""+e.videoPreview.id,file:e.videoPreview,fileType:e.fileType,lang:e.lang,onDelete:e.deleteVideo},null,8,["file","fileType","lang","onDelete"]))],32))])}const qa=e=>(Object(a["pushScopeId"])("data-v-2d1c87e5"),e=e(),Object(a["popScopeId"])(),e),Ja={class:"my-8 mx-4 overflow-hidden w-full"},Xa={class:"relative text-center w-full grabbable"},Ga=["content"],Za=qa(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),Ya=[Za],Qa={class:"video-container"},Ka=["src","height","width"],el=["title","height","width"],tl=["type","src"],il=["src","srclang","label"];function al(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ja,[Object(a["createElementVNode"])("div",Xa,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.file)),content:e.$t("editor.video.delete")},Ya,8,Ga)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",Qa,["YouTube"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("iframe",{key:0,class:"w-3/5",src:e.file.src,height:e.file.height?e.file.height:400,width:e.file.width,allowfullscreen:""},null,8,Ka)):Object(a["createCommentVNode"])("",!0),"local"===e.file.videoType||"external"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("video",{key:1,class:"w-3/5",title:e.file.title,height:e.file.height?e.file.height:500,width:e.file.width,controls:""},[Object(a["createElementVNode"])("source",{type:e.fileType,src:e.file.src},null,8,tl),e.file.caption?(Object(a["openBlock"])(),Object(a["createElementBlock"])("track",{key:0,kind:"captions",src:e.file.caption,srclang:e.lang,label:e.langs[e.lang]},null,8,il)):Object(a["createCommentVNode"])("",!0)],8,el)):Object(a["createCommentVNode"])("",!0)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}var ll=i("d4cd"),ol=i.n(ll);class rl extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"file",void 0),Object(he["a"])(this,"fileType",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"md",new ol.a({html:!0})),Object(he["a"])(this,"langs",{en:"English",fr:"French"}),Object(he["a"])(this,"expandTranscript",!1),Object(he["a"])(this,"rawTranscript",""),Object(he["a"])(this,"transcriptContent","")}}Object(r["a"])([Object(n["b"])()],rl.prototype,"file",void 0),Object(r["a"])([Object(n["b"])()],rl.prototype,"fileType",void 0),Object(r["a"])([Object(n["b"])()],rl.prototype,"lang",void 0);i("480b");const nl=m()(rl,[["render",al],["__scopeId","data-v-2d1c87e5"]]);var sl=nl;let cl=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"dragging",!1),Object(he["a"])(this,"edited",!1),Object(he["a"])(this,"fileType",""),Object(he["a"])(this,"videoPreviewLoading",!1),Object(he["a"])(this,"videoPreviewPromise",void 0),Object(he["a"])(this,"videoPreview",{}),Object(he["a"])(this,"slideshowCaption","")}get isDragging(){return this.dragging}mounted(){if(this.panel.src)if("local"===this.panel.videoType){var e;this.videoPreviewLoading=!0;const t=""+this.panel.src.substring(this.panel.src.indexOf("/")+1),i=this.panel.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&(this.videoPreviewPromise=a.async("blob").then(e=>({...this.panel,id:i||this.panel.src,src:URL.createObjectURL(e)}))),null===(e=this.videoPreviewPromise)||void 0===e||e.then(e=>{this.videoPreview=e,this.videoPreviewLoading=!1}),this.slideshowCaption=this.panel.caption}else this.videoPreview={id:this.panel.src,title:this.panel.title,videoType:"YouTube"===this.panel.videoType?"YouTube":"external",src:this.panel.src};this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;",""))}addUploadedFile(e,t){const i=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1;const a=URL.createObjectURL(e);"src"===t?(this.videoPreview={id:e.name,title:this.videoPreview.title||e.name,videoType:"local",src:a},this.findFileType(e.name)):this.videoPreview[t]=a,this.edited=!0,this.$emit("slide-edit")}onFileChange(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"src"),this.onVideoEdited()}findFileType(e){if("external"===this.videoPreview.videoType||"local"===this.videoPreview.videoType){const t=e.substring(e.lastIndexOf("/")+1),i=t.split(".").pop();this.fileType="video/"+i}}extractYoutubeId(e){const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,i=e.match(t);return i&&11===i[2].length?i[2]:null}uploadVideoUrl(){let e=this.$refs.videoUrl.value;const t=e.toLowerCase().includes("youtube");t&&(e=e.replace("/watch?v=","/embed/")),this.videoPreview={id:e,title:this.videoPreview.title||e,videoType:e.includes("youtube")?"YouTube":"external",src:e},this.edited=!0,this.$emit("slide-edit")}updateCaptions(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"caption")}updateTranscript(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"transcript")}dropVideo(e){if(null!==e.dataTransfer){const t=[...e.dataTransfer.files][0];this.addUploadedFile(t,"src"),this.dragging=!1}this.onVideoEdited()}deleteVideo(){this.$refs.videoFileInput.value="",this.videoPreview={},this.onVideoEdited()}saveChanges(){this.edited&&this.videoPreview&&(this.panel.title=this.videoPreview.title,this.panel.videoType=this.videoPreview.videoType,this.panel.src="local"===this.videoPreview.videoType?`${this.configFileStructure.uuid}/assets/${this.lang}/${this.videoPreview.id}`:this.videoPreview.src,this.panel.caption=this.videoPreview.caption?this.videoPreview.caption:"",this.panel.transcript=this.videoPreview.transcript?this.videoPreview.transcript:""),this.edited=!1}onVideoEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],cl.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],cl.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],cl.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],cl.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!1})],cl.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],cl.prototype,"dynamicSelected",void 0),cl=Object(r["a"])([Object(n["a"])({components:{VideoPreview:sl,draggable:Rt.a}})],cl);var dl=cl;i("5ada");const ul=m()(dl,[["render",Ha],["__scopeId","data-v-33605cfc"]]);var ml=ul;const bl=e=>(Object(a["pushScopeId"])("data-v-7cb258ba"),e=e(),Object(a["popScopeId"])(),e),pl={class:"block"},hl={class:"flex items-center"},gl={class:"font-bold px-4"},fl={class:"flex items-center"},vl=bl(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)),Ol={class:"px-2"},jl=bl(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),yl={class:"flex items-center w-full text-left"},Vl={class:"editor-label text-label"},Sl=bl(()=>Object(a["createElementVNode"])("br",null,null,-1)),Cl={class:"w-2/3 mt-5"},El={class:"table-header"},wl=bl(()=>Object(a["createElementVNode"])("th",null,null,-1)),xl=["onClick"],kl=["onClick"],Nl=bl(()=>Object(a["createElementVNode"])("br",null,null,-1)),Tl=bl(()=>Object(a["createElementVNode"])("br",null,null,-1)),_l={key:0},$l={class:"text-xl font-bold"},Ll=bl(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),Il={key:0},Bl={class:"mb-5 text-left"},Ml=["value"],Dl=["value"],Fl={class:"mt-3 w-full flex justify-end"},Pl={key:1},Ul={class:"mt-3 w-full flex justify-end"};function Rl(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",pl,[Object(a["createElementVNode"])("div",hl,[Object(a["createElementVNode"])("span",gl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.info",{num:e.panel.items.length})),1),Object(a["createElementVNode"])("button",{class:"editor-button bg-gray-100 cursor-pointer hover:bg-gray-200",onClick:t[0]||(t[0]=t=>e.editingStatus="create")},[Object(a["createElementVNode"])("div",fl,[vl,Object(a["createElementVNode"])("span",Ol,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.create")),1)])])]),jl,Object(a["createElementVNode"])("div",yl,[Object(a["createElementVNode"])("label",Vl,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-1/3",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.caption=t)},null,512),[[a["vModelText"],e.panel.caption]]),Sl]),Object(a["createElementVNode"])("table",Cl,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",El,[wl,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.items,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(i+1)+".",1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.type),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:t=>e.editItem(i),class:"underline"},"Edit",8,xl),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:t=>e.deleteItem(i),class:"underline"},"Remove",8,kl)])]))),128))])]),Nl,Tl,"none"!==e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",_l,[Object(a["createElementVNode"])("h2",$l,Object(a["toDisplayString"])(e.$t("editor.slideshow.label."+e.editingStatus)),1),Ll,Object(a["createElementVNode"])("div",null,["create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Il,[Object(a["createElementVNode"])("label",Bl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type"))+":",1),Object(a["createElementVNode"])("select",{onInput:t[2]||(t[2]=(...t)=>e.onTypeInput&&e.onTypeInput(...t)),value:e.newSlideType},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,Dl))),128))],40,Ml),"create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.newSlideType]),{key:0,ref:"slideEditor",panel:JSON.parse(JSON.stringify(e.startingConfig[e.newSlideType])),configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Fl,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[3]||(t[3]=t=>e.saveItem(!0))},Object(a["toDisplayString"])(e.$t("editor.slideshow.label.add")),1)])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Pl,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.panel.items[e.editingIdx].type]),{ref:"slideEditor",panel:e.panel.items[e.editingIdx],configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,key:e.editingIdx+e.panel.items[e.editingIdx].type,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])),Object(a["createElementVNode"])("div",Ul,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[4]||(t[4]=t=>e.saveItem())},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)])]))])])):Object(a["createCommentVNode"])("",!0)])}let Al=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"editors",{text:"text-editor",image:"image-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"}),Object(he["a"])(this,"startingConfig",{text:{type:pe.Text,title:"",content:""},dynamic:{type:pe.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:pe.Slideshow,items:[]},chart:{type:pe.Chart,src:""},image:{type:pe.Image,src:""},map:{type:pe.Map,config:"",title:"",scrollguard:!0},video:{type:pe.Video,title:"",videoType:"",src:""}}),Object(he["a"])(this,"editingIdx",-1),Object(he["a"])(this,"newSlideName",""),Object(he["a"])(this,"newSlideType","text"),Object(he["a"])(this,"editingStatus","none")}onTypeInput(e){this.newSlideType=e.target.value}editItem(e){this.saveChanges(),this.editingIdx=e,this.editingStatus="edit"}deleteItem(e){const t=this.panel.items.find((t,i)=>i===e);switch(null===t||void 0===t?void 0:t.type){case"map":{const e=t;this.sourceCounts[e.config]-=1,0===this.sourceCounts[e.config]&&this.configFileStructure.zip.remove(""+e.config.substring(e.config.indexOf("/")+1));break}case"chart":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"image":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"text":break}this.panel.items=this.panel.items.filter((t,i)=>i!==e),this.editingIdx===e&&(this.editingIdx=-1,this.editingStatus="none")}saveItem(e=!1){let t;e?(t=this.$refs.slideEditor.panel,this.panel.items.push(t)):t=this.$refs.slideEditor.panel,t.type!==pe.Text&&void 0!==this.$refs.slideEditor&&"function"===typeof this.$refs.slideEditor.saveChanges&&(this.$refs.slideEditor.saveChanges(),t.type===pe.Map&&this.$emit("slide-edit")),this.editingStatus="none"}saveChanges(){}};Object(r["a"])([Object(n["b"])()],Al.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Al.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Al.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Al.prototype,"sourceCounts",void 0),Al=Object(r["a"])([Object(n["a"])({components:{"chart-editor":Ht,"image-editor":_i,"text-editor":Fi,"map-editor":La,"video-editor":ml}})],Al);var zl=Al;i("034f");const Wl=m()(zl,[["render",Rl],["__scopeId","data-v-7cb258ba"]]);var Hl=Wl;const ql={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}};function Jl(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ql,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])}let Xl=class extends n["c"]{};Xl=Object(r["a"])([Object(n["a"])({components:{spinner:fe["a"]}})],Xl);var Gl=Xl;const Zl=m()(Gl,[["render",Jl]]);var Yl=Zl;const Ql={class:"block"},Kl={class:"flex"},eo={key:0},to={key:1},io={class:"w-2/3 mt-5"},ao={class:"table-header"},lo=["onClick"],oo=["onClick"],ro={class:"table-add-row"},no={class:"flex flex-col items-center"},so={key:0},co=["disabled"],uo={key:0},mo=Object(a["createElementVNode"])("br",null,null,-1),bo=Object(a["createElementVNode"])("hr",null,null,-1),po=Object(a["createElementVNode"])("br",null,null,-1),ho={class:"font-bold text-xl"},go=Object(a["createElementVNode"])("br",null,null,-1);function fo(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ql,[Object(a["createElementVNode"])("div",Kl,[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=()=>e.changePanel("text")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"===e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.textSection")),3),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=()=>e.changePanel("panels")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"!==e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.panel.collection")),3)]),"text"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",eo,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])("text-editor"),{key:"text",panel:e.panel,configFileStructure:e.configFileStructure,lang:e.lang},null,8,["panel","configFileStructure","lang"]))])):Object(a["createCommentVNode"])("",!0),"panels"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",to,[Object(a["createElementVNode"])("table",io,[Object(a["createElementVNode"])("tr",ao,[Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.id")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.children,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.determineEditorType(t.panel)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:()=>e.switchSlide(i)},Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),9,lo),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:()=>e.removeSlide(t,i)},Object(a["toDisplayString"])(e.$t("editor.remove")),9,oo)])]))),128)),Object(a["createElementVNode"])("tr",ro,[Object(a["createElementVNode"])("th",no,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text",placeholder:"Enter Panel ID","onUpdate:modelValue":t[2]||(t[2]=t=>e.newSlideName=t)},null,512),[[a["vModelText"],e.newSlideName]]),e.idUsed?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",so,Object(a["toDisplayString"])(e.$t("dynamic.panel.idTaken")),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("th",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.newSlideType=t)},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e},Object(a["toDisplayString"])(e),1))),128))],512),[[a["vModelSelect"],e.newSlideType]])]),Object(a["createElementVNode"])("th",null,[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[4]||(t[4]=(...t)=>e.createNewSlide&&e.createNewSlide(...t)),disabled:e.idUsed},"Add New",8,co)])])]),-1!==e.editingSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",uo,[mo,bo,po,Object(a["createElementVNode"])("span",ho,Object(a["toDisplayString"])(e.$t("dynamic.panel.editor")),1),go,(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.panel.children[e.editingSlide].panel)]),{ref:"slide",key:e.editingSlide+e.determineEditorType(e.panel.children[e.editingSlide].panel),panel:e.panel.children[e.editingSlide].panel,configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,centerSlide:e.centerSlide,dynamicSelected:e.dynamicSelected,onSlideEdit:t[5]||(t[5]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","sourceCounts","centerSlide","dynamicSelected"]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])}var vo;let Oo=vo=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"panel",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"centerSlide",void 0),Object(he["a"])(this,"dynamicSelected",void 0),Object(he["a"])(this,"editors",{text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"}),Object(he["a"])(this,"startingConfig",{text:{type:pe.Text,title:"",content:""},dynamic:{type:pe.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:pe.Slideshow,items:[],userCreated:!0},image:{type:pe.Image,src:""},chart:{type:pe.Chart,src:""},map:{type:pe.Map,config:"",title:"",scrollguard:!1},video:{type:pe.Video,title:"",videoType:"",src:""}}),Object(he["a"])(this,"editingStatus","text"),Object(he["a"])(this,"editingSlide",-1),Object(he["a"])(this,"newSlideName",""),Object(he["a"])(this,"newSlideType","text")}get idUsed(){return this.panel.children.some(e=>e.id===this.newSlideName)}changePanel(e){"text"!==this.editingStatus&&this.saveChanges(),this.editingStatus=e}switchSlide(e){this.saveChanges(),this.editingSlide=e}removeSlide(e,t){switch(null===e||void 0===e?void 0:e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSlide(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}}t&&(this.panel.children=this.panel.children.filter((e,i)=>i!==t),this.editingSlide===t&&(this.editingSlide=-1))}createNewSlide(){if(!this.newSlideName)return;const e={id:this.newSlideName,panel:JSON.parse(JSON.stringify(this.startingConfig[this.newSlideType]))};this.newSlideName="",this.panel.children.push(e)}determineEditorType(e){if(e.type!==pe.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return pe.Slideshow;const t=e.items.every(e=>e.type===pe.Chart);if(t)return pe.Chart;const i=e.items.every(e=>e.type===pe.Image);return i?pe.Image:pe.Slideshow}saveChanges(){void 0!==this.$refs.slide&&"function"===typeof this.$refs.slide.saveChanges&&this.$refs.slide.saveChanges()}};Object(r["a"])([Object(n["b"])()],Oo.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Oo.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Oo.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Oo.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],Oo.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])()],Oo.prototype,"dynamicSelected",void 0),Oo=vo=Object(r["a"])([Object(n["a"])({components:{"chart-editor":Ht,"image-editor":_i,"text-editor":Fi,"slideshow-editor":Hl,"dynamic-editor":vo,"map-editor":La,"video-editor":ml}})],Oo);var jo=Oo;i("94db");const yo=m()(jo,[["render",fo]]);var Vo=yo;let So=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"config",void 0),Object(he["a"])(this,"currentSlide",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"uid",void 0),Object(he["a"])(this,"slideIndex",void 0),Object(he["a"])(this,"isLast",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"panelIndex",0),Object(he["a"])(this,"advancedEditorView",!1),Object(he["a"])(this,"newType",""),Object(he["a"])(this,"rightOnly",!1),Object(he["a"])(this,"centerSlide",!1),Object(he["a"])(this,"centerPanel",!1),Object(he["a"])(this,"dynamicSelected",!1),Object(he["a"])(this,"editors",{text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor",loading:"loading-page",dynamic:"dynamic-editor"})}onSlideChange(){this.currentSlide&&(this.rightOnly=1===this.currentSlide.panel.length)}changePanelType(e,t){const i={text:{type:pe.Text,title:"",content:""},dynamic:{type:pe.Dynamic,title:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].title:"",titleTag:"",content:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].content:"",children:[]},slideshow:{type:pe.Slideshow,items:[],userCreated:!0},image:{type:pe.Image,src:""},chart:{type:pe.Chart,src:""},map:{type:pe.Map,config:"",title:"",scrollguard:!1},video:{type:pe.Video,title:"",videoType:"",src:""}};this.currentSlide.panel.forEach(e=>this.removeSourceCounts(e)),"dynamic"===t?(this.panelIndex=0,this.currentSlide["panel"]=[i[t]],this.dynamicSelected=!0):this.currentSlide.panel[this.panelIndex]=i[t]}removeSourceCounts(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceCounts(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceCounts(e.panel)});break}case"text":break}}saveChanges(){void 0!==this.$refs.editor&&"function"===typeof this.$refs.editor.saveChanges&&this.$refs.editor.saveChanges()}selectSlide(e){this.$emit("slide-change",e)}cancelTypeChange(){this.$refs.typeSelector.value=this.determineEditorType(this.currentSlide.panel[this.panelIndex])}determineEditorType(e){if(e.type!==pe.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return pe.Slideshow;const t=e.items.every(e=>e.type===pe.Chart);if(t)return pe.Chart;const i=e.items.every(e=>e.type===pe.Image);return i?pe.Image:pe.Slideshow}toggleRightOnly(){this.saveChanges(),this.rightOnly?(this.panelIndex=0,this.currentSlide["panel"]=[this.currentSlide.panel[1]]):this.currentSlide["panel"]=[Object.assign({},{type:pe.Text,title:"",content:""}),Object.assign({},this.currentSlide.panel[0])]}toggleCenterSlide(){"dynamic"===this.determineEditorType(this.currentSlide.panel[this.panelIndex])?this.centerSlide?this.currentSlide.panel[0].customStyles="text-align: right;":this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""):this.rightOnly?this.centerSlide?this.currentSlide.panel[0].customStyles="text-align: center;":(this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""),this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: left;",""),this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: center;","")):this.centerSlide?(this.currentSlide.panel[0].customStyles="text-align: right;",this.currentSlide.panel[1].customStyles="text-align: left;"):(this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""),this.currentSlide.panel[1].customStyles=(this.currentSlide.panel[1].customStyles||"").replace("text-align: left;",""))}toggleCenterPanel(){if(this.centerPanel)for(const e in this.currentSlide.panel)this.currentSlide.panel[e].customStyles="text-align: center;";else for(const e in this.currentSlide.panel)this.currentSlide.panel[e].customStyles=(this.currentSlide.panel[e].customStyles||"").replace("text-align: center;","")}};Object(r["a"])([Object(n["b"])()],So.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"uid",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"isLast",void 0),Object(r["a"])([Object(n["b"])()],So.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["d"])("currentSlide",{deep:!0})],So.prototype,"onSlideChange",null),So=Object(r["a"])([Object(n["a"])({components:{"chart-editor":Ht,"custom-editor":Qt,"image-editor":_i,"text-editor":Fi,"map-editor":La,"video-editor":ml,"slideshow-editor":Hl,"loading-page":Yl,"dynamic-editor":Vo,"confirmation-modal":Pt}})],So);var Co=So;i("1921");const Eo=m()(Co,[["render",it],["__scopeId","data-v-51a5ce08"]]);var wo=Eo;const xo=e=>(Object(a["pushScopeId"])("data-v-4c9c0efa"),e=e(),Object(a["popScopeId"])(),e),ko={class:"flex toc-header p-2 mt-10"},No={class:"flex items-center justify-center font-bold"},To=xo(()=>Object(a["createElementVNode"])("span",{class:"flex-1"},null,-1)),_o=xo(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),$o=xo(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"})])],-1)),Lo={class:"align-middle inline-block"},Io=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),Bo=[Io],Mo={slot:"header",class:"text-xl font-bold"},Do={class:"flex flex-col"},Fo={class:"text-lg font-bold my-6"},Po={class:"flex"},Uo=["value"],Ro={class:"max-h-screen overflow-y-auto"},Ao=["onClick"],zo={class:"self-center overflow-ellipsis whitespace-nowrap overflow-hidden flex-grow ml-2"},Wo={class:"font-bold overflow-hidden"},Ho={class:"flex"},qo={class:"flex flex-col"},Jo=["onClick"],Xo=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})],-1)),Go=[Xo],Zo=["onClick"],Yo=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),Qo=[Yo],Ko={class:"flex flex-col mr-2 ml-1 my-1"},er=["onClick","disabled"],tr=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),ir=[tr],ar=["onClick","disabled"],lr=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),or=[lr];function rr(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal"),s=Object(a["resolveComponent"])("confirmation-modal"),c=Object(a["resolveComponent"])("draggable"),d=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",ko,[Object(a["createElementVNode"])("span",No,Object(a["toDisplayString"])(e.$t("editor.slides.title")),1),To,_o,Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=(...t)=>e.addNewSlide&&e.addNewSlide(...t))},[$o,Object(a["createElementVNode"])("span",Lo,Object(a["toDisplayString"])(e.$t("editor.slides.addSlide")),1)]),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.$vfm.open("copy-from-other-lang"),["stop"]))},Bo)),[[d,{delay:"200",placement:"right",content:e.$t("editor.slides.copyFromLang"),animateFill:!0}]]),Object(a["createVNode"])(n,{modalId:"copy-from-other-lang","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",Mo,Object(a["toDisplayString"])(e.$t("editor.slides.copyFromLang")),1),Object(a["createElementVNode"])("div",Do,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button w-32 h-12 ml-0",onClick:t[2]||(t[2]=t=>e.copyAllFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides))},Object(a["toDisplayString"])(e.$t("editor.slides.copyAll")),1),Object(a["createElementVNode"])("span",Fo,Object(a["toDisplayString"])(e.$t("editor.or")),1),Object(a["createElementVNode"])("div",Po,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedForCopying=t),class:"overflow-ellipsis copy-select"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{value:i,key:t.title+i},Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+": "+t.title),9,Uo))),128))],512),[[a["vModelSelect"],e.selectedForCopying]]),Object(a["createElementVNode"])("button",{class:"editor-toc-button",onClick:t[4]||(t[4]=t=>e.copyFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides[e.selectedForCopying]))},Object(a["toDisplayString"])(e.$t("editor.slides.copy")),1)])])]),_:1})]),Object(a["createElementVNode"])("ul",Ro,[Object(a["createVNode"])(c,{modelValue:e.slides,"onUpdate:modelValue":t[5]||(t[5]=t=>e.slides=t),onUpdate:t[6]||(t[6]=t=>e.$emit("slides-updated",e.slides)),"item-key":"title"},{item:Object(a["withCtx"])(({element:t,index:i})=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{class:Object(a["normalizeClass"])(["toc-slide border-t flex px-2 cursor-pointer hover:bg-gray-100",e.currentSlide===t?"bg-gray-100":""]),onClick:t=>e.selectSlide(i),key:t.title+i},[Object(a["createElementVNode"])("div",zo,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+1)+": ",1),Object(a["createElementVNode"])("span",Wo,Object(a["toDisplayString"])(t.title||"Add a title"),1)]),Object(a["createElementVNode"])("div",Ho,[Object(a["createElementVNode"])("div",qo,[Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.$vfm.open("delete-slide-"+i),["stop"])},Go,8,Jo),Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.copySlide(i),["stop"])},Qo,8,Zo)]),Object(a["createElementVNode"])("div",Ko,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button",0==i?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveUp(i),["stop"]),disabled:0==i},ir,10,er),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button rotate-180 transform",i==e.slides.length-1?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveDown(i),["stop"]),disabled:i==e.slides.length-1},or,10,ar)])]),Object(a["createVNode"])(s,{name:"delete-slide-"+i,message:e.$t("editor.slides.deleteSlide.confirm",{title:t.title}),onOk:t=>e.removeSlide(i)},null,8,["name","message","onOk"])],10,Ao)),[[d,{delay:"200",placement:"right",content:t.title,animateFill:!0}]])]),_:1},8,["modelValue"])])])}var nr=i("9675"),sr=i.n(nr);let cr=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"slides",void 0),Object(he["a"])(this,"currentSlide",void 0),Object(he["a"])(this,"slideIndex",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"lang",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"selectedForCopying",0)}selectSlide(e){this.$emit("slide-change",e)}addNewSlide(){this.slides.push({title:"",panel:[{type:"text",title:"",content:""},{type:"text",title:"",content:""}]}),this.selectSlide(this.slides.length-1),this.$emit("slides-updated",this.slides)}copyFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,sr()(e)),this.$emit("slides-updated",this.slides))}copyAllFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,...e.map(e=>sr()(e))),this.$emit("slides-updated",this.slides))}copySlide(e){this.slides.splice(e+1,0,sr()(this.slides[e])),this.$emit("slides-updated",this.slides)}removeSlide(e){e===this.slideIndex&&this.$emit("slide-change",-1),this.removeSourceCounts(e),this.slides.splice(e,1),this.$emit("slides-updated",this.slides)}removeSourceCounts(e){var t;const i=null===(t=this.slides.find((t,i)=>i===e))||void 0===t?void 0:t.panel;null===i||void 0===i||i.forEach(e=>this.removeSourceHelper(e))}removeSourceHelper(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceHelper(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceHelper(e.panel)});break}case"text":break}}moveUp(e){this.moveDown(e-1)}moveDown(e){this.slides.splice(e+1,0,this.slides.splice(e,1)[0]),this.$emit("slides-updated",this.slides)}};Object(r["a"])([Object(n["b"])()],cr.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],cr.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],cr.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],cr.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],cr.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],cr.prototype,"sourceCounts",void 0),cr=Object(r["a"])([Object(n["a"])({components:{"slide-editor":wo,"confirmation-modal":Pt,"vue-final-modal":ve["a"],draggable:Rt.a}})],cr);var dr=cr;i("e50c");const ur=m()(dr,[["render",rr],["__scopeId","data-v-4c9c0efa"]]);var mr=ur;const br={class:"editor-label mb-5"},pr=["value"],hr=Object(a["createElementVNode"])("br",null,null,-1),gr={class:"editor-label mb-5"},fr=["value"],vr={class:"editor-label mb-5"},Or=["value"],jr=Object(a["createElementVNode"])("br",null,null,-1),yr={key:0},Vr={class:"editor-label"},Sr=["src"],Cr={key:1,class:"image-preview"},Er={class:"editor-label mb-5"},wr=["value"],xr=Object(a["createElementVNode"])("br",null,null,-1),kr={class:"editor-label"},Nr=["value"],Tr=Object(a["createElementVNode"])("br",null,null,-1),_r=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),$r={class:"inline-block"},Lr=Object(a["createElementVNode"])("br",null,null,-1),Ir={class:"editor-label"},Br=["value"],Mr=Object(a["createElementVNode"])("br",null,null,-1),Dr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Fr={class:"inline-block"},Pr=Object(a["createElementVNode"])("br",null,null,-1),Ur={class:"editor-label"},Rr=["value"],Ar=Object(a["createElementVNode"])("br",null,null,-1),zr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Wr={class:"inline-block"},Hr=Object(a["createElementVNode"])("br",null,null,-1),qr={class:"editor-label mr-15"},Jr={value:"vertical"},Xr={value:"horizontal"},Gr=Object(a["createElementVNode"])("br",null,null,-1),Zr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Yr={class:"inline-block"},Qr=Object(a["createElementVNode"])("br",null,null,-1),Kr={class:"editor-label mb-5"},en=["value"],tn=Object(a["createElementVNode"])("br",null,null,-1),an=Object(a["createElementVNode"])("br",null,null,-1);function ln(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("label",br,Object(a["toDisplayString"])(e.$t("editor.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"title",value:e.metadata.title,onChange:t[0]||(t[0]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/3"},null,40,pr),hr,Object(a["createElementVNode"])("label",gr,Object(a["toDisplayString"])(e.$t("editor.slides.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introTitle",value:e.metadata.introTitle,onChange:t[1]||(t[1]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,fr),Object(a["createElementVNode"])("label",vr,Object(a["toDisplayString"])(e.$t("editor.slides.intro"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introSubtitle",value:e.metadata.introSubtitle,onChange:t[2]||(t[2]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,Or),jr,e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",yr,[Object(a["createElementVNode"])("label",Vr,Object(a["toDisplayString"])(e.$t("editor.logoPreview"))+":",1),e.metadata.logoPreview&&"error"!=e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:e.metadata.logoPreview,class:"image-preview"},null,8,Sr)):Object(a["createCommentVNode"])("",!0),"error"==e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Cr,Object(a["toDisplayString"])(e.$t("editor.image.loadingError")),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("label",Er,Object(a["toDisplayString"])(e.$t("editor.logo"))+":",1),Object(a["createElementVNode"])("input",{type:"text",onChange:t[3]||(t[3]=t=>e.$emit("logo-source-changed",t)),value:e.metadata.logoName,class:"editor-input w-1/4"},null,40,wr),Object(a["createElementVNode"])("button",{onClick:t[4]||(t[4]=Object(a["withModifiers"])((...t)=>e.openFileSelector&&e.openFileSelector(...t),["stop"])),class:"editor-button bg-black text-white hover:bg-gray-800"},Object(a["toDisplayString"])(e.$t("editor.browse")),1),e.metadata.logoName||e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[5]||(t[5]=Object(a["withModifiers"])((...t)=>e.removeLogo&&e.removeLogo(...t),["stop"])),class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.remove")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("input",{type:"file",id:"logoUpload",onChange:t[6]||(t[6]=t=>e.$emit("logo-changed",t)),class:"editor-input w-1/4",style:{display:"none"}},null,32),xr,Object(a["createElementVNode"])("label",kr,Object(a["toDisplayString"])(e.$t("editor.logoAltText"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"logoAltText",value:e.metadata.logoAltText,onChange:t[7]||(t[7]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,Nr),Tr,_r,Object(a["createElementVNode"])("p",$r,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.logoAltText.desc")),1)]),Lr,Object(a["createElementVNode"])("label",Ir,Object(a["toDisplayString"])(e.$t("editor.contextLink"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLink",value:e.metadata.contextLink,onChange:t[8]||(t[8]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,Br),Mr,Dr,Object(a["createElementVNode"])("p",Fr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLink.info")),1)]),Pr,Object(a["createElementVNode"])("label",Ur,Object(a["toDisplayString"])(e.$t("editor.contextLabel"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLabel",value:e.metadata.contextLabel,onChange:t[9]||(t[9]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,Rr),Ar,zr,Object(a["createElementVNode"])("p",Wr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLabel.info")),1)]),Hr,Object(a["createElementVNode"])("label",qr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"border-solid border border-black p-1",name:"tocOrientation",id:"toc",onChange:t[10]||(t[10]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.metadata.tocOrientation=t)},[Object(a["createElementVNode"])("option",Jr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.vertical")),1),Object(a["createElementVNode"])("option",Xr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.horizontal")),1)],544),[[a["vModelSelect"],e.metadata.tocOrientation]]),Gr,Zr,Object(a["createElementVNode"])("p",Yr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.info")),1)]),Qr,Object(a["createElementVNode"])("label",Kr,Object(a["toDisplayString"])(e.$t("editor.dateModified"))+":",1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"date",name:"dateModified",value:e.metadata.dateModified,onChange:t[12]||(t[12]=(...t)=>e.metadataChanged&&e.metadataChanged(...t))},null,40,en),tn,an])}class on extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"metadata",void 0)}openFileSelector(){var e;null===(e=document.getElementById("logoUpload"))||void 0===e||e.click()}metadataChanged(e){this.$emit("metadata-changed",e.target.name,e.target.value)}removeLogo(){this.metadata.logoName="",this.metadata.logoPreview=""}}Object(r["a"])([Object(n["b"])()],on.prototype,"metadata",void 0);const rn=m()(on,[["render",ln]]);var nn=rn;const sn={class:"editor-container"},cn={class:"editor-header sticky flex items-center border-b border-black bg-gray-200 py-2 px-2 z-10"},dn={class:"mx-1"},un=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18.001",viewBox:"0 0 18 18.001"},[Object(a["createElementVNode"])("path",{id:"logout-Icon-SVG-098767893",d:"M5.808,13.782v1.406A2.816,2.816,0,0,0,8.621,18h7.067A2.816,2.816,0,0,0,18.5,15.188V2.813A2.816,2.816,0,0,0,15.687,0H8.621A2.816,2.816,0,0,0,5.808,2.813V4.219a.7.7,0,0,0,1.406,0V2.813A1.408,1.408,0,0,1,8.621,1.406h7.067a1.408,1.408,0,0,1,1.406,1.406V15.188a1.408,1.408,0,0,1-1.406,1.406H8.621a1.408,1.408,0,0,1-1.406-1.406V13.782a.7.7,0,0,0-1.406,0ZM1.014,7.793,2.589,6.218a.7.7,0,0,1,.994.994l-1.12,1.12h8.443a.7.7,0,1,1,0,1.406H2.463l1.12,1.12a.7.7,0,1,1-.994.994L1.014,10.279A1.76,1.76,0,0,1,1.014,7.793Zm0,0",transform:"translate(-0.5)"})],-1),mn={class:"ml-3 flex flex-col"},bn={class:"font-semibold text-lg"},pn=Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1),hn=Object(a["createElementVNode"])("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18px",height:"18px"},[Object(a["createElementVNode"])("path",{d:"M 2 2 L 4.9394531 4.9394531 C 3.1262684 6.7482143 2 9.2427079 2 12 C 2 17.514 6.486 22 12 22 C 17.514 22 22 17.514 22 12 C 22 6.486 17.514 2 12 2 L 12 4 C 16.411 4 20 7.589 20 12 C 20 16.411 16.411 20 12 20 C 7.589 20 4 16.411 4 12 C 4 9.7940092 4.9004767 7.7972757 6.3496094 6.3496094 L 9 9 L 9 2 L 2 2 z"})],-1),gn={class:"font-normal ml-1"},fn={key:0,class:"border-2 border-red-700 text-red-700 rounded p-1 mr-2"},vn=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",class:"fill-red-600",width:"18",height:"18","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m12.002 21.534c5.518 0 9.998-4.48 9.998-9.998s-4.48-9.997-9.998-9.997c-5.517 0-9.997 4.479-9.997 9.997s4.48 9.998 9.997 9.998zm0-1.5c-4.69 0-8.497-3.808-8.497-8.498s3.807-8.497 8.497-8.497 8.498 3.807 8.498 8.497-3.808 8.498-8.498 8.498zm0-6.5c-.414 0-.75-.336-.75-.75v-5.5c0-.414.336-.75.75-.75s.75.336.75.75v5.5c0 .414-.336.75-.75.75zm-.002 3c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z","fill-rule":"nonzero"})])],-1),On={class:"align-center inline-block select-none"},jn=["disabled"],yn={class:"inline-block"},Vn={key:0,class:"align-middle inline-block px-1"},Sn={class:"flex"},Cn={class:"w-80 flex-shrink-0 border-r border-black editor-toc"},En={class:"flex items-center justify-center border-b p-2"},wn=Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",width:"16",height:"16","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m4.481 15.659c-1.334 3.916-1.48 4.232-1.48 4.587 0 .528.46.749.749.749.352 0 .668-.137 4.574-1.492zm1.06-1.061 3.846 3.846 11.321-11.311c.195-.195.293-.45.293-.707 0-.255-.098-.51-.293-.706-.692-.691-1.742-1.74-2.435-2.432-.195-.195-.451-.293-.707-.293-.254 0-.51.098-.706.293z","fill-rule":"nonzero"})])],-1),xn={class:"align-middle inline-block"},kn={class:"footer text-right pr-5 editor-button"},Nn=["href"];function Tn(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("spinner"),c=Object(a["resolveComponent"])("slide-toc"),d=Object(a["resolveComponent"])("slide-editor"),u=Object(a["resolveComponent"])("confirmation-modal"),m=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",sn,[Object(a["createElementVNode"])("div",cn,[Object(a["createElementVNode"])("span",dn,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(n,{to:{name:"home"},class:"mt-1 flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[un]),_:1})),[[m,{delay:"200",placement:"right",content:e.$t("editor.returnToLanding"),animateFill:!0}]])]),Object(a["createElementVNode"])("div",mn,[Object(a["createElementVNode"])("span",bn,Object(a["toDisplayString"])(e.metadata.title),1),Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(e.metadata.title?"text-xs":"")},"UUID: "+Object(a["toDisplayString"])(e.uuid),3)]),pn,e.unsavedChanges?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=t=>e.$vfm.open("reload-config")),class:"editor-button border-2 border-red-700 text-red-700 rounded p-1 mr-2"},[hn,Object(a["createElementVNode"])("span",gn,Object(a["toDisplayString"])(e.$t("editor.resetChanges")),1)])),[[m,{delay:"200",placement:"bottom",content:e.$t("editor.resetChanges"),animateFill:!0}]]):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(a["Transition"],{name:"fade"},{default:Object(a["withCtx"])(()=>[e.unsavedChanges?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",fn,[vn,Object(a["createElementVNode"])("span",On,Object(a["toDisplayString"])(e.$t("editor.unsavedChanges")),1)])):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["renderSlot"])(e.$slots,"langModal",Object(a["normalizeProps"])(Object(a["guardReactiveProps"])({unsavedChanges:e.unsavedChanges}))),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...t)=>e.preview&&e.preview(...t)),class:"editor-button bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.preview")),1),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...t)=>e.saveChanges&&e.saveChanges(...t)),class:"editor-button bg-black text-white hover:bg-gray-900",disabled:e.saving},[Object(a["createElementVNode"])("span",yn,Object(a["toDisplayString"])(e.saving?e.$t("editor.savingChanges"):e.$t("editor.saveChanges")),1),e.saving?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Vn,[Object(a["createVNode"])(s,{size:"16px",color:"#009cd1",class:"ml-1 mb-1"})])):Object(a["createCommentVNode"])("",!0)],8,jn)]),Object(a["createElementVNode"])("div",Sn,[Object(a["createElementVNode"])("div",Cn,[Object(a["createElementVNode"])("div",En,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button",onClick:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.$vfm.open("metadata-edit-modal"),["stop"]))},[wn,Object(a["createElementVNode"])("span",xn,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1)])]),Object(a["createVNode"])(c,{slides:e.slides,currentSlide:e.currentSlide,slideIndex:e.slideIndex,onSlideChange:e.selectSlide,onSlidesUpdated:e.updateSlides,configFileStructure:e.configFileStructure,lang:e.configLang,sourceCounts:e.sourceCounts},null,8,["slides","currentSlide","slideIndex","onSlideChange","onSlidesUpdated","configFileStructure","lang","sourceCounts"])]),Object(a["createVNode"])(d,{ref:"slide",configFileStructure:e.configFileStructure,currentSlide:e.currentSlide,lang:e.configLang,slideIndex:e.slideIndex,isLast:e.slideIndex===e.slides.length-1,uid:e.uuid,onSlideChange:e.selectSlide,onSlideEdit:e.onSlidesEdited,onCustomSlideUpdated:e.updateCustomSlide,sourceCounts:e.sourceCounts},null,8,["configFileStructure","currentSlide","lang","slideIndex","isLast","uid","onSlideChange","onSlideEdit","onCustomSlideUpdated","sourceCounts"])]),Object(a["createElementVNode"])("div",kn,[Object(a["createElementVNode"])("a",{href:"mailto:applicationsdecartographieweb-webmappingapplications@ec.gc.ca?subject="+e.$t("editor.feedback.subject")},Object(a["toDisplayString"])(e.$t("editor.feedback")),9,Nn)]),Object(a["renderSlot"])(e.$slots,"metadataModal"),Object(a["createVNode"])(u,{name:"reload-config",message:e.$t("editor.refreshChanges.modal"),onOk:t[4]||(t[4]=t=>e.$emit("refresh-config"))},null,8,["message"])])}let _n=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"configs",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"sourceCounts",void 0),Object(he["a"])(this,"metadata",void 0),Object(he["a"])(this,"slides",void 0),Object(he["a"])(this,"configLang",void 0),Object(he["a"])(this,"saving",void 0),Object(he["a"])(this,"unsavedChanges",void 0),Object(he["a"])(this,"uuid",""),Object(he["a"])(this,"logoImage",void 0),Object(he["a"])(this,"loadSlides",void 0),Object(he["a"])(this,"currentSlide",""),Object(he["a"])(this,"slideIndex",-1)}onSlidesEdited(){this.$emit("save-status",!0)}onMetadataEdited(){this.$emit("save-status",!0)}created(){this.loadSlides=this.slides,this.uuid=this.$route.params.uid,window.addEventListener("beforeunload",this.beforeWindowUnload)}mounted(){const e=new IntersectionObserver(([e])=>e.target.classList.toggle("z-40",e.intersectionRatio<1),{threshold:[1]});e.observe(document.querySelector(".editor-header"))}beforeDestroy(){window.removeEventListener("beforeunload",this.beforeWindowUnload)}selectSlide(e){void 0!==this.$refs.slide&&this.$nextTick(()=>{this.$refs.slide.saveChanges()}),this.currentSlide={title:"",panel:[{type:"loading-page"},{type:"loading-page"}]},setTimeout(()=>{this.currentSlide=-1===e?"":this.loadSlides[e],this.slideIndex=e,this.$refs.slide.panelIndex=0,this.$refs.slide.advancedEditorView=!1,window.scrollTo(0,0)},5)}updateCustomSlide(e,t){this.currentSlide=e,t&&(this.slides[this.slideIndex]=e,this.$emit("save-changes"))}updateSlides(e){this.loadSlides=e,this.slideIndex=this.loadSlides.indexOf(this.currentSlide)}preview(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),setTimeout(()=>{const e=this.$router.resolve({name:"preview"}),t=window.open(e.href,"_blank");t.props={config:JSON.parse(JSON.stringify(this.configs[this.configLang])),configFileStructure:this.configFileStructure}},5)}saveChanges(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),this.$emit("save-changes")}beforeWindowUnload(e){this.unsavedChanges&&!window.confirm()&&e.preventDefault()}};Object(r["a"])([Object(n["b"])()],_n.prototype,"configs",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"metadata",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"configLang",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"saving",void 0),Object(r["a"])([Object(n["b"])()],_n.prototype,"unsavedChanges",void 0),Object(r["a"])([Object(n["d"])("slides",{deep:!0})],_n.prototype,"onSlidesEdited",null),Object(r["a"])([Object(n["d"])("metadata",{deep:!0})],_n.prototype,"onMetadataEdited",null),_n=Object(r["a"])([Object(n["a"])({components:{"metadata-content":nn,"confirmation-modal":Pt,spinner:fe["a"],"slide-editor":wo,"slide-toc":mr}})],_n);var $n=_n;i("3b76");const Ln=m()($n,[["render",Tn]]);var In=Ln;const Bn=i("c4e3"),Mn=i("bc3a").default,{v4:Dn}=i("e144");let Fn=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"editExisting",void 0),Object(he["a"])(this,"configs",{en:void 0,fr:void 0}),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"loadExisting",!1),Object(he["a"])(this,"reloadExisting",!1),Object(he["a"])(this,"loadStatus","waiting"),Object(he["a"])(this,"checkingUuid",!1),Object(he["a"])(this,"loadEditor",!1),Object(he["a"])(this,"error",!1),Object(he["a"])(this,"warning","none"),Object(he["a"])(this,"configLang","en"),Object(he["a"])(this,"showDropdown",!1),Object(he["a"])(this,"storylineHistory",[]),Object(he["a"])(this,"selectedHistory",null),Object(he["a"])(this,"saving",!1),Object(he["a"])(this,"unsavedChanges",!1),Object(he["a"])(this,"apiUrl","http://localhost:6040"),Object(he["a"])(this,"uuid",""),Object(he["a"])(this,"baseUuid",""),Object(he["a"])(this,"changeUuid",""),Object(he["a"])(this,"renaming",!1),Object(he["a"])(this,"renamed",""),Object(he["a"])(this,"logoImage",void 0),Object(he["a"])(this,"metadata",{title:"",introTitle:"",introSubtitle:"",logoPreview:"",logoName:"",logoAltText:"",contextLink:"",contextLabel:"",tocOrientation:"",dateModified:""}),Object(he["a"])(this,"reqFields",{uuid:!0}),Object(he["a"])(this,"slides",[]),Object(he["a"])(this,"sourceCounts",{}),Object(he["a"])(this,"checkUuid",Object(ge["a"])(300,e=>{e&&(this.checkingUuid=!0),this.loadExisting&&!e||fetch(this.apiUrl+"/retrieve/"+(e?this.changeUuid:this.uuid)).then(t=>{404!==t.status&&(this.warning=e?"rename":"uuid"),e&&(this.checkingUuid=!1),fetch(this.apiUrl+"/retrieveMessages").then(e=>{if(e.ok)return e.json()}).then(e=>{Mn.post("#{NET_API_URL}#/api/log/create",{messages:e.messages}).catch(e=>console.log(e.response||e))}).catch(e=>console.log(e.response||e))}),this.warning="none"}))}created(){var e;if(this.loadExisting=this.editExisting,this.uuid=null!==(e=this.$route.params.uid)&&void 0!==e?e:this.loadExisting?void 0:Dn(),this.configLang=this.$route.params.lang||"en",this.configs={en:void 0,fr:void 0},this.configFileStructure=void 0,!this.loadExisting){const e=new Date,t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");this.metadata.dateModified=`${t}-${i}-${a}`,this.metadata.tocOrientation="vertical"}if("editor"===this.$route.name){this.loadEditor=!0;const e=this.$route.meta.data;if(e&&e.configs&&e.configFileStructure){var t;this.configs=e.configs,this.configFileStructure=e.configFileStructure,this.metadata=e.metadata,this.slides=e.slides,this.sourceCounts=e.sourceCounts,this.loadExisting=e.existing,this.unsavedChanges=e.unsavedChanges;const a=null===(t=this.configs[this.configLang])||void 0===t||null===(t=t.introSlide.logo)||void 0===t?void 0:t.src,l=`assets/${this.configLang}/${this.metadata.logoName}`;if(a){var i;const e=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(l);e?e.async("blob").then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=URL.createObjectURL(e),this.loadStatus="loaded"}):(this.metadata.logoName=a,fetch(a).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=a,this.loadStatus="loaded"})}))}else this.loadStatus="loaded";return}}this.$route.params.uid&&this.generateRemoteConfig()}generateNewConfig(){const e=new Bn;this.configs[this.configLang]=this.configHelper();const t=this.configs[this.configLang];if(this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`}else t.introSlide.logo.src="";t.slides=[];const a="en"===this.configLang?"fr":"en";this.configs[a]=sr()(t),this.configs[a].lang=a;const l=JSON.stringify(this.configs[a],null,4),o=`${this.uuid}_${this.configLang}.json`,r=JSON.stringify(t,null,4);e.file(o,r),e.file(`${this.uuid}_${a}.json`,l),this.configFileStructureHelper(e,this.logoImage)}configHelper(){return{title:this.metadata.title,lang:this.configLang,introSlide:{logo:{src:""},title:this.metadata.introTitle,subtitle:this.metadata.introSubtitle},slides:[],contextLabel:this.metadata.contextLabel,contextLink:this.metadata.contextLink,tocOrientation:this.metadata.tocOrientation,dateModified:this.metadata.dateModified}}generateRemoteConfig(){this.loadStatus="loading",this.baseUuid=this.uuid,this.renamed="",this.changeUuid="",fetch(this.apiUrl+"/retrieve/"+this.uuid).then(e=>{if(404===e.status){var t;Oe["a"].error(`The requested UUID '${null!==(t=this.uuid)&&void 0!==t?t:""}' does not exist.`),this.error=!0,this.loadStatus="waiting",this.clearConfig()}else{const t=new Bn;e.blob().then(e=>{t.loadAsync(e).then(()=>{this.configFileStructureHelper(t)})})}fetch(this.apiUrl+"/retrieveMessages").then(e=>{if(e.ok)return e.json()}).then(e=>{Mn.post("#{NET_API_URL}#/api/log/create",{messages:e.messages}).catch(e=>console.log(e.response||e))}).catch(e=>console.log(e.response||e))}).catch(()=>{Oe["a"].error("Failed to load product, no response from server"),this.loadStatus="loaded"})}fetchHistory(){void 0===this.uuid&&Oe["a"].error("You must first enter a UUID")}selectHistory(e){this.selectedHistory=e}formatDate(e){const t=new Date(e),i=new Date(t.toLocaleString("en-US",{timeZone:"America/Toronto"})),a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Toronto"};return new Intl.DateTimeFormat("en-US",a).format(i)}loadHistory(){this.selectedHistory,0}async renameProduct(){var e,t;if(!this.configFileStructure)return;const i=null===(e=this.configFileStructure)||void 0===e?void 0:e.zip.file(this.uuid+"_en.json"),a=null===(t=this.configFileStructure)||void 0===t?void 0:t.zip.file(this.uuid+"_fr.json");if(i&&a){var l,o,r,n;null===(l=this.configFileStructure)||void 0===l||l.zip.remove(i.name),null===(o=this.configFileStructure)||void 0===o||o.zip.remove(a.name);const e=await(null===i||void 0===i?void 0:i.async("string").then(e=>JSON.parse(e))),t=await(null===a||void 0===a?void 0:a.async("string").then(e=>JSON.parse(e)));[e,t].forEach(e=>this.renameSources(e)),null===(r=this.configFileStructure)||void 0===r||r.zip.file(this.changeUuid+"_en.json",JSON.stringify(e,null,4)),null===(n=this.configFileStructure)||void 0===n||n.zip.file(this.changeUuid+"_fr.json",JSON.stringify(t,null,4)),this.uuid=this.changeUuid,this.sourceCounts={},this.configFileStructureHelper(this.configFileStructure.zip)}this.renaming=!1,this.renamed=this.uuid}renameSources(e){var t;const i=e=>{switch(e.type){case pe.Dynamic:e.children.forEach(e=>{i(e.panel)});break;case pe.Slideshow:e.items.forEach(e=>{i(e)});break;default:e.src&&(e.src=e.src.replace(this.uuid+"/",this.changeUuid+"/")),e.config&&"string"===typeof e.config&&(e.config=e.config.replace(this.uuid+"/",this.changeUuid+"/"))}};null!==e&&void 0!==e&&null!==(t=e.introSlide.logo)&&void 0!==t&&t.src&&(e.introSlide.logo.src=e.introSlide.logo.src.replace(this.uuid+"/assets/",this.changeUuid+"/assets/")),e.slides.forEach(e=>{e.panel.forEach(e=>{i(e)})})}findSources(e){["en","fr"].forEach(t=>{var i,a;null!==(i=e[t])&&void 0!==i&&null!==(i=i.introSlide.logo)&&void 0!==i&&i.src&&this.incrementSourceCount(e[t].introSlide.logo.src),null===(a=e[t])||void 0===a||a.slides.forEach(e=>{e.panel.forEach(e=>{this.panelSourceHelper(e)})})})}panelSourceHelper(e){switch(e.type){case pe.Dynamic:e.children.forEach(e=>{this.panelSourceHelper(e.panel)});break;case pe.Slideshow:e.items.forEach(e=>{this.panelSourceHelper(e)});break;case pe.Chart:this.incrementSourceCount(e.src);break;case pe.Image:this.incrementSourceCount(e.src);break;case pe.Video:"local"===e.videoType&&this.incrementSourceCount(e.src);break;case pe.Audio:this.incrementSourceCount(e.src);break;case pe.Map:this.incrementSourceCount(e.config);break;case pe.Text:break;default:break}}incrementSourceCount(e){this.sourceCounts[e]?this.sourceCounts[e]+=1:this.sourceCounts[e]=1}configFileStructureHelper(e,t){const i=e.folder("assets"),a=e.folder("charts"),l=e.folder("ramp-config");this.configFileStructure={uuid:this.uuid,zip:e,configs:this.configs,assets:{en:i.folder("en"),fr:i.folder("fr")},charts:{en:a.folder("en"),fr:a.folder("fr")},rampConfig:l},void 0!==t&&this.configFileStructure.assets[this.configLang].file(null===t||void 0===t?void 0:t.name,t),this.loadConfig()}async loadConfig(e){if(e)this.useConfig(e);else{try{var t,i;const e=null===(t=this.configFileStructure)||void 0===t?void 0:t.zip.file(this.uuid+"_en.json"),a=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(this.uuid+"_fr.json");await(null===e||void 0===e?void 0:e.async("string").then(e=>{this.configs["en"]=JSON.parse(e)})),await(null===a||void 0===a?void 0:a.async("string").then(e=>{this.configs["fr"]=JSON.parse(e)}))}catch{var a;return Oe["a"].error(`The requested product '${null!==(a=this.uuid)&&void 0!==a?a:""}' is malformed.`),this.loadStatus="waiting",void this.clearConfig()}this.loadExisting&&!this.renamed?(this.loadStatus="waiting",Oe["a"].success("Successfully loaded storyline!")):this.loadStatus="loaded",this.configs[this.configLang]&&(this.useConfig(this.configs[this.configLang]),this.findSources(this.configs),this.reloadExisting?(this.loadEditor=!0,this.generateConfig(),this.updateEditorPath()):this.loadExisting||(this.loadEditor=!0,this.updateEditorPath()))}}useConfig(e){var t;this.metadata.title=e.title,this.metadata.introTitle=e.introSlide.title,this.metadata.introSubtitle=e.introSlide.subtitle,this.metadata.contextLink=e.contextLink,this.metadata.contextLabel=e.contextLabel,this.metadata.tocOrientation=e.tocOrientation,this.metadata.dateModified=e.dateModified,this.slides=e.slides;const i=null===(t=e.introSlide.logo)||void 0===t?void 0:t.src;if(i){var a,l;this.metadata.logoAltText=null!==(a=e.introSlide.logo)&&void 0!==a&&a.altText?e.introSlide.logo.altText:"";const t=""+i.substring(i.indexOf("/")+1),o=""+i.split("/")[i.split("/").length-1],r=null===(l=this.configFileStructure)||void 0===l?void 0:l.zip.file(t);r?r.async("blob").then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=URL.createObjectURL(e),this.metadata.logoName=o,this.loadStatus="loaded"}):(this.metadata.logoName=i,fetch(i).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=i,this.loadStatus="loaded"})}))}}generateConfig(){var e,t;this.saving=!0;const i=`${this.uuid}_${this.configLang}.json`,a=JSON.stringify(this.configs[this.configLang],null,4);return null===(e=this.configFileStructure)||void 0===e||e.zip.file(i,a),null===(t=this.configFileStructure)||void 0===t||t.zip.generateAsync({type:"blob"}).then(e=>{const t=new FormData;t.append("data",e,this.uuid+".zip");const i={"Content-Type":"multipart/form-data"};Mn.post(this.apiUrl+"/upload",t,{headers:i}).then(e=>{const t=e.data;t.files,t.status,this.unsavedChanges=!1,this.loadExisting=!0,Oe["a"].success("Successfully saved changes!")}).catch(()=>{Oe["a"].error("Failed to save changes.")}).finally(()=>{setTimeout(()=>{this.saving=!1},500)})}),this.configFileStructure}updateMetadata(e,t){this.metadata[e]=t,this.unsavedChanges=!0}saveMetadata(e=!1){const t=this.configs[this.configLang];if(void 0!==t){if(t.title=this.metadata.title,t.introSlide.title=this.metadata.introTitle,t.introSlide.subtitle=this.metadata.introSubtitle,t.contextLink=this.metadata.contextLink,t.contextLabel=this.metadata.contextLabel,t.tocOrientation=this.metadata.tocOrientation,t.dateModified=this.metadata.dateModified,void 0===t.introSlide.logo&&(t.introSlide.logo={src:"",altText:""}),t.introSlide.logo.altText=this.metadata.logoAltText,this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i,a,l;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`,null===(a=this.configFileStructure)||void 0===a||a.assets[this.configLang].file(null===(l=this.logoImage)||void 0===l?void 0:l.name,this.logoImage)}else t.introSlide.logo.src="";e&&this.generateConfig();const o=c();o.fetchUserProfile()}this.$vfm.close("metadata-edit-modal")}clearConfig(){this.metadata={title:"",introTitle:"",introSubtitle:"",contextLink:"",contextLabel:"",dateModified:"",logoPreview:"",logoName:"",logoAltText:"",tocOrientation:""},this.configs={en:void 0,fr:void 0},this.slides=[]}swapLang(){this.configLang="en"===this.configLang?"fr":"en",this.configs[this.configLang]&&(this.loadConfig(this.configs[this.configLang]),this.loadEditor&&(this.$refs.mainEditor.updateSlides(this.slides),this.$nextTick(()=>{this.$refs.mainEditor.selectSlide(-1)})))}beforeRouteUpdate(e,t,i){this.uuid=e.params.uid,this.$i18n.locale=e.params.lang,i()}onLogoSourceInput(e){const t=e=>{const t=new Image;return t.src=e,new Promise(e=>{t.onerror=()=>e(!1),t.onload=()=>e(!0)})};this.metadata.logoName=e.target.value,t(this.metadata.logoName).then(e=>{e?(this.metadata.logoPreview=this.metadata.logoName,Oe["a"].success("Successfully loaded logo image.")):(this.metadata.logoPreview="error",Oe["a"].error("Failed to load logo image."))})}onFileChange(e){const t=e.target.files[0];this.logoImage=t,this.metadata.logoPreview=URL.createObjectURL(t),this.metadata.logoName=t.name}updateEditorPath(){"editor"!==this.$route.name&&(this.$router.beforeEach(e=>{"editor"===e.name&&(e.meta.data={configLang:this.configLang,configs:this.configs,configFileStructure:this.configFileStructure,sourceCounts:this.sourceCounts,metadata:this.metadata,slides:this.slides,existing:this.editExisting,unsavedChanges:this.unsavedChanges})}),this.$router.push({name:"editor",params:{uid:this.uuid}}))}checkRequiredFields(){return this.reqFields.uuid=!!this.uuid,!Object.values(this.reqFields).some(e=>!e)||(Oe["a"].error("Please fill out the required fields before proceeding."),!1)}continueToEditor(){var e;this.checkRequiredFields()&&(this.loadExisting?void 0!==this.configs[this.configLang]&&this.uuid===(null===(e=this.configFileStructure)||void 0===e?void 0:e.uuid)?(this.loadEditor=!0,this.saveMetadata(!1),this.updateEditorPath()):Oe["a"].error("No config exists for storylines product."):this.uuid?this.generateNewConfig():(Oe["a"].error("Missing required field: UUID"),this.error=!0))}updateSaveStatus(e){this.unsavedChanges=e}refreshConfig(){this.loadExisting?(this.reloadExisting=!0,this.loadExisting=!1,this.generateRemoteConfig()):(this.reloadExisting=!1,this.generateNewConfig())}beforeRouteLeave(e,t,i){const a="editor"===this.$route.name,l="Leave the page? Changes made may not be saved.";this.unsavedChanges&&a&&!window.confirm(l)?i(!1):i()}get getStorylines(){var e,t;const i=c(),a=(null===(e=i.userProfile.storylines)||void 0===e?void 0:e.map(e=>({...e,isUserStoryline:!0})))||[],l=(null===(t=i.userProfile.allStorylines)||void 0===t?void 0:t.filter(e=>!a.some(t=>t.uuid===e.uuid)))||[];let o=[...a,...l];return this.uuid&&(o=o.filter(e=>e.uuid.toLowerCase().includes(this.uuid.toLowerCase()))),o}selectUuid(e){this.uuid=e,this.showDropdown=!1}};Object(r["a"])([Object(n["b"])({default:!0})],Fn.prototype,"editExisting",void 0),Fn=Object(r["a"])([Object(n["a"])({components:{Editor:In,"confirmation-modal":Pt,"metadata-content":nn,spinner:fe["a"],"slide-editor":wo,"slide-toc":mr,"vue-final-modal":ve["a"]}})],Fn);var Pn=Fn;i("5efc");const Un=m()(Pn,[["render",be]]);var Rn=Un;const An={key:0},zn={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},Wn={key:1},Hn={key:0,class:"storyramp-app bg-white"},qn={id:"story-header",class:"story-header sticky top-0 flex border-b border-black bg-gray-200 py-2 px-2 justify-between"},Jn={class:"w-mobile-full truncate"},Xn={class:"font-semibold text-lg m-1"},Gn={class:"w-full mx-auto pb-10",id:"story"},Zn={class:"p-8 pt-2 text-right text-sm"},Yn=["href"],Qn=Object(a["createElementVNode"])("a",{href:"https://github.com/ramp4-pcar4/storylines-editor",target:"_NEW",class:"font-semibold text-blue-700"},"ramp4-pcar4/storylines-editor",-1),Kn={key:0,class:"storyramp-modified"};function es(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("storylines-intro"),c=Object(a["resolveComponent"])("storylines-content");return"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",An,[Object(a["createElementVNode"])("div",zn,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])])):"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Wn,[void 0!==e.config?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Hn,[Object(a["createElementVNode"])("header",qn,[Object(a["createElementVNode"])("div",Jn,[Object(a["createElementVNode"])("span",Xn,Object(a["toDisplayString"])(e.config.title),1)])]),Object(a["createVNode"])(s,{config:e.config.introSlide,configFileStructure:e.configFileStructure},null,8,["config","configFileStructure"]),Object(a["createElementVNode"])("div",Gn,[Object(a["createVNode"])(c,{config:e.config,configFileStructure:e.configFileStructure,lang:e.lang,plugin:!0,headerHeight:e.headerHeight,onStep:e.updateActiveIndex},null,8,["config","configFileStructure","lang","headerHeight","onStep"])]),Object(a["createElementVNode"])("footer",Zn,[Object(a["createTextVNode"])(" Context: "),Object(a["createElementVNode"])("a",{class:"text-blue-700 font-semibold",href:e.config.contextLink,target:"_NEW"},Object(a["toDisplayString"])(e.config.contextLabel),9,Yn),Object(a["createTextVNode"])(" | "),Qn]),e.config.dateModified?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Kn,Object(a["toDisplayString"])(e.$t("story.date"))+" "+Object(a["toDisplayString"])(e.config.dateModified),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)}let ts=class extends n["c"]{constructor(...e){super(...e),Object(he["a"])(this,"config",void 0),Object(he["a"])(this,"configFileStructure",void 0),Object(he["a"])(this,"savedProduct",!1),Object(he["a"])(this,"loadStatus","loading"),Object(he["a"])(this,"activeChapterIndex",-1),Object(he["a"])(this,"lang","en"),Object(he["a"])(this,"headerHeight",0),Object(he["a"])(this,"uid",""),Object(he["a"])(this,"apiUrl","http://localhost:6040"),Object(he["a"])(this,"configs",{en:void 0,fr:void 0})}created(){const e=this.$route.params.uid,t=this.$route.params.lang,a=i("c4e3"),l=i("bc3a").default;e?(this.savedProduct=!0,fetch(this.apiUrl+"/retrieve/"+e).then(i=>{if(404===i.status)console.error(`There does not exist a saved product with UID ${e}.`);else{const l=new a;i.blob().then(i=>{l.loadAsync(i).then(()=>{const i=l.folder("assets"),a=l.folder("charts"),o=l.folder("ramp-config");this.configFileStructure={uuid:e,zip:l,configs:this.configs,assets:{en:i.folder("en"),fr:i.folder("fr")},charts:{en:a.folder("en"),fr:a.folder("fr")},rampConfig:o};const r=`${e}_${t}.json`;l.file(r).async("string").then(e=>{const t=JSON.parse(e);this.config=t,this.loadStatus="loaded",document.title=this.config.title+" - Canada.ca"})})})}fetch(this.apiUrl+"/retrieveMessages").then(e=>{l.post("#{NET_API_URL}#/api/log/create",{messages:e.data.messages}).catch(e=>console.log(e.response||e))})})):(this.config=window.props.config,this.configFileStructure=window.props.configFileStructure,this.loadStatus="loaded");const o=document.documentElement;o.setAttribute("lang",this.lang),this.$i18n.locale=this.lang}updateActiveIndex(e){this.activeChapterIndex=e;const t=document.getElementById("story-header");t&&(this.headerHeight=t.clientHeight)}};ts=Object(r["a"])([Object(n["a"])({components:{spinner:fe["a"]}})],ts);var is=ts;i("a928");const as=m()(is,[["render",es]]);var ls=as,os=i("6605");const rs=[{path:"/:lang/editor",name:"home",component:w,meta:{title:"editor.window.title"}},{path:"/:lang/editor/:uid",redirect:e=>"/"+e.params.lang+"/editor-metadata/"+e.params.uid},{path:"/:lang/editor-metadata",name:"metadataExisting",component:Rn,props:{editExisting:!0},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata",name:"metadataNew",component:Rn,props:{editExisting:!1},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata/:uid",component:Rn,meta:{title:"editor.window.title"}},{path:"/:lang/editor-main/:uid",name:"editor",component:Rn,props:!0,meta:{title:"editor.window.title"}},{path:"/:lang/editor-preview",component:ls,name:"preview",props:!0,meta:{title:"story.window.title"}},{path:"/:lang/editor-preview/:uid",component:ls,meta:{title:"story.window.title"}}],ns=Object(os["a"])({routes:rs,history:Object(os["b"])(),scrollBehavior:function(e){if(e.hash)return{selector:decodeURIComponent(e.hash),behavior:"smooth"}}});var ss=ns,cs=(i("38c8"),i("13d5"),i("9ca6"));const ds=i("3d6d"),us=document.documentElement.getAttribute("lang");function ms(e){return e.reduce((e,t)=>(e.en[t.key]=t.enValue,e.fr[t.key]=t.frValue,e),{en:{},fr:{}})}const bs=Object(cs["a"])({legacy:!1,locale:us||void 0,fallbackLocale:"en",globalInjection:!0,messages:ms(ds)});var ps=i("ee2d"),hs=i.n(ps),gs=(i("fefe"),i("603a")),fs=i.n(gs),vs=(i("fbc4"),i("3b16")),Os=i.n(vs),js=i("1487"),ys=i.n(js),Vs=(i("40e8"),i("c4e7")),Ss=(i("52df"),i("e748"),i("4452")),Cs=i.n(Ss),Es=(i("e896"),i("c883")),ws=i.n(Es);i("91a9");hs.a.lang.use("en-US",Os.a),hs.a.use(fs.a,{Hljs:ys.a});const xs=Object(ve["b"])(),ks=Object(a["createApp"])(p),Ns=Object(s["a"])();ks.use(Ns).use(ss).use(bs).use(Vs["a"],{directive:"tippy",component:"tippy"}).use(Cs.a).use(Oe["a"]).use(ws.a).use(hs.a).use(xs),ks.mount("#app")},cdea:function(e,t,i){},d1aa:function(e,t,i){},d364:function(e,t,i){},d932:function(e,t,i){},e50c:function(e,t,i){"use strict";i("87c9")},e593:function(e,t,i){},e8ca:function(e,t,i){},eae8:function(e,t,i){"use strict";i("569f")},ef88:function(e,t,i){}}]);
//# sourceMappingURL=chunk-common.3f0a4d63.js.map