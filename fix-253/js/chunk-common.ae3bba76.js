(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t,i){e.exports=i("cd49")},"012b":function(e,t,i){},"0589":function(e,t,i){},"090e":function(e,t,i){"use strict";i("3397")},"124a":function(e,t,i){},"218f":function(e,t,i){},2208:function(e,t,i){"use strict";i("d932")},"303e":function(e,t,i){"use strict";i("124a")},3397:function(e,t,i){},"38c8":function(e,t,i){},"3ac1":function(e,t,i){},"3aea":function(e,t,i){"use strict";i("9537")},"3d6d":function(e,t){var i=[{key:"chapters.title",enValue:"Chapters",enValid:"1",frValue:"Chapitres",frValid:"1"},{key:"chapters.return",enValue:"Return to top",enValid:"1",frValue:"Retournez en haut",frValid:"1"},{key:"chapters.menu",enValue:"Toggle menu",enValid:"1",frValue:"Menu à bascule",frValid:"1"},{key:"scrollguard.desc",enValue:"Use ctrl + scroll to zoom the map",enValid:"1",frValue:"Utilisez les touches Ctrl et + pour faire un zoom de la carte",frValid:"1"},{key:"story.window.title",enValue:"RAMP Storylines",enValid:"1",frValue:"RAMP Storylines",frValid:"0"},{key:"story.date",enValue:"Date modified:",enValid:"1",frValue:"Date de modification:",frValid:"1"},{key:"story.error",enValue:"An error occurred while loading this Storylines product. See developer console for more information.",enValid:"1",frValue:"Une erreur est survenue pendant le chargement ce synopsis produit. Voir la console du promoteur pour obtenir de plus amples renseignements.",frValid:"1"},{key:"image.fullscreen",enValue:"Full Screen",enValid:"1",frValue:"Plein Écran",frValid:"1"},{key:"dynamic.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"0"},{key:"dynamic.textSection",enValue:"Text Section",enValid:"1",frValue:"Section de texte",frValid:"1"},{key:"dynamic.panel.collection",enValue:"Panel Collection",enValid:"1",frValue:"Collection de panneaux",frValid:"1"},{key:"dynamic.panel.id",enValue:"Panel ID",enValid:"1",frValue:"No d’identification du panneau",frValid:"1"},{key:"dynamic.panel.type",enValue:"Panel Type",enValid:"1",frValue:"Type de panneaux",frValid:"1"},{key:"dynamic.panel.actions",enValue:"Panel Actions",enValid:"1",frValue:"Actions du panneau",frValid:"1"},{key:"dynamic.panel.idTaken",enValue:"Panel ID is already",enValid:"1",frValue:"Le nom du panneau est déjà utilisé",frValid:"1"},{key:"dynamic.panel.editor",enValue:"Panel Editor:",enValid:"1",frValue:"Éditeur de panneaux:",frValid:"1"},{key:"timeslider.expand",enValue:"Expand",enValid:"1",frValue:"Développer",frValid:"1"},{key:"timeslider.minimize",enValue:"Minimize",enValid:"1",frValue:"Réduire",frValid:"1"},{key:"timeslider.play",enValue:"Play",enValid:"1",frValue:"Lecture",frValid:"1"},{key:"timeslider.pause",enValue:"Pause",enValid:"1",frValue:"Pause",frValid:"1"},{key:"fullscreen.activate",enValue:"Enter Fullscreen",enValid:"1",frValue:"Afficher le mode plein écran",frValid:"1"},{key:"fullscreen.deactivate",enValue:"Exit Fullscreen",enValid:"1",frValue:"Quitter le mode plein écran",frValid:"1"},{key:"editor.window.title",enValue:"RAMP Storylines Editor",enValid:"1",frValue:"Éditeur de scénarios de la PCAR",frValid:"1"},{key:"editor.createProduct",enValue:"Create New Storylines Product",enValid:"1",frValue:"Créer un nouveau produit de scénarios",frValid:"1"},{key:"editor.editProduct",enValue:"Edit Existing Storylines Product",enValid:"1",frValue:"Modifier un produit de scénarios",frValid:"1"},{key:"editor.editMetadata",enValue:"Edit Project Metadata",enValid:"1",frValue:"Modifier les métadonnées d’un projet",frValid:"1"},{key:"editor.productDetails",enValue:"Storylines product details",enValid:"1",frValue:"Détails du produit de scénarios",frValid:"1"},{key:"editor.metadata.instructions",enValue:'Fill in metadata details about your new Storylines product. Use the "Preview" button to see what your slides will look like.',enValid:"1",frValue:"Inscrivez les métadonnées de votre nouveau produit de scénario. Utilisez la fonction « Afficher l’aperçu » pour voir à quoi ressemblent vos diapositives.",frValid:"1"},{key:"editor.uuid",enValue:"UUID",enValid:"1",frValue:"UUID",frValid:"0"},{key:"editor.uuid.new",enValue:"New UUID",enValid:"1",frValue:"New UUID",frValid:"0"},{key:"editor.warning.uuid",enValue:"UUID already exists. Saving this will overwrite existing product.",enValid:"1",frValue:"L’IDUU existe déjà. Enregistrer ce produit écrasera le produit existant.",frValid:"1"},{key:"editor.warning.rename",enValue:"UUID already in use. Proceeding will overwrite the existing product.",enValid:"1",frValue:"UUID already in use. Proceeding will overwrite the existing product.",frValid:"0"},{key:"editor.changeUuid",enValue:"Click here to change UUID",enValid:"1",frValue:"Click here to change UUID",frValid:"0"},{key:"editor.changingUuid",enValue:"You are changing this product UUID from {baseUuid} to {changeUuid}. Save changes required.",enValid:"1",frValue:"You are changing this product UUID from {baseUuid} to {changeUuid}. Save changes required.",frValid:"0"},{key:"editor.title",enValue:"Title",enValid:"1",frValue:"Titre",frValid:"1"},{key:"editor.logo",enValue:"Logo",enValid:"1",frValue:"Logo",frValid:"1"},{key:"editor.logoPreview",enValue:"Logo Preview",enValid:"1",frValue:"Aperçu du logo",frValid:"1"},{key:"editor.logoAltText",enValue:"Logo Alt Text",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.logoAltText.desc",enValue:"For accessibility purposes, provide description text for the logo.",enValid:"1",frValue:"Pour des raisons d'accessibilité, fournissez un texte descriptif pour le logo.",frValid:"0"},{key:"editor.contextLink",enValue:"Context Link",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.contextLink.info",enValue:"Context link shows up at the bottom of the page to provide additional resources for interested users.",enValid:"1",frValue:"Le lien contextuel apparaît au bas de la page et fournit des ressources supplémentaires aux utilisateurs intéressés.",frValid:"1"},{key:"editor.contextLabel",enValue:"Context Label",enValid:"1",frValue:"Étiquette de contexte",frValid:"1"},{key:"editor.contextLabel.info",enValue:"Context label shows up before the context link to explain what the link is for",enValid:"1",frValue:"L’étiquette de contexte apparaît avant le lien contextuel et explique à quoi sert le lien.",frValid:"1"},{key:"editor.dateModified",enValue:"Date Modified",enValid:"1",frValue:"Date de modification",frValid:"1"},{key:"editor.load",enValue:"Load",enValid:"1",frValue:"Charger",frValid:"1"},{key:"editor.rename",enValue:"Rename",enValid:"1",frValue:"Rename",frValid:"0"},{key:"editor.browse",enValue:"Browse",enValid:"1",frValue:"Parcourir",frValid:"1"},{key:"editor.remove",enValue:"Remove",enValid:"1",frValue:"Supprimer",frValid:"1"},{key:"editor.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"1"},{key:"editor.next",enValue:"Next",enValid:"1",frValue:"Suivant",frValid:"1"},{key:"editor.preview",enValue:"Preview",enValid:"1",frValue:"Afficher l’aperçu",frValid:"1"},{key:"editor.confirm",enValue:"Confirm",enValid:"1",frValue:"Confirmer",frValid:"1"},{key:"editor.cancel",enValue:"Cancel",enValid:"1",frValue:"Annuler",frValid:"1"},{key:"editor.unsavedChanges",enValue:"Unsaved changes",enValid:"1",frValue:"Modifications non enregistrées",frValid:"1"},{key:"editor.saveChanges",enValue:"Save Changes",enValid:"1",frValue:"Enregistrer les modifications",frValid:"1"},{key:"editor.label.or",enValue:"or",enValid:"1",frValue:"ou",frValid:"1"},{key:"editor.label.browse",enValue:"browse",enValid:"1",frValue:"parcourir",frValid:"1"},{key:"editor.label.upload",enValue:"to upload",enValid:"1",frValue:"téléverser",frValid:"1"},{key:"editor.savingChanges",enValue:"Saving...",enValid:"1",frValue:"Enregistrement...",frValid:"1"},{key:"editor.confirmOverwrite",enValue:"Are you sure you want to overwrite product '{uuid}'?",enValid:"1",frValue:"Are you sure you want to overwrite product '{uuid}'?",frValid:"0"},{key:"editor.resetChanges",enValue:"Reset Changes",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.refreshChanges.modal",enValue:"Are you sure you want to reload the product? All unsaved changes will be lost.",enValid:"1",frValue:"Voulez-vous vraiment recharger ce produit? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.changeLang.modal",enValue:"Are you sure you want to switch languages? Unsaved changes may be lost.",enValid:"1",frValue:"Voulez-vous vraiment changer de langue? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.frenchConfig",enValue:"View French Config",enValid:"1",frValue:"Afficher la configuration en français",frValid:"1"},{key:"editor.englishConfig",enValue:"View English Config",enValid:"1",frValue:"Afficher la configuration en anglais",frValid:"1"},{key:"editor.returnToLanding",enValue:"Return to Landing",enValid:"1",frValue:"Retour à la page d’accueil",frValid:"1"},{key:"editor.image.delete",enValue:"Delete Image",enValid:"1",frValue:"Supprimer l'image",frValid:"1"},{key:"editor.image.label.drag",enValue:"Drag your images here",enValid:"1",frValue:"Faites glisser vos images ici",frValid:"1"},{key:"editor.image.label.caption",enValue:"Caption",enValid:"1",frValue:"Légende",frValid:"1"},{key:"editor.image.reorder",enValue:"Click and drag to reorder images",enValid:"1",frValue:"Cliquez sur les images et faites-les glisser pour changer l’ordre.",frValid:"1"},{key:"editor.image.altTag",enValue:"Alt tag",enValid:"1",frValue:"Texte de remplacement",frValid:"1"},{key:"editor.image.slideshowCaption",enValue:"Slideshow Caption",enValid:"1",frValue:"Légende du diaporama",frValid:"1"},{key:"editor.image.loadingError",enValue:"An error occurred when trying to load image",enValid:"1",frValue:"Une erreur est survenue lors du chargement de l’image.",frValid:"1"},{key:"editor.video.title",enValue:"Video Title",enValid:"1",frValue:"Titre de la vidéo",frValid:"1"},{key:"editor.video.label.drag",enValue:"Drag your video file here",enValid:"1",frValue:"Glissez votre fichier vidéo ici",frValid:"1"},{key:"editor.video.label.captions",enValue:"Video Captions",enValid:"1",frValue:"Sous-titres",frValid:"1"},{key:"editor.video.label.transcript",enValue:"Video Transcript",enValid:"1",frValue:"Transcription",frValid:"1"},{key:"editor.video.label.upload",enValue:"Upload",enValid:"1",frValue:"Télécharger",frValid:"1"},{key:"editor.video.delete",enValue:"Delete Video",enValid:"1",frValue:"Supprimer la vidéo",frValid:"1"},{key:"editor.video.pasteUrl",enValue:"Paste the URL to a video",enValid:"1",frValue:"Paste the URL to a video",frValid:"0"},{key:"editor.chart.delete",enValue:"Delete Chart",enValid:"1",frValue:"Supprimer le graphique",frValid:"1"},{key:"editor.chart.label.name",enValue:"Name",enValid:"1",frValue:"Nom",frValid:"1"},{key:"editor.chart.label.edit",enValue:"Edit",enValid:"1",frValue:"Éditer",frValid:"1"},{key:"editor.chart.label.empty",enValue:"Empty",enValid:"1",frValue:"Vide",frValid:"1"},{key:"editor.chart.label.create",enValue:"Add new chart",enValid:"1",frValue:"Ajouter un nouveau graphique",frValid:"1"},{key:"editor.chart.label.info",enValue:"Interactive chart",enValid:"1",frValue:"[FR] Interactive chart",frValid:"0"},{key:"editor.chart.label.nameExists",enValue:"There is already an existing chart with the name {name}.",enValid:"1",frValue:"There is already an existing chart with the name {name}.",frValid:"0"},{key:"editor.chart.label.info",enValue:"Interactive charts ({num})",enValid:"1",frValue:"Graphiques interactifs ({num})",frValid:"1"},{key:"editor.chart.delete.confirm",enValue:"Are you sure you want to delete the chart {name}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer le graphique {nom}?",frValid:"1"},{key:"editor.map.title",enValue:"Map title",enValid:"1",frValue:"Titre de la carte",frValid:"1"},{key:"editor.map.edit.cancel",enValue:"Cancel editing",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.map.edit",enValue:"Map editor",enValid:"1",frValue:"Éditeur de carte",frValid:"1"},{key:"editor.map.label.name",enValue:"Map config name",enValid:"1",frValue:"Nom de la configuration de la carte",frValid:"1"},{key:"editor.map.label.create",enValue:"Create New Configuration File",enValid:"1",frValue:"Créer un nouveau fichier de configuration",frValid:"1"},{key:"editor.map.label.edit",enValue:"Edit Map Configuration",enValid:"1",frValue:"Modifier la configuration de la carte",frValid:"1"},{key:"editor.map.scrollguard.enable",enValue:"Enable scrollguard",enValid:"1",frValue:"Activer le contrôle du défilement",frValid:"1"},{key:"editor.map.timeslider.enable",enValue:"Enable Time Slider:",enValid:"1",frValue:"Activer le curseur temporel:",frValid:"1"},{key:"editor.map.timeslider.edit",enValue:"Edit Time Slider Config",enValid:"1",frValue:"Modifier la configuration du curseur temporel",frValid:"1"},{key:"editor.map.timeslider.range",enValue:"Range:",enValid:"1",frValue:"Tranche:",frValid:"1"},{key:"editor.map.timeslider.start",enValue:"Start:",enValid:"1",frValue:"Début:",frValid:"1"},{key:"editor.map.timeslider.attribute",enValue:"Attribute:",enValid:"1",frValue:"Caractéristique:",frValid:"1"},{key:"editor.map.timeslider.layers",enValue:"(OPTIONAL) Comma separated Layer IDs:",enValid:"1",frValue:"(OPTIONAL) Comma separated Layer IDs:",frValid:"0"},{key:"editor.map.timeslider.to",enValue:"to",enValid:"1",frValue:"to",frValid:"0"},{key:"editor.map.timeslider.warning",enValue:"⚠️Warning! Please ensure that:",enValid:"1",frValue:"⚠️Avertissement! Veuillez vous assurer de ce qui suit:",frValid:"1"},{key:"editor.map.timeslider.warning.bullet1",enValue:"All range and start values are positive integers.",enValid:"1",frValue:"Toutes les valeurs de la tranche et du début sont des nombres entiers positifs.",frValid:"1"},{key:"editor.map.timeslider.warning.bullet2",enValue:'The "to" value is greater than or equal to the "from" value.',enValid:"1",frValue:"La valeur « À » est supérieure ou égale à la valeur « De ».",frValid:"1"},{key:"editor.map.timeslider.warning.end",enValue:"Otherwise, your time slider config cannot be saved.",enValid:"1",frValue:"Autrement",frValid:" la configuration du curseur temporel ne pourra pas être enregistrée."},{key:"editor.slideshow.label.info",enValue:"Slideshow items ({num})",enValid:"1",frValue:"[FR] Slideshow items ({num})",frValid:"0"},{key:"editor.slideshow.label.create",enValue:"Add new item",enValid:"1",frValue:"[FR] Add new item",frValid:"0"},{key:"editor.slideshow.label.edit",enValue:"Edit existing item",enValid:"1",frValue:"[FR] Edit existing item",frValid:"0"},{key:"editor.slideshow.label.type",enValue:"Type",enValid:"1",frValue:"[FR] Type",frValid:"0"},{key:"editor.slideshow.label.add",enValue:"Add",enValid:"1",frValue:"[FR] Add",frValid:"0"},{key:"editor.slides.title",enValue:"SLIDES",enValid:"1",frValue:"DIAPOSITIVES",frValid:"1"},{key:"editor.slides.addSlide",enValue:"New Slide",enValid:"1",frValue:"Nouvelle diapositive",frValid:"1"},{key:"editor.slides.copyFromLang",enValue:"Copy slides from the other language",enValid:"1",frValue:"Copier les diapositives de l’autre langue",frValid:"1"},{key:"editor.slides.deleteSlide.confirm",enValue:"Are you sure you want to delete the slide {title}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer la diapositive {titre}?",frValid:"1"},{key:"editor.slides.changeSlide.confirm",enValue:"Are you sure you want to change the slide {title}? All unsaved progress will be lost.",enValid:"1",frValue:"Voulez-vous vraiment modifier la diapositive {titre}? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.slides.makeFull",enValue:"Make the right panel the full slide",enValid:"1",frValue:"Mettre la diapositive complète dans le panneau de droite",frValid:"1"},{key:"editor.slides.copyAll",enValue:"Copy all",enValid:"1",frValue:"Copier tout",frValid:"1"},{key:"editor.slides.copy",enValue:"Copy",enValid:"1",frValue:"Copier",frValid:"1"},{key:"editor.slides.slide",enValue:"Slide",enValid:"1",frValue:"Diapositive",frValid:"1"},{key:"editor.slides.previousSlide",enValue:"Previous slide",enValid:"1",frValue:"Diapositive précédente",frValid:"1"},{key:"editor.slides.nextSlide",enValue:"Next slide",enValid:"1",frValue:"Diapositive suivante",frValid:"1"},{key:"editor.slides.leftPanel",enValue:"Left panel",enValid:"1",frValue:"Panneau de gauche",frValid:"1"},{key:"editor.slides.rightPanel",enValue:"Right panel",enValid:"1",frValue:"Panneau de droite",frValid:"1"},{key:"editor.slides.fullscreenPanel",enValue:"Fullscreen panel",enValid:"1",frValue:"Panneau plein écran",frValid:"1"},{key:"editor.slides.contentType",enValue:"Content type",enValid:"1",frValue:"Type de contenu",frValid:"1"},{key:"editor.slides.content",enValue:"Content",enValid:"1",frValue:"Contenu",frValid:"1"},{key:"editor.slides.select",enValue:"Please select a slide to edit",enValid:"1",frValue:"Veuillez sélectionner une diapositive à modifier",frValid:"1"},{key:"editor.slides.panel.body",enValue:"Panel body",enValid:"1",frValue:"Corps du panneau",frValid:"1"},{key:"editor.slides.panel.title",enValue:"Panel title",enValid:"1",frValue:"Titre du panneau",frValid:"1"},{key:"editor.slides.intro",enValue:"Intro subtitle",enValid:"1",frValue:"Sous-titre de l’introduction",frValid:"1"},{key:"editor.slides.title",enValue:"Intro title",enValid:"1",frValue:"Titre de l’introduction",frValid:"1"},{key:"editor.tocOrientation",enValue:"Table of Contents Orientation",enValid:"1",frValue:"Orientation de la table des matières",frValid:"0"},{key:"editor.tocOrientation.info",enValue:"The table of contents orientation will be set to vertical in mobile view.",enValid:"1",frValue:"L'orientation de la table des matières sera définie sur verticale en vue mobile.",frValid:"0"},{key:"editor.tocOrientation.vertical",enValue:"Vertical",enValid:"1",frValue:"Vertical",frValid:"0"},{key:"editor.tocOrientation.horizontal",enValue:"Horizontal",enValid:"1",frValue:"Horizontal",frValid:"0"}];i.columns=["key","enValue","enValid","frValue","frValid"],e.exports=i},4712:function(e,t,i){"use strict";i("218f")},"480b":function(e,t,i){"use strict";i("012b")},"518e":function(e,t,i){},"51bb":function(e,t,i){"use strict";i("3ac1")},"569f":function(e,t,i){},"5cf1":function(e,t,i){},6381:function(e,t,i){},"72c3":function(e,t,i){"use strict";i("e593")},"7b13":function(e,t,i){"use strict";i("ff42")},9537:function(e,t,i){},9972:function(e,t,i){"use strict";i("5cf1")},"9a2c":function(e,t,i){"use strict";i("dd0c")},"9c96":function(e,t,i){"use strict";i("a990")},a0ea:function(e){e.exports=JSON.parse('{"startingFixtures":["export","geosearch","overviewmap","basemap","legend","mapnav","help","appbar","help","grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"],"configs":{"en":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/en/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/en/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/en/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/en/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":"The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"The Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Simple","description":"Canada Base Map - Simple","altText":"Canada base map - Simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Elevation (CBME)","description":"The Canada Base Map - Elevation (CBME) web mapping services of the Earth Sciences Sector at Natural Resources Canada, is intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Elevation (CBME)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":" The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Imagery","description":"World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide.","altText":"World Imagery","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Physical Map","description":"This map presents the Natural Earth physical map at 1.24km per pixel for the world and 500m for the coterminous United States.","altText":"World Physical Map","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Shaded Relief","description":"This map portrays surface elevation as shaded relief. This map is used as a basemap layer to add shaded relief to other GIS maps, such as the ArcGIS Online World Street Map.","altText":"World Shaded Relief","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Street Map","description":"This worldwide street map presents highway-level data for the world.","altText":"ESWorld Street Map","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Terrain Base","description":"This map is designed to be used as a base map by GIS professionals to overlay other thematic layers such as demographics or land cover.","altText":"World Terrain Base","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Topographic Map","description":"This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone.","altText":"World Topographic Map","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}},"fr":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/fr/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/fr/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/fr/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/fr/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada – transport (CBCT) avec étiquettes","description":"La carte de base du Canada – transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada – transport (CBCT)","layers":[{"id":"CBCT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBCT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - simple","description":"La carte de base du Canada - simple","altText":"La carte de base du Canada - simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1},{"id":"SMW","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_TXT_3978/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - élevation (CBCE)","description":"La carte de base du Canada - élevation (CBCE) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - élevation (CBCE)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - transport (CBCT)","description":"La carte de base du Canada - transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - transport (CBCT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Imagerie mondiale","description":"L\'imagerie mondiale fournit une imagerie satellitaire et aérienne dans de nombreuses régions du monde avec une résolution de 1 mètres et moins et des images satellitaires de résolution inférieure dans le monde entier.","altText":"L\'imagerie mondiale","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde physique","description":"La carte du monde physique représente l\'aspect physique naturel de la Terre à 1.24 kilomètres par pixel pour le monde et à 500 mètres pour les États-Unis.","altText":"La carte du monde physique","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde en relief ombragé","description":"La carte du monde en relief ombragé représente l\'élévation de la surface de la terre comme un relief ombragé. Cette carte est utilisée comme couche de fond afin d\'ajouter un relief ombragé à d\'autres cartes SIG, comme la carte ArcGIS Online World Street Map.","altText":"La carte du monde en relief ombragé","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde routier","description":"La carte du monde routier présente des données au niveau des autoroutes pour le monde.","altText":"La carte du monde routier","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde terrain","description":"La carte du monde terrain est conçue pour être utilisée comme une carte de base par les professionnels du SIG pour superposer d\'autres couches thématiques comme la démographie ou la couverture terrestre.","altText":"La carte du monde terrain","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde topographique","description":"La carte du monde topographique est conçue pour être utilisé comme une carte de base par les professionnels du SIG et comme une carte de référence par quiconque.","altText":"La carte du monde topographique","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}}}}')},a229:function(e,t,i){"use strict";i("6381")},a3c4:function(e,t,i){},a3cc:function(e,t,i){"use strict";i("0589")},a990:function(e,t,i){},abd1:function(e,t,i){"use strict";i("d12f")},b949:function(e,t,i){"use strict";i("e8ca")},cd49:function(e,t,i){"use strict";i.r(t);var a=i("7a23");const l={id:"app",class:"storyramp-app bg-white"};function o(e,t,i,o,r,n){const s=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.$route.path}))])}var r=i("9ab4"),n=i("1b40");class s extends n["c"]{onRouteUpdate(e){var t;this.$i18n.locale=null!==(t=e.params.lang)&&void 0!==t?t:"en",e.params.lang&&(document.title=this.$t(e.meta.title))}}Object(r["a"])([Object(n["d"])("$route",{immediate:!0})],s.prototype,"onRouteUpdate",null);i("9a2c");var c=i("6b0d"),d=i.n(c);const u=d()(s,[["render",o]]);var m=u,p=i("ce1f");p["b"].registerHooks(["beforeRouterEnter","beforeRouteLeave","beforeRouteUpdate"]);const h={class:"flex justify-center"},b={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},g={class:"text-2xl font-bold"},f={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},v={class:"text-2xl font-bold"};function O(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createElementVNode"])("div",b,[Object(a["createVNode"])(n,{to:{name:"metadataNew"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",g,"+ "+Object(a["toDisplayString"])(e.$t("editor.createProduct")),1)]),_:1})]),Object(a["createElementVNode"])("div",f,[Object(a["createVNode"])(n,{to:{name:"metadataExisting"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",v,Object(a["toDisplayString"])(e.$t("editor.editProduct")),1)]),_:1})])])}class j extends n["c"]{}i("9972");const V=d()(j,[["render",O]]);var y=V;const S={class:"editor-container"},C={class:"px-20 py-5"},x={class:"flex"},E={class:"flex flex-1 text-2xl font-bold mb-5"},w={class:"border py-5 w-5/6"},k={key:0,class:"flex flex-row items-center"},N={class:"editor-label"},T={key:1,class:"flex flex-row items-center"},_={class:"editor-label"},$={key:0,class:"text-red-500"},L={key:1,class:"inline-flex align-middle mb-1"},M={key:0,class:"text-yellow-500 rounded p-1"},I=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),B=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m2.095 19.886 9.248-16.5c.133-.237.384-.384.657-.384.272 0 .524.147.656.384l9.248 16.5c.064.115.096.241.096.367 0 .385-.309.749-.752.749h-18.496c-.44 0-.752-.36-.752-.749 0-.126.031-.252.095-.367zm9.907-6.881c-.414 0-.75.336-.75.75v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5c0-.414-.336-.75-.75-.75zm-.002-3c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z","fill-rule":"nonzero"})])],-1),D={class:"align-center inline-block select-none text-sm"},F=Object(a["createElementVNode"])("br",null,null,-1),P={key:1,class:"text-yellow-500 rounded p-1"},U=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),R=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m2.095 19.886 9.248-16.5c.133-.237.384-.384.657-.384.272 0 .524.147.656.384l9.248 16.5c.064.115.096.241.096.367 0 .385-.309.749-.752.749h-18.496c-.44 0-.752-.36-.752-.749 0-.126.031-.252.095-.367zm9.907-6.881c-.414 0-.75.336-.75.75v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5c0-.414-.336-.75-.75-.75zm-.002-3c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z","fill-rule":"nonzero"})])],-1),A={class:"align-center inline-block select-none text-sm"},z=Object(a["createElementVNode"])("br",null,null,-1),W={key:2,class:"p-1"},q=Object(a["createElementVNode"])("div",{class:"editor-label"},null,-1),H=Object(a["createElementVNode"])("br",null,null,-1),X={class:"mb-4"},J={class:"editor-h3"},G={class:"flex mt-8"},Z={class:"ml-auto"},Y={class:"editor-button"},Q=["onClick"],K={slot:"header",class:"text-lg font-bold"},ee={class:"w-full flex justify-end"};function te(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("metadata-content"),c=Object(a["resolveComponent"])("router-link"),d=Object(a["resolveComponent"])("confirmation-modal"),u=Object(a["resolveComponent"])("vue-final-modal"),m=Object(a["resolveComponent"])("editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",S,[e.loadEditor?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",E,Object(a["toDisplayString"])(e.editExisting?e.$t("editor.editProduct"):e.$t("editor.createProduct")),1),Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=t=>e.swapLang())},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),1)]),Object(a["createElementVNode"])("div",w,[e.renaming?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",k,[Object(a["createElementVNode"])("label",N,Object(a["toDisplayString"])(e.$t("editor.uuid.new"))+": ",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:Object(a["normalizeClass"])(["editor-input w-1/3 mt-0",e.error||!e.reqFields.uuid?"input-error":""]),type:"text",onInput:t[1]||(t[1]=t=>{e.error=!1,e.checkUuid(!0)}),"onUpdate:modelValue":t[2]||(t[2]=t=>e.changeUuid=t)},null,34),[[a["vModelText"],e.changeUuid]]),Object(a["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...t)=>e.renameProduct&&e.renameProduct(...t)),class:Object(a["normalizeClass"])(["editor-button bg-black text-white hover:bg-gray-800",e.error?"input-error":""])},Object(a["toDisplayString"])(e.$t("editor.rename")),3)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",T,[Object(a["createElementVNode"])("label",_,["uuid"in e.reqFields?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",$,"*")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.uuid"))+": ",1)]),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:Object(a["normalizeClass"])(["editor-input w-1/3 mt-0",e.error||!e.reqFields.uuid?"input-error":""]),type:"text",onInput:t[4]||(t[4]=t=>{e.error=!1,e.reqFields.uuid=!0,e.checkUuid()}),"onUpdate:modelValue":t[5]||(t[5]=t=>e.uuid=t)},null,34),[[a["vModelText"],e.uuid]]),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[6]||(t[6]=(...t)=>e.generateRemoteConfig&&e.generateRemoteConfig(...t)),class:Object(a["normalizeClass"])(["editor-button bg-black text-white hover:bg-gray-800",e.error?"input-error":""])},Object(a["toDisplayString"])(e.$t("editor.load")),3)):Object(a["createCommentVNode"])("",!0),"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[Object(a["createVNode"])(n,{size:"24px",color:"#009cd1",class:"mx-2 my-auto"})])):Object(a["createCommentVNode"])("",!0)])),Object(a["createElementVNode"])("div",null,["none"!==e.warning?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",M,[I,B,Object(a["createElementVNode"])("span",D,Object(a["toDisplayString"])(e.$t("editor.warning."+e.warning)),1),F])):Object(a["createCommentVNode"])("",!0),!e.renaming&&e.renamed?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",P,[U,R,Object(a["createElementVNode"])("span",A,Object(a["toDisplayString"])(e.$t("editor.changingUuid",{baseUuid:e.baseUuid,changeUuid:e.renamed})),1),z])):Object(a["createCommentVNode"])("",!0),e.editExisting&&"loaded"==e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",W,[q,Object(a["createElementVNode"])("button",{class:"align-center inline-block select-none text-sm",onClick:t[7]||(t[7]=t=>{e.renaming=!e.renaming,e.changeUuid="",e.warning="rename"==e.warning?"none":e.warning})},Object(a["toDisplayString"])(e.renaming?e.$t("editor.cancel"):e.$t("editor.changeUuid")),1)])):Object(a["createCommentVNode"])("",!0)])]),H,Object(a["createElementVNode"])("div",X,[Object(a["createElementVNode"])("h3",J,Object(a["toDisplayString"])(e.$t("editor.productDetails")),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.$t("editor.metadata.instructions")),1)]),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"])]),Object(a["createElementVNode"])("div",G,[e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[8]||(t[8]=t=>e.saveMetadata(!0)),class:"editor-button"},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Z,[Object(a["createVNode"])(c,{to:{name:"home"},target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",Y,Object(a["toDisplayString"])(e.$t("editor.back")),1)]),_:1}),Object(a["createElementVNode"])("button",{onClick:t[9]||(t[9]=t=>"none"===e.warning?e.continueToEditor():e.$vfm.open("confirm-uuid-overwrite")),class:"editor-button bg-black text-white"},Object(a["toDisplayString"])(e.$t("editor.next")),1),Object(a["createVNode"])(d,{name:"confirm-uuid-overwrite",message:e.$t("editor.confirmOverwrite",{uuid:e.uuid}),onOk:t[10]||(t[10]=t=>e.continueToEditor())},null,8,["message"])])])],64)),e.loadEditor&&"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(m,{key:1,configs:e.configs,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,metadata:e.metadata,slides:e.slides,configLang:e.configLang,saving:e.saving,unsavedChanges:e.unsavedChanges,onSaveChanges:e.generateConfig,onSaveStatus:e.updateSaveStatus,onRefreshConfig:e.refreshConfig,ref:"mainEditor"},{langModal:Object(a["withCtx"])(i=>[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:Object(a["withModifiers"])(t=>i.unsavedChanges?e.$vfm.open("change-lang"):e.swapLang(),["stop"])},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),9,Q),Object(a["createVNode"])(d,{name:"change-lang",message:e.$t("editor.changeLang.modal"),onOk:t[11]||(t[11]=t=>e.swapLang())},null,8,["message"])]),metadataModal:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{modalId:"metadata-edit-modal","content-class":"flex flex-col max-h-full overflow-y-auto max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",K,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"]),Object(a["createElementVNode"])("div",ee,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[12]||(t[12]=t=>e.saveMetadata(!1))}," Done ")])]),_:1})]),_:1},8,["configs","configFileStructure","sourceCounts","metadata","slides","configLang","saving","unsavedChanges","onSaveChanges","onSaveStatus","onRefreshConfig"])):Object(a["createCommentVNode"])("",!0)])}var ie;i("14d9"),i("88a7"),i("271a"),i("5494");(function(e){e["Text"]="text",e["Image"]="image",e["Map"]="map",e["Chart"]="chart",e["Video"]="video",e["Audio"]="audio",e["Slideshow"]="slideshow",e["Dynamic"]="dynamic",e["Loading"]="loading"})(ie||(ie={}));var ae=i("0a4f"),le=i("2926"),oe=i("327a");const re=e=>(Object(a["pushScopeId"])("data-v-f570b598"),e=e(),Object(a["popScopeId"])(),e),ne={class:"sticky top-20 h-auto self-start flex-grow m-5"},se={key:0},ce={class:"flex"},de={class:"flex flex-col w-full"},ue=re(()=>Object(a["createElementVNode"])("label",{class:"editor-label"},"Slide title:",-1)),me={class:"flex"},pe=re(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),he=["disabled"],be=["disabled"],ge={class:"flex mt-3"},fe={class:"mx-2 font-bold"},ve=["disabled"],Oe=re(()=>Object(a["createElementVNode"])("br",null,null,-1)),je={key:0,class:"flex border-b border-black"},Ve=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-f570b598></path></svg></span><span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-f570b598></path></svg></span>',2),ye={class:"align-middle inline-block pl-1"},Se=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-f570b598></path></svg></span><span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-f570b598></path></svg></span>',2),Ce={class:"align-middle inline-block pl-1"},xe={key:1,class:"border-b border-black"},Ee=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-f570b598></path></svg></span><span class="align-middle inline-block" data-v-f570b598><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-f570b598><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-f570b598></path></svg></span>',2),we={class:"align-middle inline-block pl-1"},ke={class:"flex mt-4"},Ne={class:"font-bold text-xl"},Te=re(()=>Object(a["createElementVNode"])("span",{class:"ml-auto flex-grow"},null,-1)),_e={class:"flex flex-col mr-8"},$e={class:"editor-label text-left text-lg"},Le=["value"],Me=["value"],Ie={key:1,class:"flex h-full mt-4 justify-center text-gray-600 text-xl"};function Be(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ne,[e.currentSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",se,[Object(a["createElementVNode"])("div",ce,[Object(a["createElementVNode"])("div",de,[ue,Object(a["createElementVNode"])("div",me,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.currentSlide.title=t),placeholder:"Add a title",class:"editor-input w-2/3"},null,512),[[a["vModelText"],e.currentSlide.title]]),pe,Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex-1),["stop"])),disabled:0===e.slideIndex,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.previousSlide")),9,he),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex+1),["stop"])),disabled:e.isLast,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.nextSlide")),9,be)]),Object(a["createElementVNode"])("div",ge,[Object(a["createElementVNode"])("span",fe,Object(a["toDisplayString"])(e.$t("editor.slides.makeFull")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[3]||(t[3]=t=>e.rightOnly=t),disabled:e.rightOnly&&"dynamic"===e.determineEditorType(e.currentSlide.panel[e.panelIndex]),onChange:t[4]||(t[4]=Object(a["withModifiers"])(t=>e.$vfm.open("right-only-"+e.slideIndex),["stop"]))},null,40,ve),[[a["vModelCheckbox"],e.rightOnly]])])])]),Oe,2===e.currentSlide.panel.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",je,[Object(a["createElementVNode"])("button",{onClick:t[5]||(t[5]=()=>{e.panelIndex=0,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",0==e.panelIndex?"border-black":"border-white"])},[Ve,Object(a["createElementVNode"])("span",ye,Object(a["toDisplayString"])(e.$t("editor.slides.leftPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[6]||(t[6]=()=>{e.panelIndex=1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",1==e.panelIndex?"border-black":"border-white"])},[Se,Object(a["createElementVNode"])("span",Ce,Object(a["toDisplayString"])(e.$t("editor.slides.rightPanel")),1)],2)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",xe,[Object(a["createElementVNode"])("button",{onClick:t[7]||(t[7]=()=>{e.saveChanges()}),class:"editor-button border-t border-l border-r border-black"},[Ee,Object(a["createElementVNode"])("span",we,Object(a["toDisplayString"])(e.$t("editor.slides.fullscreenPanel")),1)])])),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",ke,[Object(a["createElementVNode"])("span",Ne,Object(a["toDisplayString"])(e.$t("editor.slides.content"))+":",1),Te,Object(a["createElementVNode"])("div",_e,[Object(a["createElementVNode"])("label",$e,Object(a["toDisplayString"])(e.$t("editor.slides.contentType"))+":",1),Object(a["createElementVNode"])("select",{ref:"typeSelector",onInput:t[8]||(t[8]=t=>{e.$vfm.open("change-slide-"+e.slideIndex),e.newType=t.target.value}),value:e.determineEditorType(e.currentSlide.panel[e.panelIndex])},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors).filter(e=>"loading"!==e),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,Me))),128))],40,Le)])]),(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.currentSlide.panel[e.panelIndex])]),{ref:"editor",key:e.panelIndex+e.determineEditorType(e.currentSlide.panel[e.panelIndex]),panel:e.currentSlide.panel[e.panelIndex],configFileStructure:e.configFileStructure,lang:e.lang,uid:e.uid,sourceCounts:e.sourceCounts,onSlideEdit:t[9]||(t[9]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","uid","sourceCounts"]))])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ie,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.slides.select")),1)])),Object(a["createVNode"])(n,{name:"change-slide-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[10]||(t[10]=t=>e.changePanelType(e.determineEditorType(e.currentSlide.panel[e.panelIndex]),e.newType)),onCancel:e.cancelTypeChange},null,8,["name","message","onCancel"]),Object(a["createVNode"])(n,{name:"right-only-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[11]||(t[11]=t=>e.toggleRightOnly()),onCancel:t[12]||(t[12]=t=>e.rightOnly=!e.rightOnly)},null,8,["name","message"])])}const De={class:"block"},Fe={class:"flex items-center"},Pe={class:"font-bold px-4"},Ue=["disabled"],Re={class:"flex items-center"},Ae=Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),ze={class:"px-2"},We=Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1),qe={key:0,class:"m-4"},He={class:"italic text-gray-400"},Xe={class:"flex flex-wrap list-none"};function Je(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ChartPreview"),s=Object(a["resolveComponent"])("draggable"),c=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",De,[Object(a["createElementVNode"])("div",Fe,[Object(a["createElementVNode"])("span",Pe,Object(a["toDisplayString"])(e.$t("editor.chart.label.info",{num:e.chartConfigs.length})),1),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:"modal-btn",onClick:t[0]||(t[0]=t=>e.clearEditor()),disabled:!e.allowMany&&e.chartConfigs.length>0},[Object(a["createElementVNode"])("div",Re,[Ae,Object(a["createElementVNode"])("span",ze,Object(a["toDisplayString"])(e.$t("editor.chart.label.create")),1)])],8,Ue)]),We,0===e.chartConfigs.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",qe,[Object(a["createElementVNode"])("span",He,Object(a["toDisplayString"])(e.$t("editor.chart.label.empty")),1)])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createElementVNode"])("ul",Xe,[Object(a["createVNode"])(s,{modelValue:e.chartConfigs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.chartConfigs=t),handle:".handle",onUpdate:e.onChartsEdited,class:"w-full flex flex-wrap list-none","item-key":"name"},{item:Object(a["withCtx"])(({element:t,index:i})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${t.name}-${i}`,chart:t,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,lang:e.lang,onEdit:e.editChart,onDelete:a=>e.$vfm.open(`${t.name}-${i}`)},null,8,["chart","configFileStructure","sourceCounts","lang","onEdit","onDelete"]))]),_:1},8,["modelValue","onUpdate"])],512),[[a["vShow"],e.chartConfigs.length]]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.chartConfigs,(t,i)=>(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:`${t.name}-${i}`,name:`${t.name}-${i}`,message:e.$t("editor.chart.delete.confirm",{name:t.name}),onOk:i=>e.deleteChart(t)},null,8,["name","message","onOk"]))),128))])}const Ge=e=>(Object(a["pushScopeId"])("data-v-d8aa8408"),e=e(),Object(a["popScopeId"])(),e),Ze={class:"chart-item items-center mt-8 mx-5 overflow-hidden"},Ye={class:"relative border-solid border-2 items-center justify-center text-center w-full"},Qe=["content"],Ke=Ge(()=>Object(a["createElementVNode"])("svg",{class:"absolute transform -translate-x-1/2 -translate-y-1/2",height:"22px",width:"22px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),et=[Ke],tt=Ge(()=>Object(a["createElementVNode"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full bottom-2 -right-1 p-0 z-10 handle"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M8,18 C9.1045695,18 10,18.8954305 10,20 C10,21.1045695 9.1045695,22 8,22 C6.8954305,22 6,21.1045695 6,20 C6,18.8954305 6.8954305,18 8,18 Z M16,18 C17.1045695,18 18,18.8954305 18,20 C18,21.1045695 17.1045695,22 16,22 C14.8954305,22 14,21.1045695 14,20 C14,18.8954305 14.8954305,18 16,18 Z M8,10 C9.1045695,10 10,10.8954305 10,12 C10,13.1045695 9.1045695,14 8,14 C6.8954305,14 6,13.1045695 6,12 C6,10.8954305 6.8954305,10 8,10 Z M16,10 C17.1045695,10 18,10.8954305 18,12 C18,13.1045695 17.1045695,14 16,14 C14.8954305,14 14,13.1045695 14,12 C14,10.8954305 14.8954305,10 16,10 Z M8,2 C9.1045695,2 10,2.8954305 10,4 C10,5.1045695 9.1045695,6 8,6 C6.8954305,6 6,5.1045695 6,4 C6,2.8954305 6.8954305,2 8,2 Z M16,2 C17.1045695,2 18,2.8954305 18,4 C18,5.1045695 17.1045695,6 16,6 C14.8954305,6 14,5.1045695 14,4 C14,2.8954305 14.8954305,2 16,2 Z"})])],-1)),it={class:"flex mt-4 items-center"},at={class:"editor-label name-label font-bold flex-2"},lt={class:"font-normal"},ot=["id"],rt={class:"flex items-center"},nt=Ge(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M 18 2 L 15.585938 4.4140625 L 19.585938 8.4140625 L 22 6 L 18 2 z M 14.076172 5.9238281 L 3 17 L 3 21 L 7 21 L 18.076172 9.9238281 L 14.076172 5.9238281 z"})],-1)),st={class:"px-2"};function ct(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("storylines-chart"),s=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",Ze,[Object(a["createElementVNode"])("div",Ye,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-2 left-0 p-0 z-10 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.chart)),content:e.$t("editor.chart.delete")},et,8,Qe)),[[s,{placement:"top",hideOnClick:!1,animateFill:!0}]]),tt,e.loading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(n,{class:"w-full h-full",config:e.chartConfig,key:e.chartIdx,configFileStructure:e.configFileStructure,onLoaded:e.loadChart},null,8,["config","configFileStructure","onLoaded"]))]),Object(a["createElementVNode"])("div",it,[Object(a["createElementVNode"])("label",at,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.chart.label.name"))+": ",1),Object(a["createElementVNode"])("span",lt,Object(a["toDisplayString"])(e.chartName),1)]),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:`edit-${e.chart.name}-btn`},[Object(a["createElementVNode"])("div",rt,[nt,Object(a["createElementVNode"])("span",st,Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),1)])],8,ot)])])}class dt extends n["c"]{constructor(){super(...arguments),this.loading=!0,this.chartIdx=0,this.chartConfig={},this.chartName="",this.modalEditor=void 0}mounted(){this.chartConfig=this.chart,this.chartName=this.chart.name||"",this.loading=!1}loadChart(e){var t;if(!this.modalEditor){if(this.modalEditor=highed.ModalEditor(`edit-${this.chartName}-btn`,{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"},defaultChartOptions:e},e=>{const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0&&t.title.text!=this.chart.name)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,config:t,src:""};this.$emit("edit",{oldChart:this.chart,newChart:e}),this.chartConfig=e,this.chartName=e.name,this.chartIdx+=1}}),void 0!==(null===(t=e.data)||void 0===t?void 0:t.csv)){const t=e.data.csv;this.modalEditor.editor.dataTable.loadCSV({csv:t})}else this.convertSeriesToCSV(e);this.modalEditor.editor.chart.options.setAll(e)}}convertSeriesToCSV(e){var t;if("pie"===(null===(t=e.chart)||void 0===t?void 0:t.type)){const t=null===e||void 0===e?void 0:e.series.data;if(t){var i;const a=[`${null===e||void 0===e?void 0:e.series.name};${null===e||void 0===e||null===(i=e.yAxis)||void 0===i?void 0:i.title.text}`,...t.map(e=>`${e.name};${e.y}`)];this.modalEditor.editor.dataTable.loadCSV({csv:a.join("\n")})}}else if(null!==e&&void 0!==e&&e.series&&null!==e&&void 0!==e&&e.series.length){let t=null===e||void 0===e?void 0:e.series.map(e=>[e.name,...e.data]);if(void 0!==e.xAxis){var a,l;const i=[null===(a=e.xAxis)||void 0===a||null===(a=a.title)||void 0===a?void 0:a.text].concat(null===(l=e.xAxis)||void 0===l?void 0:l.categories);t.unshift(i)}let i=t[0].map((e,i)=>t.map(e=>e[i]).join(";"));this.modalEditor.editor.dataTable.loadCSV({csv:i.join("\n")})}}}Object(r["a"])([Object(n["b"])()],dt.prototype,"chart",void 0),Object(r["a"])([Object(n["b"])()],dt.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],dt.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],dt.prototype,"lang",void 0);i("2208");const ut=d()(dt,[["render",ct],["__scopeId","data-v-d8aa8408"]]);var mt=ut;const pt={slot:"header",class:"text-lg font-bold"},ht={class:"w-full flex justify-end"};function bt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(n,{modalId:e.name,class:"flex justify-center items-center","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white dark:bg-gray-900 border dark:border-gray-700 rounded-lg space-y-2"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",pt,Object(a["toDisplayString"])(e.message),1),Object(a["createElementVNode"])("div",ht,[Object(a["createElementVNode"])("button",{class:"editor-button confirm-button hover:bg-gray-800",onClick:t[0]||(t[0]=Object(a["withModifiers"])((...t)=>e.onOk&&e.onOk(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.confirm")),1),Object(a["createElementVNode"])("button",{class:"editor-button cancel-button hover:bg-gray-100",onClick:t[1]||(t[1]=Object(a["withModifiers"])((...t)=>e.onCancel&&e.onCancel(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.cancel")),1)])]),_:1},8,["modalId"])}let gt=class extends n["c"]{onOk(){this.$emit("ok"),this.$vfm.close(this.name)}onCancel(){this.$emit("Cancel"),this.$vfm.close(this.name)}};Object(r["a"])([Object(n["b"])()],gt.prototype,"message",void 0),Object(r["a"])([Object(n["b"])()],gt.prototype,"name",void 0),gt=Object(r["a"])([Object(n["a"])({components:{"vue-final-modal":le["a"]}})],gt);var ft=gt;i("72c3");const vt=d()(ft,[["render",bt],["__scopeId","data-v-468630e0"]]);var Ot=vt,jt=i("b76a"),Vt=i.n(jt);let yt=class extends n["c"]{constructor(){super(...arguments),this.edited=!1,this.chartConfigs=[],this.modalEditor={}}mounted(){highed.ready(()=>{this.modalEditor=highed.ModalEditor("modal-btn",{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"}},e=>{this.createNewChart(e.toString())})});const e=this.panel.type===ie.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];void 0!==e&&e.length&&(this.chartConfigs=e.map(e=>{let t="";if(e.options&&e.options.title)t=e.options.title;else{const i=e.src.match(/.*\/(.*)$/);t=i?i[1].replace(/\.[^/.]+$/,"").replace(/\./g," "):e.src}return{name:t,...e}}))}clearEditor(){let e={title:{text:"Chart "+(this.chartConfigs.length+1)},subtitle:{text:""},credits:{enabled:!1}};e="en"===this.lang?Object.assign({},e,{lang:{thousandsSep:","}}):Object.assign({},e,{lang:{thousandsSep:" "}}),this.modalEditor.editor.chart.options.setAll(e);const t='"Column 1";"Column 2"\n" "";" "';this.modalEditor.editor.dataTable.loadCSV({csv:t})}createNewChart(e){const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,src:i};this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1,this.configFileStructure.charts[this.lang].file(t.title.text+".json",JSON.stringify(t,null,4)),this.chartConfigs.push(e)}this.onChartsEdited()}editChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.oldChart.name);if(-1!==t){const i=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.oldChart.name}.json`;this.sourceCounts[i]-=1,0===this.sourceCounts[i]&&this.configFileStructure.charts[this.lang].remove(e.oldChart.name+".json");const a=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`;this.sourceCounts[a]?this.sourceCounts[a]+=1:this.sourceCounts[a]=1,this.configFileStructure.charts[this.lang].file(e.newChart.name+".json",JSON.stringify(e.newChart.config,null,4)),e.newChart.src=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`,this.chartConfigs[t]={name:e.newChart.name,src:e.newChart.src}}this.onChartsEdited()}deleteChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.name);-1!==t&&(this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]-=1,0===this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]&&this.configFileStructure.charts[this.lang].remove(e.name+".json"),this.chartConfigs.splice(t,1)),this.onChartsEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.chartConfigs.length)this.panel.type=ie.Chart,this.panel.src="";else if(1===this.chartConfigs.length){this.panel.type=ie.Chart;const e=this.chartConfigs[0];Object.keys(e).forEach(t=>{this.panel[t]=e[t]})}else this.panel.type=ie.Slideshow,this.panel.items=this.chartConfigs.map(e=>({...e,type:ie.Chart}));this.edited=!1}onChartsEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],yt.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],yt.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],yt.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],yt.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],yt.prototype,"allowMany",void 0),yt=Object(r["a"])([Object(n["a"])({components:{ChartPreview:mt,"confirmation-modal":Ot,draggable:Vt.a}})],yt);var St=yt;i("7b13");const Ct=d()(St,[["render",Je]]);var xt=Ct;const Et=e=>(Object(a["pushScopeId"])("data-v-cc3f9cfe"),e=e(),Object(a["popScopeId"])(),e),wt={class:"block"},kt={class:"editor-label flex drag-label cursor-pointer"},Nt=Et(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M14 9l-2.519 4-2.481-1.96-5 6.96h16l-6-9zm8-5v16h-20v-16h20zm2-2h-24v20h24v-20zm-20 6c0-1.104.896-2 2-2s2 .896 2 2c0 1.105-.896 2-2 2s-2-.895-2-2z"})])],-1)),Tt={class:"align-middle inline-block"},_t={class:"text-blue-400 font-bold"},$t=["multiple"],Lt={key:1,class:"flex justify-center"},Mt={class:"flex mt-4 items-center w-full text-left"},It={class:"editor-label text-label"},Bt=["onUpdate:modelValue"],Dt={class:"flex mt-4 items-center w-full text-left"},Ft={class:"editor-label text-label"},Pt=["onUpdate:modelValue"],Ut={class:"flex items-center w-full text-left"},Rt={class:"editor-label text-label"};function At(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ImagePreview"),s=Object(a["resolveComponent"])("draggable");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",wt,[e.allowMany||!e.allowMany&&0===e.imagePreviews.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(["upload-image flex items-center justify-center m-5 p-12 bg-blue-100 border-4 border-dashed border-blue-300",{dragging:e.isDragging}]),onDragover:t[1]||(t[1]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[2]||(t[2]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.dropImages(t),["prevent"]))},[Object(a["createElementVNode"])("label",kt,[Nt,Object(a["createElementVNode"])("span",Tt,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.image.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",_t,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{type:"file",class:"cursor-pointer",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t)),multiple:!!e.allowMany},null,40,$t)])])],34)):Object(a["createCommentVNode"])("",!0),e.allowMany||!e.allowMany&&0===e.imagePreviews.length?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Lt,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.image.reorder")),1)],512)),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])(s,{modelValue:e.imagePreviews,"onUpdate:modelValue":t[6]||(t[6]=t=>e.imagePreviews=t),class:"flex flex-wrap list-none border my-4",onUpdate:e.onImagesEdited,"item-key":"id"},{item:Object(a["withCtx"])(({element:i,index:l})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${i.id}-${l}`,imageFile:i,onDelete:e.deleteImage},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",Mt,[Object(a["createElementVNode"])("label",It,Object(a["toDisplayString"])(e.$t("editor.image.altTag"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.altText=e,onChange:t[4]||(t[4]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,Bt),[[a["vModelText"],i.altText]])]),Object(a["createElementVNode"])("div",Dt,[Object(a["createElementVNode"])("label",Ft,Object(a["toDisplayString"])(e.$t("editor.image.label.caption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.caption=e,onChange:t[5]||(t[5]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,Pt),[[a["vModelText"],i.caption]])])]),_:2},1032,["imageFile","onDelete"]))]),_:1},8,["modelValue","onUpdate"]),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",Ut,[Object(a["createElementVNode"])("label",Rt,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-3/5",type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.slideshowCaption=t),onChange:t[8]||(t[8]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,544),[[a["vModelText"],e.slideshowCaption]])],512),[[a["vShow"],e.imagePreviews.length>1]])])}const zt=e=>(Object(a["pushScopeId"])("data-v-1c58f06c"),e=e(),Object(a["popScopeId"])(),e),Wt={class:"image-item items-center my-8 mx-4 overflow-hidden"},qt={class:"relative items-center justify-center text-center w-full grabbable"},Ht=["content"],Xt=zt(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),Jt=[Xt],Gt={class:"flex-grow image-container"},Zt=["title","src","alt"];function Yt(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",Wt,[Object(a["createElementVNode"])("div",qt,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.imageFile)),content:e.$t("editor.image.delete")},Jt,8,Ht)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",Gt,[Object(a["createElementVNode"])("img",{class:"image-file object-cover",title:e.imageFile.id,src:e.imageFile.src,alt:e.imageFile.altText},null,8,Zt)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}class Qt extends n["c"]{}Object(r["a"])([Object(n["b"])()],Qt.prototype,"imageFile",void 0);i("eae8");const Kt=d()(Qt,[["render",Yt],["__scopeId","data-v-1c58f06c"]]);var ei=Kt;let ti=class extends n["c"]{constructor(){super(...arguments),this.dragging=!1,this.edited=!1,this.imagePreviewsLoading=!1,this.imagePreviewPromises=[],this.imagePreviews=[],this.slideshowCaption=""}get isDragging(){return this.dragging}mounted(){const e=this.panel.type===ie.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];void 0!==e&&e.length&&(this.imagePreviewsLoading=!0,e.map(e=>{const t=""+e.src.substring(e.src.indexOf("/")+1),i=e.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&this.imagePreviewPromises.push(a.async("blob").then(t=>({...e,id:i||e.src,src:URL.createObjectURL(t)})))}),Promise.all(this.imagePreviewPromises).then(e=>{this.imagePreviews=e,this.imagePreviewsLoading=!1}),this.slideshowCaption=this.panel.caption)}onFileChange(e){const t=Array.from(e.target.files);this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.onImagesEdited()}dropImages(e){if(null!==e.dataTransfer){let t=[...e.dataTransfer.files];this.allowMany||(t=[t[0]]),this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.dragging=!1}this.onImagesEdited()}deleteImage(e){const t=this.imagePreviews.findIndex(t=>t.id===e.id);if(-1!==t){const e=`${this.configFileStructure.uuid}/assets/${this.lang}/${this.imagePreviews[t].id}`;this.sourceCounts[e]-=1,0===this.sourceCounts[e]&&(this.configFileStructure.assets[this.lang].remove(this.imagePreviews[t].id),URL.revokeObjectURL(this.imagePreviews[t].src)),this.imagePreviews.splice(t,1)}this.onImagesEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.imagePreviews.length)this.panel.type=ie.Image,this.panel.src="";else if(1===this.imagePreviews.length){this.panel.type=ie.Image;const e=this.imagePreviews[0];Object.keys(e).forEach(t=>{"id"!==t&&(this.panel[t]=e[t])}),this.panel.src=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`}else{var e;this.panel.type=ie.Slideshow,this.panel.caption=null!==(e=this.slideshowCaption)&&void 0!==e?e:void 0,this.panel.items=this.imagePreviews.map(e=>({...e,src:`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`,type:ie.Image}))}this.edited=!1}onImagesEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],ti.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],ti.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],ti.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],ti.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],ti.prototype,"allowMany",void 0),ti=Object(r["a"])([Object(n["a"])({components:{ImagePreview:ei,draggable:Vt.a}})],ti);var ii=ti;i("4712");const ai=d()(ii,[["render",At],["__scopeId","data-v-cc3f9cfe"]]);var li=ai;const oi={class:"flex flex-col mt-4"},ri={class:"editor-label text-left"},ni={class:"editor-label text-left mt-2"};function si(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("v-md-editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",oi,[Object(a["createElementVNode"])("label",ri,Object(a["toDisplayString"])(e.$t("editor.slides.panel.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("label",ni,Object(a["toDisplayString"])(e.$t("editor.slides.panel.body"))+":",1),Object(a["createVNode"])(n,{modelValue:e.panel.content,"onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.content=t),height:"400px","left-toolbar":"undo redo clear | h bold italic strikethrough quote subsuper | ul ol table hr | addLink image code | save",toolbar:e.toolbar},null,8,["modelValue","toolbar"])])}class ci extends n["c"]{constructor(){super(...arguments),this.toolbar={subsuper:{title:"Superscript/Subscript",text:"T",menus:[{name:"Superscript",text:"Superscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sup>${t}</sup>`,selected:e}})}},{name:"Subscript",text:"Subscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sub>${t}</sub>`,selected:e}})}}]},addLink:{title:"Insert Link",icon:"v-md-icon-link",menus:[{name:"Add External Link (New Tab)",text:"Add External Link (New Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`[${t}](http://)`,selected:e}})}},{name:"Add External Link (Same Tab)",text:"Add External Link (Same Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`<a href='http://' target='_self'>${t}</a>`,selected:e}})}},{name:"Add Dynamic Link",text:"Add Dynamic Link",action(e){e.insert(e=>{const t=e||"";return{text:`<a panel='panel-id-here'>${t}</a>`,selected:e}})}}]}}}}Object(r["a"])([Object(n["b"])()],ci.prototype,"panel",void 0);i("51bb");const di=d()(ci,[["render",si],["__scopeId","data-v-58a0597c"]]);var ui=di;const mi=e=>(Object(a["pushScopeId"])("data-v-482e0270"),e=e(),Object(a["popScopeId"])(),e),pi={class:"flex flex-col"},hi={class:"editor-label text-left"},bi={class:"editor-label mt-6"},gi=mi(()=>Object(a["createElementVNode"])("span",{class:"mx-4"},null,-1)),fi=mi(()=>Object(a["createElementVNode"])("br",null,null,-1)),vi={key:1,class:"mb-4"},Oi={class:"ramp-editor mt-5",ref:"editor",style:{width:"70vw",height:"80vh"}},ji={slot:"header",class:"text-lg font-bold"},Vi={class:"w-full flex justify-end"},yi=["disabled"];function Si(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("time-slider-editor"),s=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",pi,[Object(a["createElementVNode"])("label",hi,Object(a["toDisplayString"])(e.$t("editor.map.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",bi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.enable")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"checkbox",onChange:t[1]||(t[1]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.usingTimeSlider=t)},null,544),[[a["vModelCheckbox"],e.usingTimeSlider]]),gi,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[3]||(t[3]=t=>e.$vfm.open("time-slider-edit-modal")),class:"editor-button bg-black text-white hover:bg-gray-800 mt-3"},Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1)):Object(a["createCommentVNode"])("",!0),fi,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",vi)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Oi,null,512)]),Object(a["createVNode"])(s,{modalId:"time-slider-edit-modal","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",ji,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1),Object(a["createVNode"])(n,{config:e.timeSliderConf,error:e.timeSliderError,onTimeSliderChanged:e.onTimeSliderInput},null,8,["config","error","onTimeSliderChanged"]),Object(a["createElementVNode"])("div",Vi,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["editor-button",e.timeSliderError?"":"bg-black text-white hover:bg-gray-800"]),disabled:e.timeSliderError,onClick:t[4]||(t[4]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t))}," Done ",10,yi)])]),_:1})])}var Ci=i("a0ea");const xi=e=>(Object(a["pushScopeId"])("data-v-98eacf1c"),e=e(),Object(a["popScopeId"])(),e),Ei={class:"px-5"},wi={class:"flex items-center"},ki={class:"editor-label"},Ni=["value"],Ti={class:"mx-3"},_i=["value"],$i=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Li={class:"flex items-center"},Mi={class:"editor-label"},Ii=["value"],Bi={class:"mx-3"},Di=["value"],Fi=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Pi={key:0,class:"border-black border-2 p-3 w-2/3"},Ui={class:"editor-label w-full"},Ri=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Ai={class:"list-disc my-2 ml-8"},zi={key:1},Wi={class:"editor-label"},qi=["value"],Hi=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Xi={class:"editor-label"},Ji=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Gi=["value"],Zi=xi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Yi=xi(()=>Object(a["createElementVNode"])("br",null,null,-1));function Qi(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ei,[Object(a["createElementVNode"])("div",wi,[Object(a["createElementVNode"])("label",ki,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.range")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[0],onInput:t[0]||(t[0]=t=>e.$emit("time-slider-changed","range",0,t.target.value))},null,40,Ni),Object(a["createElementVNode"])("span",Ti,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[1],onInput:t[1]||(t[1]=t=>e.$emit("time-slider-changed","range",1,t.target.value))},null,40,_i)]),$i,Object(a["createElementVNode"])("div",Li,[Object(a["createElementVNode"])("label",Mi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.start")),1),Object(a["createElementVNode"])("input",{class:"editor-input ml-3",type:"number",value:e.config.start[0],onInput:t[2]||(t[2]=t=>e.$emit("time-slider-changed","start",0,t.target.value))},null,40,Ii),Object(a["createElementVNode"])("span",Bi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.start[1],onInput:t[3]||(t[3]=t=>e.$emit("time-slider-changed","start",1,t.target.value))},null,40,Di)]),Fi,e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Pi,[Object(a["createElementVNode"])("label",Ui,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning")),1),Ri,Object(a["createElementVNode"])("ul",Ai,[Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet1")),1),Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet2")),1)]),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.end")),1)])):Object(a["createCommentVNode"])("",!0),e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("br",zi)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",Wi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.attribute")),1),Object(a["createElementVNode"])("input",{class:"editor-input",value:e.config.attribute,onInput:t[4]||(t[4]=t=>e.$emit("time-slider-changed","attribute",void 0,t.target.value))},null,40,qi)]),Hi,Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",Xi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.layers")),1),Ji,Object(a["createElementVNode"])("input",{class:"editor-input w-full",value:e.config.layers||"",onInput:t[5]||(t[5]=t=>e.$emit("time-slider-changed","layers",void 0,t.target.value))},null,40,Gi)]),Zi,Yi])}class Ki extends n["c"]{}Object(r["a"])([Object(n["b"])()],Ki.prototype,"config",void 0),Object(r["a"])([Object(n["b"])()],Ki.prototype,"error",void 0);i("b949");const ea=d()(Ki,[["render",Qi],["__scopeId","data-v-98eacf1c"]]);var ta=ea,ia=i("ce19");i("fb28");let aa=class extends n["c"]{constructor(){super(...arguments),this.rampEditorApi="",this.newFileName="",this.usingTimeSlider=!!this.panel.timeSlider,this.timeSliderError=!1,this.timeSliderConf={range:[],start:[],attribute:""},this.status=""!==this.panel.config?"default":"creating",this.strippedFileName=""!==this.panel.config?this.panel.config.split("/")[2].split(".")[0]:""}mounted(){var e,t,i,a,l,o;this.timeSliderConf=JSON.parse(JSON.stringify({range:null!==(e=null===(t=this.panel.timeSlider)||void 0===t?void 0:t.range)&&void 0!==e?e:[1e3,(new Date).getFullYear()],start:null!==(i=null===(a=this.panel.timeSlider)||void 0===a?void 0:a.start)&&void 0!==i?i:[1e3,(new Date).getFullYear()],attribute:null!==(l=null===(o=this.panel.timeSlider)||void 0===o?void 0:o.attribute)&&void 0!==l?l:""})),window.addEventListener("ramp4-config-edited",this.onConfigEdit),this.validateTimeSlider(),"creating"===this.status&&this.createNewConfig(),this.openEditor()}beforeDestroy(){window.removeEventListener("ramp4-config-edited",this.onConfigEdit)}createNewConfig(){this.panel.config=`${this.configFileStructure.uuid}/ramp-config/${this.configFileStructure.uuid}-map-${this.getNumberOfMaps()+1}.json`,this.strippedFileName=this.panel.config.split("/")[2].split(".")[0],this.sourceCounts[this.panel.config]?this.sourceCounts[this.panel.config]+=1:this.sourceCounts[this.panel.config]=1,this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(Ci,null,4)),this.status="default"}openEditor(){if(""!==this.panel.config&&(this.status="editing",this.panel.config)){const e=""+this.panel.config.substring(this.panel.config.indexOf("/")+1),t=this.configFileStructure.zip.file(e);t?t.async("string").then(e=>{const t=JSON.parse(e);this.rampEditorApi=Object(ia["a"])(this.$refs.editor,t)}):fetch(this.panel.config).then(e=>{e.json().then(e=>{let t=JSON.stringify(e);const i=JSON.parse(t);this.rampEditorApi=Object(ia["a"])(this.$refs.editor,i)})})}}saveTimeSlider(){this.timeSliderError&&this.usingTimeSlider||(this.panel.timeSlider=this.usingTimeSlider?this.timeSliderConf:void 0),this.$emit("slide-edit"),this.$vfm.close("time-slider-edit-modal")}saveChanges(){this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(this.rampEditorApi.getConfig(),null,4))}onConfigEdit(){this.$emit("slide-edit")}onTimeSliderInput(e,t,i){"layers"===e?i&&""!==i?this.timeSliderConf["layers"]=i.split(",").map(e=>e.trim()):delete this.timeSliderConf["layers"]:"attribute"===e?this.timeSliderConf[e]=i:this.timeSliderConf[e][t]=Number(i),this.validateTimeSlider()}validateTimeSlider(){this.timeSliderError=this.timeSliderConf.range.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.start.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.range[1]<this.timeSliderConf.range[0]||this.timeSliderConf.start[1]<this.timeSliderConf.start[0]}getNumberOfMaps(){let e=0;return this.configFileStructure.rampConfig.forEach(t=>{e+=1}),e}};Object(r["a"])([Object(n["b"])()],aa.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],aa.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],aa.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],aa.prototype,"sourceCounts",void 0),aa=Object(r["a"])([Object(n["a"])({components:{"time-slider-editor":ta,"vue-final-modal":le["a"]}})],aa);var la=aa;i("090e");const oa=d()(la,[["render",Si],["__scopeId","data-v-482e0270"]]);var ra=oa;const na=e=>(Object(a["pushScopeId"])("data-v-996fd9c6"),e=e(),Object(a["popScopeId"])(),e),sa={class:"block"},ca={class:"flex mt-4 items-center w-full text-left"},da={class:"text-label"},ua={class:"flex drag-label cursor-pointer"},ma=na(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 -2 30 30"},[Object(a["createElementVNode"])("path",{d:"M599,692 C597.896,692 597,692.896 597,694 L597,698 L575,698 L575,694 C575,692.896 574.104,692 573,692 C571.896,692 571,692.896 571,694 L571,701 C571,701.479 571.521,702 572,702 L600,702 C600.604,702 601,701.542 601,701 L601,694 C601,692.896 600.104,692 599,692 L599,692 Z M582,684 L584,684 L584,693 C584,694.104 584.896,695 586,695 C587.104,695 588,694.104 588,693 L588,684 L590,684 C590.704,684 591.326,684.095 591.719,683.7 C592.11,683.307 592.11,682.668 591.719,682.274 L586.776,676.283 C586.566,676.073 586.289,675.983 586.016,675.998 C585.742,675.983 585.465,676.073 585.256,676.283 L580.313,682.274 C579.921,682.668 579.921,683.307 580.313,683.7 C580.705,684.095 581.608,684 582,684 L582,684 Z",transform:"translate(-571.000000, -676.000000)"})])],-1)),pa={class:"align-middle inline-block"},ha={class:"text-blue-400 font-bold"},ba={class:"flex mt-4 items-center w-full text-left"},ga={class:"text-label"},fa={key:1,ref:"videoUrl",class:"w-3/5",type:"search"};function va(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("VideoPreview");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",sa,[Object(a["createElementVNode"])("div",ca,[Object(a["createElementVNode"])("label",da,Object(a["toDisplayString"])(e.$t("editor.video.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"w-3/5",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.videoPreview.title=t),onChange:t[1]||(t[1]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t))},null,544),[[a["vModelText"],e.videoPreview.title]])]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["upload-video text-center m-5 p-12 bg-gray-100 border-4 border-dashed border-gray-300",{dragging:e.isDragging}]),onDragover:t[3]||(t[3]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[4]||(t[4]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[5]||(t[5]=Object(a["withModifiers"])(t=>e.dropVideo(t),["prevent"]))},[Object(a["createElementVNode"])("label",ua,[ma,Object(a["createElementVNode"])("span",pa,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.video.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",ha,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{ref:"videoFileInput",type:"file",class:"cursor-pointer",onChange:t[2]||(t[2]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544)])])],34),Object(a["createElementVNode"])("div",ba,[Object(a["createElementVNode"])("label",ga,Object(a["toDisplayString"])(e.$t("editor.label.or")+" "+e.$t("editor.video.pasteUrl"))+":",1),"local"!==e.videoPreview.videoType?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",{key:0,ref:"videoUrl",class:"w-3/5",type:"search","onUpdate:modelValue":t[6]||(t[6]=t=>e.videoPreview.src=t)},null,512)),[[a["vModelText"],e.videoPreview.src]]):(Object(a["openBlock"])(),Object(a["createElementBlock"])("input",fa,null,512)),Object(a["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...t)=>e.uploadVideoUrl&&e.uploadVideoUrl(...t)),class:"bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.video.label.upload")),1)]),e.videoPreviewLoading||0===Object.keys(e.videoPreview).length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:"flex flex-wrap justify-center list-none border my-4",onUpdate:t[8]||(t[8]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t)),"item-key":"id"},[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:""+e.videoPreview.id,file:e.videoPreview,fileType:e.fileType,lang:e.lang,onDelete:e.deleteVideo},null,8,["file","fileType","lang","onDelete"]))],32))])}const Oa=e=>(Object(a["pushScopeId"])("data-v-2d1c87e5"),e=e(),Object(a["popScopeId"])(),e),ja={class:"my-8 mx-4 overflow-hidden w-full"},Va={class:"relative text-center w-full grabbable"},ya=["content"],Sa=Oa(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),Ca=[Sa],xa={class:"video-container"},Ea=["src","height","width"],wa=["title","height","width"],ka=["type","src"],Na=["src","srclang","label"];function Ta(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ja,[Object(a["createElementVNode"])("div",Va,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.file)),content:e.$t("editor.video.delete")},Ca,8,ya)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",xa,["YouTube"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("iframe",{key:0,class:"w-3/5",src:e.file.src,height:e.file.height?e.file.height:400,width:e.file.width,allowfullscreen:""},null,8,Ea)):Object(a["createCommentVNode"])("",!0),"local"===e.file.videoType||"external"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("video",{key:1,class:"w-3/5",title:e.file.title,height:e.file.height?e.file.height:500,width:e.file.width,controls:""},[Object(a["createElementVNode"])("source",{type:e.fileType,src:e.file.src},null,8,ka),e.file.caption?(Object(a["openBlock"])(),Object(a["createElementBlock"])("track",{key:0,kind:"captions",src:e.file.caption,srclang:e.lang,label:e.langs[e.lang]},null,8,Na)):Object(a["createCommentVNode"])("",!0)],8,wa)):Object(a["createCommentVNode"])("",!0)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}var _a=i("d4cd"),$a=i.n(_a);class La extends n["c"]{constructor(){super(...arguments),this.md=new $a.a({html:!0}),this.langs={en:"English",fr:"French"},this.expandTranscript=!1,this.rawTranscript="",this.transcriptContent=""}}Object(r["a"])([Object(n["b"])()],La.prototype,"file",void 0),Object(r["a"])([Object(n["b"])()],La.prototype,"fileType",void 0),Object(r["a"])([Object(n["b"])()],La.prototype,"lang",void 0);i("480b");const Ma=d()(La,[["render",Ta],["__scopeId","data-v-2d1c87e5"]]);var Ia=Ma;let Ba=class extends n["c"]{constructor(){super(...arguments),this.dragging=!1,this.edited=!1,this.fileType="",this.videoPreviewLoading=!1,this.videoPreviewPromise=void 0,this.videoPreview={},this.slideshowCaption=""}get isDragging(){return this.dragging}mounted(){if(this.panel.src)if("local"===this.panel.videoType){var e;this.videoPreviewLoading=!0;const t=""+this.panel.src.substring(this.panel.src.indexOf("/")+1),i=this.panel.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&(this.videoPreviewPromise=a.async("blob").then(e=>({...this.panel,id:i||this.panel.src,src:URL.createObjectURL(e)}))),null===(e=this.videoPreviewPromise)||void 0===e||e.then(e=>{this.videoPreview=e,this.videoPreviewLoading=!1}),this.slideshowCaption=this.panel.caption}else this.videoPreview={id:this.panel.src,title:this.panel.title,videoType:"YouTube"===this.panel.videoType?"YouTube":"external",src:this.panel.src}}addUploadedFile(e,t){const i=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1;const a=URL.createObjectURL(e);"src"===t?(this.videoPreview={id:e.name,title:this.videoPreview.title||e.name,videoType:"local",src:a},this.findFileType(e.name)):this.videoPreview[t]=a,this.edited=!0,this.$emit("slide-edit")}onFileChange(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"src"),this.onVideoEdited()}findFileType(e){if("external"===this.videoPreview.videoType||"local"===this.videoPreview.videoType){const t=e.substring(e.lastIndexOf("/")+1),i=t.split(".").pop();this.fileType="video/"+i}}extractYoutubeId(e){const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,i=e.match(t);return i&&11===i[2].length?i[2]:null}uploadVideoUrl(){let e=this.$refs.videoUrl.value;const t=e.toLowerCase().includes("youtube");t&&(e=e.replace("/watch?v=","/embed/")),this.videoPreview={id:e,title:this.videoPreview.title||e,videoType:e.includes("youtube")?"YouTube":"external",src:e},this.edited=!0,this.$emit("slide-edit")}updateCaptions(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"caption")}updateTranscript(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"transcript")}dropVideo(e){if(null!==e.dataTransfer){const t=[...e.dataTransfer.files][0];this.addUploadedFile(t,"src"),this.dragging=!1}this.onVideoEdited()}deleteVideo(){this.$refs.videoFileInput.value="",this.videoPreview={},this.onVideoEdited()}saveChanges(){this.edited&&this.videoPreview&&(this.panel.title=this.videoPreview.title,this.panel.videoType=this.videoPreview.videoType,this.panel.src="local"===this.videoPreview.videoType?`${this.configFileStructure.uuid}/assets/${this.lang}/${this.videoPreview.id}`:this.videoPreview.src,this.panel.caption=this.videoPreview.caption?this.videoPreview.caption:"",this.panel.transcript=this.videoPreview.transcript?this.videoPreview.transcript:""),this.edited=!1}onVideoEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],Ba.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Ba.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Ba.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Ba.prototype,"sourceCounts",void 0),Ba=Object(r["a"])([Object(n["a"])({components:{VideoPreview:Ia,draggable:Vt.a}})],Ba);var Da=Ba;i("a229");const Fa=d()(Da,[["render",va],["__scopeId","data-v-996fd9c6"]]);var Pa=Fa;const Ua=e=>(Object(a["pushScopeId"])("data-v-5b666f60"),e=e(),Object(a["popScopeId"])(),e),Ra={class:"block"},Aa={class:"flex items-center"},za={class:"font-bold px-4"},Wa={class:"flex items-center"},qa=Ua(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)),Ha={class:"px-2"},Xa=Ua(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),Ja={class:"flex items-center w-full text-left"},Ga={class:"text-label"},Za=Ua(()=>Object(a["createElementVNode"])("br",null,null,-1)),Ya={class:"w-2/3 mt-5"},Qa={class:"table-header"},Ka=Ua(()=>Object(a["createElementVNode"])("th",null,null,-1)),el=["onClick"],tl=["onClick"],il=Ua(()=>Object(a["createElementVNode"])("br",null,null,-1)),al=Ua(()=>Object(a["createElementVNode"])("br",null,null,-1)),ll={key:0},ol={class:"text-xl font-bold"},rl=Ua(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),nl={key:0},sl={class:"mb-5 text-left"},cl=["value"],dl=["value"],ul={class:"mt-3 w-full flex justify-end"},ml={key:1},pl={class:"mt-3 w-full flex justify-end"};function hl(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ra,[Object(a["createElementVNode"])("div",Aa,[Object(a["createElementVNode"])("span",za,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.info",{num:e.panel.items.length})),1),Object(a["createElementVNode"])("button",{class:"bg-gray-100 cursor-pointer hover:bg-gray-200",onClick:t[0]||(t[0]=t=>e.editingStatus="create")},[Object(a["createElementVNode"])("div",Wa,[qa,Object(a["createElementVNode"])("span",Ha,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.create")),1)])])]),Xa,Object(a["createElementVNode"])("div",Ja,[Object(a["createElementVNode"])("label",Ga,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"w-1/3",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.caption=t)},null,512),[[a["vModelText"],e.panel.caption]]),Za]),Object(a["createElementVNode"])("table",Ya,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",Qa,[Ka,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.items,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(i+1)+".",1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.type),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:t=>e.editItem(i),class:"underline"},"Edit",8,el),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:t=>e.deleteItem(i),class:"underline"},"Remove",8,tl)])]))),128))])]),il,al,"none"!==e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ll,[Object(a["createElementVNode"])("h2",ol,Object(a["toDisplayString"])(e.$t("editor.slideshow.label."+e.editingStatus)),1),rl,Object(a["createElementVNode"])("div",null,["create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",nl,[Object(a["createElementVNode"])("label",sl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type"))+":",1),Object(a["createElementVNode"])("select",{onInput:t[2]||(t[2]=(...t)=>e.onTypeInput&&e.onTypeInput(...t)),value:e.newSlideType},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,dl))),128))],40,cl),"create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.newSlideType]),{key:0,ref:"slideEditor",panel:JSON.parse(JSON.stringify(e.startingConfig[e.newSlideType])),configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",ul,[Object(a["createElementVNode"])("button",{class:"bg-black text-white hover:bg-gray-800",onClick:t[3]||(t[3]=t=>e.saveItem(!0))},Object(a["toDisplayString"])(e.$t("editor.slideshow.label.add")),1)])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ml,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.panel.items[e.editingIdx].type]),{ref:"slideEditor",panel:e.panel.items[e.editingIdx],configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,key:e.editingIdx+e.panel.items[e.editingIdx].type,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])),Object(a["createElementVNode"])("div",pl,[Object(a["createElementVNode"])("button",{class:"bg-black text-white hover:bg-gray-800",onClick:t[4]||(t[4]=t=>e.saveItem())},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)])]))])])):Object(a["createCommentVNode"])("",!0)])}let bl=class extends n["c"]{constructor(){super(...arguments),this.editors={text:"text-editor",image:"image-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"},this.startingConfig={text:{type:ie.Text,title:"",content:""},dynamic:{type:ie.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:ie.Slideshow,items:[]},chart:{type:ie.Chart,src:""},image:{type:ie.Image,src:""},map:{type:ie.Map,config:"",title:"",scrollguard:!0},video:{type:ie.Video,title:"",videoType:"",src:""}},this.editingIdx=-1,this.newSlideName="",this.newSlideType="text",this.editingStatus="none"}onTypeInput(e){this.newSlideType=e.target.value}editItem(e){this.saveChanges(),this.editingIdx=e,this.editingStatus="edit"}deleteItem(e){const t=this.panel.items.find((t,i)=>i===e);switch(null===t||void 0===t?void 0:t.type){case"map":{const e=t;this.sourceCounts[e.config]-=1,0===this.sourceCounts[e.config]&&this.configFileStructure.zip.remove(""+e.config.substring(e.config.indexOf("/")+1));break}case"chart":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"image":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"text":break}this.panel.items=this.panel.items.filter((t,i)=>i!==e),this.editingIdx===e&&(this.editingIdx=-1,this.editingStatus="none")}saveItem(e=!1){let t;e?(t=this.$refs.slideEditor.panel,this.panel.items.push(t)):t=this.$refs.slideEditor.panel,t.type!==ie.Text&&t.type!==ie.Map&&void 0!==this.$refs.slideEditor&&"function"===typeof this.$refs.slideEditor.saveChanges&&this.$refs.slideEditor.saveChanges(),this.editingStatus="none"}saveChanges(){}};Object(r["a"])([Object(n["b"])()],bl.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],bl.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],bl.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],bl.prototype,"sourceCounts",void 0),bl=Object(r["a"])([Object(n["a"])({components:{"chart-editor":xt,"image-editor":li,"text-editor":ui,"map-editor":ra,"video-editor":Pa}})],bl);var gl=bl;i("303e");const fl=d()(gl,[["render",hl],["__scopeId","data-v-5b666f60"]]);var vl=fl;const Ol={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}};function jl(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ol,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])}let Vl=class extends n["c"]{};Vl=Object(r["a"])([Object(n["a"])({components:{spinner:ae["a"]}})],Vl);var yl=Vl;const Sl=d()(yl,[["render",jl]]);var Cl=Sl;const xl={class:"block"},El={class:"flex"},wl={key:0},kl={key:1},Nl={class:"w-2/3 mt-5"},Tl={class:"table-header"},_l=["onClick"],$l=["onClick"],Ll={class:"table-add-row"},Ml={class:"flex flex-col items-center"},Il={key:0},Bl=["disabled"],Dl={key:0},Fl=Object(a["createElementVNode"])("br",null,null,-1),Pl=Object(a["createElementVNode"])("hr",null,null,-1),Ul=Object(a["createElementVNode"])("br",null,null,-1),Rl={class:"font-bold text-xl"},Al=Object(a["createElementVNode"])("br",null,null,-1);function zl(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",xl,[Object(a["createElementVNode"])("div",El,[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=()=>e.changePanel("text")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"===e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.textSection")),3),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=()=>e.changePanel("panels")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"!==e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.panel.collection")),3)]),"text"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",wl,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])("text-editor"),{key:"text",panel:e.panel,configFileStructure:e.configFileStructure,lang:e.lang},null,8,["panel","configFileStructure","lang"]))])):Object(a["createCommentVNode"])("",!0),"panels"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",kl,[Object(a["createElementVNode"])("table",Nl,[Object(a["createElementVNode"])("tr",Tl,[Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.id")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.children,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.determineEditorType(t.panel)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:()=>e.switchSlide(i)},Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),9,_l),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:()=>e.removeSlide(t,i)},Object(a["toDisplayString"])(e.$t("editor.remove")),9,$l)])]))),128)),Object(a["createElementVNode"])("tr",Ll,[Object(a["createElementVNode"])("th",Ml,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text",placeholder:"Enter Panel ID","onUpdate:modelValue":t[2]||(t[2]=t=>e.newSlideName=t)},null,512),[[a["vModelText"],e.newSlideName]]),e.idUsed?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Il,Object(a["toDisplayString"])(e.$t("dynamic.panel.idTaken")),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("th",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.newSlideType=t)},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e},Object(a["toDisplayString"])(e),1))),128))],512),[[a["vModelSelect"],e.newSlideType]])]),Object(a["createElementVNode"])("th",null,[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[4]||(t[4]=(...t)=>e.createNewSlide&&e.createNewSlide(...t)),disabled:e.idUsed},"Add New",8,Bl)])])]),-1!==e.editingSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Dl,[Fl,Pl,Ul,Object(a["createElementVNode"])("span",Rl,Object(a["toDisplayString"])(e.$t("dynamic.panel.editor")),1),Al,(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.panel.children[e.editingSlide].panel)]),{ref:"slide",key:e.editingSlide+e.determineEditorType(e.panel.children[e.editingSlide].panel),panel:e.panel.children[e.editingSlide].panel,configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,onSlideEdit:t[5]||(t[5]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","sourceCounts"]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])}var Wl;let ql=Wl=class extends n["c"]{constructor(){super(...arguments),this.editors={text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"},this.startingConfig={text:{type:ie.Text,title:"",content:""},dynamic:{type:ie.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:ie.Slideshow,items:[],userCreated:!0},image:{type:ie.Image,src:""},chart:{type:ie.Chart,src:""},map:{type:ie.Map,config:"",title:"",scrollguard:!1},video:{type:ie.Video,title:"",videoType:"",src:""}},this.editingStatus="text",this.editingSlide=-1,this.newSlideName="",this.newSlideType="text"}get idUsed(){return this.panel.children.some(e=>e.id===this.newSlideName)}changePanel(e){"text"!==this.editingStatus&&this.saveChanges(),this.editingStatus=e}switchSlide(e){this.saveChanges(),this.editingSlide=e}removeSlide(e,t){switch(null===e||void 0===e?void 0:e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSlide(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}}t&&(this.panel.children=this.panel.children.filter((e,i)=>i!==t),this.editingSlide===t&&(this.editingSlide=-1))}createNewSlide(){if(!this.newSlideName)return;const e={id:this.newSlideName,panel:JSON.parse(JSON.stringify(this.startingConfig[this.newSlideType]))};this.newSlideName="",this.panel.children.push(e)}determineEditorType(e){if(e.type!==ie.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return ie.Slideshow;const t=e.items.every(e=>e.type===ie.Chart);if(t)return ie.Chart;const i=e.items.every(e=>e.type===ie.Image);return i?ie.Image:ie.Slideshow}saveChanges(){void 0!==this.$refs.slide&&"function"===typeof this.$refs.slide.saveChanges&&this.$refs.slide.saveChanges()}};Object(r["a"])([Object(n["b"])()],ql.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],ql.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],ql.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],ql.prototype,"sourceCounts",void 0),ql=Wl=Object(r["a"])([Object(n["a"])({components:{"chart-editor":xt,"image-editor":li,"text-editor":ui,"slideshow-editor":vl,"dynamic-editor":Wl,"map-editor":ra,"video-editor":Pa}})],ql);var Hl=ql;i("a3cc");const Xl=d()(Hl,[["render",zl]]);var Jl=Xl;let Gl=class extends n["c"]{constructor(){super(...arguments),this.config=void 0,this.panelIndex=0,this.newType="",this.rightOnly=!1,this.editors={text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor",loading:"loading-page",dynamic:"dynamic-editor"}}onSlideChange(){this.currentSlide&&(this.rightOnly=1===this.currentSlide.panel.length)}changePanelType(e,t){const i={text:{type:ie.Text,title:"",content:""},dynamic:{type:ie.Dynamic,title:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].title:"",titleTag:"",content:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].content:"",children:[]},slideshow:{type:ie.Slideshow,items:[],userCreated:!0},image:{type:ie.Image,src:""},chart:{type:ie.Chart,src:""},map:{type:ie.Map,config:"",title:"",scrollguard:!1},video:{type:ie.Video,title:"",videoType:"",src:""}};this.currentSlide.panel.forEach(e=>this.removeSourceCounts(e)),"dynamic"===t?(this.panelIndex=0,this.currentSlide["panel"]=[i[t]]):this.currentSlide.panel[this.panelIndex]=i[t]}removeSourceCounts(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceCounts(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceCounts(e.panel)});break}case"text":break}}saveChanges(){void 0!==this.$refs.editor&&"function"===typeof this.$refs.editor.saveChanges&&this.$refs.editor.saveChanges()}selectSlide(e){this.$emit("slide-change",e)}cancelTypeChange(){this.$refs.typeSelector.value=this.determineEditorType(this.currentSlide.panel[this.panelIndex])}determineEditorType(e){if(e.type!==ie.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return ie.Slideshow;const t=e.items.every(e=>e.type===ie.Chart);if(t)return ie.Chart;const i=e.items.every(e=>e.type===ie.Image);return i?ie.Image:ie.Slideshow}toggleRightOnly(){this.saveChanges(),this.rightOnly?(this.panelIndex=0,this.currentSlide["panel"]=[this.currentSlide.panel[1]]):this.currentSlide["panel"]=[Object.assign({},{type:ie.Text,title:"",content:""}),Object.assign({},this.currentSlide.panel[0])]}};Object(r["a"])([Object(n["b"])()],Gl.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"uid",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"isLast",void 0),Object(r["a"])([Object(n["b"])()],Gl.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["d"])("currentSlide",{deep:!0})],Gl.prototype,"onSlideChange",null),Gl=Object(r["a"])([Object(n["a"])({components:{"chart-editor":xt,"image-editor":li,"text-editor":ui,"map-editor":ra,"video-editor":Pa,"slideshow-editor":vl,"loading-page":Cl,"dynamic-editor":Jl,"confirmation-modal":Ot}})],Gl);var Zl=Gl;i("abd1");const Yl=d()(Zl,[["render",Be],["__scopeId","data-v-f570b598"]]);var Ql=Yl;const Kl=e=>(Object(a["pushScopeId"])("data-v-20503c48"),e=e(),Object(a["popScopeId"])(),e),eo={class:"flex toc-header p-2 mt-10"},to={class:"flex items-center justify-center font-bold"},io=Kl(()=>Object(a["createElementVNode"])("span",{class:"flex-1"},null,-1)),ao=Kl(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),lo=Kl(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"})])],-1)),oo={class:"align-middle inline-block"},ro=Kl(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),no=[ro],so={slot:"header",class:"text-xl font-bold"},co={class:"flex flex-col"},uo={class:"text-lg font-bold my-6"},mo={class:"flex"},po=["value"],ho=["onClick"],bo={class:"self-center overflow-ellipsis whitespace-nowrap overflow-hidden flex-grow ml-2"},go={class:"font-bold overflow-hidden"},fo={class:"flex"},vo={class:"flex flex-col"},Oo=["onClick"],jo=Kl(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})],-1)),Vo=[jo],yo=["onClick"],So=Kl(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),Co=[So],xo={class:"flex flex-col mr-2 ml-1 my-1"},Eo=["onClick","disabled"],wo=Kl(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),ko=[wo],No=["onClick","disabled"],To=Kl(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),_o=[To];function $o(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal"),s=Object(a["resolveComponent"])("confirmation-modal"),c=Object(a["resolveComponent"])("draggable"),d=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",eo,[Object(a["createElementVNode"])("span",to,Object(a["toDisplayString"])(e.$t("editor.slides.title")),1),io,ao,Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=(...t)=>e.addNewSlide&&e.addNewSlide(...t))},[lo,Object(a["createElementVNode"])("span",oo,Object(a["toDisplayString"])(e.$t("editor.slides.addSlide")),1)]),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.$vfm.open("copy-from-other-lang"),["stop"]))},no)),[[d,{delay:"200",placement:"right",content:e.$t("editor.slides.copyFromLang"),animateFill:!0}]]),Object(a["createVNode"])(n,{modalId:"copy-from-other-lang","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",so,Object(a["toDisplayString"])(e.$t("editor.slides.copyFromLang")),1),Object(a["createElementVNode"])("div",co,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button w-32 h-12 ml-0",onClick:t[2]||(t[2]=t=>e.copyAllFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides))},Object(a["toDisplayString"])(e.$t("editor.slides.copyAll")),1),Object(a["createElementVNode"])("span",uo,Object(a["toDisplayString"])(e.$t("editor.or")),1),Object(a["createElementVNode"])("div",mo,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedForCopying=t),class:"overflow-ellipsis copy-select"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{value:i,key:t.title+i},Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+": "+t.title),9,po))),128))],512),[[a["vModelSelect"],e.selectedForCopying]]),Object(a["createElementVNode"])("button",{class:"editor-toc-button",onClick:t[4]||(t[4]=t=>e.copyFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides[e.selectedForCopying]))},Object(a["toDisplayString"])(e.$t("editor.slides.copy")),1)])])]),_:1})]),Object(a["createElementVNode"])("ul",null,[Object(a["createVNode"])(c,{modelValue:e.slides,"onUpdate:modelValue":t[5]||(t[5]=t=>e.slides=t),onUpdate:t[6]||(t[6]=t=>e.$emit("slides-updated",e.slides)),"item-key":"title"},{item:Object(a["withCtx"])(({element:t,index:i})=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{class:Object(a["normalizeClass"])(["toc-slide border-t flex px-2 cursor-pointer hover:bg-gray-100",e.currentSlide===t?"bg-gray-100":""]),onClick:t=>e.selectSlide(i),key:t.title+i},[Object(a["createElementVNode"])("div",bo,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+1)+": ",1),Object(a["createElementVNode"])("span",go,Object(a["toDisplayString"])(t.title||"Add a title"),1)]),Object(a["createElementVNode"])("div",fo,[Object(a["createElementVNode"])("div",vo,[Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.$vfm.open("delete-slide-"+i),["stop"])},Vo,8,Oo),Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.copySlide(i),["stop"])},Co,8,yo)]),Object(a["createElementVNode"])("div",xo,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button",0==i?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveUp(i),["stop"]),disabled:0==i},ko,10,Eo),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button rotate-180 transform",i==e.slides.length-1?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveDown(i),["stop"]),disabled:i==e.slides.length-1},_o,10,No)])]),Object(a["createVNode"])(s,{name:"delete-slide-"+i,message:e.$t("editor.slides.deleteSlide.confirm",{title:t.title}),onOk:t=>e.removeSlide(i)},null,8,["name","message","onOk"])],10,ho)),[[d,{delay:"200",placement:"right",content:t.title,animateFill:!0}]])]),_:1},8,["modelValue"])])])}var Lo=i("9675"),Mo=i.n(Lo);let Io=class extends n["c"]{constructor(){super(...arguments),this.selectedForCopying=0}selectSlide(e){this.$emit("slide-change",e)}addNewSlide(){this.slides.push({title:"",panel:[{type:"text",title:"",content:""},{type:"text",title:"",content:""}]}),this.selectSlide(this.slides.length-1),this.$emit("slides-updated",this.slides)}copyFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,Mo()(e)),this.$emit("slides-updated",this.slides))}copyAllFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,...e.map(e=>Mo()(e))),this.$emit("slides-updated",this.slides))}copySlide(e){this.slides.splice(e+1,0,Mo()(this.slides[e])),this.$emit("slides-updated",this.slides)}removeSlide(e){e===this.slideIndex&&this.$emit("slide-change",-1),this.removeSourceCounts(e),this.slides.splice(e,1),this.$emit("slides-updated",this.slides)}removeSourceCounts(e){var t;const i=null===(t=this.slides.find((t,i)=>i===e))||void 0===t?void 0:t.panel;null===i||void 0===i||i.forEach(e=>this.removeSourceHelper(e))}removeSourceHelper(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceHelper(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceHelper(e.panel)});break}case"text":break}}moveUp(e){this.moveDown(e-1)}moveDown(e){this.slides.splice(e+1,0,this.slides.splice(e,1)[0]),this.$emit("slides-updated",this.slides)}};Object(r["a"])([Object(n["b"])()],Io.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],Io.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],Io.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],Io.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Io.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Io.prototype,"sourceCounts",void 0),Io=Object(r["a"])([Object(n["a"])({components:{"slide-editor":Ql,"confirmation-modal":Ot,"vue-final-modal":le["a"],draggable:Vt.a}})],Io);var Bo=Io;i("3aea");const Do=d()(Bo,[["render",$o],["__scopeId","data-v-20503c48"]]);var Fo=Do;const Po={class:"editor-label mb-5"},Uo=["value"],Ro=Object(a["createElementVNode"])("br",null,null,-1),Ao={class:"editor-label mb-5"},zo=["value"],Wo={class:"editor-label mb-5"},qo=["value"],Ho=Object(a["createElementVNode"])("br",null,null,-1),Xo={key:0},Jo={class:"editor-label"},Go=["src"],Zo={key:1,class:"image-preview"},Yo={class:"editor-label mb-5"},Qo=["value"],Ko=Object(a["createElementVNode"])("br",null,null,-1),er={class:"editor-label"},tr=["value"],ir=Object(a["createElementVNode"])("br",null,null,-1),ar=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),lr={class:"inline-block"},or=Object(a["createElementVNode"])("br",null,null,-1),rr={class:"editor-label"},nr=["value"],sr=Object(a["createElementVNode"])("br",null,null,-1),cr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),dr={class:"inline-block"},ur=Object(a["createElementVNode"])("br",null,null,-1),mr={class:"editor-label"},pr=["value"],hr=Object(a["createElementVNode"])("br",null,null,-1),br=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),gr={class:"inline-block"},fr=Object(a["createElementVNode"])("br",null,null,-1),vr={class:"editor-label mr-15"},Or={value:"vertical"},jr={value:"horizontal"},Vr=Object(a["createElementVNode"])("br",null,null,-1),yr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Sr={class:"inline-block"},Cr=Object(a["createElementVNode"])("br",null,null,-1),xr={class:"editor-label mb-5"},Er=["value"],wr=Object(a["createElementVNode"])("br",null,null,-1),kr=Object(a["createElementVNode"])("br",null,null,-1);function Nr(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("label",Po,Object(a["toDisplayString"])(e.$t("editor.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"title",value:e.metadata.title,onChange:t[0]||(t[0]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/3"},null,40,Uo),Ro,Object(a["createElementVNode"])("label",Ao,Object(a["toDisplayString"])(e.$t("editor.slides.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introTitle",value:e.metadata.introTitle,onChange:t[1]||(t[1]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,zo),Object(a["createElementVNode"])("label",Wo,Object(a["toDisplayString"])(e.$t("editor.slides.intro"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introSubtitle",value:e.metadata.introSubtitle,onChange:t[2]||(t[2]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,qo),Ho,e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Xo,[Object(a["createElementVNode"])("label",Jo,Object(a["toDisplayString"])(e.$t("editor.logoPreview"))+":",1),e.metadata.logoPreview&&"error"!=e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:e.metadata.logoPreview,class:"image-preview"},null,8,Go)):Object(a["createCommentVNode"])("",!0),"error"==e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Zo,Object(a["toDisplayString"])(e.$t("editor.image.loadingError")),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("label",Yo,Object(a["toDisplayString"])(e.$t("editor.logo"))+":",1),Object(a["createElementVNode"])("input",{type:"text",onChange:t[3]||(t[3]=t=>e.$emit("logo-source-changed",t)),value:e.metadata.logoName,class:"editor-input w-1/4"},null,40,Qo),Object(a["createElementVNode"])("button",{onClick:t[4]||(t[4]=Object(a["withModifiers"])((...t)=>e.openFileSelector&&e.openFileSelector(...t),["stop"])),class:"editor-button bg-black text-white hover:bg-gray-800"},Object(a["toDisplayString"])(e.$t("editor.browse")),1),e.metadata.logoName||e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[5]||(t[5]=Object(a["withModifiers"])((...t)=>e.removeLogo&&e.removeLogo(...t),["stop"])),class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.remove")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("input",{type:"file",id:"logoUpload",onChange:t[6]||(t[6]=t=>e.$emit("logo-changed",t)),class:"editor-input w-1/4",style:{display:"none"}},null,32),Ko,Object(a["createElementVNode"])("label",er,Object(a["toDisplayString"])(e.$t("editor.logoAltText"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"logoAltText",value:e.metadata.logoAltText,onChange:t[7]||(t[7]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,tr),ir,ar,Object(a["createElementVNode"])("p",lr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.logoAltText.desc")),1)]),or,Object(a["createElementVNode"])("label",rr,Object(a["toDisplayString"])(e.$t("editor.contextLink"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLink",value:e.metadata.contextLink,onChange:t[8]||(t[8]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,nr),sr,cr,Object(a["createElementVNode"])("p",dr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLink.info")),1)]),ur,Object(a["createElementVNode"])("label",mr,Object(a["toDisplayString"])(e.$t("editor.contextLabel"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLabel",value:e.metadata.contextLabel,onChange:t[9]||(t[9]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,pr),hr,br,Object(a["createElementVNode"])("p",gr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLabel.info")),1)]),fr,Object(a["createElementVNode"])("label",vr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"border-solid border border-black p-1",name:"tocOrientation",id:"toc",onChange:t[10]||(t[10]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.metadata.tocOrientation=t)},[Object(a["createElementVNode"])("option",Or,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.vertical")),1),Object(a["createElementVNode"])("option",jr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.horizontal")),1)],544),[[a["vModelSelect"],e.metadata.tocOrientation]]),Vr,yr,Object(a["createElementVNode"])("p",Sr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.info")),1)]),Cr,Object(a["createElementVNode"])("label",xr,Object(a["toDisplayString"])(e.$t("editor.dateModified"))+":",1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"date",name:"dateModified",value:e.metadata.dateModified,onChange:t[12]||(t[12]=(...t)=>e.metadataChanged&&e.metadataChanged(...t))},null,40,Er),wr,kr])}class Tr extends n["c"]{openFileSelector(){var e;null===(e=document.getElementById("logoUpload"))||void 0===e||e.click()}metadataChanged(e){this.$emit("metadata-changed",e.target.name,e.target.value)}removeLogo(){this.metadata.logoName="",this.metadata.logoPreview=""}}Object(r["a"])([Object(n["b"])()],Tr.prototype,"metadata",void 0);const _r=d()(Tr,[["render",Nr]]);var $r=_r;const Lr={class:"editor-container"},Mr={class:"editor-header sticky flex items-center border-b border-black bg-gray-200 py-2 px-2 z-10"},Ir={class:"mx-1"},Br=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18.001",viewBox:"0 0 18 18.001"},[Object(a["createElementVNode"])("path",{id:"logout-Icon-SVG-098767893",d:"M5.808,13.782v1.406A2.816,2.816,0,0,0,8.621,18h7.067A2.816,2.816,0,0,0,18.5,15.188V2.813A2.816,2.816,0,0,0,15.687,0H8.621A2.816,2.816,0,0,0,5.808,2.813V4.219a.7.7,0,0,0,1.406,0V2.813A1.408,1.408,0,0,1,8.621,1.406h7.067a1.408,1.408,0,0,1,1.406,1.406V15.188a1.408,1.408,0,0,1-1.406,1.406H8.621a1.408,1.408,0,0,1-1.406-1.406V13.782a.7.7,0,0,0-1.406,0ZM1.014,7.793,2.589,6.218a.7.7,0,0,1,.994.994l-1.12,1.12h8.443a.7.7,0,1,1,0,1.406H2.463l1.12,1.12a.7.7,0,1,1-.994.994L1.014,10.279A1.76,1.76,0,0,1,1.014,7.793Zm0,0",transform:"translate(-0.5)"})],-1),Dr={class:"ml-3 flex flex-col"},Fr={class:"font-semibold text-lg"},Pr=Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1),Ur=Object(a["createElementVNode"])("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18px",height:"18px"},[Object(a["createElementVNode"])("path",{d:"M 2 2 L 4.9394531 4.9394531 C 3.1262684 6.7482143 2 9.2427079 2 12 C 2 17.514 6.486 22 12 22 C 17.514 22 22 17.514 22 12 C 22 6.486 17.514 2 12 2 L 12 4 C 16.411 4 20 7.589 20 12 C 20 16.411 16.411 20 12 20 C 7.589 20 4 16.411 4 12 C 4 9.7940092 4.9004767 7.7972757 6.3496094 6.3496094 L 9 9 L 9 2 L 2 2 z"})],-1),Rr={class:"font-normal ml-1"},Ar={key:0,class:"border-2 border-red-700 text-red-700 rounded p-1 mr-2"},zr=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",class:"fill-red-600",width:"18",height:"18","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m12.002 21.534c5.518 0 9.998-4.48 9.998-9.998s-4.48-9.997-9.998-9.997c-5.517 0-9.997 4.479-9.997 9.997s4.48 9.998 9.997 9.998zm0-1.5c-4.69 0-8.497-3.808-8.497-8.498s3.807-8.497 8.497-8.497 8.498 3.807 8.498 8.497-3.808 8.498-8.498 8.498zm0-6.5c-.414 0-.75-.336-.75-.75v-5.5c0-.414.336-.75.75-.75s.75.336.75.75v5.5c0 .414-.336.75-.75.75zm-.002 3c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z","fill-rule":"nonzero"})])],-1),Wr={class:"align-center inline-block select-none"},qr=["disabled"],Hr={class:"inline-block"},Xr={key:0,class:"align-middle inline-block px-1"},Jr={class:"flex"},Gr={class:"w-80 flex-shrink-0 border-r border-black editor-toc"},Zr={class:"flex items-center justify-center border-b p-2"},Yr=Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",width:"16",height:"16","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m4.481 15.659c-1.334 3.916-1.48 4.232-1.48 4.587 0 .528.46.749.749.749.352 0 .668-.137 4.574-1.492zm1.06-1.061 3.846 3.846 11.321-11.311c.195-.195.293-.45.293-.707 0-.255-.098-.51-.293-.706-.692-.691-1.742-1.74-2.435-2.432-.195-.195-.451-.293-.707-.293-.254 0-.51.098-.706.293z","fill-rule":"nonzero"})])],-1),Qr={class:"align-middle inline-block"};function Kr(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("spinner"),c=Object(a["resolveComponent"])("slide-toc"),d=Object(a["resolveComponent"])("slide-editor"),u=Object(a["resolveComponent"])("confirmation-modal"),m=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Lr,[Object(a["createElementVNode"])("div",Mr,[Object(a["createElementVNode"])("span",Ir,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(n,{to:{name:"home"},class:"mt-1 flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Br]),_:1})),[[m,{delay:"200",placement:"right",content:e.$t("editor.returnToLanding"),animateFill:!0}]])]),Object(a["createElementVNode"])("div",Dr,[Object(a["createElementVNode"])("span",Fr,Object(a["toDisplayString"])(e.metadata.title),1),Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(e.metadata.title?"text-xs":"")},"UUID: "+Object(a["toDisplayString"])(e.uuid),3)]),Pr,e.unsavedChanges?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=t=>e.$vfm.open("reload-config")),class:"editor-button border-2 border-red-700 text-red-700 rounded p-1 mr-2"},[Ur,Object(a["createElementVNode"])("span",Rr,Object(a["toDisplayString"])(e.$t("editor.resetChanges")),1)])),[[m,{delay:"200",placement:"bottom",content:e.$t("editor.resetChanges"),animateFill:!0}]]):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(a["Transition"],{name:"fade"},{default:Object(a["withCtx"])(()=>[e.unsavedChanges?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Ar,[zr,Object(a["createElementVNode"])("span",Wr,Object(a["toDisplayString"])(e.$t("editor.unsavedChanges")),1)])):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["renderSlot"])(e.$slots,"langModal",Object(a["normalizeProps"])(Object(a["guardReactiveProps"])({unsavedChanges:e.unsavedChanges}))),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...t)=>e.preview&&e.preview(...t)),class:"editor-button bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.preview")),1),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...t)=>e.saveChanges&&e.saveChanges(...t)),class:"editor-button bg-black text-white hover:bg-gray-900",disabled:e.saving},[Object(a["createElementVNode"])("span",Hr,Object(a["toDisplayString"])(e.saving?e.$t("editor.savingChanges"):e.$t("editor.saveChanges")),1),e.saving?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Xr,[Object(a["createVNode"])(s,{size:"16px",color:"#009cd1",class:"ml-1 mb-1"})])):Object(a["createCommentVNode"])("",!0)],8,qr)]),Object(a["createElementVNode"])("div",Jr,[Object(a["createElementVNode"])("div",Gr,[Object(a["createElementVNode"])("div",Zr,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button",onClick:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.$vfm.open("metadata-edit-modal"),["stop"]))},[Yr,Object(a["createElementVNode"])("span",Qr,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1)])]),Object(a["createVNode"])(c,{slides:e.slides,currentSlide:e.currentSlide,slideIndex:e.slideIndex,onSlideChange:e.selectSlide,onSlidesUpdated:e.updateSlides,configFileStructure:e.configFileStructure,lang:e.configLang,sourceCounts:e.sourceCounts},null,8,["slides","currentSlide","slideIndex","onSlideChange","onSlidesUpdated","configFileStructure","lang","sourceCounts"])]),Object(a["createVNode"])(d,{ref:"slide",configFileStructure:e.configFileStructure,currentSlide:e.currentSlide,lang:e.configLang,slideIndex:e.slideIndex,isLast:e.slideIndex===e.slides.length-1,uid:e.uuid,onSlideChange:e.selectSlide,onSlideEdit:t[4]||(t[4]=t=>e.$emit("save-status",!0)),sourceCounts:e.sourceCounts},null,8,["configFileStructure","currentSlide","lang","slideIndex","isLast","uid","onSlideChange","sourceCounts"])]),Object(a["renderSlot"])(e.$slots,"metadataModal"),Object(a["createVNode"])(u,{name:"reload-config",message:e.$t("editor.refreshChanges.modal"),onOk:t[5]||(t[5]=t=>e.$emit("refresh-config"))},null,8,["message"])])}let en=class extends n["c"]{constructor(){super(...arguments),this.uuid="",this.logoImage=void 0,this.loadSlides=void 0,this.currentSlide="",this.slideIndex=-1}onSlidesEdited(){this.$emit("save-status",!0)}onMetadataEdited(){this.$emit("save-status",!0)}created(){this.loadSlides=this.slides,this.uuid=this.$route.params.uid,window.addEventListener("beforeunload",this.beforeWindowUnload)}mounted(){const e=new IntersectionObserver(([e])=>e.target.classList.toggle("z-40",e.intersectionRatio<1),{threshold:[1]});e.observe(document.querySelector(".editor-header"))}beforeDestroy(){window.removeEventListener("beforeunload",this.beforeWindowUnload)}selectSlide(e){void 0!==this.$refs.slide&&this.$nextTick(()=>{this.$refs.slide.saveChanges()}),this.currentSlide={title:"",panel:[{type:"loading-page"},{type:"loading-page"}]},setTimeout(()=>{this.currentSlide=-1===e?"":this.loadSlides[e],this.slideIndex=e,this.$refs.slide.panelIndex=0,window.scrollTo(0,0)},5)}updateSlides(e){this.loadSlides=e,this.slideIndex=this.loadSlides.indexOf(this.currentSlide)}preview(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),setTimeout(()=>{const e=this.$router.resolve({name:"preview"}),t=window.open(e.href,"_blank");t.props={config:JSON.parse(JSON.stringify(this.configs[this.configLang])),configFileStructure:this.configFileStructure}},5)}saveChanges(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),this.$emit("save-changes")}beforeWindowUnload(e){this.unsavedChanges&&!window.confirm()&&(e.preventDefault(),e.returnValue="")}};Object(r["a"])([Object(n["b"])()],en.prototype,"configs",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"metadata",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"configLang",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"saving",void 0),Object(r["a"])([Object(n["b"])()],en.prototype,"unsavedChanges",void 0),Object(r["a"])([Object(n["d"])("slides",{deep:!0})],en.prototype,"onSlidesEdited",null),Object(r["a"])([Object(n["d"])("metadata",{deep:!0})],en.prototype,"onMetadataEdited",null),en=Object(r["a"])([Object(n["a"])({components:{"metadata-content":$r,"confirmation-modal":Ot,spinner:ae["a"],"slide-editor":Ql,"slide-toc":Fo}})],en);var tn=en;i("9c96");const an=d()(tn,[["render",Kr]]);var ln=an;const on=i("c4e3"),rn=i("bc3a").default,{v4:nn}=i("e144");let sn=class extends n["c"]{constructor(){super(...arguments),this.configs={en:void 0,fr:void 0},this.configFileStructure=void 0,this.loadExisting=!1,this.reloadExisting=!1,this.loadStatus="waiting",this.loadEditor=!1,this.error=!1,this.warning="none",this.configLang="en",this.saving=!1,this.unsavedChanges=!1,this.uuid="",this.baseUuid="",this.changeUuid="",this.renaming=!1,this.renamed="",this.logoImage=void 0,this.metadata={title:"",introTitle:"",introSubtitle:"",logoPreview:"",logoName:"",logoAltText:"",contextLink:"",contextLabel:"",tocOrientation:"",dateModified:""},this.reqFields={uuid:!0},this.slides=[],this.sourceCounts={}}created(){var e;if(this.loadExisting=this.editExisting,this.uuid=null!==(e=this.$route.params.uid)&&void 0!==e?e:this.loadExisting?void 0:nn(),this.configLang=this.$route.params.configLang?this.$route.params.configLang:"en",this.configs={en:void 0,fr:void 0},this.configFileStructure=void 0,!this.loadExisting){const e=new Date,t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");this.metadata.dateModified=`${t}-${i}-${a}`,this.metadata.tocOrientation="vertical"}if("editor"===this.$route.name){this.loadEditor=!0;const e=this.$route.meta.data;if(e&&e.configs&&e.configFileStructure){var t;this.configs=e.configs,this.configFileStructure=e.configFileStructure,this.metadata=e.metadata,this.slides=e.slides,this.sourceCounts=e.sourceCounts,this.loadExisting=e.existing,this.unsavedChanges=e.unsavedChanges;const a=null===(t=this.configs[this.configLang])||void 0===t||null===(t=t.introSlide.logo)||void 0===t?void 0:t.src,l=`assets/${this.configLang}/${this.metadata.logoName}`;if(a){var i;const e=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(l);e?e.async("blob").then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=URL.createObjectURL(e),this.loadStatus="loaded"}):(this.metadata.logoName=a,fetch(a).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=a,this.loadStatus="loaded"})}))}else this.loadStatus="loaded";return}}this.$route.params.uid&&this.generateRemoteConfig()}generateNewConfig(){const e=new on;this.configs[this.configLang]=this.configHelper();const t=this.configs[this.configLang];if(this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`}else t.introSlide.logo.src="";t.slides=[];const a="en"===this.configLang?"fr":"en";this.configs[a]=Mo()(t),this.configs[a].lang=a;const l=JSON.stringify(this.configs[a],null,4),o=`${this.uuid}_${this.configLang}.json`,r=JSON.stringify(t,null,4);e.file(o,r),e.file(`${this.uuid}_${a}.json`,l),this.configFileStructureHelper(e,this.logoImage)}configHelper(){return{title:this.metadata.title,lang:this.configLang,introSlide:{logo:{src:""},title:this.metadata.introTitle,subtitle:this.metadata.introSubtitle},slides:[],contextLabel:this.metadata.contextLabel,contextLink:this.metadata.contextLink,tocOrientation:this.metadata.tocOrientation,dateModified:this.metadata.dateModified}}generateRemoteConfig(){this.loadStatus="loading",this.baseUuid=this.uuid,this.renamed="",this.changeUuid="",fetch("http://localhost:6040/retrieve/"+this.uuid).then(e=>{if(404===e.status){var t;oe["a"].error(`The requested UUID '${null!==(t=this.uuid)&&void 0!==t?t:""}' does not exist.`),this.error=!0,this.loadStatus="waiting",this.clearConfig()}else{const t=new on;e.blob().then(e=>{t.loadAsync(e).then(()=>{this.configFileStructureHelper(t)})})}}).catch(()=>{oe["a"].error("Failed to load product, no response from server"),this.loadStatus="loaded"})}async renameProduct(){var e,t;if(!this.configFileStructure)return;const i=null===(e=this.configFileStructure)||void 0===e?void 0:e.zip.file(this.uuid+"_en.json"),a=null===(t=this.configFileStructure)||void 0===t?void 0:t.zip.file(this.uuid+"_fr.json");if(i&&a){var l,o,r,n;null===(l=this.configFileStructure)||void 0===l||l.zip.remove(i.name),null===(o=this.configFileStructure)||void 0===o||o.zip.remove(a.name);const e=await(null===i||void 0===i?void 0:i.async("string").then(e=>JSON.parse(e))),t=await(null===a||void 0===a?void 0:a.async("string").then(e=>JSON.parse(e)));[e,t].forEach(e=>this.renameSources(e)),null===(r=this.configFileStructure)||void 0===r||r.zip.file(this.changeUuid+"_en.json",JSON.stringify(e,null,4)),null===(n=this.configFileStructure)||void 0===n||n.zip.file(this.changeUuid+"_fr.json",JSON.stringify(t,null,4)),this.uuid=this.changeUuid,this.sourceCounts={},this.configFileStructureHelper(this.configFileStructure.zip)}this.renaming=!1,this.renamed=this.uuid}renameSources(e){var t;const i=e=>{switch(e.type){case ie.Dynamic:e.children.forEach(e=>{i(e.panel)});break;case ie.Slideshow:e.items.forEach(e=>{i(e)});break;default:e.src&&(e.src=e.src.replace(this.uuid+"/",this.changeUuid+"/")),e.config&&"string"===typeof e.config&&(e.config=e.config.replace(this.uuid+"/",this.changeUuid+"/"))}};null!==e&&void 0!==e&&null!==(t=e.introSlide.logo)&&void 0!==t&&t.src&&(e.introSlide.logo.src=e.introSlide.logo.src.replace(this.uuid+"/assets/",this.changeUuid+"/assets/")),e.slides.forEach(e=>{e.panel.forEach(e=>{i(e)})})}findSources(e){["en","fr"].forEach(t=>{var i,a;null!==(i=e[t])&&void 0!==i&&null!==(i=i.introSlide.logo)&&void 0!==i&&i.src&&this.incrementSourceCount(e[t].introSlide.logo.src),null===(a=e[t])||void 0===a||a.slides.forEach(e=>{e.panel.forEach(e=>{this.panelSourceHelper(e)})})})}panelSourceHelper(e){switch(e.type){case ie.Dynamic:e.children.forEach(e=>{this.panelSourceHelper(e.panel)});break;case ie.Slideshow:e.items.forEach(e=>{this.panelSourceHelper(e)});break;case ie.Chart:this.incrementSourceCount(e.src);break;case ie.Image:this.incrementSourceCount(e.src);break;case ie.Video:"local"===e.videoType&&this.incrementSourceCount(e.src);break;case ie.Audio:this.incrementSourceCount(e.src);break;case ie.Map:this.incrementSourceCount(e.config);break;case ie.Text:break;default:break}}incrementSourceCount(e){this.sourceCounts[e]?this.sourceCounts[e]+=1:this.sourceCounts[e]=1}configFileStructureHelper(e,t){const i=e.folder("assets"),a=e.folder("charts"),l=e.folder("ramp-config");this.configFileStructure={uuid:this.uuid,zip:e,configs:this.configs,assets:{en:i.folder("en"),fr:i.folder("fr")},charts:{en:a.folder("en"),fr:a.folder("fr")},rampConfig:l},void 0!==t&&this.configFileStructure.assets[this.configLang].file(null===t||void 0===t?void 0:t.name,t),this.loadConfig()}async loadConfig(e){if(e)this.useConfig(e);else{try{var t,i;const e=null===(t=this.configFileStructure)||void 0===t?void 0:t.zip.file(this.uuid+"_en.json"),a=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(this.uuid+"_fr.json");await(null===e||void 0===e?void 0:e.async("string").then(e=>{this.configs["en"]=JSON.parse(e)})),await(null===a||void 0===a?void 0:a.async("string").then(e=>{this.configs["fr"]=JSON.parse(e)}))}catch{var a;return oe["a"].error(`The requested product '${null!==(a=this.uuid)&&void 0!==a?a:""}' is malformed.`),this.loadStatus="waiting",void this.clearConfig()}this.loadExisting&&!this.renamed?(this.loadStatus="waiting",oe["a"].success("Successfully loaded storyline!")):this.loadStatus="loaded",this.configs[this.configLang]&&(this.useConfig(this.configs[this.configLang]),this.findSources(this.configs),this.reloadExisting?(this.loadEditor=!0,this.generateConfig(),this.updateEditorPath()):this.loadExisting||(this.loadEditor=!0,this.updateEditorPath()))}}useConfig(e){var t;this.metadata.title=e.title,this.metadata.introTitle=e.introSlide.title,this.metadata.introSubtitle=e.introSlide.subtitle,this.metadata.contextLink=e.contextLink,this.metadata.contextLabel=e.contextLabel,this.metadata.tocOrientation=e.tocOrientation,this.metadata.dateModified=e.dateModified,this.slides=e.slides;const i=null===(t=e.introSlide.logo)||void 0===t?void 0:t.src;if(i){var a,l;this.metadata.logoAltText=null!==(a=e.introSlide.logo)&&void 0!==a&&a.altText?e.introSlide.logo.altText:"";const t=""+i.substring(i.indexOf("/")+1),o=""+i.split("/")[i.split("/").length-1],r=null===(l=this.configFileStructure)||void 0===l?void 0:l.zip.file(t);r?r.async("blob").then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=URL.createObjectURL(e),this.metadata.logoName=o,this.loadStatus="loaded"}):(this.metadata.logoName=i,fetch(i).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=i,this.loadStatus="loaded"})}))}}generateConfig(){var e,t;this.saving=!0;const i=`${this.uuid}_${this.configLang}.json`,a=JSON.stringify(this.configs[this.configLang],null,4);return null===(e=this.configFileStructure)||void 0===e||e.zip.file(i,a),null===(t=this.configFileStructure)||void 0===t||t.zip.generateAsync({type:"blob"}).then(e=>{const t=new FormData;t.append("data",e,this.uuid+".zip");const i={"Content-Type":"multipart/form-data"};rn.post("http://localhost:6040/upload",t,{headers:i}).then(e=>{e.data.files,e.status,this.unsavedChanges=!1,this.loadExisting=!0,oe["a"].success("Successfully saved changes!")}).catch(()=>{oe["a"].error("Failed to save changes.")}).finally(()=>{setTimeout(()=>{this.saving=!1},500)})}),this.configFileStructure}updateMetadata(e,t){this.metadata[e]=t,this.unsavedChanges=!0}saveMetadata(e=!1){const t=this.configs[this.configLang];if(void 0!==t){if(t.title=this.metadata.title,t.introSlide.title=this.metadata.introTitle,t.introSlide.subtitle=this.metadata.introSubtitle,t.contextLink=this.metadata.contextLink,t.contextLabel=this.metadata.contextLabel,t.tocOrientation=this.metadata.tocOrientation,t.dateModified=this.metadata.dateModified,void 0===t.introSlide.logo&&(t.introSlide.logo={src:"",altText:""}),t.introSlide.logo.altText=this.metadata.logoAltText,this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i,a,l;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`,null===(a=this.configFileStructure)||void 0===a||a.assets[this.configLang].file(null===(l=this.logoImage)||void 0===l?void 0:l.name,this.logoImage)}else t.introSlide.logo.src="";e&&this.generateConfig()}this.$vfm.close("metadata-edit-modal")}clearConfig(){this.metadata={title:"",introTitle:"",introSubtitle:"",contextLink:"",contextLabel:"",dateModified:"",logoPreview:"",logoName:"",logoAltText:"",tocOrientation:""},this.configs={en:void 0,fr:void 0},this.slides=[]}swapLang(){this.configLang="en"===this.configLang?"fr":"en",this.configs[this.configLang]&&(this.loadConfig(this.configs[this.configLang]),this.loadEditor&&(this.$refs.mainEditor.updateSlides(this.slides),this.$nextTick(()=>{this.$refs.mainEditor.selectSlide(-1)})))}checkUuid(e){this.loadExisting&&!e||fetch("http://localhost:6040/retrieve/"+(e?this.changeUuid:this.uuid)).then(t=>{404!==t.status&&(this.warning=e?"rename":"uuid")}),this.warning="none"}beforeRouteUpdate(e,t,i){this.uuid=e.params.uid,this.$i18n.locale=e.params.lang,i()}onLogoSourceInput(e){const t=e=>{const t=new Image;return t.src=e,new Promise(e=>{t.onerror=()=>e(!1),t.onload=()=>e(!0)})};this.metadata.logoName=e.target.value,t(this.metadata.logoName).then(e=>{e?(this.metadata.logoPreview=this.metadata.logoName,oe["a"].success("Successfully loaded logo image.")):(this.metadata.logoPreview="error",oe["a"].error("Failed to load logo image."))})}onFileChange(e){const t=e.target.files[0];this.logoImage=t,this.metadata.logoPreview=URL.createObjectURL(t),this.metadata.logoName=t.name}updateEditorPath(){"editor"!==this.$route.name&&(this.$router.beforeEach(e=>{"editor"===e.name&&(e.meta.data={configLang:this.configLang,configs:this.configs,configFileStructure:this.configFileStructure,sourceCounts:this.sourceCounts,metadata:this.metadata,slides:this.slides,existing:this.editExisting,unsavedChanges:this.unsavedChanges})}),this.$router.push({name:"editor",params:{uid:this.uuid}}))}checkRequiredFields(){return this.reqFields.uuid=!!this.uuid,!Object.values(this.reqFields).some(e=>!e)||(oe["a"].error("Please fill out the required fields before proceeding."),!1)}continueToEditor(){var e;this.checkRequiredFields()&&(this.loadExisting?void 0!==this.configs[this.configLang]&&this.uuid===(null===(e=this.configFileStructure)||void 0===e?void 0:e.uuid)?(this.loadEditor=!0,this.saveMetadata(!1),this.updateEditorPath()):oe["a"].error("No config exists for storylines product."):this.uuid?this.generateNewConfig():(oe["a"].error("Missing required field: UUID"),this.error=!0))}updateSaveStatus(e){this.unsavedChanges=e}refreshConfig(){this.loadExisting?(this.reloadExisting=!0,this.loadExisting=!1,this.generateRemoteConfig()):(this.reloadExisting=!1,this.generateNewConfig())}beforeRouteLeave(e,t,i){const a="editor"===this.$route.name,l="Leave the page? Changes made may not be saved.";this.unsavedChanges&&a&&!window.confirm(l)?i(!1):i()}};Object(r["a"])([Object(n["b"])({default:!0})],sn.prototype,"editExisting",void 0),sn=Object(r["a"])([Object(n["a"])({components:{Editor:ln,"confirmation-modal":Ot,"metadata-content":$r,spinner:ae["a"],"slide-editor":Ql,"slide-toc":Fo,"vue-final-modal":le["a"]}})],sn);var cn=sn;i("cdb2");const dn=d()(cn,[["render",te]]);var un=dn;const mn={key:0},pn={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},hn={key:1},bn={key:0,class:"storyramp-app bg-white"},gn={id:"story-header",class:"story-header sticky top-0 flex border-b border-black bg-gray-200 py-2 px-2 justify-between"},fn={class:"w-mobile-full truncate"},vn={class:"font-semibold text-lg m-1"},On={class:"w-full mx-auto pb-10",id:"story"},jn={class:"p-8 pt-2 text-right text-sm"},Vn=["href"],yn=Object(a["createElementVNode"])("a",{href:"https://github.com/ramp4-pcar4/storylines-editor",target:"_NEW",class:"font-semibold text-blue-700"},"ramp4-pcar4/storylines-editor",-1),Sn={key:0,class:"storyramp-modified"};function Cn(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("storylines-intro"),c=Object(a["resolveComponent"])("storylines-content");return"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",mn,[Object(a["createElementVNode"])("div",pn,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])])):"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",hn,[void 0!==e.config?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",bn,[Object(a["createElementVNode"])("header",gn,[Object(a["createElementVNode"])("div",fn,[Object(a["createElementVNode"])("span",vn,Object(a["toDisplayString"])(e.config.title),1)])]),Object(a["createVNode"])(s,{config:e.config.introSlide,configFileStructure:e.configFileStructure},null,8,["config","configFileStructure"]),Object(a["createElementVNode"])("div",On,[Object(a["createVNode"])(c,{config:e.config,configFileStructure:e.configFileStructure,lang:e.lang,plugin:!0,headerHeight:e.headerHeight,onStep:e.updateActiveIndex},null,8,["config","configFileStructure","lang","headerHeight","onStep"])]),Object(a["createElementVNode"])("footer",jn,[Object(a["createTextVNode"])(" Context: "),Object(a["createElementVNode"])("a",{class:"text-blue-700 font-semibold",href:e.config.contextLink,target:"_NEW"},Object(a["toDisplayString"])(e.config.contextLabel),9,Vn),Object(a["createTextVNode"])(" | "),yn]),e.config.dateModified?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Sn,Object(a["toDisplayString"])(e.$t("story.date"))+" "+Object(a["toDisplayString"])(e.config.dateModified),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)}let xn=class extends n["c"]{constructor(){super(...arguments),this.config=void 0,this.configFileStructure=void 0,this.savedProduct=!1,this.loadStatus="loading",this.activeChapterIndex=-1,this.lang="en",this.headerHeight=0,this.uid=""}created(){const e=this.$route.params.uid,t=this.$route.params.lang;e?(this.savedProduct=!0,fetch(`http://localhost:6040/retrieve/${e}/${t}`).then(t=>{404===t.status?console.error(`There does not exist a saved product with UID ${e}.`):t.json().then(e=>{this.config=e,this.loadStatus="loaded",document.title=this.config.title+" - Canada.ca"})})):(this.config=window.props.config,this.configFileStructure=window.props.configFileStructure,this.loadStatus="loaded");const i=document.documentElement;i.setAttribute("lang",this.lang),this.$i18n.locale=this.lang}updateActiveIndex(e){this.activeChapterIndex=e;const t=document.getElementById("story-header");t&&(this.headerHeight=t.clientHeight)}};xn=Object(r["a"])([Object(n["a"])({components:{spinner:ae["a"]}})],xn);var En=xn;i("e1de");const wn=d()(En,[["render",Cn]]);var kn=wn,Nn=i("6605");const Tn=[{path:"/:lang/editor",name:"home",component:y,meta:{title:"editor.window.title"}},{path:"/:lang/editor/:uid",redirect:e=>"/"+e.params.lang+"/editor-metadata/"+e.params.uid},{path:"/:lang/editor-metadata",name:"metadataExisting",component:un,props:{editExisting:!0},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata",name:"metadataNew",component:un,props:{editExisting:!1},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata/:uid",component:un,meta:{title:"editor.window.title"}},{path:"/:lang/editor-main/:uid",name:"editor",component:un,props:!0,meta:{title:"editor.window.title"}},{path:"/:lang/editor-preview",component:kn,name:"preview",props:!0,meta:{title:"story.window.title"}},{path:"/:lang/editor-preview/:uid",component:kn,meta:{title:"story.window.title"}}],_n=Object(Nn["a"])({routes:Tn,history:Object(Nn["b"])(),scrollBehavior:function(e){if(e.hash)return{selector:decodeURIComponent(e.hash),behavior:"smooth"}}});var $n=_n,Ln=(i("38c8"),i("13d5"),i("9ca6"));const Mn=i("3d6d"),In=document.documentElement.getAttribute("lang");function Bn(e){return e.reduce((e,t)=>(e.en[t.key]=t.enValue,e.fr[t.key]=t.frValue,e),{en:{},fr:{}})}const Dn=Object(Ln["a"])({legacy:!1,locale:In||void 0,fallbackLocale:"en",globalInjection:!0,messages:Bn(Mn)});var Fn=i("ee2d"),Pn=i.n(Fn),Un=(i("fefe"),i("603a")),Rn=i.n(Un),An=(i("fbc4"),i("3b16")),zn=i.n(An),Wn=i("1487"),qn=i.n(Wn),Hn=(i("40e8"),i("c4e7")),Xn=(i("52df"),i("e748"),i("4452")),Jn=i.n(Xn),Gn=(i("e896"),i("c883")),Zn=i.n(Gn);i("91a9");Pn.a.lang.use("en-US",zn.a),Pn.a.use(Rn.a,{Hljs:qn.a});const Yn=Object(le["b"])(),Qn=Object(a["createApp"])(m);Qn.use($n).use(Dn).use(Hn["a"],{directive:"tippy",component:"tippy"}).use(Jn.a).use(oe["a"]).use(Zn.a).use(Pn.a).use(Yn),Qn.mount("#app")},cdb2:function(e,t,i){"use strict";i("a3c4")},d12f:function(e,t,i){},d932:function(e,t,i){},dd0c:function(e,t,i){},e1de:function(e,t,i){"use strict";i("518e")},e593:function(e,t,i){},e8ca:function(e,t,i){},eae8:function(e,t,i){"use strict";i("569f")},ff42:function(e,t,i){}}]);
//# sourceMappingURL=chunk-common.ae3bba76.js.map