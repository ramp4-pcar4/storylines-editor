import{q as L,U as p,T as k}from"./dom-N58V0tYi-DBU3jlah.js";import{o as w}from"./component-CWGf1hug-BASJpoEG.js";const h="calciteInternalLabelClick",m="calciteInternalLabelConnected",f="calciteInternalLabelDisconnected",E="calcite-label",s=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap,i=new Set,C=e=>{const{id:t}=e,n=t&&p(e,{selector:`${E}[for="${t}"]`});if(n)return n;const l=k(e,E);return!l||I(l,e)?null:l};function I(e,t){let n;const l="custom-element-ancestor-check",r=o=>{o.stopImmediatePropagation();const u=o.composedPath();n=u.slice(u.indexOf(t),u.indexOf(e))};return e.addEventListener(l,r,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,r),n.filter(o=>o!==t&&o!==e).filter(o=>o.tagName?.includes("-")).length>0}function v(e){if(!e)return;const t=C(e.el);if(a.has(t)&&t===e.labelEl||!t&&i.has(e))return;const n=M.bind(e);if(t){e.labelEl=t;const l=s.get(t)||[];l.push(e),s.set(t,l.sort(g)),a.has(e.labelEl)||(a.set(e.labelEl,b),e.labelEl.addEventListener(h,b)),i.delete(e),document.removeEventListener(m,c.get(e)),d.set(e,n),document.addEventListener(f,n)}else i.has(e)||(n(),document.removeEventListener(f,d.get(e)))}function y(e){if(!e||(i.delete(e),document.removeEventListener(m,c.get(e)),document.removeEventListener(f,d.get(e)),c.delete(e),d.delete(e),!e.labelEl))return;const t=s.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(h,a.get(e.labelEl)),a.delete(e.labelEl)),s.set(e.labelEl,t.filter(n=>n!==e).sort(g)),e.labelEl=null}function g(e,t){return L(e.el,t.el)?-1:1}function $(e){return e.label||e.labelEl?.textContent?.trim()||""}function b(e){const t=e.detail.sourceEvent.target,n=s.get(this),l=n.find(o=>o.el===t);if(n.includes(l))return;const r=n[0];r.disabled||r.onLabelClick(e)}function x(){i.has(this)&&v(this)}function M(){i.add(this);const e=c.get(this)||x.bind(this);c.set(this,e),document.addEventListener(m,e)}async function D(e){if(await w(e),s.has(e))return;const t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame(()=>{for(const n of i)if(n.el===t){v(n);break}})}export{y as I,$ as M,v as b,m as d,f as u,D as y};
