import{i6 as M}from"./main-CD6yn4tp.js";import{C as L,b as p}from"./dom-PjyVZjPa-BZICHdis.js";const A=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function $(e){return`${e.split("-").map((t,i)=>i===0?t:`${t[0].toUpperCase()}${t.slice(1)}`).join("")}${A.includes(e)?"Input":"Change"}`}const f="hidden-form-input";function h(e){return"checked"in e}const m=new WeakMap,E=new WeakSet;function q(e,t){if(p(t.parentElement,"[form]"))return!0;const i="calciteInternalFormComponentRegister";let n=!1;return e.addEventListener(i,a=>{n=a.composedPath().some(r=>E.has(r)),a.stopPropagation()},{once:!0}),t.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),n}function w(e,{status:t,message:i,icon:n}){"status"in e&&(e.status=t),"validationIcon"in e&&typeof e.validationIcon!="string"&&(e.validationIcon=n),"validationMessage"in e&&!e.validationMessage&&(e.validationMessage=i)}function y(e){return e.nodeName==="CALCITE-RADIO-BUTTON"?p(e,"calcite-radio-button-group"):e}const F=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function g(e){const t=e?.target,i=t?.validationMessage,n=y(t?.parentElement);if(!n)return;const a=n?.nodeName?.toLowerCase(),r=a?.split("-");if(r.length<2||r[0]!=="calcite")return;e?.preventDefault(),"validity"in n&&(n.validity=t?.validity),n.dispatchEvent(F),w(n,{message:i,icon:!0,status:"invalid"});const c=$(a);n.addEventListener(c,()=>{"status"in n&&(n.status="idle"),"validationIcon"in n&&(n.validationIcon===""||n.validationIcon===!0)&&(n.validationIcon=!1),"validationMessage"in n&&n.validationMessage===i&&(n.validationMessage=""),"validity"in n&&(n.validity=t?.validity)},{once:!0})}function R(e){const{formEl:t}=e;return t?(t.addEventListener("invalid",g,!0),t.requestSubmit(),t.removeEventListener("invalid",g,!0),requestAnimationFrame(()=>{const i=t.querySelectorAll("[status=invalid]");for(const n of i)if(n?.validationMessage){n?.setFocus();break}}),!0):!1}function T(e){e.formEl?.reset()}function O(e){const{el:t,value:i}=e,n=S(e);if(!n||q(n,t))return;e.formEl=n,e.defaultValue=i,h(e)&&(e.defaultChecked=e.checked);const a=x.bind(e);n.addEventListener("reset",a),m.set(e.el,a),E.add(t)}function S(e){const{el:t,form:i}=e;return i?L(t,{id:i}):p(t,"form")}function x(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),h(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,this.onFormReset?.()}function P(e){const{el:t,formEl:i}=e;if(!i)return;const n=m.get(t);i.removeEventListener("reset",n),m.delete(t),e.formEl=null,E.delete(t)}const D="calciteInternalHiddenInputInput",C=e=>{e.target.dispatchEvent(new CustomEvent(D,{bubbles:!0}))},b=e=>e.removeEventListener("input",C);function V(e){const{el:t,formEl:i,name:n,value:a}=e,{ownerDocument:r}=t,c=t.querySelectorAll(`input[slot="${f}"]`);if(!i||!n){c.forEach(o=>{b(o),o.remove()});return}const v=Array.isArray(a)?a:[a],l=[],d=new Set;c.forEach(o=>{const s=v.find(k=>k==o.value);s!=null?(d.add(s),I(e,o,s)):l.push(o)});let u;v.forEach(o=>{if(d.has(o))return;let s=l.pop();s||(s=r.createElement("input"),s.ariaHidden="true",s.slot=f),u||(u=r.createDocumentFragment()),u.append(s),s.addEventListener("input",C),I(e,s,o)}),u&&t.append(u),l.forEach(o=>{b(o),o.remove()})}function I(e,t,i){const{defaultValue:n,disabled:a,form:r,name:c,required:v}=e;t.defaultValue=n,t.disabled=a,t.name=c,t.required=v,t.tabIndex=-1,r?t.setAttribute("form",r):t.removeAttribute("form"),h(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?i||"on":""):t.value=i||"",e.syncHiddenFormInput?.(t);const l=y(e.el);if(l&&"validity"in l)for(const d in{...t?.validity})l.validity[d]=t.validity[d]}const U=({component:e})=>(V(e),M`<slot name=${f}></slot>`);export{R as H,S as I,U as O,P as T,T as V,O as x,D as y};
