import{v as a,S as o,n as f,ax as _,ac as M,ly as z}from"./main-Dt6SBPaS.js";import{g as A,b as p,h as Q,t as C,j as O,l as R,u as w,v as P}from"./SketchViewModel-B0qFHK0t-Dzvga9Yp.js";import{t as $}from"./PointSnappingHint-OKXicQ1z-BR0RxCiX.js";import{h as I,f as m,m as D,l as h,y as V,i as k,t as F,s as H}from"./quantityUtils-B1Ov7DZK-BAXizeUK.js";import{K as c,W as U,H as S,L,Q as N,N as T,t as X,g as Y}from"./SketchTooltipInfo-CkyYTifq-BA7ZRgkp.js";import{r as q}from"./uuid-Dj9mdEVg-BaKSCiyT.js";class st{draw(i,t){const n=W(i),r=this.sortUniqueHints(n),u=[];for(const l of r)l instanceof Q&&u.push(this.visualizeIntersectionPoint(l,t)),l instanceof C&&u.push(this.visualizeLine(l,t)),l instanceof O&&u.push(this.visualizeParallelSign(l,t)),l instanceof R&&u.push(this.visualizeRightAngleQuad(l,t)),l instanceof $&&u.push(this.visualizePoint(l,t));return _(u)}sortUniqueHints(i){return i}}function W(e){const i=[];for(const t of e){let n=!0;for(const r of i)if(t.equals(r)){n=!1;break}n&&i.push(t)}return i}let s=class extends M{constructor(e){super(e),this.actual=null,this.lockable=!0,this.id=q(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(e){this.lockable&&this._set("committed",e)}get dirty(){return this.inputValue!=null}get locked(){return this.lockable&&this.committed!=null}onInput(e){this.inputValue=e,this.invalid=!1}onCommit(e,i,t){this.lockable?this._onCommitLockable(e,t):this._onCommitNonLockable(t),this.invalid&&e==="commit-and-exit"||t.onCommit(i,e)}_onCommitLockable(e,i){const{inputValue:t,locked:n}=this;n&&d(t)?this.unlock():(e==="commit-and-exit"&&!n||t!=null)&&this._parseInputAndLock(i)}_onCommitNonLockable(e){const{inputValue:i}=this;d(i)?this.lockable?this.setActual(null):this.clearInputValue():i!=null&&this._parseInputAndSetActual(e)}applyValue(e){this.lockable?this.lock(e):this.setActual(e)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(e){this.actual=e,this.clearInputValue()}lock(e){this.lockable&&(this.committed=e??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(e){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(e))}getSuffix(e){const{suffix:i}=this;return typeof i=="function"?i(e):i}getFormattedValue(e){const{actual:i,committed:t,format:n}=this;return t!=null?n(t,e):i!=null?n(i,e):null}getRawDisplayValue(e){const{actual:i,committed:t,inputValue:n}=this;return n??(this.lockable&&t!=null?this.formatForInputMode(t,e):i!=null?this.formatForInputMode(i,e):null)}_parseInputAndSetActual(e){const{inputValue:i}=this;if(i==null||d(i))return this.setActual(null);const t=this.parse(i,e);t!=null?this.setActual(t):this.invalid=!0}_parseInputAndLock(e){const{inputValue:i,actual:t}=this;if(d(i))return this.unlock();if(i==null)return this.lock(t);const n=this.parse(i,e);n!=null?this.lock(n):this.invalid=!0}};function d(e){return e!=null&&e.trim()===""}a([o()],s.prototype,"actual",void 0),a([o()],s.prototype,"committed",null),a([o()],s.prototype,"dirty",null),a([o()],s.prototype,"format",void 0),a([o()],s.prototype,"formatForInputMode",void 0),a([o()],s.prototype,"lockable",void 0),a([o()],s.prototype,"locked",null),a([o()],s.prototype,"id",void 0),a([o()],s.prototype,"inputValue",void 0),a([o()],s.prototype,"name",void 0),a([o()],s.prototype,"parse",void 0),a([o()],s.prototype,"readOnly",void 0),a([o()],s.prototype,"suffix",void 0),a([o()],s.prototype,"title",void 0),a([o()],s.prototype,"visible",void 0),a([o()],s.prototype,"invalid",void 0),a([o()],s.prototype,"unlockOnVertexPlacement",void 0),s=a([f("esri.views.interactive.tooltip.fields.TooltipField")],s);let g=class extends s{constructor(e){super(e),this.showAsZ=!1}normalizeCtorArgs(e){const i=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:V,parse:c({createQuantity:(t,n)=>k(t,i(n))}),format:(t,n)=>n.formatters.verticalLength(t),formatForInputMode:(t,n)=>n.formatters.scalar(m(t,i(n))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...e}}};a([o()],g.prototype,"showAsZ",void 0),g=a([f("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],g);let v=class extends s{constructor(e){super(e),this.precision=1}normalizeCtorArgs(e){const i=t=>t.inputUnitInfos.angle.unit;return{name:"orientation",actual:null,parse:c({createQuantity:(t,n)=>F(t,i(n),"geographic"),sanitize:U}),format:t=>{const n=w(t);return S(n,"geographic",this.precision)},formatForInputMode:(t,n)=>{const r=w(t);return n.formatters.scalar(r)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...e}}};a([o()],v.prototype,"precision",void 0),v=a([f("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],v);let y=class extends s{constructor(e){super(e),this.precision=null}normalizeCtorArgs(e){const i=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:c({createQuantity:(t,n)=>k(t,i(n))}),format:(t,n)=>n.formatters.length(t),formatForInputMode:(t,n)=>n.formatters.scalar(m(t,i(n))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...e}}};a([o()],y.prototype,"precision",void 0),y=a([f("esri.views.interactive.tooltip.fields.TooltipFieldSize")],y);function ot(e){const i=n=>n.inputUnitInfos.angle.unit,t=n=>n.sketchOptions.values.effectiveDirectionMode;return new s({name:"direction",actual:I,parse:c({createQuantity:(n,r)=>F(n,i(r),"geographic"),sanitize:U}),format:(n,r)=>{const u=t(r),l=A(n,u);switch(u){case p.Absolute:return r.formatters.direction(l);case p.Relative:return r.formatters.directionRelative(l);case p.RelativeBilateral:return r.formatters.directionRelativeBilateral(l)}},formatForInputMode:(n,r)=>{const u=A(n,t(r));return r.formatters.scalar(m(u,i(r)))},suffix:n=>n.inputUnitInfos.angle.abbreviation,title:n=>{const r=t(n),{absolute:u,relative:l}=n.messages.sketch.direction;switch(r){case p.Absolute:return u;case p.Relative:case p.RelativeBilateral:return l}},...e})}function b(e){const i=t=>t.inputUnitInfos.length.unit;return new s({name:"distance",actual:V,parse:c({createQuantity:(t,n)=>k(Math.max(t,0),i(n))}),format:(t,n)=>n.formatters.length(t),formatForInputMode:(t,n)=>n.formatters.scalar(m(t,i(n))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...e})}function rt(e){return b({format:(i,t)=>t.formatters.totalLength(i),title:i=>i.messages.sketch.totalLength,readOnly:!0,...e})}function lt(e){return b({...e})}function ut(e){const i=t=>t.inputUnitInfos.length.unit;return b({...e,parse:c({createQuantity:(t,n)=>k(t,i(n))}),format:(t,n)=>n.formatters.lengthRelative(t)})}function Z(e){return new g(e)}function ct(e){return new v(e)}function pt(e){return new y(e)}function ht(e){return x("scale",{name:"scale",actual:null,parse:c({createQuantity:i=>h(Math.abs(i))}),...e})}function ft(e){const i=t=>t.inputUnitInfos.area.unit;return new s({name:"area",actual:D,parse:c({createQuantity:(t,n)=>H(t,i(n))}),format:(t,n)=>n.formatters.area(t),formatForInputMode:(t,n)=>n.formatters.scalar(m(t,i(n))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...e})}function B(e){return new s({name:"x",actual:I,parse:N,format:(i,t)=>t.formatters.longitudeDecimalDegrees(i),formatForInputMode:i=>T(i),suffix:i=>i.inputUnitInfos.angle.abbreviation,title:i=>i.messages.sketch.longitude,...e})}function E(e){return new s({name:"y",actual:I,parse:X,format:(i,t)=>t.formatters.latitudeDecimalDegrees(i),formatForInputMode:i=>Y(i),suffix:i=>i.inputUnitInfos.angle.abbreviation,title:i=>i.messages.sketch.latitude,...e})}function K(e){return x("x",{name:"x",...e})}function j(e){return x("y",{name:"y",...e})}function x(e,i){return new s({actual:h(0),parse:c({createQuantity:t=>h(t)}),format:(t,n)=>n.formatters.scalar(t),formatForInputMode:(t,n)=>n.formatters.scalar(t),title:t=>t.messages.sketch[e],...i})}const mt=e=>{let i=class extends e{constructor(){super(...arguments),this.longitude=B(),this.latitude=E(),this.x=K(),this.y=j(),this.elevation=Z(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,n=t?.spatialReference){if(this.geographic=!!n&&P(n),t==null)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const r=z(t,G);this._setActualLonLat(L(r?.[0]),L(r?.[1]))}else this._setActualXY(h(t.x),h(t.y))}_setActualLonLat(t,n){this.longitude.actual=t,this.latitude.actual=n}_setActualXY(t,n){this.x.actual=t,this.y.actual=n}};return a([o()],i.prototype,"geographic",void 0),a([o()],i.prototype,"effectiveX",null),a([o()],i.prototype,"effectiveY",null),a([o()],i.prototype,"key",null),i=a([f("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],i),i},G=[0,0];export{rt as E,ct as G,st as H,lt as J,ut as K,ht as e,ft as i,ot as j,mt as r,pt as t};
