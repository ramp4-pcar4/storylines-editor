const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CXn0Qeo5-BYiEqBfT.js","./index-D0o7KJz6-BzeRlr0k.js","./jsxFactory-Cua8zWVZ-uz4fA_oT.js","./main-BMu2VIyp.js","./main-L1TuZbGN.css","./intl-BAA1onnp-Dop6o2yt.js","./uuid-Dj9mdEVg-BaKSCiyT.js","./sanitizerUtils-B1yRmbO2-B7KG_jBT.js","./guid-Dls486Er-CBh637k4.js","./useT9n-Cp7CFBMO-CYTHX_vF.js","./index-DV38aJMs-COXXs72C.js","./dom-PjyVZjPa-BsFZ0Nnw.js","./observers-CJ7vGAr1-mCufH7f7.js","./keyed-B9HAtbdo-DFFLvAiC.js","./ref-XMc4F1eh-Ksy7pcC7.js","./interactive-EVx-Nhoa-BexSUe95.js","./component-DGkKmsFn-B-6necch.js","./index-DO-jU4VZ-DPHXQ0Z2.js","./index-Btp8sfgk-EK5UGMZi.js","./floating-ui-C_auppeo-CdWXhRz0.js","./debounce-B9WUP9Xk-BvexrlwN.js","./openCloseComponent-CAhwMrL1-CtNzCosv.js","./static-Dm6M7dSg-eb8DiSjn.js","./FloatingArrow-BFsffpOS-qYJiALkF.js","./key-CZySMiwx-kmS7VeUz.js","./index-BCOMKfi--Bdz-_ht-.js","./array-C6Ny8gbM-C9M-r-JU.js","./index-B4aE1io5-YRZJfhkJ.js","./intersectsOperator-ZBnSpPTv-BRAmVMAa.js","./ProjectionTransformation-DQ4GElxa-srUTeSHw.js","./Envelope2D-DlBzXkgv-eKRxGysX.js","./Point2D-CaHJVGk1-JqvJXjLr.js","./Transformation2D-CXWnDKXs-CjsleQQw.js","./SimpleGeometryCursor-DSF_YyIm-TAMgMsbK.js","./OperatorDefinitions-DJdq_wrt-DP7_WWTp.js","./jsonConverter-tsQ40CV0-dVKQrv2Q.js","./OperatorIntersects-u5auAqUh-znAU5gLi.js","./apiConverter-CSuukuP9-p-xIW-uz.js","./DrawScreenTool-CPEYpMPF-CrMUNWR5.js","./mat2df64-DDXwUeaJ-Tu7q-7Mk.js","./drawSurfaces-DQUGW1oK-36xosGzh.js","./vec32-Cj8pVsU0-x9uPsPLk.js","./common-CYWrYyJl-E8-sukrT.js","./geodesicUtils-DKS2UG72-sjAWtPt-.js","./projectionUtils-B-CplN3q-Bv4agc-J.js","./distanceOperator-CZDvZf3O-Ra8bzn74.js","./simplifyOperator-BW9Vrh-l-CrNYJyVn.js","./operatorSimplify-CjcRb60U-DHj0DWyF.js","./mat2d-BQA-1WB--Pnyy0dhf.js","./quat-DQgq9Ar5-_1rU_2Z6.js","./mat3f64-BnNZDR5l-Bz3OL2oI.js","./quatf64-C16JxGFv-BKWK1F8U.js","./vec42-D8CJyqHG-DnfLTeQH.js","./memoize-DvEt8OkT-Cy_RrfpZ.js","./ReactiveSet-CRNikQMW-BnRrhMO4.js","./diffUtils-BxG8DCnW-2RMa0tRQ.js","./UpdatingHandles-Bd2FQ26N-C4BtHBj3.js","./elevationInfoUtils-Ccn2Wfoe-BhWzwAay.js","./ElevationInfo-DE5to86a-WwNTlYUE.js","./lengthUtils-C61nRlXw-CNWMpRIY.js","./ViewingMode-CdRKcXnc-Dab70bGf.js","./SnappingContext-OY7xJ98b-DB9rPXPd.js","./vec2-BnynUbeJ-CKtGJQAy.js","./vec2f64-CkowXrDb-3zFQ3LNH.js","./vec4f64-DD-nkcCV-CSNWKRqG.js","./plane-Cf3Koz3c-DL_75g8Y.js","./vectorStacks-5ZZtmT9E-Cf9a9JAh.js","./mat4f64-xsZDPPj0-Dq35B4BL.js","./SketchViewModel-B0qFHK0t-BX1Q4sP6.js","./GraphicsLayer-BiEC2-gS-B72l_cVO.js","./GraphicsCollection-uWAVmks7-CvVg7Xvf.js","./Layer-DvVVmz9x-DEmrhSKd.js","./TimeExtent-Cf2Pienb-CGeO2lDl.js","./BlendLayer-DjW_5k0v-ClDAn9zE.js","./layerContainerType-ChWdCT09-G5sdAsSy.js","./jsonUtils-BwLwuQj7-xykF_cZa.js","./parser-CWccHtwJ-HEKa5JYR.js","./mat4f32-BdRMyjXW-CWt6U0BP.js","./mat4-OOmHNWi7-CsxgcCXP.js","./ScaleRangeLayer-x42fwED3-BAF6Eco3.js","./editableLayers-DFUBlMJy-CDLJa1vG.js","./utils-Dd8gTonD-BQEuHgCN.js","./Queue-DV3gpSdl-DfWZr2jX.js","./Version-CnwD6MZa-DPTfRYoX.js","./Cyclical-DgD7_U1C-CDC4Kj2e.js","./quantityUtils-B1Ov7DZK-Bnhupsvf.js","./projectVectorToVector-DcyiGOWJ-BUAPFJKn.js","./projectPointToVector-BZJhoF_5-lAKe3mZs.js","./asyncUtils-BPUlNCrX-CXygrN4y.js","./Query-n1aoaaFC-DA12SLg1.js","./Field-BIQ-quF4-C1r9G6zT.js","./fieldType-PhcL4ff8-DezZhuwh.js","./sphere-zPMQWhGG-Cij7ofJU.js","./mat3-DOnW3DjW-C3hbW9XY.js","./geodeticLengthOperator-DHGBHzf3-B-a1CT-R.js","./geodeticCurveType-D_etKnbP-CirnHLSB.js","./earcut-C6NeZYSh-Da0ULCQ5.js","./triangle-BM89wdHY-11XoZk84.js","./lineSegment-BAWQVP9P-9mXqo8oY.js","./spatialReferenceEllipsoidUtils-BK0OQJn2-B7ZDc6sH.js","./meshVertexSpaceUtils-CCr86FVF-YTD8gtm6.js","./MeshLocalVertexSpace-Cfxtmv6L-CyQhwK2Y.js","./hydratedFeatures-oobA80ei-DX-ZeV0t.js","./Scheduler-BV4C4cVP-VhmctqqK.js","./debugFlags-8tOwPnHK-DbFIS8lz.js","./index-BlA0IWNf-CZW_bc8m.js","./index-CjNVVdGY-CXdqR-ji.js","./label-DeyAgFGa-DTMS6RHU.js","./index-DGUkrUiU-BpcldKfe.js","./form-D_5VLLzu-CPs_iEgb.js","./index-CsuaBzKX-BPaUQAA_.js","./index-RR6plZPA-LMlr1l02.js","./customElement-vwINhat1-N3cyfh8n.js","./index-SHU2v0hF-BrFfkv4Y.js","./dynamicClasses-CFULUtQ8-Bg5tAS65.js","./index-B_Cy04Um-CRry8z5o.js","./resources6-Duvedxls-DbbvfBW6.js","./index-9QKYyV7q-D-LIJm0l.js","./_sortable-Bi1e6b9P-BjwflmoF.js","./index-BoYi6noz-C_kxgAG7.js","./index-lZpkjGTp-DnaoIWeW.js","./index-SxXZaKTz-C-eOPfuO.js","./Validation-DwCZur7y-BTUamP5q.js","./Legend-BMS5EVNm-u5PLQzJL.js","./featureReductionUtils-CT3zJdMo-COEl9dk_.js","./EffectView-Bpu5U548-C-L38_qi.js","./displayFilterUtils-DvWUbJDp-Cj9BQpQU.js","./ExportImageParameters-CC1oba-O-BoXcHLmL.js","./scaleUtils-Br-smv3A-CEFJ0lc3.js","./floorFilterUtils-4r-vVdzs-C43jLoAE.js","./sublayerUtils-DUalPlkE-v3Vc69mS.js","./pixelRangeUtils-DcEknavd-DdeXXJfY.js","./jsonUtils-CzRaZnmS-CoIW19XN.js","./typeUtils-CB2EGBWO-CY0vvgEO.js","./ClassBreaksRenderer-Bq2XGpfI-C8-x5aK6.js","./commonProperties-CJLeiNuA-Z7fwu7YP.js","./colorRamps-trM-CPFS-CHrMr88F.js","./ColorStop-CL7v3R-A-CTY6QyDt.js","./visualVariableUtils-BTS148WR-BfM5G4bM.js","./RendererLegendOptions-Bil_IDab-Do5SM9ar.js","./LRUCache-DPWdPNTF-Du_Z0yHt.js","./MemCache-qDGoejB7-9IozotvY.js","./DictionaryScriptEvaluator-DW5hOK9A-CJYzs5na.js","./FieldsIndex-Bt0Y8aWr-FTbdyAwC.js","./UnknownTimeZone-DxjyzFvs-B3IMgeHl.js","./timeZoneUtils-d5p0Jda1-CWZRmNST.js","./ArcadeExpression-XjY3x7KV-BqeMzjrj.js","./TimeOnly-CGkId3bj-BNV8KuEc.js","./enum-g1DWyQyu-DaLd00GK.js","./utils-BfXZnjCE-aoQ8RUY1.js","./defaultCIMValues-BcSaJjm--58G-soMN.js","./enums-a_LDTPYU-CBIcy3mM.js","./heatmapUtils-DRTN9U3a-CpPy7CIG.js","./SimpleRenderer-C1YRhRzu-Cu2j1Sbf.js","./UniqueValueRenderer-CLXHFtg9-DH767VqT.js","./styleUtils-DBPDLVBX-CREXHc3Q.js","./rendererConversion-koUEkXyy-CH0cqyDT.js","./cimSymbolUtils-DCedSSCN-mceifSZC.js","./symbolUtils-D5Wjfwrf-QRMv47mT.js","./utils-Cb2uXNfG-D6x0bxlc.js","./colorUtils-Eg6lOlXm-Bg_RjTzN.js","./mat2df32-fg3OHsAI-BF2V2zqo.js","./webStyleSymbolUtils-r0H5toyk-BlAHlMD3.js","./devEnvironmentUtils-CxrVv3RG-CX5aoxVE.js","./heatmapRampUtils-IW6a557l-Cv_XeNns.js","./utils-CdIngiRE-f1qyluC2.js","./previewCIMSymbol-CVZYVI5l-YfsLCGhD.js","./CIMSymbolHelper-34UsTwam-CK1vNDiJ.js","./BidiEngine-DusKzrO8-BlAgW8mu.js","./fontUtils-C37p4Hgq-D53PexdY.js","./OptimizedGeometry-pzfNw1AT-BM5M4wFk.js","./memoryEstimations-DeWfxwaV-BxyODhGD.js","./GeometryUtils-B8e3Iwyx-wQ-UhW6d.js","./definitions-MCCItX4r-o3EUznKY.js","./rasterizingUtils-1wASRzSP-C3cTG8eg.js","./floatRGBA-DRFmbkvz-3VEDaxOz.js","./vec2f32-hTAvipMV-C0AQcwEv.js","./Rect-DD6XS68q-D_hsV3ag.js","./BoundingBox-DlCd_wcU-DBB4UfPl.js","./CIMSymbolRasterizer-CHPajZH1-DOl7XQKi.js","./CIMResourceManager-DyRf92xI-CC6mTUqt.js","./imageUtils-D3tfFRL_-DveMYsn5.js","./OverrideHelper-DgyARgwI-B6rIzBvu.js","./callExpressionWithFeature-Bk8k1lJI-DftGvrGa.js","./quantizationUtils-D907S7Bm-De8_bi42.js","./modeUtils-deizL-Tg-C4WiXKJs.js","./substitute-B3zxyWVi-DkV2djmY.js","./index-CK6nlFfs-CvsZkXf7.js","./index-4OY0nObJ-uVmblXGB.js","./customElement-DL8inR2X-EXIWTF-b.js","./input-BpGQpkEK-D-xsgpmV.js","./index-CoujZeLU-BRqGA7tp.js","./utils-B0t9gNXC-Cod6DAvq.js","./index-DbQfb_U2-IlwLsJXE.js","./resources5-GI0SvXPJ-DQyKCby-.js","./index-B-et6CSq-D71gZ9Dz.js","./GridControls-HOcRkVVE-By9SGD5_.js","./unitFormatUtils-FAypDaT5-CO_jXClt.js","./ByteSizeUnit-DL8UhsB0-B2-AmVRx.js","./SketchTooltipInfo-CkyYTifq-BPz4lvg8.js","./MeshTransform-ByFk-Izc-CLRMia4G.js","./axisAngleDegrees-BTSCyz4U-Czi3Ncdk.js","./a11yUtils-CoCwThtH-sJxZr7ft.js","./gridUtils-ZkKc2j-y-mR1koe8e.js","./normalizeUtils-u00NGW3M-DweUIg1H.js","./normalizeUtilsCommon-ClagynAA-LblUDo3U.js","./utils-BO8hgPs3-wNAFxL-x.js","./utils-DpLVEUvg-Dtf0XWJZ.js","./editingTools-7dqMzBcg-CNnoWul3.js","./SnappingVisualizer2D-Di4uotAR-CCLwQuNl.js","./TooltipInfoWithCoordinates-Xxefy9Or-C2kH-KBI.js","./PointSnappingHint-OKXicQ1z-D-6phKuy.js","./editPlaneUtils-DmK-4boe-B56wK7Xy.js","./boundedPlane-QDtjx5eO-cgRnjT8-.js","./GraphicManipulator-D_ewLKOT-BjqHK_3S.js","./drapedUtils-DARF9dbf-BLsFGlT3.js","./drawUtils-pJlGx3nm-B7hi_avR.js","./draw-store-DnCf4IRI-By22oJSj.js","./layerViewUtils-DLIaYA64-OILzjdrg.js","./utils-C0LvbFCo-RMQaTNpt.js","./widget-p2YDjs4S-DKcWH2vA.js","./TextOverlayItem-BwTcOTWP-5hE-2J6Q.js","./number-mnL_JN3f-DxLYm-m7.js","./circle-icon-qM-Cul3g-C7O8kL0k.js","./edit-icon-BBpkepd0-DpanMjrt.js","./point-icon-Dd_kLleb-TbEIC0dD.js","./polygon-icon-CnplOIHx-CLQ2Cq0r.js","./polyline-icon-BmsBSMJm-MSD19xqY.js","./rectangle-icon-DaWElXKE-V-h-F9x0.js"])))=>i.map(i=>d[i]);
import{v as o,S as s,K as ct,a0 as le,bv as ri,l as je,ce as ai,Z as oe,ao as pi,_ as v,b3 as Xe,aD as di,a6 as ue,a1 as M,a4 as $e,aH as Vt,gb as Bt,aL as Ye,ax as ht,au as Gt,ak as Re,gc as ci,gd as hi,ge as ui,ac as te,aO as He,a8 as ge,I as gi,gf as yi,gg as mi,gh as Ve,gi as vi,gj as bi,gk as wi,gl as _i,fv as fi,n as L,p as Ti,a2 as W,fz as Ei,fA as Mi,gm as Ci,gn as Li,fL as Lt,fM as Si,fx as Ft,go as Oi,fD as ki,fP as Pi,g6 as Ii,aU as ut,gp as Ri,ab as Ai,a7 as xi,gq as Di,gr as Vi,gs as Nt,aG as Bi,a3 as nt,h as Gi,gt as Fi,aj as St,ai as Ni,gu as $i,gv as Hi,g2 as zi,eT as Ui,eK as ze,eJ as Ot,eu as Wi,ba as fe,B as Te,gw as Ki,gx as qi,gy as ji,gz as Qi,gA as Zi,gB as Ji}from"./main-BMu2VIyp.js";import{y as gt}from"./draw-store-DnCf4IRI-By22oJSj.js";import Xi from"./GraphicsLayer-BiEC2-gS-B72l_cVO.js";import{S as Yi}from"./intl-BAA1onnp-Dop6o2yt.js";import{O as eo,Q as kt,w as $t,P as Ht,$ as to,E as zt,r as io,k as Be}from"./SketchViewModel-B0qFHK0t-BX1Q4sP6.js";import{K as c,H as oo,P as me,V as ye,W as ne,Z as Ut,z as so}from"./jsxFactory-Cua8zWVZ-uz4fA_oT.js";import{V as Ue,i as lo,f as yt}from"./utils-Dd8gTonD-BQEuHgCN.js";import{f as Qe}from"./layerViewUtils-DLIaYA64-OILzjdrg.js";import{g as Wt}from"./asyncUtils-BPUlNCrX-CXygrN4y.js";import{x as no,y as ro}from"./drapedUtils-DARF9dbf-BLsFGlT3.js";import{n as Pt}from"./utils-C0LvbFCo-RMQaTNpt.js";import{s as It,o as ao}from"./widget-p2YDjs4S-DKcWH2vA.js";import{b as Rt}from"./substitute-B3zxyWVi-DkV2djmY.js";import"./GraphicsCollection-uWAVmks7-CvVg7Xvf.js";import"./Layer-DvVVmz9x-DEmrhSKd.js";import"./TimeExtent-Cf2Pienb-CGeO2lDl.js";import"./BlendLayer-DjW_5k0v-ClDAn9zE.js";import"./layerContainerType-ChWdCT09-G5sdAsSy.js";import"./jsonUtils-BwLwuQj7-xykF_cZa.js";import"./parser-CWccHtwJ-HEKa5JYR.js";import"./mat4f32-BdRMyjXW-CWt6U0BP.js";import"./mat4-OOmHNWi7-CsxgcCXP.js";import"./common-CYWrYyJl-E8-sukrT.js";import"./ScaleRangeLayer-x42fwED3-BAF6Eco3.js";import"./ElevationInfo-DE5to86a-WwNTlYUE.js";import"./lengthUtils-C61nRlXw-CNWMpRIY.js";import"./UpdatingHandles-Bd2FQ26N-C4BtHBj3.js";import"./projectionUtils-B-CplN3q-Bv4agc-J.js";import"./elevationInfoUtils-Ccn2Wfoe-BhWzwAay.js";import"./editableLayers-DFUBlMJy-CDLJa1vG.js";import"./Cyclical-DgD7_U1C-CDC4Kj2e.js";import"./quantityUtils-B1Ov7DZK-Bnhupsvf.js";import"./vec2-BnynUbeJ-CKtGJQAy.js";import"./vec2f64-CkowXrDb-3zFQ3LNH.js";import"./vec32-Cj8pVsU0-x9uPsPLk.js";import"./projectVectorToVector-DcyiGOWJ-BUAPFJKn.js";import"./projectPointToVector-BZJhoF_5-lAKe3mZs.js";import"./geodesicUtils-DKS2UG72-sjAWtPt-.js";import"./Query-n1aoaaFC-DA12SLg1.js";import"./Field-BIQ-quF4-C1r9G6zT.js";import"./fieldType-PhcL4ff8-DezZhuwh.js";import"./vec42-D8CJyqHG-DnfLTeQH.js";import"./vec4f64-DD-nkcCV-CSNWKRqG.js";import"./plane-Cf3Koz3c-DL_75g8Y.js";import"./vectorStacks-5ZZtmT9E-Cf9a9JAh.js";import"./mat3f64-BnNZDR5l-Bz3OL2oI.js";import"./mat4f64-xsZDPPj0-Dq35B4BL.js";import"./quatf64-C16JxGFv-BKWK1F8U.js";import"./sphere-zPMQWhGG-Cij7ofJU.js";import"./mat3-DOnW3DjW-C3hbW9XY.js";import"./geodeticLengthOperator-DHGBHzf3-B-a1CT-R.js";import"./geodeticCurveType-D_etKnbP-CirnHLSB.js";import"./earcut-C6NeZYSh-Da0ULCQ5.js";import"./triangle-BM89wdHY-11XoZk84.js";import"./lineSegment-BAWQVP9P-9mXqo8oY.js";import"./spatialReferenceEllipsoidUtils-BK0OQJn2-B7ZDc6sH.js";import"./uuid-Dj9mdEVg-BaKSCiyT.js";import"./sanitizerUtils-B1yRmbO2-B7KG_jBT.js";import"./Queue-DV3gpSdl-DfWZr2jX.js";import"./Version-CnwD6MZa-DPTfRYoX.js";const po=(e,t,i)=>{const l=e[t];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((n,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})};let z=class extends te{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};o([s({type:Boolean,nonNullable:!0})],z.prototype,"colorSelection",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"dynamicScaleToggle",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"gridEnabledToggle",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"numericInputs",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"gridSnapEnabledToggle",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"lineIntervalInput",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"outOfScaleWarning",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"placementButtons",void 0),o([s({type:Boolean,nonNullable:!0})],z.prototype,"rotateWithMapToggle",void 0),z=o([L("esri.widgets.support.GridControls.VisibleElements")],z);const Kt=z;let U=class extends te{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new Kt({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};o([s({type:Boolean,nonNullable:!0})],U.prototype,"enabledToggle",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"featureEnabledToggle",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"gridEnabledToggle",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"header",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"layerList",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"gridControls",void 0),o([s({type:Kt,nonNullable:!0})],U.prototype,"gridControlsElements",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"layerListToggleLayersButton",void 0),o([s({type:Boolean,nonNullable:!0})],U.prototype,"selfEnabledToggle",void 0),U=o([L("esri.widgets.support.SnappingControls.VisibleElements")],U);const tt=U;let H=class extends te{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};o([s({type:Boolean,nonNullable:!0})],H.prototype,"point",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"polyline",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"polygon",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"rectangle",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"circle",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"multipoint",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"mesh",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"freehandPolyline",void 0),o([s({type:Boolean,nonNullable:!0})],H.prototype,"freehandPolygon",void 0),H=o([L("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],H);let Oe=class extends te{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};o([s({nonNullable:!0})],Oe.prototype,"rectangle-selection",void 0),o([s({nonNullable:!0})],Oe.prototype,"lasso-selection",void 0),o([s({nonNullable:!0})],Oe.prototype,"custom-selection",void 0),Oe=o([L("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Oe);let B=class extends te{constructor(e){super(e),this.createTools=new H,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new Oe,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new tt,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};o([s({type:H,nonNullable:!0})],B.prototype,"createTools",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"directionModePicker",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"duplicateButton",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"deleteButton",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"selectionCountLabel",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"labelsToggle",void 0),o([s({type:Oe,nonNullable:!0})],B.prototype,"selectionTools",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"settingsMenu",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"snappingControls",void 0),o([s({type:tt,nonNullable:!0})],B.prototype,"snappingControlsElements",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"tooltipsToggle",void 0),o([s({type:Boolean,nonNullable:!0})],B.prototype,"undoRedoMenu",void 0),B=o([L("esri.widgets.Sketch.VisibleElements")],B);const A={groupSeparator:1,action:{s:32,m:48,l:64},splitButtonPart:{horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}}},qt={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function jt(e,t){return e.vnodeSelector===t?[e]:e.children?.flatMap(i=>jt(i,t))??[]}const mt=e=>{let t=class extends e{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(i){const l=this._get("measurementManager");i!==l&&(l&&l.managedElements.remove(this),this._set("measurementManager",i),i?.managedElements.add(this))}set budgetedLength(i){this.budgetedLength!==i&&(this._set("budgetedLength",i),this.scheduleRender())}get actionChildren(){return this.children?.flatMap(i=>jt(i,"calcite-action"))??[]}get activeChildElement(){const i=this.actionChildren.find(l=>l.properties?.active===!0);return i?(this._set("lastActiveKey",i.properties?.key),i):this.lastActiveKey?this.actionChildren.find(l=>l.properties?.key===this.lastActiveKey):void 0}_handleClick(i){i?.dataset&&"dataset"in i&&i.dataset.actionKey&&(this.lastActiveKey=i.dataset.actionKey)}};return o([s()],t.prototype,"priority",void 0),o([s()],t.prototype,"measurementManager",null),o([s()],t.prototype,"budgetedLength",null),o([s()],t.prototype,"actionChildren",null),o([s()],t.prototype,"activeChildElement",null),o([s()],t.prototype,"scale",void 0),o([s()],t.prototype,"slot",void 0),o([s()],t.prototype,"lastActiveKey",void 0),o([s()],t.prototype,"layout",void 0),t=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],t),t},At=Symbol("on-resize-handle-key");let Ee=class extends mt(ne){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return[this.layout==="horizontal"?this._measuredWidth:this._measuredHeight]}render(){return c("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles(oo(this._measuredElement,()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0}),At)},afterRemoved:()=>this.removeHandles(At)},this.children)}};o([s()],Ee.prototype,"_measuredWidth",void 0),o([s()],Ee.prototype,"_measuredHeight",void 0),o([s()],Ee.prototype,"lengthOptions",null),o([s()],Ee.prototype,"_measuredElement",void 0),Ee=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],Ee);let Me=class extends mt(ne){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return me({action:()=>v(()=>import("./index-CXn0Qeo5-BYiEqBfT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),"action-group":()=>v(()=>import("./index-DO-jU4VZ-DPHXQ0Z2.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,25,26]),import.meta.url).then(e=>e.i),"action-menu":()=>v(()=>import("./index-BCOMKfi--Bdz-_ht-.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,26]),import.meta.url).then(e=>e.i)})}static{this.vnodeSelector="calcite-action-group"}get minimumLength(){const{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?A.groupSeparator+A.action[t]*Math.min(e.length,2):A.groupSeparator+A.action[t]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:t,minimumLength:i,allowCollapse:l,priority:n}=this,r=[i];if(e.length<=2||!l||n<1)return r;for(let a=1;a<e.length-1;a++)r.push(i+A.action[t]*a);return r}render(){if(!this.actionChildren.length)return c(Ut,null,void 0);const{budgetedLength:e,actionChildren:t,activeChildElement:i,layout:l,slot:n,scale:r}=this,a=Math.floor(e/A.action[r]),d=[],p=[];if(a>=t.length)d.push(...t);else{const u=i??d.at(0);if(d.push(...t.slice(0,a-1)),p.push(...t.slice(a-1)),u&&p.includes(u)){const[g]=p.splice(p.indexOf(u),1),_=d.pop();d.push(g),_&&p.unshift(_)}}return c("calcite-action-group",{key:"overflow-button-group",layout:l,onclick:u=>this._handleClick(u.target),slot:n},d.map(u=>this._renderManagedAction(u)),p.length>0?c("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},c("calcite-action",{icon:qt.overflow,key:"split-button-dropdown-trigger",scale:r,slot:"trigger",text:this.messagesCommon.more}),p.map(u=>this._renderManagedAction(u))):void 0)}_renderManagedAction(e){return c("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};o([s()],Me.prototype,"allowCollapse",void 0),o([s()],Me.prototype,"minimumLength",null),o([s(),ye("esri/t9n/common")],Me.prototype,"messagesCommon",void 0),o([s()],Me.prototype,"lengthOptions",null),Me=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],Me);let de=class extends te{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new le,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((e,t)=>t.priority-e.priority)}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){const e=new Map,{availableLength:t,_sortedElements:i}=this;let l=0;for(const n of i){const r=n.lengthOptions[0];e.set(n,r),l+=r}for(const n of i)for(;l<t;){const r=e.get(n);if(!r)break;const a=n.lengthOptions.find(p=>p>r);if(!a)break;const d=l-r+a;if(d>t)break;e.set(n,a),l=d}for(const[n,r]of e)n.budgetedLength=r}_measure(){const e=this.measuredElement;this.availableLength=e?this.layout==="horizontal"?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};o([s()],de.prototype,"measuredElement",void 0),o([s()],de.prototype,"managedElements",void 0),o([s()],de.prototype,"_sortedElements",null),o([s()],de.prototype,"availableLength",void 0),o([s()],de.prototype,"layout",void 0),de=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],de);const co={splitButtonBase:"esri-split-button--split-part"};let Ce=class extends mt(ne){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return me({action:()=>v(()=>import("./index-CXn0Qeo5-BYiEqBfT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),"action-group":()=>v(()=>import("./index-DO-jU4VZ-DPHXQ0Z2.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,25,26]),import.meta.url).then(e=>e.i),"action-menu":()=>v(()=>import("./index-BCOMKfi--Bdz-_ht-.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,26]),import.meta.url).then(e=>e.i)})}static{this.vnodeSelector="calcite-action-group"}get minimumLength(){const e=this.actionChildren;return e.length?e.length===1?A.action[this.scale]+A.groupSeparator:this.allowCollapse?A.action[this.scale]+A.splitButtonPart[this.layout][this.scale]+A.groupSeparator:A.action[this.scale]*e.length+A.groupSeparator:0}get lengthOptions(){const{actionChildren:e,minimumLength:t,layout:i,scale:l,priority:n,allowCollapse:r}=this;if(e.length<2||n<0||!r)return[t];const a=A.groupSeparator+A.action[l]*e.length;return[A.groupSeparator+A.action[l]+A.splitButtonPart[i][l],a]}render(){if(!this.actionChildren.length)return c(Ut,null,void 0);const{actionChildren:e,minimumLength:t,budgetedLength:i,layout:l,slot:n,allowCollapse:r}=this,a=!r||e.length<2||i>t;return c("calcite-action-group",{key:"split-button-group",layout:l,onclick:d=>this._handleClick(d.target),slot:n},a?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:e,layout:t,actionChildren:i,scale:l,messagesCommon:n}=this,r=e??i.at(0);if(!r)return;const a=i.filter(d=>d!==r);return[this._renderManagedAction(r),c("calcite-action-menu",{key:"split-button-dropdown",label:n.more,overlayPositioning:"fixed",placement:t==="horizontal"?"bottom-end":"right-end"},c("calcite-action",{class:`${co.splitButtonBase}--${t}--${this.scale}`,compact:t==="horizontal",icon:qt.splitButton[t],key:"split-button-dropdown-trigger",scale:l,slot:"trigger",text:n.more}),a?.map(d=>this._renderManagedAction(d)))]}_renderUnSplit(){return this.actionChildren.map(e=>this._renderManagedAction(e))}_renderManagedAction(e){return c("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};o([s()],Ce.prototype,"minimumLength",null),o([s()],Ce.prototype,"allowCollapse",void 0),o([s()],Ce.prototype,"lengthOptions",null),o([s(),ye("esri/t9n/common")],Ce.prototype,"messagesCommon",void 0),Ce=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],Ce);const K="esri-responsive-toolbar",q={rulerBase:`${K}__ruler`,rulerBarHorizontal:`${K}__ruler--bar`,rulerBarVertical:`${K}__ruler--bar--vertical`,rulerPadVertical:`${K}__ruler--pad--vertical`,rulerPadHorizontal:`${K}__ruler--pad--horizontal`,bar:`${K}__bar`,barHorizontal:`${K}__bar--horizontal`,barVertical:`${K}__bar--vertical`,pad:`${K}__pad`,padVertical:`${K}__pad--vertical`,padHorizontal:`${K}__pad--horizontal`};let ee=class extends ne{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new de,this._managedWidgets=new Map}loadDependencies(){return me({"action-bar":()=>v(()=>import("./index-B4aE1io5-YRZJfhkJ.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,25,26,17]),import.meta.url)})}destroy(){this._measurementManager=Re(this._measurementManager),this._managedWidgets.forEach(e=>e.destroy()),this._managedWidgets.clear()}set layout(e){const t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}get _barClasses(){const e=this.barStyle==="docked",t=this.layout==="vertical";return{[q.barHorizontal]:e&&!t,[q.barVertical]:e&&t,[q.bar]:e,[q.padHorizontal]:!e&&!t,[q.padVertical]:!e&&t,[q.pad]:!e}}render(){const{layout:e,scale:t,barStyle:i}=this,l={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},n=i==="docked"?e==="vertical"?q.rulerBarVertical:q.rulerBarHorizontal:e==="horizontal"?q.rulerPadHorizontal:q.rulerPadVertical;return c("div",null,c("div",{afterCreate:r=>{this._measurementManager?.connect(r)},class:this.classes(q.rulerBase,n)}),c("calcite-action-bar",{...l,classes:this._barClasses,floating:i!=="docked",overflowActionsDisabled:!0},this._renderChildren()))}_renderChildren(){if(!this.children)return;const e=this.children.filter(l=>l.properties?.key!==void 0&&"group-kind"in l.properties),t=new Set,i=e.map(l=>{const n=l.properties,r=n.key;t.add(r);const a=this.barStyle==="docked"?n.slot??void 0:void 0,d=n.priority??0,p=n["group-kind"]??"overflow-group",u=n["allow-collapse"]??!0,g=this._managedWidgets.get(r);if(g)return g.children=l.children,g.priority=d,"allowCollapse"in g&&(g.allowCollapse=u),g.slot=a,g.layout=this.layout,g.scale=this.scale,g.measurementManager=this._measurementManager,g;const _={scale:this.scale,priority:d,measurementManager:this._measurementManager,children:l.children,slot:a,layout:this.layout};switch(p){case"split-button":{const T=new Ce({..._,allowCollapse:u});return this._managedWidgets.set(r,T),T}case"overflow-group":{const T=new Me({..._,allowCollapse:u});return this._managedWidgets.set(r,T),T}case"measured-content":{const T=new Ee({..._});return this._managedWidgets.set(r,T),T}}}).filter(ge);return Array.from(this._managedWidgets.keys()).filter(l=>!t.has(l)).forEach(l=>{this._managedWidgets.get(l)?.destroy(),this._managedWidgets.delete(l)}),this._measurementManager?.allocate(),i.map(l=>l.render())}};o([s()],ee.prototype,"scale",void 0),o([s({value:"horizontal"})],ee.prototype,"layout",null),o([s()],ee.prototype,"barStyle",void 0),o([s()],ee.prototype,"_measurementManager",void 0),o([s()],ee.prototype,"_managedWidgets",void 0),o([s()],ee.prototype,"_barClasses",null),ee=o([L("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],ee);async function ho(e){const{returnFeatureTitleFields:t,returnGeometry:i,selector:l,signal:n,sources:r,view:a}=e;if(!r?.length)return[];const{layers:d,layerViews:p,graphicsLayers:u}=uo(r),g=[];return await Xe(ut(Promise.all([mo({candidates:g,layers:d,returnFeatureTitleFields:t,returnGeometry:i,selector:l,signal:n,view:a}),go({candidates:g,layerViews:p,returnGeometry:i,selector:l,signal:n,view:a}),_o({candidates:g,graphicsLayers:u,selector:l})]),n)),g}function uo(e){const t=[],i=[],l=[];return e.forEach(n=>{Ri(n)||Ai(n)||xi(n)?t.push(n):(Vt(n)||Bt(n))&&n.layers?.length?t.push(...n.layers.toArray()):Di(n)&&n.sublayers?.length?l.push(...n.sublayers.toArray()):Vi(n)?l.push(n):Qe(n)&&i.push(n)}),{layers:t,layerViews:i,graphicsLayers:l}}async function go(e){const{candidates:t,layerViews:i,returnGeometry:l,selector:n,signal:r,view:a}=e;n.type!=="point"?await ut(Promise.allSettled(i.map(async d=>{const p=bo(d,n,a,l),u=await d.queryFeatures(p,{signal:r});Nt(t,u.features)})),r):await yo({candidates:t,layerViews:i,selector:n,view:a})}async function yo({candidates:e,layerViews:t,selector:i,view:l}){const n=l.toScreen(i);if(!n)return;const r=t.map(d=>d.layer),{results:a}=await l.hitTest(n,{include:r});a.forEach(d=>{"graphic"in d&&d.graphic&&e.push(d.graphic)})}async function mo(e){const{candidates:t,layers:i,returnFeatureTitleFields:l,returnGeometry:n,selector:r,signal:a,view:d}=e;await ut(Promise.allSettled(i.map(async p=>{if("isTable"in p&&p.isTable)return;const u=wo(p,r,d,l,n),g=await p.queryFeatures(u,{signal:a});Nt(t,g.features)})),a)}function Qt(e,t,i){return e.type==="point"?no(e,"renderer"in t?ro({renderer:t.renderer}):0,i):e}function vo(e,t,i){const{fields:l,fieldsIndex:n}=e,r=new Set([e.objectIdField]);"globalIdField"in e&&e.globalIdField!=null&&n.has(e.globalIdField)&&r.add(n.get(e.globalIdField).name);const a="displayField"in e?e.displayField:null,d=Ui({displayField:a,fields:l});if(d!=null&&n.has(d)&&r.add(d),"subtypeField"in e&&e.subtypeField!=null){const p=n.get(e.subtypeField)?.name;if(p!=null&&r.add(p),"utilityNetworks"in t.map&&t.map.utilityNetworks?.length){const u=n.get("assetgroup");u?.name&&r.add(u.name);const g=n.get("assettype");g?.name&&r.add(g.name)}}return(i||t.requiredFieldsOptions.featureTitleFields)&&"featureTitleFields"in e&&e.featureTitleFields&&e.featureTitleFields.forEach(p=>r.add(p)),Array.from(r.values())}function bo(e,t,i,l=!0){const n=e.createQuery();return n.outFields=["*"],n.geometry=Qt(t,e.layer,i),n.returnGeometry=l,n.outSpatialReference=i.spatialReference,n}function wo(e,t,i,l=!1,n=!0){const r=e.createQuery();return r.outFields=vo(e,i,l),r.geometry=Qt(t,e,i),r.returnGeometry=n,r.outSpatialReference=i.spatialReference,r}async function _o(e){const{candidates:t,graphicsLayers:i,selector:l}=e,n=i.flatMap(a=>a.graphics.toArray())??[];if(!n?.length||!l)return;const r=await v(()=>import("./intersectsOperator-ZBnSpPTv-BRAmVMAa.js"),__vite__mapDeps([28,29,30,31,32,33,3,4,34,35,36,37]),import.meta.url).then(a=>a.i);r.accelerateGeometry(l),n.forEach(a=>{a.geometry&&a.geometry.type!=="mesh"&&r.execute(l,a.geometry)&&t.push(a)})}const fo=100;let O=class extends ct.EventedAccessor{constructor(e){super(e),this._completed=!1,this._isConstraintKeyDown=!1,this._processTask=null,this.createTool="rectangle",this.mode=null,this.persistSelection=!0,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selection=new le,this.selectionManager=null,this.selectOnComplete=!0,this.sources=null,this.toolName="",this.type="add",this._process=ri(async(t,i)=>{const{callback:l,selector:n,completed:r}=t,a=Wt(async d=>{const{effectiveSelectionManager:p,returnFeatureTitleFields:u,returnGeometry:g,selection:_,sources:T,view:P}=this;if(!(!T?.length&&!p.sources.length)&&P){if(n&&T!=null){const ve=await ho({returnFeatureTitleFields:u,returnGeometry:g,selector:n,signal:d,sources:T,view:P});if(_.removeAll(),_.addMany(ve),r&&this.persistSelection)switch(this.effectiveType){case"remove":p.updateSelection({current:[],added:[],removed:ve});break;case"replace":p.clear(),p.updateSelection({current:ve,added:[],removed:[]});break;default:p.updateSelection({current:ve,added:[],removed:[]})}}l&&l()}else _.removeAll()});return Ti(i,()=>a.abort()),this._processTask=a,a.promise},fo),this._onOperationFinish=this._onOperationFinish.bind(this)}initialize(){this._setup()}get _defaultMode(){return this.createTool==="polygon"?"click":"hybrid"}get _selectionArea(){const e=this._tool.coordinates;if(e.length===0)return;const t=Bi(),i=this.view.spatialReference,l=r=>{t.x=r[0],t.y=r[1];const a=this.view.toMap(t);return[a?.x??0,a?.y??0]};if(e.length===1||e.every(([r,a])=>r===e[0][0]&&a===e[0][1])){const[r,a]=l(e[0]);return new je({x:r,y:a,spatialReference:i})}const n=e.map(l);if(n.length!==0)return ai(n)||n.reverse(),new oe({spatialReference:i,rings:[n]})}get completed(){return this._completed}get effectiveSelectionManager(){return this.selectionManager??this.view.selectionManager}get effectiveType(){const e=this.type??"add";if(this._isConstraintKeyDown)switch(e){case"add":return"remove";case"remove":case"replace":return"add";default:return e}return e}get processingFinalSelection(){return!(!this._processTask||!this._tool?.drawOperation?.isCompleted)}cancel(){this.selection.removeAll(),this._onOperationFinish(!0)}destroy(){this._toolImportController=pi(this._toolImportController)}async _setup(){const{createTool:e,view:t}=this;if(await t.whenReady(),this.destroyed||this._toolImportController)return;const i=new AbortController;this._toolImportController=i;const[l,n]=await Promise.all([v(()=>import("./DrawScreenTool-CPEYpMPF-CrMUNWR5.js"),__vite__mapDeps([38,3,4,39,40,41,42,43,44,45,31,29,30,32,33,34,37,35,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,2,5,6,7]),import.meta.url),eo()]);if(i.signal.aborted)return;const r=Symbol();try{this._tool=new l.DrawScreenTool({view:t,mode:this.mode??this._defaultMode,geometryType:e,cursor:e==="point"?"default":"crosshair",automaticLengthMeasurementUtils:n})}finally{this._toolImportController=null}this._tool?(this.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>{this._syncConstraintKeyDown(),Xe(this._process({selector:this._selectionArea}))}),r),this.addHandles([t.on("key-down",a=>{if(!a.repeat)switch(a.key){case Ue.constraint:this._tool.uniformSizeToggled=!0,a.stopPropagation();break;case Ue.center:this._tool.centeredToggled=!0,a.stopPropagation()}}),t.on("key-up",a=>{switch(a.key){case Ue.constraint:this._tool.uniformSizeToggled=!1,a.stopPropagation();break;case Ue.center:this._tool.centeredToggled=!1,a.stopPropagation()}}),this.selection.on("change",({added:a,removed:d})=>this.emit("selection-change",{operationType:this.effectiveType,added:a,removed:d})),this._tool.on("complete",async a=>{this._syncConstraintKeyDown(),this.removeHandles(r),a.aborted?this.cancel():(this._tool.cursor="progress",await this._process({selector:this._selectionArea,callback:this._onOperationFinish,completed:!0}))})],r),this.addHandles(di(()=>t.tools.remove(this._tool))),t.addAndActivateTool(this._tool)):ue.getLogger(this).warn("Unable to import Draw module. SelectionOperation failed to load.")}_syncConstraintKeyDown(){const{inputManager:e}=this.view;this._isConstraintKeyDown=lo.invertType.some(t=>e.isModifierKeyDown(t))}_onOperationFinish(e=!1){this.removeAllHandles(),this._processTask?.abort(),this.emit("complete",{aborted:e,operationType:this.effectiveType,selection:this.selection.toArray(),toolName:this.toolName}),this._completed=!0}};o([s()],O.prototype,"_completed",void 0),o([s()],O.prototype,"_defaultMode",null),o([s()],O.prototype,"_isConstraintKeyDown",void 0),o([s()],O.prototype,"_processTask",void 0),o([s()],O.prototype,"_selectionArea",null),o([s()],O.prototype,"completed",null),o([s({constructOnly:!0})],O.prototype,"createTool",void 0),o([s()],O.prototype,"effectiveSelectionManager",null),o([s()],O.prototype,"effectiveType",null),o([s({constructOnly:!0})],O.prototype,"mode",void 0),o([s()],O.prototype,"persistSelection",void 0),o([s()],O.prototype,"processingFinalSelection",null),o([s()],O.prototype,"returnFeatureTitleFields",void 0),o([s()],O.prototype,"returnGeometry",void 0),o([s({readOnly:!0})],O.prototype,"selection",void 0),o([s({constructOnly:!0})],O.prototype,"selectionManager",void 0),o([s({constructOnly:!0})],O.prototype,"selectOnComplete",void 0),o([s()],O.prototype,"sources",void 0),o([s({constructOnly:!0})],O.prototype,"toolName",void 0),o([s({constructOnly:!0})],O.prototype,"type",void 0),o([s({constructOnly:!0})],O.prototype,"view",void 0),O=o([L("esri.widgets.support.Selector2D.SelectionOperation")],O);const To=O;let k=class extends ct.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.continuousSelectionEnabled=!1,this.defaultLassoToolOptions={createTool:"polygon",mode:"hybrid",toolName:"lasso"},this.defaultOperationType="add",this.defaultPointToolOptions={createTool:"point",toolName:"point"},this.defaultRectangleToolOptions={createTool:"rectangle",toolName:"rectangle"},this.layerViewPreferenceEnabled=!0,this.persistSelection=!0,this.selectionManager=null,this.returnFeatureTitleFields=!1,this.returnGeometry=!0,this.selectOnComplete=!0,this.sources=null,this.toolConfigs=[]}initialize(){this.addHandles([M(()=>this.effectiveSources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=$e(this._operationHandlesGroup)}get effectiveSelectionManager(){return this.selectionManager??this.view?.selectionManager}get effectiveSources(){const{layerViewPreferenceEnabled:e,sources:t,view:i}=this,l=t??this.effectiveSelectionManager?.sources;if(!l?.length)return[];const n=[];return l.forEach(r=>{if(Qe(r))n.push(r);else if(Vt(r)||Bt(r))(r.layers||[]).forEach(a=>{const d=i?kt(i,a):void 0,p=e&&Qe(d)?d:a;n.push(p)});else if(e){const a=i?kt(i,r):void 0,d=Qe(a)?a:r;n.push(d)}else n.push(r)}),n}get layers(){return Ye(ue.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){Ye(ue.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){return this.activeOperation?"active":this.view?.ready&&this.effectiveSources.length?"ready":"disabled"}activate(e){const{state:t}=this,i=e?.view||this.view,l=e?.sources||this.effectiveSources;if(t==="disabled"||!i)return void ue.getLogger(this).warn("Unable to start selection operation.");t==="active"&&this.cancel();const n=new CustomEvent("before-activate",{cancelable:!0,detail:{toolName:e?.toolName??null}});if(this.emit("before-activate",n),n.defaultPrevented)return;const r={type:this.defaultOperationType,persistSelection:this.persistSelection,returnFeatureTitleFields:this.returnFeatureTitleFields,returnGeometry:this.returnGeometry,selectOnComplete:this.selectOnComplete,selectionManager:this.effectiveSelectionManager,...e,sources:l,view:i},a=new To({...r});return this._operationHandlesGroup=ht([a.on("selection-change",d=>this.emit("selection-change",d)),a.once("complete",d=>this._onOperationComplete(d,r))]),this._set("activeOperation",a),a}activateTool(e){this.cancel();const t=this._getToolOptions(e);if(t)return this.activate(t);ue.getLogger(this).warn("Unable to activate tool: unable to determine options.")}cancel(){this.activeOperation?.cancel(),this._set("activeOperation",null)}toggleTool(e){const{activeOperation:t}=this;if(t){const i=t.toolName;if(this.cancel(),i===e)return}return this.activateTool(e)}_onOperationComplete(e,t){this._operationHandlesGroup=$e(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e),this.continuousSelectionEnabled&&!e.aborted&&this.activate(t)}_getToolOptions(e){return this.toolConfigs.find(t=>t.toolName===e)||(e==="lasso"?this.defaultLassoToolOptions:e==="point"?this.defaultPointToolOptions:e==="rectangle"?this.defaultRectangleToolOptions:void 0)}};o([s({readOnly:!0})],k.prototype,"activeOperation",void 0),o([s()],k.prototype,"continuousSelectionEnabled",void 0),o([s()],k.prototype,"defaultLassoToolOptions",void 0),o([s()],k.prototype,"defaultOperationType",void 0),o([s()],k.prototype,"defaultPointToolOptions",void 0),o([s()],k.prototype,"defaultRectangleToolOptions",void 0),o([s()],k.prototype,"effectiveSelectionManager",null),o([s()],k.prototype,"effectiveSources",null),o([s()],k.prototype,"layers",null),o([s()],k.prototype,"layerViewPreferenceEnabled",void 0),o([s()],k.prototype,"persistSelection",void 0),o([s()],k.prototype,"selectionManager",void 0),o([s()],k.prototype,"returnFeatureTitleFields",void 0),o([s()],k.prototype,"returnGeometry",void 0),o([s()],k.prototype,"selectOnComplete",void 0),o([s()],k.prototype,"sources",void 0),o([s({readOnly:!0})],k.prototype,"state",null),o([s()],k.prototype,"toolConfigs",void 0),o([s()],k.prototype,"view",void 0),k=o([L("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],k);const Eo=k;let ce=class extends te{constructor(e){super(e),this.chip=!0,this.lassoTool=!0,this.pan=!0,this.pointTool=!0,this.rectangleTool=!0}};o([s({type:Boolean,nonNullable:!0})],ce.prototype,"chip",void 0),o([s({type:Boolean,nonNullable:!0})],ce.prototype,"lassoTool",void 0),o([s({type:Boolean,nonNullable:!0})],ce.prototype,"pan",void 0),o([s({type:Boolean,nonNullable:!0})],ce.prototype,"pointTool",void 0),o([s({type:Boolean,nonNullable:!0})],ce.prototype,"rectangleTool",void 0),ce=o([L("esri.widgets.support.SelectionToolbar.VisibleElements")],ce);const vt=ce,rt="esri-selection-toolbar",at={base:rt,container:`${rt}__container`,toolButton:`${rt}__tool-button`};let f=class extends ne{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.disabled=!1,this.layout="horizontal",this.messages=null,this.scale="s",this.viewModel=new Eo,this.visibleElements=new vt}initialize(){this._viewModelHandlesGroup=ht([nt(()=>this.viewModel,"before-activate",e=>this.emit("before-activate",e)),nt(()=>this.viewModel,"complete",e=>this.emit("complete",e)),nt(()=>this.viewModel,"selection-change",e=>this.emit("selection-change",e))])}destroy(){this._viewModelHandlesGroup=$e(this._viewModelHandlesGroup)}loadDependencies(){return me({action:()=>v(()=>import("./index-CXn0Qeo5-BYiEqBfT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),"action-bar":()=>v(()=>import("./index-B4aE1io5-YRZJfhkJ.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,18,19,20,21,22,23,24,25,26,17]),import.meta.url),chip:()=>v(()=>import("./index-BlA0IWNf-CZW_bc8m.js"),__vite__mapDeps([105,10,2,3,4,5,6,7,11,12,14,16,15,24,9]),import.meta.url)})}get _effectiveDisabled(){return this.disabled||this.state==="disabled"}get activeOperation(){return this.viewModel.activeOperation}get continuousSelectionEnabled(){return this.viewModel.continuousSelectionEnabled}set continuousSelectionEnabled(e){this.viewModel.continuousSelectionEnabled=e}get defaultLassoToolOptions(){return this.viewModel.defaultLassoToolOptions}set defaultLassoToolOptions(e){this.viewModel.defaultLassoToolOptions=e}get defaultOperationType(){return this.viewModel.defaultOperationType}set defaultOperationType(e){this.viewModel.defaultOperationType=e}get defaultPointToolOptions(){return this.viewModel.defaultPointToolOptions}set defaultPointToolOptions(e){this.viewModel.defaultPointToolOptions=e}get defaultRectangleToolOptions(){return this.viewModel.defaultRectangleToolOptions}set defaultRectangleToolOptions(e){this.viewModel.defaultRectangleToolOptions=e}get effectiveSelectionManager(){return this.viewModel.effectiveSelectionManager}get effectiveSources(){return this.viewModel.effectiveSources}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return Ye(ue.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){Ye(ue.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(e){this.viewModel.layerViewPreferenceEnabled=e}get persistSelection(){return this.viewModel.persistSelection}set persistSelection(e){this.viewModel.persistSelection=e}get returnFeatureTitleFields(){return this.viewModel.returnFeatureTitleFields}set returnFeatureTitleFields(e){this.viewModel.returnFeatureTitleFields=e}get returnGeometry(){return this.viewModel.returnGeometry}set returnGeometry(e){this.viewModel.returnGeometry=e}get selectOnComplete(){return this.viewModel.selectOnComplete}set selectOnComplete(e){this.viewModel.selectOnComplete=e}get selectionManager(){return this.viewModel.selectionManager}set selectionManager(e){this.viewModel.selectionManager=e}get state(){return this.viewModel.state}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get toolConfigs(){return this.viewModel.toolConfigs}set toolConfigs(e){this.viewModel.toolConfigs=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visibleToolCount(){const{visibleElements:e}=this;return this.toolConfigs.length+(e.lassoTool?1:0)+(e.rectangleTool?1:0)}activate(e){if(this.cancel(),!this._effectiveDisabled)return this.viewModel.activate(e)}activateTool(e){if(!this._effectiveDisabled)return this.viewModel.activateTool(e)}cancel(){this.viewModel.cancel()}toggleTool(e){if(!this._effectiveDisabled)return this.viewModel.toggleTool(e)}render(){return c("div",{"aria-label":this.label,class:this.classes(at.base,yt.widget)},c("div",{class:at.container},c("calcite-action-bar",{expandDisabled:!0,layout:"horizontal",scale:this.scale},this._renderDefaultTools(),this._renderCustomTools(),this._renderChip())))}_renderDefaultTools(){return[this._renderPanAction(),this._renderPointTool(),this._renderRectangleTool(),this._renderLassoTool()]}_renderPanAction(){if(!this.visibleElements.pan)return;const e=this.messages.pan,t=`${this.id}-tool-pan`;return this._renderAction({active:!this.activeOperation,disabled:this._effectiveDisabled,icon:"pan",id:t,key:t,onclick:()=>this.cancel(),text:e,title:e})}_renderChip(){if(!this.visibleElements.chip)return;const{effectiveSelectionManager:e}=this,t=e?.count??0,i=Yi(t);return c("calcite-chip",{appearance:"outline",closable:t>0,closed:t===0,disabled:this._effectiveDisabled||t===0,label:i,scale:this.scale,slot:"actions-end",title:this.messages.clearSelection,onCalciteChipClose:()=>e?.clear()},i)}_renderCustomTools(){return this.toolConfigs.map(({toolName:e,icon:t})=>this._renderToolWithTooltip(e,t))}_renderPointTool(){if(this.visibleElements.pointTool)return this._renderToolWithTooltip("point","selection-set",this.messages.selectByPoint)}_renderLassoTool(){if(this.visibleElements.lassoTool)return this._renderToolWithTooltip("lasso","lasso-select",this.messages.selectByLasso)}_renderRectangleTool(){if(this.visibleElements.rectangleTool)return this._renderToolWithTooltip("rectangle","cursor-marquee",this.messages.selectByRectangle)}_renderToolWithTooltip(e,t,i=e){const l=`${this.id}-tool-${e}`;return this._renderAction({active:this.activeOperation?.toolName===e,disabled:this._effectiveDisabled,icon:t||"selection",id:l,key:l,onclick:()=>this.toggleTool(e),text:i,title:i})}_renderAction(e){return c("calcite-action",{...e,bind:this,class:at.toolButton,scale:this.scale})}};o([s()],f.prototype,"_effectiveDisabled",null),o([s()],f.prototype,"activeOperation",null),o([s()],f.prototype,"continuousSelectionEnabled",null),o([s()],f.prototype,"defaultLassoToolOptions",null),o([s()],f.prototype,"defaultOperationType",null),o([s()],f.prototype,"defaultPointToolOptions",null),o([s()],f.prototype,"defaultRectangleToolOptions",null),o([s()],f.prototype,"disabled",void 0),o([s()],f.prototype,"effectiveSelectionManager",null),o([s()],f.prototype,"effectiveSources",null),o([s()],f.prototype,"label",null),o([s()],f.prototype,"layers",null),o([s()],f.prototype,"layerViewPreferenceEnabled",null),o([s()],f.prototype,"layout",void 0),o([s(),ye("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],f.prototype,"messages",void 0),o([s()],f.prototype,"persistSelection",null),o([s()],f.prototype,"returnFeatureTitleFields",null),o([s()],f.prototype,"returnGeometry",null),o([s()],f.prototype,"selectOnComplete",null),o([s()],f.prototype,"scale",void 0),o([s()],f.prototype,"selectionManager",null),o([s()],f.prototype,"state",null),o([s()],f.prototype,"sources",null),o([s()],f.prototype,"toolConfigs",null),o([s()],f.prototype,"view",null),o([s()],f.prototype,"viewModel",void 0),o([s({type:vt,nonNullable:!0})],f.prototype,"visibleElements",void 0),o([s()],f.prototype,"visibleToolCount",null),f=o([L("esri.widgets.support.SelectionToolbar")],f);const Mo=f,Co={absolute:"absolute-direction",relative:"relative-direction"},Zt=()=>me({icon:()=>v(()=>import("./index-DV38aJMs-COXXs72C.js"),__vite__mapDeps([10,2,3,4,5,6,7,11,12]),import.meta.url).then(e=>e.i),label:()=>v(()=>import("./index-CjNVVdGY-CXdqR-ji.js"),__vite__mapDeps([106,2,3,4,5,6,7,107,11]),import.meta.url),switch:()=>v(()=>import("./index-DGUkrUiU-BpcldKfe.js"),__vite__mapDeps([108,2,3,4,5,6,7,14,11,109,15,24,107,16]),import.meta.url),tooltip:()=>v(()=>import("./index-CsuaBzKX-BPaUQAA_.js"),__vite__mapDeps([110,2,3,4,5,6,7,14,19,11,20,8,21,23,13]),import.meta.url)}),Ge="esri-labeled-switch",Fe={label:`${Ge}__label`,labelContent:`${Ge}__label-content`,iconInfo:`${Ge}__icon_info`,iconWarning:`${Ge}__icon_warning`,tooltip:`${Ge}__tooltip`};function Ie({checked:e,disabled:t,hint:i,key:l,label:n,onChange:r,hintIcon:a,hintKind:d}){return c("calcite-label",{class:Fe.label,disabled:t,key:l,layout:"inline-space-between",scale:"s"},i?c("div",{class:Fe.labelContent,key:"label-content"},c("div",null,n),c("calcite-icon",{class:d!=="warning"?Fe.iconInfo:Fe.iconWarning,icon:a??"information",id:l,onclick:p=>p.stopPropagation(),onpointerdown:p=>{p.preventDefault(),p.stopPropagation();const u=p.target.nextElementSibling;u.open=!u.open},scale:"s",tabIndex:0}),c("calcite-tooltip",{class:Fe.tooltip,overlayPositioning:"fixed",referenceElement:l},i)):n,c("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:p=>r(p.currentTarget.checked)}))}let Le=class extends te{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};o([s({type:Boolean,nonNullable:!0})],Le.prototype,"directionModePicker",void 0),o([s({type:Boolean,nonNullable:!0})],Le.prototype,"header",void 0),o([s({type:Boolean,nonNullable:!0})],Le.prototype,"labelsToggle",void 0),o([s({type:Boolean,nonNullable:!0})],Le.prototype,"tooltipsToggle",void 0),Le=o([L("esri.widgets.support.SketchTooltipControls.VisibleElements")],Le);const bt=Le,We="esri-sketch-tooltip-controls",Ke={base:We,block:`${We}__block`,blockContent:`${We}__block-content`,radioButtonLabelWrapper:`${We}__radio-button-label-wrapper`};let he=class extends ne{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new bt,this.sketchOptions=new $t,this.viewType=void 0,this._onTooltipsEnabledChange=i=>{this.sketchOptions.tooltips.enabled=i},this._onLabelsEnabledChange=i=>{this.sketchOptions.labels.enabled=i},this._onDirectionModeChange=i=>{this.sketchOptions.values.directionMode=i.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([me({block:()=>v(()=>import("./index-RR6plZPA-LMlr1l02.js"),__vite__mapDeps([111,1,2,3,4,5,6,7,8,9,112,14,12,11,10,113,19,20,15,24,16,21,114,0,13,115,116,117,118,18,22,23,25,26]),import.meta.url),label:()=>v(()=>import("./index-CjNVVdGY-CXdqR-ji.js"),__vite__mapDeps([106,2,3,4,5,6,7,107,11]),import.meta.url),icon:()=>v(()=>import("./index-DV38aJMs-COXXs72C.js"),__vite__mapDeps([10,2,3,4,5,6,7,11,12]),import.meta.url).then(e=>e.i),"radio-button":()=>v(()=>import("./index-BoYi6noz-C_kxgAG7.js"),__vite__mapDeps([119,2,3,4,5,6,7,14,26,11,109,15,107,16]),import.meta.url),"radio-button-group":()=>v(()=>import("./index-lZpkjGTp-DnaoIWeW.js"),__vite__mapDeps([120,10,2,3,4,5,6,7,11,12,121,16,122,14]),import.meta.url)}),Zt()])}render(){const{label:e,visibleElements:t}=this,i=this._renderContent();return c("div",{"aria-label":e,class:this.classes(Ke.base,yt.widget)},i?c("calcite-block",{class:Ke.block,expanded:!0,heading:t.header?this.label:"",key:"content-block",label:this.label},c("div",{class:Ke.blockContent,key:"content"},i)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,i=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(ge);return i.length===0?null:i}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return c(Ie,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return c(Ie,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:i}=t.values;return c("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,c("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:i,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",i,e.directionModeRelative),this._renderDirectionModeOption("absolute",i,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,i){return c("calcite-label",{key:e,layout:"inline",scale:"s"},c("calcite-radio-button",{checked:e===t,scale:"s",value:e}),c("div",{class:Ke.radioButtonLabelWrapper,key:"label-wrapper"},c("calcite-icon",{icon:Co[e],scale:"s"}),i))}};o([s()],he.prototype,"label",null),o([s({type:bt,nonNullable:!0})],he.prototype,"visibleElements",void 0),o([s(),ye("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],he.prototype,"messages",void 0),o([s({nonNullable:!0,type:$t})],he.prototype,"sketchOptions",void 0),o([s({type:String})],he.prototype,"viewType",void 0),he=o([L("esri.widgets.support.SketchTooltipControls")],he);const Lo=he,So={hide:"hide"};function et(e){return e?.listMode??void 0}function Oo(e){return e!=null&&"minScale"in e&&e.minScale!=null?e.minScale:void 0}function ko(e){return e!=null&&"maxScale"in e&&e.maxScale!=null?e.maxScale:void 0}function Po(e){if(!e)return"inherited";const t=Ro(Xt(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function Jt(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function wt(e){return et(e)!==So.hide}function Io(e,t){if(!e||t==null||isNaN(t))return!1;const i=Oo(e),l=ko(e),n=i!=null&&!isNaN(i)&&i>0&&t>i,r=l!=null&&!isNaN(l)&&l>0&&t<l;return n||r}function xt(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function Xt(e){return e!=null&&"layer"in e&&e.layer!=null}function Ro(e){const t=Ao(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function Ao(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}let V=class extends Gt.IdentifiableMixin(ne){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([M(()=>this._canCreateLegend,()=>this._createLegend(),W),M(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),W)])}destroy(){this._legend=Re(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,i=e?.view;return t&&i?{view:i,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const t=Xt(e)?e:null,i=e?.parent,l=i!=null&&"type"in i&&i.type==="map-image"?t?.source:null,n="";return l&&i?{layer:i,title:n,sublayerIds:[l.mapLayerId]}:{layer:e,title:n}}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return c("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i,open:l}=this;return e&&!i&&l?e==="legend"&&t?c("div",{key:"legend-widget"},t.render()):typeof e=="string"?c("div",{innerHTML:e,key:e}):It(e)?c("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?c("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e):null}async _createLegend(){if(Re(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await v(()=>import("./Legend-BMS5EVNm-u5PLQzJL.js"),__vite__mapDeps([123,3,4,2,5,6,7,124,125,76,77,78,42,75,126,127,128,129,130,131,132,133,134,135,136,137,138,59,139,140,141,142,83,143,144,145,146,147,148,149,150,151,152,52,64,153,154,55,155,156,157,158,159,88,160,161,48,162,163,164,81,82,72,165,166,167,168,169,170,171,172,173,174,175,62,176,177,178,179,180,181,182,183,184,185,186]),import.meta.url),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:It(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};o([s()],V.prototype,"_legend",void 0),o([s()],V.prototype,"_canCreateLegend",null),o([s()],V.prototype,"_legendOptions",null),o([s()],V.prototype,"_legendLayerInfo",null),o([s()],V.prototype,"content",void 0),o([s()],V.prototype,"disabled",null),o([s()],V.prototype,"flowEnabled",void 0),o([s()],V.prototype,"icon",null),o([s()],V.prototype,"image",void 0),o([s()],V.prototype,"listItem",void 0),o([s()],V.prototype,"open",void 0),o([s()],V.prototype,"title",null),o([s()],V.prototype,"visible",void 0),V=o([L("esri.widgets.LayerList.ListItemPanel")],V);const Yt=V;var Ne;const xo=le.ofType({key:"type",defaultKeyValue:"button",base:ci,typeMap:{button:hi,toggle:ui}}),ei=le.ofType(xo),pt="layer",qe="child-list-mode",Do="hide";let E=Ne=class extends Gt.IdentifiableMixin(te){constructor(e){super(e),this.actionsSections=new ei,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(le.ofType(Ne)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.parent=null,this.view=null}initialize(){if(this.addHandles([M(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),W),M(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),W),M(()=>this.view,e=>this._updateChildrenView(e),W),M(()=>this.panel,e=>this._setListItemOnPanel(e),W)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){const{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;const i=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(l=>l.layer===i)??null}set panel(e){const t=this._get("panel");e!==t&&e&&t?.destroy(),this._set("panel",e)}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Yt(e):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){const e=He(this,"layer.layer");return(!e||e&&He(this,"layer.layer.loaded"))&&He(this,"layer.title")||He(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return!!(t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing")}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:l}=this;return!l&&!t&&(e?e.updating:i?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!Io(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Po(this.layer)}clone(){return new Ne({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){this.children?.forEach(t=>t.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_createChildren(e){const{listModeDisabled:t,children:i}=this,l=e.filter(n=>!i.some(r=>r.layer===n));i.addMany(this._createChildItems(l,t))}_destroyChildren(e){const{children:t}=this,i=t.filter(l=>!!l.layer&&!e.includes(l.layer));t.destroyMany(i)}_sortChildren(e){this.children.sort((t,i)=>e.indexOf(i.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(qe),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(qe),this.listModeDisabled||this.addHandles(e.toArray().map(t=>M(()=>t.listMode,()=>this._compileChildren(e))),qe)}_compileChildren(e){const t=this.listModeDisabled?e:e?.filter(i=>et(i)!==Do);e?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),pt)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.reverse().map(i=>t||wt(i)?new Ne({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(ge)}_watchLayerProperties(e){if(this.removeHandles(pt),this.removeHandles(qe),!e)return;if((!this.listModeDisabled&&et(e))==="hide-children")return void this.children.destroyAll();const t=Jt(e);t&&this.addHandles(M(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},W),pt)}};o([s({type:ei})],E.prototype,"actionsSections",void 0),o([s()],E.prototype,"actionsOpen",void 0),o([s()],E.prototype,"checkPublishStatusEnabled",void 0),o([s({type:le.ofType(E)})],E.prototype,"children",void 0),o([s()],E.prototype,"childrenSortable",void 0),o([s({readOnly:!0})],E.prototype,"connectionStatus",null),o([s({readOnly:!0})],E.prototype,"error",null),o([s()],E.prototype,"hidden",void 0),o([s({readOnly:!0})],E.prototype,"incompatible",null),o([s()],E.prototype,"layer",void 0),o([s({readOnly:!0})],E.prototype,"layerView",null),o([s()],E.prototype,"listItemCreatedFunction",void 0),o([s({nonNullable:!0})],E.prototype,"listModeDisabled",void 0),o([s()],E.prototype,"open",void 0),o([s({type:Yt})],E.prototype,"panel",null),o([gi("panel")],E.prototype,"castPanel",null),o([s()],E.prototype,"parent",void 0),o([s({value:!0})],E.prototype,"sortable",null),o([s()],E.prototype,"title",null),o([s({readOnly:!0})],E.prototype,"publishing",null),o([s({readOnly:!0})],E.prototype,"updating",null),o([s()],E.prototype,"view",void 0),o([s()],E.prototype,"visible",null),o([s({readOnly:!0})],E.prototype,"visibleAtCurrentScale",null),o([s({readOnly:!0})],E.prototype,"visibleAtCurrentTimeExtent",null),o([s({readOnly:!0})],E.prototype,"visibilityMode",null),E=Ne=o([L("esri.widgets.LayerList.ListItem")],E);const _t=E,j={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},Vo="hide",ti=le.ofType(_t);let X=class extends ct.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new ti,this.view=null}initialize(){this.addHandles([M(()=>this.view?.ready===!0,()=>this._viewHandles(),W),M(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),M(()=>Pt(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],j.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,l){const n=e?.layer;if(!n||n.type==="subtype-sublayer"||n.type==="sublayer")return;const r=this.view?.map?.layers,a=t?xt(t):r,d=i?xt(i):r;if(!a||!d)return;const{operationalItems:p}=this,u=t?.children||p,g=i?.children||p,_=d.length-l;e.parent=i||null,u.remove(e),a.remove(n),g.includes(e)||g.add(e,_),d.includes(n)||d.add(n,_),this._compileList()}_createLayerViewHandles(e){this.removeHandles(j.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),j.layerViews)}_createMapLayerHandles(e){this.removeHandles(j.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),j.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:l,listModeDisabled:n}=this;return new _t({checkPublishStatusEnabled:l,listModeDisabled:n,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>et(t)!==Vo):void 0}_watchLayersListMode(e){this.removeHandles(j.layerListMode),e&&!this.listModeDisabled&&this.addHandles(M(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),j.layerListMode)}_compileList(){const e=this.view?.map?.layers,t=Pt(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:l})=>l==="link-chart"):e;this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(i=>{t.some(l=>l.layer===i)||t.add(this._createListItem(i))})}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach(l=>{l&&e&&e.includes(l.layer)||i.push(l)}),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort((i,l)=>{const n=e.indexOf(i.layer),r=e.indexOf(l.layer);return n>r?-1:n<r?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([j.mapLayers,j.layerViews,j.viewLayers]),e?.ready?this.addHandles([M(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),W),M(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),W)],j.viewLayers):this._removeAllItems()}};o([s()],X.prototype,"checkPublishStatusEnabled",void 0),o([s()],X.prototype,"listItemCreatedFunction",void 0),o([s({nonNullable:!0})],X.prototype,"listModeDisabled",void 0),o([s({type:ti})],X.prototype,"operationalItems",void 0),o([s({readOnly:!0})],X.prototype,"state",null),o([s()],X.prototype,"totalItems",null),o([s()],X.prototype,"view",void 0),X=o([L("esri.widgets.LayerList.LayerListViewModel")],X);const Bo=X,ft=e=>Go(e)||Fo(e),Go=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},Fo=e=>{const t=Jt(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(const i of e[t])if(ft(i))return!0}return!1},Ze=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(i=>Ze(i,t)!==!1)&&"children");var dt;let se=dt=class extends _t{constructor(e){super(e),this.children=new le,this.parent=null}get enabled(){const{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,i=!1;for(const l of e){if(l.enabled==="indeterminate")return l.enabled;if(l.enabled==="enabled"?t=!0:l.enabled==="disabled"&&(i=!0),i&&t)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer?.id,...e.childLayerIds])}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(i=>i.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(ft);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>wt(t)?new dt({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(ge).reverse()}};o([s()],se.prototype,"enabled",null),o([s()],se.prototype,"children",void 0),o([s()],se.prototype,"childLayerIds",null),o([s()],se.prototype,"featureSource",null),o([s({constructOnly:!0})],se.prototype,"getFeatureSnappingSources",void 0),o([s()],se.prototype,"parent",void 0),se=dt=o([L("esri.widgets.support.SnappingControls.SnappingListItem")],se);let Se=class extends Bo{constructor(){super(...arguments),this.featureSnappingSources=new le}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>!e.children?.length)}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(ft);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new se({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};o([s()],Se.prototype,"featureSnappingSources",void 0),o([s()],Se.prototype,"operationalItems",void 0),o([s()],Se.prototype,"operationalItemsFlat",null),o([s()],Se.prototype,"selectableItems",null),Se=o([L("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Se);let Y=class extends te{constructor(e){super(e),this.layerListViewModel=new Se,this.snappingOptions=new Ht,this.view=null}initialize(){this.addHandles([M(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},W),M(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:e,sources:t})=>{e.featureSnappingSources=t},W)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>!e.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(e=>e.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach(i=>t?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const i=t?.id;e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)wt(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find(l=>l.layer?.id===e)?.layer;if(!t)throw new Gi("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const i=new io({layer:t});return this.snappingOptions.featureSources.add(i),i}};o([s()],Y.prototype,"allLayersEnabled",null),o([s()],Y.prototype,"allLayersDisabled",null),o([s({constructOnly:!0})],Y.prototype,"layerListViewModel",void 0),o([s()],Y.prototype,"layersEnabledCount",null),o([s({type:Ht,nonNullable:!0})],Y.prototype,"snappingOptions",void 0),o([s()],Y.prototype,"state",null),o([s()],Y.prototype,"view",void 0),Y=o([L("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],Y);const No=Y,J="esri-snapping-controls",Q={base:J,container:`${J}__container`,toggleBlock:`${J}__toggle-block`,layerListBlock:`${J}__layer-list-block`,layerList:`${J}__layer-list`,layerListFilter:`${J}__layer-list__filter`,layerListButton:`${J}__layer-list__button`,layerListItem:`${J}__layer-list__item`,layerListGroup:`${J}__layer-list__group`,nestedContainer:`${J}__nested-container`};let R=class extends ne{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new tt,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._gridEnabledSwitchChange=r=>{this.snappingOptions.gridEnabled=r,r&&this._startLoadGrid()},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),so(r.target)};const{snappingOptions:i,view:l,viewModel:n}=e;this.viewModel=n??(this._defaultViewModel=new No({snappingOptions:i,view:l}))}normalizeCtorArgs(e){const{snappingOptions:t,view:i,viewModel:l,...n}=e;return n}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=Re(this._defaultViewModel))}loadDependencies(){return Promise.all([me({block:()=>v(()=>import("./index-RR6plZPA-LMlr1l02.js"),__vite__mapDeps([111,1,2,3,4,5,6,7,8,9,112,14,12,11,10,113,19,20,15,24,16,21,114,0,13,115,116,117,118,18,22,23,25,26]),import.meta.url),button:()=>v(()=>import("./index-CK6nlFfs-CvsZkXf7.js"),__vite__mapDeps([187,1,2,3,4,5,6,7,8,9,10,11,12,14,22,109,15,107,16]),import.meta.url),input:()=>v(()=>import("./index-4OY0nObJ-uVmblXGB.js"),__vite__mapDeps([188,10,2,3,4,5,6,7,11,12,121,189,190,14,24,13,22,109,15,107,16,122,9]),import.meta.url),list:()=>v(()=>import("./index-CoujZeLU-BRqGA7tp.js"),__vite__mapDeps([191,1,2,3,4,5,6,7,8,9,112,14,12,11,13,10,121,189,188,190,24,22,109,15,107,16,122,20,192]),import.meta.url),"list-item":()=>v(()=>import("./index-DbQfb_U2-IlwLsJXE.js"),__vite__mapDeps([193,10,2,3,4,5,6,7,11,12,113,14,19,20,8,15,24,16,21,114,1,9,0,13,115,116,117,118,192,194]),import.meta.url),checkbox:()=>v(()=>import("./index-B-et6CSq-D71gZ9Dz.js"),__vite__mapDeps([195,2,3,4,5,6,7,14,11,109,15,24,107,16]),import.meta.url),loader:()=>v(()=>import("./index-D0o7KJz6-BzeRlr0k.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url)}),Zt()])}initialize(){this.addHandles(M(()=>this.view?.type==="2d"&&!!this.view.grid,e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=Re(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return c("div",{"aria-label":e,class:this.classes(Q.base,yt.widget)},c("div",{class:Q.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),this.view?.type==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,i=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&t?.type==="2d"?this._renderGridEnabledToggle():null].filter(ge),l=[e.enabledToggle?this._renderEnabledToggle():null,i.length>0?c("div",{class:Q.nestedContainer},i):null].filter(ge);return l.length===0?null:c("calcite-block",{class:Q.toggleBlock,expanded:!0,heading:e.header?this.label:"",key:"toggle-block",label:this.label},l)}_renderEnabledToggle(){return c(Ie,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return c(Ie,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return c(Ie,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return c(Ie,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,i=t.layerListViewModel.operationalItems.length>9?c("calcite-input",{class:Q.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:({currentTarget:{value:a}})=>{this._layerListFilter=a===""?null:new RegExp(a,"i")}}):null,l=this._secondaryElementsDisabled,n=this.layerListOpen&&!l,r=t.layerListViewModel.operationalItems?.find(a=>!!a.children.length);return c("calcite-block",{class:Q.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,expanded:n,heading:e.snappingLayers,key:"list-block",onCalciteBlockToggle:a=>this.layerListOpen=a.currentTarget.expanded},i,this._renderToggleLayersButton(),c("calcite-list",{class:Q.layerList,displayMode:r?"nested":"flat",label:e?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:e,visibleElements:t,snappingManager:i,snappingOptions:l,_openAndReady:n}=this,{gridEnabled:r,enabled:a}=l;(n||e?.type==="2d"&&e.grid)&&this._startLoadGrid();const d=this._gridLoadTask?.value,p=d&&e?.type==="2d"&&c(d,{snappingManager:i,snappingOptions:l,view:e,visibleElements:t.gridControlsElements});return c("calcite-block",{class:Q.layerListBlock,collapsible:!0,disabled:!r||!a,expanded:n,heading:this.messages.gridOptionsHeading,key:"grid-block",onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},p??c("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&this.view?.type==="2d"&&(this._gridLoadTask=Wt(async()=>(await v(async()=>{const{default:e}=await import("./GridControls-HOcRkVVE-By9SGD5_.js");return{default:e}},__vite__mapDeps([196,3,4,5,197,198,84,85,2,6,7,81,82,83,44,128,86,87,199,88,41,42,200,78,67,49,50,51,52,201,100,101,185,202,53,68,56,69,70,71,72,73,74,75,76,77,79,58,59,57,80,62,63,43,89,90,91,64,65,66,92,93,94,95,96,97,98,99,203,204,205,206,207,208,209,151,210,211,212,40,45,31,29,30,32,33,34,37,35,46,47,48,39,54,55,60,61,102,103,104,213,157,149,150,214,215,160,216,217,218,219,220,186,221,222]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(i=>{switch(t?Ze(i,t):null){case"children":{const l=i.children.filter(n=>Ze(n,t)!==!1);return this._renderLayerListItemGroup(i,l)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return Ze(i.parent,t)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(ge)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,i=e?t.disableAllLayers:t.enableAllLayers;return c("calcite-button",{appearance:"transparent",class:Q.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,i=e.title||t,l=()=>{this.viewModel.toggleSnappingForLayers([e.layer?.id],e.enabled!=="enabled")};return c("calcite-list-item",{class:Q.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:i,onCalciteListItemSelect:n=>{n.stopPropagation(),l()}},c("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:l}))}_renderLayerListItemGroup(e,t){const{messages:i}=this,{children:l,title:n}=e,r=n||i.untitledLayer,a=n&&n!==""?n:Fi(),d=!!t?.length,p=t??l,u=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},g=p?.find(_=>!!_.children.length);return c("calcite-list-item",{class:Q.layerListGroup,expanded:d,key:a,label:r,onCalciteListItemSelect:_=>{_.stopPropagation(),u()}},c("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:u}),c("calcite-list",{displayMode:g?"nested":"flat",label:i?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(p)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};o([s()],R.prototype,"_defaultViewModel",void 0),o([s()],R.prototype,"_layerListFilter",void 0),o([s()],R.prototype,"_gridLoadTask",void 0),o([s()],R.prototype,"_openAndReady",null),o([s()],R.prototype,"label",null),o([s({type:Boolean,nonNullable:!0})],R.prototype,"layerListOpen",void 0),o([s({type:Boolean,nonNullable:!0})],R.prototype,"gridOptionsOpen",void 0),o([s(),ye("esri/widgets/support/SnappingControls/t9n/SnappingControls")],R.prototype,"messages",void 0),o([s(),ye("esri/t9n/common")],R.prototype,"messagesCommon",void 0),o([s()],R.prototype,"snappingOptions",null),o([s()],R.prototype,"snappingManager",void 0),o([s()],R.prototype,"view",null),o([s()],R.prototype,"viewModel",null),o([s({type:tt,nonNullable:!0})],R.prototype,"visibleElements",void 0),o([s()],R.prototype,"_enabledToggleDisabled",null),o([s()],R.prototype,"_secondaryElementsDisabled",null),R=o([L("esri.widgets.support.SnappingControls")],R);const $o=R,pe="esri-sketch",ie={base:pe,vertical:`${pe}--vertical`,docked:`${pe}-bar`,floating:`${pe}-pad`,chipHorizontal:`${pe}__selection-count-chip--horizontal`,chipVertical:`${pe}__selection-count-chip--vertical`,chipVerticalSmall:`${pe}__selection-count-chip--vertical--s`,popoverWrapper:`${pe}__popover-wrapper`},Ho={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"};let b=class extends ne{constructor(e,t){super(e,t),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.groupAllowCollapseOptions=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new B,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||(this._defaultViewModel=new zt({creationMode:e?.creationMode??"continuous"}))}initialize(){const{layer:e,view:t}=this,i=t?.type==="2d",l=new Mo({persistSelection:!1,visibleElements:new vt({chip:!1,pan:!1,pointTool:!1,lassoTool:i,rectangleTool:i}),view:t,sources:e?[e]:null,scale:this.scale});this.addHandles([M(()=>this.viewModel,n=>{this._viewModelHandlesGroup=$e(this._viewModelHandlesGroup),n&&(this._viewModelHandlesGroup=ht([n.on("create",()=>this.scheduleRender()),n.on("update",()=>this.scheduleRender()),n.on("delete",r=>this.emit("delete",r)),n.on("undo",()=>this.scheduleRender()),n.on("redo",()=>this.scheduleRender()),M(()=>n.layer,r=>{this._selectionToolbar&&(this._selectionToolbar.sources=r?[r]:null)}),M(()=>n.view,r=>{this._selectionToolbar&&(this._selectionToolbar.view=r)}),M(()=>n.state,()=>this.notifyChange("state"))]))},St),Ni(()=>l.activeOperation,()=>this.viewModel.cancel()),l.on("complete",n=>this._onSelectionOperationComplete(n)),M(()=>{const{view:n,visibleElements:{selectionTools:r}}=this;return{lassoTool:n?.type!=="3d"&&!!r?.["lasso-selection"],rectangleTool:n?.type!=="3d"&&!!r?.["rectangle-selection"]}},n=>{Object.assign(l.visibleElements,n)},St)]),this._selectionToolbar=l}loadDependencies(){return me({action:()=>v(()=>import("./index-CXn0Qeo5-BYiEqBfT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),chip:()=>v(()=>import("./index-BlA0IWNf-CZW_bc8m.js"),__vite__mapDeps([105,10,2,3,4,5,6,7,11,12,14,16,15,24,9]),import.meta.url),popover:()=>v(()=>import("./index-Btp8sfgk-EK5UGMZi.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,0,13,14,15,16,19,20,21,22,23,24]),import.meta.url).then(e=>e.i)})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=$e(this._viewModelHandlesGroup)}get activeTool(){const e=this._selectionToolbar?.activeOperation;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const t=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:l}=this.viewModel;return i==="polygon"&&l==="freehand"&&t?.includes("freehandPolygon")?"freehandPolygon":i==="polyline"&&l==="freehand"&&t?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(e){this.viewModel.creationMode=e}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}set layout(e){this._set("layout",e),this._selectionToolbar&&(this._selectionToolbar.layout=e)}set scale(e){this._set("scale",e),this._selectionToolbar&&(this._selectionToolbar.scale=e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeOperation?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&t===this._defaultViewModel&&Re(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,view:t,visibleElements:i}=this,l=e?.filter(n=>!!i.createTools?.[n]);return t?.type==="3d"?l?.filter(n=>n!=="multipoint"):l}create(e,t,i){const l=i?.createOptions??t;return this._activeCustomToolOptions=i,Xe(this.viewModel.create(e,l))}update(e,t){return Xe(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){const{toolbarKind:e,layout:t,scale:i}=this,l=this.customActions?.filter(n=>n.position==="selection-toolbar");return c("div",null,c("div",{classes:{[ie.base]:!0,[ie.floating]:e==="floating",[ie.docked]:e==="docked",[ie.vertical]:t==="vertical"}},c(ee,{barStyle:e,layout:t,scale:i},this._renderSelectionSetItemGroupInline(),c("div",{"allow-collapse":this.groupAllowCollapseOptions?.get("selectionTools")??!0,"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??Be.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),l?.map(n=>this._renderToolbarItem(n))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:e,snappingOptions:t,view:i,viewModel:l,visibleElements:n}=this;if(!this._calcitePopoverReferenceElement)return;const r={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle},a=this.layout==="horizontal"?this._relativeLocation==="top"?"bottom-end":"top-end":"right-end";return c("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:e.settings,label:e.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:a,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:d=>this._remeasurePopoverSizes(d.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},c("div",{class:ie.popoverWrapper},Object.values(r).includes(!0)?c(Lo,{sketchOptions:l.sketchOptions,viewType:i?.type,visibleElements:new bt(r)}):void 0,n.snappingControls&&i&&t?c($o,{snappingManager:this.viewModel.snappingManager,snappingOptions:t,view:i,visibleElements:n.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if(this.contextualToolLocation!=="separate")return;const e=this._renderSelectionSetItemGroup();return e?.length?c(ee,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},e):void 0}_renderSelectionSetItemGroupInline(){return this.contextualToolLocation==="separate"?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return c("div",{"allow-collapse":this.groupAllowCollapseOptions?.get("undoRedo")??!0,"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??Be.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){const e=[],t=[];this.customActions?.forEach(l=>{l.position==="settings-before"?t.push(l):l.position==="settings-after"&&e.push(l)});const i=[...t.map(l=>this._renderToolbarItem(l)),this._renderSettingsMenuButton(),...e.map(l=>this._renderToolbarItem(l))].filter(ge);if(i.length)return c("div",{"allow-collapse":this.groupAllowCollapseOptions?.get("settings")??!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??Be.Max,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];const e=this.contextualToolLocation==="inline-end"?"actions-end":void 0,t=this.customActions?.filter(n=>n.position==="before-selection-set"),i=this.customActions?.filter(n=>n.position==="after-selection-set"),l=this.groupCollapsePriorities?.get("selectionSet")??Be.High;return[c("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:l,slot:e},this._renderFeatureCountChip()),c("div",{"allow-collapse":this.groupAllowCollapseOptions?.get("selectionSet")??!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:l,slot:e},t?.map(n=>this._renderToolbarItem(n)),this._renderDuplicateButton(),this._renderDeleteButton(),i?.map(n=>this._renderToolbarItem(n)))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:e,state:t}=this;return this._renderToolbarItem({id:"pointer-select",text:e.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:t==="ready"})}_renderCreateToolActionGroup(){const e=this._effectiveAvailableCreateTools?.flatMap(i=>this._renderBuiltInCreateToolItem(i))??[],t=this.customToolOptions?.flatMap(i=>this._renderCustomToolItem(i))??[];return c("div",{"allow-collapse":this.groupAllowCollapseOptions?.get("createTools")??!0,"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??Be.High},e,t)}_renderBuiltInCreateToolItem(e){return this._renderToolbarItem({id:`${e}-button`,text:this.messages.draw[e],icon:Ho[e],onclick:()=>this._activateCreateTool(e),active:this.activeTool===e&&!this._activeCustomToolOptions})}_renderCustomToolItem(e){const{toolKey:t}=e;return this._renderToolbarItem({id:`custom-${e.toolKey}`,text:e.label,icon:e.icon,onclick:()=>this._activateCreateTool(e.toolName,null,e),active:this._activeCustomToolOptions?.toolKey===t})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:e=>this._calcitePopoverReferenceElement=e,afterUpdate:e=>this._calcitePopoverReferenceElement=e,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:e,messages:t,scale:i,id:l,updateGraphics:{length:n}}=this,r=Rt(t.selectedCount,{count:n}),a=i==="s"?99:999,d=n>a?Rt(t.selectedCountTruncated,{truncated:a}):n,p=i==="s"&&e==="vertical",u=p?`${l}-selection-chip-small`:`${l}-selection-chip`;return[p?c("span",{classes:{[ie.chipVertical]:!0,[ie.chipVerticalSmall]:this.scale==="s"},id:u,tabIndex:0,title:r},d):c("calcite-chip",{appearance:"outline",class:e==="horizontal"?ie.chipHorizontal:ie.chipVertical,id:u,kind:"brand",label:r,scale:i==="l"?"m":"s",tabIndex:0,title:e==="vertical"?r:void 0},e==="vertical"?d:r)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:e}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:e}=this,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return this._renderToolbarItem({id:"delete",text:t,icon:"trash",onclick:this.delete})}_renderToolbarItem({id:e,text:t,icon:i,disabled:l,onclick:n,active:r,flipRTL:a,afterCreate:d,afterUpdate:p,afterRemoved:u}){const g=`${this.id}-${e}`;return[c("calcite-action",{active:r,afterCreate:d,afterRemoved:u,afterUpdate:p,bind:this,"data-testid":e,disabled:l||this.state==="disabled",icon:i,iconFlipRtl:a??!1,id:g,key:e,onclick:n,scale:this.scale,text:t,title:t})]}_remeasurePopoverSizes(e){try{const t=e.parentElement,i=this?.view?.container?.getBoundingClientRect(),l=t?.style;if(!(t&&i&&l&&this.view?.container?.contains(t)))return;const n=this._calcitePopoverReferenceElement;if(!n)return;const{bottom:r,top:a}=n.getBoundingClientRect();if(this.layout==="horizontal"){const p=r<i.height/2;p!==(this._relativeLocation==="top")&&(this._relativeLocation=p?"top":"bottom"),p?(l?.setProperty("--sketch-view-height-offset",r-i.top+"px"),l?.setProperty("--sketch-view-margin-offset","30px")):(l?.setProperty("--sketch-view-height-offset",i.bottom-a+"px"),l?.setProperty("--sketch-view-margin-offset","15px"))}else this.layout==="vertical"&&(l.setProperty("--sketch-view-height-offset","15px"),l.setProperty("--sketch-view-margin-offset","15px"));const d=e.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;l.setProperty("--sketch-popover-header-offset",`${d}px`)}catch(t){ue.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",t)}}_activateCreateTool(e,t,i){const l=this._activeCustomToolOptions;if(i||l){if(i?.toolKey===l?.toolKey)return void this.cancel()}else if(this.activeTool===e)return void this.cancel();this._selectionToolbar?.cancel(),this.create(e,t,i)}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;t!=="transform"&&t!=="reshape"||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:i}=e;if(!e.aborted&&i.length){const l=t.tool,n=i.length>1&&l==="reshape"?"transform":l;this.update(i,{...t,tool:n})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};o([s()],b.prototype,"_activeCustomToolOptions",void 0),o([s()],b.prototype,"activeTool",null),o([s({readOnly:!0})],b.prototype,"activeTooltip",null),o([s({cast:e=>{if(!e?.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return e.filter(i=>t.has(i))}})],b.prototype,"availableCreateTools",void 0),o([s({readOnly:!0})],b.prototype,"createGraphic",null),o([s()],b.prototype,"creationMode",null),o([s()],b.prototype,"customToolOptions",void 0),o([s()],b.prototype,"customActions",void 0),o([s()],b.prototype,"defaultCreateOptions",null),o([s()],b.prototype,"defaultUpdateOptions",null),o([s()],b.prototype,"icon",null),o([s()],b.prototype,"label",null),o([s()],b.prototype,"labelOptions",null),o([s()],b.prototype,"layer",null),o([s({type:["horizontal","vertical"],value:"horizontal"})],b.prototype,"layout",null),o([s({value:"m"})],b.prototype,"scale",null),o([s()],b.prototype,"toolbarKind",void 0),o([s()],b.prototype,"contextualToolLocation",void 0),o([s()],b.prototype,"groupCollapsePriorities",void 0),o([s()],b.prototype,"groupAllowCollapseOptions",void 0),o([s(),ye("esri/widgets/Sketch/t9n/Sketch")],b.prototype,"messages",void 0),o([s(),ye("esri/t9n/common")],b.prototype,"messagesCommon",void 0),o([s()],b.prototype,"snappingOptions",null),o([s()],b.prototype,"state",null),o([s()],b.prototype,"tooltipOptions",null),o([s({readOnly:!0})],b.prototype,"updateGraphics",null),o([s({type:to,nonNullable:!0})],b.prototype,"valueOptions",null),o([s()],b.prototype,"view",null),o([s({type:zt}),ao(["create","update","undo","redo"])],b.prototype,"viewModel",null),o([s({type:B,nonNullable:!0})],b.prototype,"visibleElements",void 0),o([s()],b.prototype,"_effectiveAvailableCreateTools",null),o([s()],b.prototype,"_defaultViewModel",void 0),o([s()],b.prototype,"_calcitePopoverReferenceElement",void 0),o([s()],b.prototype,"_relativeLocation",void 0),o([s()],b.prototype,"_popoverOpen",void 0),b=o([L("esri.widgets.Sketch")],b);const zo=b,Uo=(e,t)=>i=>Ko(i,e);class Wo extends Ki{#i=new Map;#e;#t;constructor(t,i){super(t,i),new qi(t);const l=this,n=l.instance;let r=n.viewModel,a=n.visibleElements;const d=new Proxy(this.exports,{get(p,u,g){return u==="viewModel"?r:u==="visibleElements"?a:Reflect.get(p,u,g)}});if(l.#t=n,l.instance=d,l.exports=d,r){const p={component:t,get exports(){return l.instance.viewModel}};ji(l).set("viewModel","viewModel"),t.addController(p),r=Qi(t,new WeakRef(p),Zi(t)-1,r,l.#i)}l.instance.visibleElements&&(a=l.#o(n))}hostConnected(){this.instance=this.#t,super.hostConnected()}hostLoad(){this.#e=M(()=>this.component.el.view,t=>{const i=this.instance;!("view"in i)&&typeof i.viewModel=="object"?i.viewModel.view=t:i.view=t,!("map"in i)&&typeof i.viewModel=="object"?i.viewModel.map=t?.map:i.map=t?.map},{sync:!0,initial:!0})}hostUpdate(t){t.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:t}=this.component;t.childElem??=document.createElement("div"),this.instance.container=t.childElem,this.component.closed!==void 0&&this.onLifecycle(()=>M(()=>this.instance.visible,i=>this.component.closed=!i,{initial:!0}))}#o(t){return new Proxy(t.visibleElements,{get:(i,l)=>{if(typeof l=="symbol"||l in Promise.prototype)return i[l];const n=[l],r=this.#s(n);return Ji(this.component,a=>{const d=a;this.component[d]=!1;let p=t.visibleElements??{},u;for(const _ of n.slice(0,-1))if(typeof p[_]=="object"&&p[_]!==null)p=p[_];else{u=!!p[_];break}u===void 0&&(u=!!(p[n.slice(-1)[0]]??!0));const g=d.startsWith("hide")||d.startsWith("show")?d.startsWith("hide"):u;this.onUpdate(_=>{if(_.has(d)){const T=this.component[d];this.#l(n,T,g)}})},r)}})}#s(t){const i=new Proxy({},{get:(l,n)=>{const r=Reflect.get(l,n);return typeof n=="symbol"||n in Promise.prototype?r:(t.push(n),i)}});return i}#l(t,i,l){let n=this.instance.visibleElements??{};for(const a of t.slice(0,-1))(typeof n[a]!="object"||n[a]===null)&&(n[a]={}),n=n[a];const r=!!(l?!i:i);n[t.at(-1)]=r}hostDestroy(){this.#e?.remove(),super.hostDestroy()}}const Ko=$i(Wo),qo=yi`@layer{arcgis-sketch{display:block}}`,jo=Uo(zo);class Qo extends mi{constructor(){super(),this.widget=jo(this),this.viewModel=this.widget.viewModel,this._defaultGraphicsLayer=null,this.activeTool=this.widget.activeTool,this.autoDestroyDisabled=!1,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultGraphicsLayerDisabled=!1,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideDeleteButton=this.widget.visibleElements.deleteButton,this.hideSelectionCountLabel=this.widget.visibleElements.selectionCountLabel,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.position="bottom-left",this.scale=this.widget.scale,this.toolbarKind=this.widget.toolbarKind,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.snappingOptions=this.widget.snappingOptions,this.state=this.widget.state,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.arcgisCreate=Ve(()=>this.widget,"create"),this.arcgisDelete=Ve(()=>this.widget,"delete"),this.arcgisPropertyChange=vi()("state"),this.arcgisReady=bi(),this.arcgisRedo=Ve(()=>this.widget,"redo"),this.arcgisUndo=Ve(()=>this.widget,"undo"),this.arcgisUpdate=Ve(()=>this.widget,"update"),this.listen("arcgisReady",this._arcgisReadyHandler)}static{this.properties={activeTool:3,autoDestroyDisabled:5,availableCreateTools:0,createGraphic:0,creationMode:1,defaultCreateOptions:0,defaultGraphicsLayerDisabled:5,defaultUpdateOptions:0,hideCreateToolsCircle:5,hideCreateToolsPoint:5,hideCreateToolsPolygon:5,hideCreateToolsPolyline:5,hideCreateToolsRectangle:5,hideDuplicateButton:5,hideDeleteButton:5,hideSelectionCountLabel:5,hideLabelsToggle:5,hideSelectionToolsLassoSelection:5,hideSelectionToolsRectangleSelection:5,hideSettingsMenu:5,hideSnappingControls:5,hideSnappingControlsElementsEnabledToggle:5,hideSnappingControlsElementsFeatureEnabledToggle:5,hideSnappingControlsElementsLayerList:5,hideSnappingControlsElementsSelfEnabledToggle:5,hideTooltipsToggle:5,hideUndoRedoMenu:5,icon:1,label:1,labelOptions:0,layer:0,layout:1,pointSymbol:0,polygonSymbol:0,polylineSymbol:0,position:1,referenceElement:1,scale:1,toolbarKind:1,showSnappingControlsElementsHeader:5,snappingOptions:0,state:3,tooltipOptions:0,updateGraphics:0}}static{this.shadowRootOptions=wi}static{this.styles=qo}async cancel(){this.widget?.cancel()}async complete(){this.widget?.complete()}async create(t,i){await this.widget?.create(t,i)}async delete(){this.widget?.delete()}async destroy(){await this.manager.destroy()}async duplicate(){this.widget?.duplicate()}async redo(){this.widget?.redo()}async triggerUpdate(t,i){this.widget?.update(t,i)}async undo(){this.widget?.undo()}_arcgisReadyHandler(){this.defaultGraphicsLayerDisabled||(this._defaultGraphicsLayer=new Xi({title:"Sketch Layer"}),this.widget.layer=this._defaultGraphicsLayer,this.el.view?.map?.add(this.widget.layer),this.manager.onLifecycle(()=>M(()=>this.el.view?.map,(t,i)=>{if(this.widget.layer!==this._defaultGraphicsLayer)return;const l=this._defaultGraphicsLayer;i?.allLayers.includes(l)&&i.allLayers.remove(l),t?.add(l)})),this.manager.onDestroy(()=>{this._defaultGraphicsLayer&&this.el.view?.map?.allLayers.includes(this._defaultGraphicsLayer)&&this.el.view?.map?.remove(this._defaultGraphicsLayer),this._defaultGraphicsLayer?.destroy(),this._defaultGraphicsLayer=null}))}}_i("arcgis-sketch",Qo);const Je="RampDrawGraphicsLayer",Zo=fi({__name:"draw",setup(e){const{t}=Ei(),i=h=>t(h?`draw.${h}`:"draw.unknown"),l=Mi("iApi"),n=gt();let r=null;const a=Ci("sketchEl");let d=null,p=null,u=null,g=null,_=!1,T=null,P=[];const ve=Li([]),re=h=>{if(g&&(p?.remove(g),g=null),!h)return;let w;switch(h.geometry?.type){case"point":case"multipoint":w=new Wi({color:[255,255,0,.8],size:16,outline:{color:[255,165,0,1],width:3}});break;case"polyline":w=new Ot({color:[255,255,0,.8],width:6});break;default:w=new ze({color:[255,255,0,.3],outline:{color:[255,165,0,1],width:3}})}g=new fe({geometry:h.geometry,symbol:w}),p?.add(g)};Lt(()=>n.selectedGraphicId,(h,w)=>{if(!(!r||!p)){if(!h)r.cancel(),re();else if(h!==w){const m=p.graphics.toArray().find(S=>S.attributes&&S.attributes.id===h);m&&(r.triggerUpdate([m]),re(m))}}});const ii=async()=>{if(!p||!r||n.activeTool!=="edit")return;await l.geo.map.viewPromise;const h=l.geo.map.esriView,w={x:h.width/2,y:h.height/2},m={x:w.x,y:w.y,width:20,height:20},S=(await h.hitTest(m)).results.filter(G=>!("graphic"in G)||G.graphic.layer!==p?!1:!!G.graphic.attributes?.id);S.length>0?(u=S[0].graphic,r.triggerUpdate([u]),u.attributes?.id&&n.selectGraphic(u.attributes.id),l.updateAlert(t("draw.graphic.selected",{type:i(u.attributes?.type)}))):(r.cancel(),u=null,n.clearSelection())},oi=async()=>{if(!r||!n.activeTool)return;await l.geo.map.viewPromise;const h=l.geo.map.esriView,w={x:Math.floor(h.width/2),y:Math.floor(h.height/2)},m=h.toMap(w),S=h.extent,G=S.width,Z=S.height,ae=Math.min(G,Z)/10;let F;switch(n.activeTool){case"point":F=new fe({geometry:new je({x:m.x,y:m.y,spatialReference:h.spatialReference}),symbol:r.pointSymbol});break;case"polyline":F=new fe({geometry:new Te({paths:[[[m.x-ae/2,m.y],[m.x+ae/2,m.y]]],spatialReference:h.spatialReference}),symbol:r.polylineSymbol});break;case"polygon":case"rectangle":const y=ae/2;F=new fe({geometry:new oe({rings:[[[m.x-y,m.y-y],[m.x+y,m.y-y],[m.x+y,m.y+y],[m.x-y,m.y+y],[m.x-y,m.y-y]]],spatialReference:h.spatialReference}),symbol:r.polygonSymbol||new ze({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})});break;case"circle":const C=ae/2,ke=36,Ae=[];for(let be=0;be<=ke;be++){const Pe=be/ke*2*Math.PI,x=m.x+C*Math.cos(Pe),I=m.y+C*Math.sin(Pe);Ae.push([x,I])}F=new fe({geometry:new oe({rings:[Ae],spatialReference:h.spatialReference}),symbol:r.polygonSymbol||new ze({color:[255,0,255,.3],outline:{color:[255,0,255,1],width:1}})});break;default:console.warn("Unknown tool type:",n.activeTool);return}if(F){const y=`graphic-${Date.now()}`;F.attributes={id:y,type:n.activeTool},p?.add(F),n.addGraphic({id:y,type:n.activeTool,geometry:F.geometry,attributes:F.attributes}),n.activeTool!=="point"&&(n.clearSelection(),n.setActiveTool(null),r.cancel()),l.updateAlert(t("draw.graphic.created",{type:i(n.activeTool)}))}},Tt=h=>{const w=l.geo.map.esriView?.container;if(!(!document.activeElement||!w?.contains(document.activeElement)))switch(h.key){case"Enter":if(h.preventDefault(),n.activeTool&&n.activeTool!=="edit")if((n.activeTool==="polyline"||n.activeTool==="polygon")&&(_||P.length===0)){const S=l.geo.map.esriView,G={x:Math.floor(S.width/2),y:Math.floor(S.height/2)},Z=S.toMap(G);_?(P.push([Z.x,Z.y]),n.activeTool==="polyline"?T.geometry=new Te({paths:[P],spatialReference:S.spatialReference}):T.geometry=new oe({rings:[P],spatialReference:S.spatialReference}),l.updateAlert(t("draw.multiPoint.pointAdded",{type:i(n.activeTool),count:P.length}))):(_=!0,P=[[Z.x,Z.y]],n.activeTool==="polyline"?T=new fe({geometry:new Te({paths:[P],spatialReference:S.spatialReference}),symbol:r?.polylineSymbol||new Ot({color:[0,0,255,1],width:2})}):T=new fe({geometry:new oe({rings:[P],spatialReference:S.spatialReference}),symbol:r?.polygonSymbol||new ze({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})}),T.attributes={id:`temp-graphic-${Date.now()}`,type:n.activeTool},p?.add(T),l.updateAlert(t("draw.multiPoint.started",{type:i(n.activeTool),count:1})))}else oi();else ii();break;case"Delete":case"Backspace":const m=l.geo.map.esriView;_&&P.length>1?(h.preventDefault(),P.pop(),n.activeTool==="polyline"?T.geometry=new Te({paths:[P],spatialReference:m.spatialReference}):T.geometry=new oe({rings:[P],spatialReference:m.spatialReference}),T.set("geometry",T?.geometry),l.updateAlert(t("draw.multiPoint.pointRemoved",{type:i(n.activeTool??void 0),count:P.length}))):_&&P.length===1?(h.preventDefault(),T&&p?.remove(T),T=null,P=[],_=!1,l.updateAlert(t("draw.multiPoint.canceled"))):u&&(h.preventDefault(),r?.delete(),p?.remove(u),typeof n.removeGraphic=="function"&&n.removeGraphic(u.attributes.id),u=null,re(void 0),l.updateAlert(t("draw.graphic.deleted")));break;case"Escape":n.setActiveTool(null),r?.cancel(),u=null,re(void 0),n.clearSelection(),l.updateAlert(t("draw.tool.canceled"));break}},Et=h=>{const w=l.geo.map.esriView.container;if(!document.activeElement||!w?.contains(document.activeElement)||!u||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(h.key))return;h.preventDefault(),h.stopPropagation();const m=10,S=h.shiftKey,G=h.altKey,Z=l.geo.map.esriView;let ae=0,F=0;h.key==="ArrowLeft"&&(ae=-m),h.key==="ArrowRight"&&(ae=m),h.key==="ArrowUp"&&(F=-m),h.key==="ArrowDown"&&(F=m);const y=u.geometry;let C;if(y.type==="point")C={x:y.x,y:y.y};else{const I=y.extent;C={x:(I.xmin+I.xmax)/2,y:(I.ymin+I.ymax)/2}}const ke=Z.toScreen(new je({x:C.x,y:C.y,spatialReference:Z.spatialReference}));ke.x+=ae,ke.y+=F;const Ae=Z.toMap(ke),be=Ae.x-C.x,Pe=Ae.y-C.y;let x;if(y.type==="point")!S&&!G?x=new je({x:y.x+be,y:y.y+Pe,spatialReference:y.spatialReference}):S?(x=y.clone(),l.updateAlert(t("draw.point.resize.unsupported"))):G&&(x=y.clone(),l.updateAlert(t("draw.point.rotate.unsupported")));else if(y.type==="polyline"){if(!S&&!G){const I=y.paths.map(D=>D.map(([N,$])=>[N+be,$+Pe]));x=new Te({paths:I,spatialReference:y.spatialReference})}else if(S){const I=y,D=h.key==="ArrowUp"||h.key==="ArrowRight"?1.05:.95,N=I.paths.map($=>$.map(([we,_e])=>[C.x+(we-C.x)*D,C.y+(_e-C.y)*D]));x=new Te({paths:N,spatialReference:y.spatialReference})}else if(G){const I=y,D=h.key==="ArrowLeft"?-.05:h.key==="ArrowRight"?.05:0;if(D!==0){const N=Math.cos(D),$=Math.sin(D),we=I.paths.map(_e=>_e.map(([it,ot])=>{const xe=it-C.x,De=ot-C.y,st=xe*N-De*$,lt=xe*$+De*N;return[C.x+st,C.y+lt]}));x=new Te({paths:we,spatialReference:y.spatialReference})}else x=y.clone()}}else if(y.type==="polygon"){if(!S&&!G){const I=y.rings.map(D=>D.map(([N,$])=>[N+be,$+Pe]));x=new oe({rings:I,spatialReference:y.spatialReference})}else if(S){const I=y,D=h.key==="ArrowUp"||h.key==="ArrowRight"?1.05:.95,N=I.rings.map($=>$.map(([we,_e])=>[C.x+(we-C.x)*D,C.y+(_e-C.y)*D]));x=new oe({rings:N,spatialReference:y.spatialReference})}else if(G){const I=y,D=h.key==="ArrowLeft"?-.05:h.key==="ArrowRight"?.05:0;if(D!==0){const N=Math.cos(D),$=Math.sin(D),we=I.rings.map(_e=>_e.map(([it,ot])=>{const xe=it-C.x,De=ot-C.y,st=xe*N-De*$,lt=xe*$+De*N;return[C.x+st,C.y+lt]}));x=new oe({rings:we,spatialReference:y.spatialReference})}else x=y.clone()}}if(x){u.geometry=x,u.set("geometry",x),re(u),u.attributes?.id&&n.updateGraphicGeometry(u.attributes.id,x);const I=S?"resized":G?"rotated":"moved";l.updateAlert(t(`draw.graphic.${I}`))}},si=async h=>{const w=(await l.geo.map.esriView.hitTest(h)).results.find(m=>"graphic"in m&&m.graphic.layer===p&&!!m.graphic.attributes?.id);w&&n.activeTool==="edit"?r?.triggerUpdate([w.graphic]):(r?.cancel(),u=null,n.clearSelection(),re())},li=async()=>{await l.geo.map.viewPromise,l.geo.layer.getLayer(Je)?p=l.geo.layer.getLayer(Je).esriLayer:(p=l.geo.layer.createLayer({id:Je,layerType:Hi.GRAPHIC,cosmetic:!0,system:!0,url:""}),await l.geo.map.addLayer(p)),p?.esriLayer&&(p=p.esriLayer),Object.assign(a.value,{view:l.geo.map.esriView,layer:p,availableCreateTools:["point","multipoint","polyline","polygon","rectangle","circle"],updateOnGraphicClick:!0,visibleElements:{createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{enable:!0},settingsMenu:!1},defaultUpdateOptions:{highlightOptions:{enabled:!1}}}),l.geo.map.esriView.ui.add(a.value,"bottom-right"),a.value?.addEventListener("arcgisCreate",h=>Ct(h.detail)),a.value?.addEventListener("arcgisUpdate",h=>ni(h.detail)),d={remove:()=>a.value?.removeEventListener("arcgisCreate",h=>Ct(h.detail))},r=a.value,l.geo.map.esriView.on("click",si),document.addEventListener("keydown",Tt),document.addEventListener("keydown",Et,{capture:!0})},Mt=()=>{r&&(l.geo.map.esriView&&l.geo.map.esriView.ui.remove(r),d&&d.remove(),r.destroy()),document.removeEventListener("keydown",Tt),document.removeEventListener("keydown",Et,{capture:!0}),_=!1,T=null,P=[],r=null,p=null},Ct=h=>{if(h.state==="complete"){const w=h.graphic,m=`graphic-${Date.now()}`;w.attributes=w.attributes||{},w.attributes.id=m,n.addGraphic({id:m,type:h.tool,geometry:w.geometry,attributes:w.attributes}),h.tool!=="point"&&n.setActiveTool(null)}},ni=h=>{const w=h.graphics[0];if(w)if(h.state==="start"){if(n.activeTool!=="edit"){r.cancel();return}u=w,w.attributes?.id&&(n.selectGraphic(w.attributes.id),l.updateAlert(t("draw.graphic.selected",{type:i(w.attributes?.type)})))}else h.state==="active"?re(w):h.state==="complete"&&w.attributes?.id&&(n.updateGraphicGeometry(w.attributes.id,w.geometry),l.updateAlert(t("draw.graphic.updated")))};return Si(()=>{li(),ve.push(l.event.on(Ft.MAP_DESTROYED,()=>{Mt()}))}),Lt(()=>n.activeTool,h=>{r.cancel(),re(),T=null,P=[],_=!1,h&&h!="edit"&&r.create(h)}),Oi(()=>{Mt(),ve.forEach(h=>l.event.off(h))}),(h,w)=>(ki(),Pi("arcgis-sketch",{ref_key:"sketchEl",ref:a,style:{display:"none"}},null,512))}}),Dt=[{type:"point"},{type:"polyline"},{type:"polygon"},{type:"circle"},{type:"rectangle"}];class Jo extends zi{store;constructor(t,i){super(t,i),this.store=gt(this.$vApp.$pinia)}_parseConfig(t){if(!t){this.store.setSupportedTypes(Dt);return}if(t.types!==void 0){const i=(t.types===null?[]:t.types).filter(l=>l.enabled!==!1);this.store.setSupportedTypes(i)}else this.store.setSupportedTypes(Dt);t.defaultTool&&this.store.setActiveTool(t.defaultTool)}get graphicsLayerId(){return Je}}const Xo={en:{"draw.multiPoint.started":"{type} drawing started with 1 point","draw.multiPoint.pointAdded":"Point added {count} points total","draw.multiPoint.pointRemoved":"Point removed {count} points remaining","draw.multiPoint.canceled":"Drawing canceled","draw.multiPoint.completed":"{type} completed with {count} points","draw.multiPoint.notEnoughPoints":"Not enough points for {type} minimum {min} required","draw.graphic.created":"{type} created","draw.graphic.selected":"{type} selected","draw.graphic.deselected":"Graphic deselected","draw.graphic.deleted":"Graphic deleted","draw.graphic.updated":"Graphic updated","draw.graphic.none":"No graphic found","draw.tool.canceled":"Drawing tool canceled","draw.point.resize.unsupported":"Resizing not supported for point graphics","draw.point.rotate.unsupported":"Rotation not supported for point graphics","draw.move.up":"Moved up","draw.move.down":"Moved down","draw.move.left":"Moved left","draw.move.right":"Moved right","draw.resize.increase":"Increased size","draw.resize.decrease":"Decreased size","draw.rotate.clockwise":"Rotated clockwise","draw.rotate.counterclockwise":"Rotated counter-clockwise","draw.button.point":"Draw point","draw.button.polyline":"Draw line","draw.button.polygon":"Draw polygon","draw.button.rectangle":"Draw rectangle","draw.button.circle":"Draw circle","draw.point.tooltip":"Draw point","draw.polyline.tooltip":"Draw polyline","draw.polygon.tooltip":"Draw polygon","draw.circle.tooltip":"Draw circle","draw.rectangle.tooltip":"Draw rectangle","draw.edit.tooltip":"Edit Mode","draw.graphic.moved":"Graphic moved","draw.shape":"shape","draw.point":"point","draw.multipoint":"multipoint","draw.polyline":"polyline","draw.polygon":"polygon","draw.rectangle":"rectangle","draw.circle":"circle","draw.unknown":"unknown"},fr:{"draw.multiPoint.started":"Dessin de {type} commencé avec 1 point","draw.multiPoint.pointAdded":"Point ajouté","draw.multiPoint.pointRemoved":"Point supprimé","draw.multiPoint.canceled":"Dessin annulé","draw.multiPoint.completed":"{type} terminé avec {count} points","draw.multiPoint.notEnoughPoints":"Pas assez de points pour {type}","draw.graphic.created":"{type} créé","draw.graphic.selected":"{type} sélectionné","draw.graphic.deselected":"Graphique désélectionné","draw.graphic.deleted":"Graphique supprimé","draw.graphic.updated":"Graphique mis à jour","draw.graphic.none":"Aucun graphique trouvé","draw.tool.canceled":"Outil de dessin annulé","draw.point.resize.unsupported":"Le redimensionnement n'est pas pris en charge pour les points","draw.point.rotate.unsupported":"La rotation n'est pas prise en charge pour les points","draw.move.up":"Déplacé vers le haut","draw.move.down":"Déplacé vers le bas","draw.move.left":"Déplacé vers la gauche","draw.move.right":"Déplacé vers la droite","draw.resize.increase":"Taille augmentée","draw.resize.decrease":"Taille réduite","draw.rotate.clockwise":"Rotation dans le sens horaire","draw.rotate.counterclockwise":"Rotation dans le sens antihoraire","draw.button.point":"Dessiner un point","draw.button.polyline":"Dessiner une ligne","draw.button.polygon":"Dessiner un polygone","draw.button.rectangle":"Dessiner un rectangle","draw.button.circle":"Dessiner un cercle","draw.point.tooltip":"Dessiner un point","draw.polyline.tooltip":"Dessiner une polyligne","draw.polygon.tooltip":"Dessiner un polygone","draw.circle.tooltip":"Dessiner un cercle","draw.rectangle.tooltip":"Dessiner un rectangle","draw.edit.tooltip":"Mode édition","draw.graphic.moved":"Graphique déplacé","draw.shape":"forme","draw.point":"indiquer","draw.multipoint":"multipoint","draw.polyline":"polyligne","draw.polygon":"polygone","draw.rectangle":"rectangle","draw.circle":"cercle","draw.unknown":"inconnue"}};class Yo extends Jo{async init(){const{el:t}=this.mount(Zo,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),Object.entries(Xo).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i)),this._parseConfig(this.config),gt(this.$vApp.$pinia).supportedTypes.forEach(i=>{const l=`${i.type}-icon`;this.$iApi.component(l,Ii(po(Object.assign({"./icons/circle-icon.vue":()=>v(()=>import("./circle-icon-qM-Cul3g-C7O8kL0k.js"),__vite__mapDeps([223,3,4]),import.meta.url),"./icons/edit-icon.vue":()=>v(()=>import("./edit-icon-BBpkepd0-DpanMjrt.js"),__vite__mapDeps([224,3,4]),import.meta.url),"./icons/point-icon.vue":()=>v(()=>import("./point-icon-Dd_kLleb-TbEIC0dD.js"),__vite__mapDeps([225,3,4]),import.meta.url),"./icons/polygon-icon.vue":()=>v(()=>import("./polygon-icon-CnplOIHx-CLQ2Cq0r.js"),__vite__mapDeps([226,3,4]),import.meta.url),"./icons/polyline-icon.vue":()=>v(()=>import("./polyline-icon-BmsBSMJm-MSD19xqY.js"),__vite__mapDeps([227,3,4]),import.meta.url),"./icons/rectangle-icon.vue":()=>v(()=>import("./rectangle-icon-DaWElXKE-V-h-F9x0.js"),__vite__mapDeps([228,3,4]),import.meta.url)}),`./icons/${i.type}-icon.vue`,3)))})}async added(){this.$iApi.event.on(Ft.MAP_CREATED,()=>{this.init()})}}const nl=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"}));export{Ie as c,Co as e,nl as i,Zt as n,Kt as r};
