import{o as m,az as c}from"./main-BMu2VIyp.js";function u(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function h(t){let e=0,r=0;for(let a=0;a<t.length;a++){const n=t[a].size;typeof n=="number"&&(e+=n,r++)}return e/r}function p(t,e){return typeof t=="number"?t:t?.stops?.length?h(t.stops):e}function M(t,e){if(!e)return t;const r=e.filter(i=>i.type==="size").map(i=>{const{maxSize:s,minSize:f}=i;return(p(s,t)+p(f,t))/2});let a=0;const n=r.length;if(n===0)return t;for(let i=0;i<n;i++)a+=r[i];const o=Math.floor(a/n);return Math.max(o,t)}function b(t){const e=t?.renderer,r=t?.pointerType,a=r==="touch"?9:6;if(!e)return a;const n="visualVariables"in e?M(a,e.visualVariables):a;if(e.type==="simple")return u(n,e.symbol);if(e.type==="unique-value"){let o=n;return e.uniqueValueInfos?.forEach(i=>{o=u(o,i.symbol)}),o}if(e.type==="class-breaks"){let o=n;return e.classBreakInfos.forEach(i=>{o=u(o,i.symbol)}),o}return e.type==="dot-density"||e.type,n}function z(t,e,r,a=new m){let n=0;if(r.type==="2d")n=e*(r.resolution??0);else if(r.type==="3d"){const x=r.overlayPixelSizeInMapUnits(t),l=r.basemapSpatialReference;n=l==null||l.equals(r.spatialReference)?e*x:c(l)/c(r.spatialReference)}const o=t.x-n,i=t.y-n,s=t.x+n,f=t.y+n,{spatialReference:y}=r;return a.xmin=Math.min(o,s),a.ymin=Math.min(i,f),a.xmax=Math.max(o,s),a.ymax=Math.max(i,f),a.spatialReference=y,a}function R(t,e,r){const a=r.toMap(t);return a==null?!1:z(a,b(),r,d).intersects(e)}const d=new m;export{z as x,b as y,R as z};
