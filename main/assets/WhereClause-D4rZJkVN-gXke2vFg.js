import{c3 as ws,bP as U,z as G,an as Is,bQ as gs,c9 as ys,k as j,j as q,ca as Ts,cb as Os}from"./main-DXQSfJ4c.js";import{I as K,u as J}from"./TimeOnly-CGkId3bj-DmE-9t_j.js";import{n as Xe,o as et,a as ge}from"./UnknownTimeZone-DxjyzFvs-2TW0CNt_.js";import"./enum-g1DWyQyu-BUzEbfC4.js";var p;(function(u){u.InvalidFunctionParameters="InvalidFunctionParameters",u.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",u.UnsupportedSqlFunction="UnsupportedSqlFunction",u.UnsupportedOperator="UnsupportedOperator",u.UnsupportedSyntax="UnsupportedSyntax",u.UnsupportedIsRhs="UnsupportedIsRhs",u.UnsupportedIsLhs="UnsupportedIsLhs",u.InvalidDataType="InvalidDataType",u.CannotCastValue="CannotCastValue",u.FunctionNotRecognized="FunctionNotRecognized",u.InvalidTime="InvalidTime",u.InvalidParameterCount="InvalidParameterCount",u.InvalidTimeStamp="InvalidTimeStamp",u.InvalidDate="InvalidDate",u.InvalidOperator="InvalidOperator",u.IllegalInterval="IllegalInterval",u.YearMonthIntervals="YearMonthIntervals",u.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",u.MissingStatisticParameters="MissingStatisticParameters"})(p||(p={}));const Ns={[p.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[p.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[p.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[p.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[p.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[p.UnsupportedOperator]:"Unsupported operator - {operator}",[p.UnsupportedSyntax]:"Unsupported syntax - {node}",[p.UnsupportedSqlFunction]:"Sql function not found = {function}",[p.InvalidDataType]:"Invalid sql data type",[p.InvalidDate]:"Invalid date encountered",[p.InvalidOperator]:"Invalid operator encountered",[p.InvalidTime]:"Invalid time encountered",[p.IllegalInterval]:"Illegal interval",[p.FunctionNotRecognized]:"Function not recognized",[p.InvalidTimeStamp]:"Invalid timestamp encountered",[p.InvalidParameterCount]:"Invalid parameter count for call to {name}",[p.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[p.YearMonthIntervals]:"Year-Month Intervals not supported",[p.CannotCastValue]:"Cannot cast value to the required data type"};let h=class Mn extends Error{constructor(o,t){super(ws(Ns[o],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,Mn)}};function In(u){return Number.isNaN(u)||u===0?u:Math.trunc(u)}const gn="esri.core.sql.SqlTimeStampOffset";let te=class pe{constructor(o){this._timeStampOffset=o,this.declaredRootClass=gn,this._date=null}static isTimestampOffset(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===gn}toDateTime(){return this._date??=U.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return In(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return In(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return pe.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(o){return new pe(U.fromJSDate(o).toISO({includeOffset:!0}))}static fromDateTime(o){return new pe(o.toISO({includeOffset:!0}))}static fromParts(o,t,l=0,f=0,v=0,y=0,T=0,S=!1,F=0,b=0){const Z=`${o.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${l.toString().padStart(2,"0")}`;let C="";y<10&&(C="0");let D=`${f.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}:${C+y.toString()}`;T!==0&&(D+="."+T.toString().padStart(3,"0"));const Y=`${S?"-":"+"}${F.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`;return new pe(Z+"T"+D+Y)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let o=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return o&&(o=o.replace(".000","")),o}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(o){const t=this.toDateTime().plus(o);return pe.fromDateTime(t)}};function Ss(u,o){const t=_n[u.toLowerCase()];if(t==null)throw new h(p.FunctionNotRecognized);if(o.length<t.minParams||o.length>t.maxParams)throw new h(p.InvalidParameterCount,{name:u.toUpperCase()});return t.evaluate(o)}function yn(u,o){const t=_n[u.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}const _n={min:{minParams:1,maxParams:1,evaluate:u=>Tn(u[0],"min")},max:{minParams:1,maxParams:1,evaluate:u=>Tn(u[0],"max")},avg:{minParams:1,maxParams:1,evaluate:u=>Fn(u[0])},sum:{minParams:1,maxParams:1,evaluate:u=>Es(u[0])},stddev:{minParams:1,maxParams:1,evaluate:u=>xs(u[0])},count:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:u[0].length},var:{minParams:1,maxParams:1,evaluate:u=>Pn(u[0])}};function Fn(u){if(u===null)return null;let o=0,t=0;for(let l=0;l<u.length;l++){const f=u[l];if(f!==null){if(!ft(f))throw new h(p.InvalidValueForAggregateFunction);t++,o+=f}}return t===0?null:o/u.length}function ft(u){return typeof u=="number"}function Tn(u,o){if(u===null)return null;let t=null,l=null;for(const f of u){let v=f;v=K.isDateOnly(f)||J.isTimeOnly(f)?f.toNumber():U.isDateTime(f)?f.toMillis():te.isTimestampOffset(f)?f.toMilliseconds():f,(t===null||o==="max"&&l!==null&&v!==null&&l<=v||o==="min"&&l!==null&&v!==null&&l>=v)&&(t=f,l=v)}return t}function Es(u){if(u===null)return null;let o=0;for(let t=0;t<u.length;t++){const l=u[t];if(l!==null){if(!ft(l))throw new h(p.InvalidValueForAggregateFunction);o+=l}}return o}function xs(u){if(u===null)return null;const o=Pn(u);return o===null?null:Math.sqrt(o)}function Pn(u){if(u===null||(u=u.filter(l=>l!==null)).length===0)return null;const o=Fn(u);if(o===null)return null;let t=0;for(const l of u){if(!ft(l))throw new h(p.InvalidValueForAggregateFunction);t+=(o-l)**2}return t/(u.length-1)}function tt(u){if(u.precision!==null||u.secondary!==null)throw new h(p.PrimarySecondaryQualifiers)}function Ve(u,o){if(o.includes(".")){const t=o.split(".");u.second=parseFloat(t[0]),u.millis=parseInt(t[1],10)}else u.second=parseFloat(o)}const On="esri.core.sql.SqlInterval";class V{constructor(){this.declaredRootClass=On,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===On}static createFromMilliseconds(o){const t=new V;return t.second=o/1e3,t}static createFromValueAndQualifier(o,t,l){let f=null;const v=new V;if(v.op=l==="-"?"-":"+",t.type==="interval-period"){tt(t);const y=new RegExp("^[0-9]{1,}$");if(t.period==="year"||t.period==="month")throw new h(p.YearMonthIntervals);if(t.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(o))throw new h(p.IllegalInterval);Ve(v,o)}else{if(!y.test(o))throw new h(p.IllegalInterval);v[t.period]=parseFloat(o)}}else{if(tt(t.start),tt(t.end),t.start.period==="year"||t.start.period==="month"||t.end.period==="year"||t.end.period==="month")throw new h(p.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(f=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);v[t.start.period]=parseFloat(o.split(" ")[0]),v[t.end.period]=parseFloat(o.split(" ")[1]);break;case"minute":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);{v[t.start.period]=parseFloat(o.split(" ")[0]);const y=o.split(" ")[1].split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1])}break;case"second":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{v[t.start.period]=parseFloat(o.split(" ")[0]);const y=o.split(" ")[1].split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1]),Ve(v,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);v.hour=parseFloat(o.split(":")[0]),v.minute=parseFloat(o.split(":")[1]);break;case"second":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{const y=o.split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1]),Ve(v,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"minute":if(t.end.period!=="second")throw new h(p.IllegalInterval);if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{const y=o.split(":");v.minute=parseFloat(y[0]),Ve(v,y[1])}break;default:throw new h(p.IllegalInterval)}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const Cs=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,Ds=/^(\d{1,2}):(\d{1,2})$/,bs=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,An=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Ms=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,_s=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Fs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Ps=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function He(u,o){if(o instanceof ys)return o===Xe.instance?U.fromMillis(u.getTime(),{zone:Xe.instance}):U.fromJSDate(u,{zone:o});switch(o){case"system":case"local":case null:return U.fromJSDate(u);default:return o?.toLowerCase()==="unknown"?U.fromMillis(u.getTime(),{zone:Xe.instance}):U.fromJSDate(u,{zone:o})}}function ue(u){return V.isInterval(u)}function P(u){return U.isDateTime(u)}function A(u){return K.isDateOnly(u)}function R(u){return J.isTimeOnly(u)}function L(u){return te.isTimestampOffset(u)}function $e(u){let o=Cs.exec(u);if(o!==null){const[,t,l,f]=o,v=J.fromParts(parseInt(t,10),parseInt(l,10),parseInt(f,10),0);if(v!==null)return v;throw new h(p.InvalidTime)}if(o=Ds.exec(u),o!==null){const[,t,l]=o,f=J.fromParts(parseInt(t,10),parseInt(l,10),0,0);if(f!==null)return f;throw new h(p.InvalidTime)}if(o=bs.exec(u),o!==null){const[,t,l,f,v]=o,y=J.fromParts(parseInt(t,10),parseInt(l,10),parseInt(f,10),parseInt(v,10));if(y!==null)return y;throw new h(p.InvalidTime)}throw new h(p.InvalidTime)}function Te(u,o,t=!1){let l=Ms.exec(u);if(l!==null){const[,f,v,y,T,S,F,b]=l,Z=U.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt(S,10),second:parseInt(F,10),millisecond:b?parseInt(b.replace(".",""),10):0},{zone:et(o)});if(Z.isValid===!1)throw new h(p.InvalidTimeStamp);return Z}if(l=_s.exec(u),l!==null){const[,f,v,y,T,S,F,b,Z,C,D]=l,Y=te.fromParts(parseInt(f,10),parseInt(v,10),parseInt(y,10),parseInt(T,10),parseInt(S,10),parseInt(F,10),b?parseInt(b.replace(".",""),10):0,Z==="-",parseInt(C,10),parseInt(D,10));if(Y.isValid===!1)throw new h(p.InvalidTimeStamp);return Y}if(l=Fs.exec(u),l!==null){const[,f,v,y,T,S,F,b,Z]=l,C=te.fromParts(parseInt(f,10),parseInt(v,10),parseInt(y,10),parseInt(T,10),parseInt(S,10),0,0,F==="-",parseInt(b,10),parseInt(Z,10));if(C.isValid===!1)throw new h(p.InvalidTimeStamp);return C}if(l=Ps.exec(u),l!==null){const[,f,v,y,T,S]=l,F=U.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt(S,10),second:0},{zone:et(o)});if(F.isValid===!1)throw new h(p.InvalidTimeStamp);return F}if(l=An.exec(u),l!==null){const[,f,v,y]=l,T=U.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:0,minute:0,second:0},{zone:et(o)});if(T.isValid===!1)throw new h(p.InvalidTimeStamp);return T}throw new h(p.InvalidTimeStamp)}function dt(u,o){const t=An.exec(u);if(t===null)try{return Te(u,o)}catch{throw new h(p.InvalidDate)}const[,l,f,v]=t,y=K.fromParts(parseInt(l,10),parseInt(f,10),parseInt(v,10));if(y===null)throw new h(p.InvalidDate);return y}const As=321408e5,Ls=26784e5,Rs=864e5,Us=36e5,Vs=6e4;function nt(u){return!!P(u)||!!L(u)}function ut(u){return!!P(u)||!!A(u)||!!L(u)||!!R(u)}function ke(u){if(P(u))return u.toMillis();if(A(u))return u.toNumber();if(L(u))return u.toMilliseconds();throw new h(p.InvalidDataType)}function W(u,o,t){if(u==null||o==null)return null;if(j(u)){if(j(o))return ee(u,o,t);if(q(o))return ks(u,o,t);if(ut(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator)}else if(q(u)){if(j(o))return zs(u,o,t);if(q(o))return Hs(u,o,t);if(P(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator);if(R(o))throw new h(p.InvalidOperator);if(L(o))throw new h(p.InvalidOperator)}else if(P(u)){if(nt(o)){if(ge(u.zone)){if(U.isDateTime(o)&&!ge(o.zone)||te.isTimestampOffset(o))return rt(u,o,t)}else if(U.isDateTime(o)&&ge(o.zone)&&(!ge(u.zone)||te.isTimestampOffset(u)))return rt(u,o,t);return ee(ke(u),ke(o),t)}if(q(o))throw new h(p.InvalidOperator);if(A(o))return $s(u,o,t);if(R(o))throw new h(p.InvalidOperator);if(j(o))throw new h(p.InvalidOperator)}else if(A(u)){if(L(o))return Ys(u,o,t);if(P(o))return Zs(u,o,t);if(q(o))throw new h(p.InvalidOperator);if(A(o))return ee(u.toNumber(),o.toNumber(),t);if(R(o))throw new h(p.InvalidOperator);if(j(o))throw new h(p.InvalidOperator)}else if(R(u)){if(R(o))return ee(u.toNumber(),o.toNumber(),t);if(q(o))throw new h(p.InvalidOperator);if(j(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator);if(nt(o))throw new h(p.InvalidOperator)}else if(L(u)){if(nt(o))return U.isDateTime(o)&&ge(o.zone)?rt(u,o,t):ee(ke(u),ke(o),t);if(q(o))throw new h(p.InvalidOperator);if(A(o))return qs(u,o,t);if(R(o))throw new h(p.InvalidOperator);if(j(o))throw new h(p.InvalidOperator)}switch(t){case"<>":return u!==o;case"=":return u===o;case">":return u>o;case"<":return u<o;case">=":return u>=o;case"<=":return u<=o}}function ee(u,o,t){switch(t){case"<>":return u!==o;case"=":return u===o;case">":return u>o;case"<":return u<o;case">=":return u>=o;case"<=":return u<=o}}function ks(u,o,t){const l=parseFloat(o);if(!isNaN(l))return ee(u,l,t);const f=u.toString();switch(t){case"<>":return f!==o;case"=":return f===o;case">":return f>o;case"<":return f<o;case">=":return f>=o;case"<=":return f<=o}}function zs(u,o,t){const l=parseFloat(u);if(!isNaN(l))return ee(l,o,t);const f=o.toString();switch(t){case"<>":return u!==f;case"=":return u===f;case">":return u>f;case"<":return u<f;case">=":return u>=f;case"<=":return u<=f}}function Hs(u,o,t){switch(t){case"<>":return u!==o;case"=":return u===o;case">":return u>o;case"<":return u<o;case">=":return u>=o;case"<=":return u<=o}}function $s(u,o,t){const l=o.toDateTimeLuxon(u.zone);return ee((u=u.startOf("day")).toMillis(),l.toMillis(),t)}function qs(u,o,t){const l=o.toDateTimeLuxon(u.toDateTime().zone);return ee((u=u.startOfDay()).toMilliseconds(),l.toMillis(),t)}function Zs(u,o,t){const l=u.toDateTimeLuxon(o.zone);return o=o.startOf("day"),ee(l.toMillis(),o.toMillis(),t)}function Ys(u,o,t){const l=u.toDateTimeLuxon(o.toDateTime().zone);return o=o.startOfDay(),ee(l.toMillis(),o.toMilliseconds(),t)}function rt(u,o,t){te.isTimestampOffset(u)&&(u=u.toDateTime()),te.isTimestampOffset(o)&&(o=o.toDateTime());const l=Nn(u),f=Nn(o);switch(t){case"<>":return l!==f;case"=":return l===f;case">":return l>f;case"<":return l<f;case">=":return l>=f;case"<=":return l<=f}}function Nn(u){return u.year*As+u.month*Ls+u.day*Rs+u.hour*Us+u.minute*Vs+1e3*u.second+u.millisecond}function pt(u,o,t){const l=Rn[u.toLowerCase()];if(l==null)throw new h(p.FunctionNotRecognized);if(o.length<l.minParams||o.length>l.maxParams)throw new h(p.InvalidParameterCount,{name:u.toUpperCase()});return l.evaluate(o,t)}function js(u,o){const t=Rn[u.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}function ot(u){return!G(u)&&!A(u)&&!P(u)&&!R(u)&&!L(u)}function Ln(u){return A(u)||R(u)?u.toString():L(u)?u.toSQLValue():P(u)?u.millisecond===0?u.toFormat("yyyy-LL-dd HH:mm:ss"):u.toSQL({includeOffset:!1}):G(u)?Ln(U.fromJSDate(u)):u.toString()}function Ws(u){if(G(u))return K.fromDateJS(u);if(P(u))return K.fromParts(u.year,u.month,u.day);if(A(u))return u;if(R(u))throw new h(p.CannotCastValue);if(L(u)&&K.fromParts(u.year,u.month,u.day)===null)throw new h(p.CannotCastValue);if(q(u)){const o=K.fromReader(u);if(o!==null&&o.isValid)return o}throw new h(p.CannotCastValue)}function Js(u,o,t){if(G(u))return He(u,o);if(P(u))return u;if(A(u))return u.toDateTimeLuxon("unknown");if(R(u))throw new h(p.CannotCastValue);if(L(u))return u;if(q(u))return Te(u,"unknown",t);throw new h(p.CannotCastValue)}function Qs(u){if(G(u))return J.fromDateJS(u);if(P(u))return J.fromDateTime(u);if(A(u))throw new h(p.CannotCastValue);if(R(u))return u;if(L(u))return J.fromSqlTimeStampOffset(u);if(q(u))return $e(u);throw new h(p.CannotCastValue)}const Rn={extract:{minParams:2,maxParams:2,evaluate:([u,o])=>{if(o==null)return null;if(G(o))switch(u.toUpperCase()){case"SECOND":return o.getSeconds();case"MINUTE":return o.getMinutes();case"HOUR":return o.getHours();case"DAY":return o.getDate();case"MONTH":return o.getMonth()+1;case"YEAR":return o.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return U.fromJSDate(o,{zone:"system"}).weekday;case"DOY":return U.fromJSDate(o,{zone:"system"}).ordinal;case"WEEK":return U.fromJSDate(o,{zone:"system"}).weekNumber}else if(P(o))switch(u.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return o.weekday;case"DOY":return o.ordinal;case"WEEK":return o.weekNumber}else if(A(o))switch(u.toUpperCase()){case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return o.toDateTime("unknown").weekday;case"DOY":return o.toDateTime("unknown").ordinal;case"WEEK":return o.toDateTime("unknown").weekNumber}else if(R(o))switch(u.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour}else if(L(o))switch(u.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":return o.timezoneOffsetHour;case"TIMEZONE_MINUTE":return o.timezoneOffsetMinutes;case"DOW":return o.toDateTime().weekday;case"DOY":return o.toDateTime().ordinal;case"WEEK":return o.toDateTime().weekNumber}throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:u=>{if(u.length===2){const[o,t]=u;return o==null||t==null?null:o.toString().substring(t-1)}if(u.length===3){const[o,t,l]=u;return o==null||t==null||l==null?null:l<=0?"":o.toString().substring(t-1,t+l-1)}}},position:{minParams:2,maxParams:2,evaluate:([u,o])=>u==null||o==null?null:o.indexOf(u)+1},trim:{minParams:2,maxParams:3,evaluate:u=>{const o=u.length===3,t=o?u[1]:" ",l=o?u[2]:u[1];if(t==null||l==null)return null;const f=`(${Ts(t)})`;switch(u[0]){case"BOTH":return l.replaceAll(new RegExp(`^${f}*|${f}*$`,"g"),"");case"LEADING":return l.replaceAll(new RegExp(`^${f}*`,"g"),"");case"TRAILING":return l.replaceAll(new RegExp(`${f}*$`,"g"),"")}throw new h(p.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.abs(u[0])},ceiling:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.ceil(u[0])},floor:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.floor(u[0])},log:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.log(u[0])},log10:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.log(u[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.sin(u[0])},cos:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.cos(u[0])},tan:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.tan(u[0])},asin:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.asin(u[0])},acos:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.acos(u[0])},atan:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.atan(u[0])},sign:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:u[0]>0?1:u[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:u=>u[0]==null||u[1]==null?null:u[0]**u[1]},mod:{minParams:2,maxParams:2,evaluate:u=>u[0]==null||u[1]==null?null:u[0]%u[1]},round:{minParams:1,maxParams:2,evaluate:u=>{const o=u[0],t=u.length===2?10**u[1]:1;return o==null?null:Math.round(o*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:u=>u[0]==null?null:u.length===1||u[1]===0?Math.trunc(u[0]):Os("trunc",u[0],-Number(u[1]))},char_length:{minParams:1,maxParams:1,evaluate:u=>q(u[0])?u[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:u=>{let o="";for(let t=0;t<u.length;t++){if(u[t]==null)return null;o+=u[t].toString()}return o}},lower:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:u[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:u[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:u=>{for(const o of u)if(o!==null)return o;return null}},cosh:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.cosh(u[0])},sinh:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.sinh(u[0])},tanh:{minParams:1,maxParams:1,evaluate:u=>u[0]==null?null:Math.tanh(u[0])},nullif:{minParams:2,maxParams:2,evaluate:u=>W(u[0],u[1],"=")?null:u[0]},cast:{minParams:2,maxParams:2,evaluate:(u,o)=>{const t=u[0],l=u[1];if(t===null)return null;switch(l.type){case"integer":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"smallint":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);if(f>32767||f<-32767)throw new h(p.CannotCastValue);return f}case"float":case"real":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseFloat(t);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"time":return Qs(t);case"date":return Ws(t);case"timestamp":return Js(t,o,l.withtimezone===!0);case"varchar":{const f=Ln(t);if(f.length>l.size)throw new h(p.CannotCastValue);return f}default:throw new h(p.InvalidDataType)}}}};function Un(u,o,t,l){if(u==="||")return pt("concat",[o,t],l);if(o===null||t===null)return null;if(j(o)){if(j(t))return mt(o,t,u);if(ue(t))return rc(o,t,u);if(R(t))return pc();if(A(t))return mc();if(L(t))return dc();if(P(t))return cc();if(q(t))return hc(o,t,u);throw new h(p.InvalidOperator)}if(A(o)){if(j(t))return lc(o,t,u);if(ue(t))return oc(o,t,u);if(R(t))return Nc();if(A(t))return Oc(o,t,u);if(L(t))return Tc(o,t,u);if(P(t))return yc(o,t,u);if(q(t))return Rc();throw new h(p.InvalidOperator)}if(R(o)){if(j(t))return sc(o,t,u);if(ue(t))return Xs(o,t,u);if(R(t))return _c();if(A(t))return bc();if(L(t))return Mc();if(P(t))return Dc();if(q(t))return Uc();throw new h(p.InvalidOperator)}if(ue(o)){if(j(t))return nc(o,t,u);if(ue(t))return tc(o,t,u);if(R(t))return Gs(o,t,u);if(A(t))return Ks(o,t,u);if(L(t))return ec(o,t,u);if(P(t))return Bs(o,t,u);if(q(t))return Ic();throw new h(p.InvalidOperator)}if(P(o)){if(j(t))return ac(o,t,u);if(ue(t))return ic(o,t,u);if(R(t))return Lc();if(A(t))return Pc(o,t,u);if(L(t))return Ac(o,t,u);if(P(t))return Fc(o,t,u);if(q(t))return Vc();throw new h(p.InvalidOperator)}if(L(o)){if(j(t))return fc(o,t,u);if(ue(t))return uc(o,t,u);if(R(t))return Sc();if(A(t))return Ec(o,t,u);if(L(t))return Cc(o,t,u);if(P(t))return xc(o,t,u);if(q(t))return kc();throw new h(p.InvalidOperator)}if(q(o)){if(j(t))return vc(o,t,u);if(ue(t))return gc();if(R(t))return zc();if(A(t))return Hc();if(L(t))return qc();if(P(t))return $c();if(q(t))return wc(o,t,u);throw new h(p.InvalidOperator)}throw new h(p.InvalidOperator)}function mt(u,o,t){switch(t){case"+":return u+o;case"-":return u-o;case"*":return u*o;case"/":return u/o}throw new h(p.InvalidOperator)}function Bs(u,o,t){switch(t){case"+":return o.plus({milliseconds:u.valueInMilliseconds()});case"-":return u.valueInMilliseconds()-o.toMillis()}throw new h(p.InvalidOperator)}function Gs(u,o,t){if(t==="+")return o.plus("milliseconds",u.valueInMilliseconds());throw new h(p.InvalidOperator)}function Ks(u,o,t){if(t==="+")return o.plus("milliseconds",u.valueInMilliseconds());throw new h(p.InvalidOperator)}function Xs(u,o,t){switch(t){case"+":return u.plus("milliseconds",o.valueInMilliseconds());case"-":return u.plus("milliseconds",-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ec(u,o,t){if(t==="+")return o.addMilliseconds(u.valueInMilliseconds());throw new h(p.InvalidOperator)}function tc(u,o,t){switch(t){case"+":return V.createFromMilliseconds(u.valueInMilliseconds()+o.valueInMilliseconds());case"-":return V.createFromMilliseconds(u.valueInMilliseconds()-o.valueInMilliseconds());case"*":return V.createFromMilliseconds(u.valueInMilliseconds()*o.valueInMilliseconds());case"/":return V.createFromMilliseconds(u.valueInMilliseconds()/o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function nc(u,o,t){switch(t){case"+":return V.createFromMilliseconds(u.valueInMilliseconds()+o);case"-":return V.createFromMilliseconds(u.valueInMilliseconds()-o);case"*":return V.createFromMilliseconds(u.valueInMilliseconds()*o);case"/":return V.createFromMilliseconds(u.valueInMilliseconds()/o)}throw new h(p.InvalidOperator)}function rc(u,o,t){switch(t){case"+":return V.createFromMilliseconds(u+o.valueInMilliseconds());case"-":return V.createFromMilliseconds(u-o.valueInMilliseconds());case"*":return V.createFromMilliseconds(u*o.valueInMilliseconds());case"/":return V.createFromMilliseconds(u/o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function oc(u,o,t){switch(t){case"+":return u.plus("milliseconds",o.valueInMilliseconds());case"-":return u.plus("milliseconds",-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ic(u,o,t){switch(t){case"+":return u.plus({milliseconds:o.valueInMilliseconds()});case"-":return u.minus({milliseconds:o.valueInMilliseconds()})}throw new h(p.InvalidOperator)}function uc(u,o,t){switch(t){case"+":return u.addMilliseconds(o.valueInMilliseconds());case"-":return u.addMilliseconds(-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ac(u,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return u.plus({milliseconds:l});case"-":return u.minus({milliseconds:l})}throw new h(p.InvalidOperator)}function lc(u,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return u.plus("milliseconds",l);case"-":return u.plus("milliseconds",-1*l)}throw new h(p.InvalidOperator)}function sc(u,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return u.plus("milliseconds",l);case"-":return u.plus("milliseconds",-1*l)}throw new h(p.InvalidOperator)}function cc(u,o,t){throw new h(p.InvalidOperator)}function fc(u,o,t){const l=1e3*o*24*60*60;switch(t){case"+":return u.addMilliseconds(l);case"-":return u.addMilliseconds(-1*l)}throw new h(p.InvalidOperator)}function dc(u,o,t){throw new h(p.InvalidOperator)}function pc(u,o,t){throw new h(p.InvalidOperator)}function mc(u,o,t){throw new h(p.InvalidOperator)}function hc(u,o,t){const l=parseFloat(o);if(isNaN(l))throw new h(p.InvalidOperator);return mt(u,l,t)}function vc(u,o,t){const l=parseFloat(u);if(isNaN(l))throw new h(p.InvalidOperator);return mt(l,o,t)}function wc(u,o,t){if(t==="+")return u+o;throw new h(p.InvalidOperator)}function Ic(u,o,t){throw new h(p.InvalidOperator)}function gc(u,o,t){throw new h(p.InvalidOperator)}function yc(u,o,t){if(t==="-")return u.toDateTimeLuxon(o.zone).diff(o).as("days");throw new h(p.InvalidOperator)}function Tc(u,o,t){if(t==="-")return u.toDateTimeLuxon(o.toDateTime().zone).diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Oc(u,o,t){if(t==="-")return u.toDateTimeLuxon("UTC").diff(o.toDateTimeLuxon("UTC")).as("days");throw new h(p.InvalidOperator)}function Nc(u,o,t){throw new h(p.InvalidOperator)}function Sc(u,o,t){throw new h(p.InvalidOperator)}function Ec(u,o,t){if(t==="-")return u.toDateTime().diff(o.toDateTimeLuxon(u.toDateTime().zone)).as("days");throw new h(p.InvalidOperator)}function xc(u,o,t){if(t==="-")return u.toDateTime().diff(o).as("days");throw new h(p.InvalidOperator)}function Cc(u,o,t){if(t==="-")return u.toDateTime().diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Dc(u,o,t){throw new h(p.InvalidOperator)}function bc(u,o,t){throw new h(p.InvalidOperator)}function Mc(u,o,t){throw new h(p.InvalidOperator)}function _c(u,o,t){throw new h(p.InvalidOperator)}function Fc(u,o,t){if(t==="-")return u.diff(o).as("days");throw new h(p.InvalidOperator)}function Pc(u,o,t){if(t==="-")return u.diff(o.toDateTimeLuxon(u.zone)).as("days");throw new h(p.InvalidOperator)}function Ac(u,o,t){if(t==="-")return u.diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Lc(u,o,t){throw new h(p.InvalidOperator)}function Rc(u,o,t){throw new h(p.InvalidOperator)}function Uc(u,o,t){throw new h(p.InvalidOperator)}function Vc(u,o,t){throw new h(p.InvalidOperator)}function kc(u,o,t){throw new h(p.InvalidOperator)}function zc(u,o,t){throw new h(p.InvalidOperator)}function Hc(u,o,t){throw new h(p.InvalidOperator)}function $c(u,o,t){throw new h(p.InvalidOperator)}function qc(u,o,t){throw new h(p.InvalidOperator)}class it extends SyntaxError{constructor(o,t,l,f){super(o),this.expected=t,this.found=l,this.location=f,this.name="SyntaxError"}format(o){let t="Error: "+this.message;if(this.location){let l=null;const f=o.find(S=>S.source===this.location.source);f&&(l=f.text.split(/\r\n|\n|\r/g));const v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,T=this.location.source+":"+y.line+":"+y.column;if(l){const S=this.location.end,F="".padEnd(y.line.toString().length," "),b=l[v.line-1],Z=(v.line===S.line?S.column:b.length+1)-v.column||1;t+=`
 --> `+T+`
`+F+` |
`+y.line+" | "+b+`
`+F+" | "+"".padEnd(v.column-1," ")+"".padEnd(Z,"^")}else t+=`
 at `+T}return t}static buildMessage(o,t){function l(C){return C.codePointAt(0).toString(16).toUpperCase()}const f=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function v(C){return f?C.replace(f,D=>"\\u{"+l(D)+"}"):C}function y(C){return v(C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+l(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+l(D)))}function T(C){return v(C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+l(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+l(D)))}const S={literal:C=>'"'+y(C.text)+'"',class(C){const D=C.parts.map(Y=>Array.isArray(Y)?T(Y[0])+"-"+T(Y[1]):T(Y));return"["+(C.inverted?"^":"")+D.join("")+"]"+(C.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:C=>C.description};function F(C){return S[C.type](C)}function b(C){const D=C.map(F);if(D.sort(),D.length>0){let Y=1;for(let re=1;re<D.length;re++)D[re-1]!==D[re]&&(D[Y]=D[re],Y++);D.length=Y}switch(D.length){case 1:return D[0];case 2:return D[0]+" or "+D[1];default:return D.slice(0,-1).join(", ")+", or "+D[D.length-1]}}function Z(C){return C?'"'+y(C)+'"':"end of input"}return"Expected "+b(o)+" but "+Z(t)+" found."}}function Zc(u,o){const t={},l=(o=o!==void 0?o:{}).grammarSource,f={start:At};let v=At;const y="!",T="=",S=">=",F=">",b="<=",Z="<>",C="!=",D="||",Y="@",re="'",vt="N'",Oe="''",Yn=".",jn="null",Wn="true",Jn="false",Qn="in",Bn="is",Gn="like",Kn="escape",Xn="not",er="and",tr="or",nr="between",rr="from",or="for",ir="substring",ur="extract",ar="trim",lr="position",sr="timestamp",cr="date",fr="time",dr="leading",pr="trailing",mr="both",hr="cast",vr="as",wr="integer",Ir="int",gr="smallint",yr="float",Tr="real",Or="varchar",Nr="to",Sr="interval",Er="year",xr="timezone_hour",Cr="timezone_minute",Dr="month",br="day",Mr="hour",_r="minute",Fr="second",Pr="dow",Ar="doy",Lr="week",Rr="case",Ur="end",Vr="when",kr="then",zr="else",Hr=",",$r="(",qr=")",wt="`",Zr=/^[<-=]/,Ne=/^[+\-]/,Yr=/^[*\/]/,jr=/^[A-Za-z_\x80-\uFFFF]/,Wr=/^[A-Za-z0-9_]/,It=/^[A-Za-z0-9_.\x80-\uFFFF]/,Jr=/^["]/,gt=/^[^']/,Qr=/^[0-9]/,Br=/^[eE]/,Gr=/^[ \t\n\r]/,yt=/^[^`]/,Kr=O("!",!1),Xr=O("=",!1),eo=O(">=",!1),to=O(">",!1),no=O("<=",!1),ro=O("<>",!1),oo=Q([["<","="]],!1,!1,!1),io=O("!=",!1),Se=Q(["+","-"],!1,!1,!1),uo=O("||",!1),ao=Q(["*","/"],!1,!1,!1),lo=Q([["A","Z"],["a","z"],"_",["","￿"]],!1,!1,!1),so=Q([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),Tt=Q([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1,!1),co=Q(['"'],!1,!1,!1),fo=O("@",!1),Ot=O("'",!1),po=O("N'",!1),Nt=O("''",!1),St=Q(["'"],!0,!1,!1),mo=O(".",!1),ho=Q([["0","9"]],!1,!1,!1),vo=Q(["e","E"],!1,!1,!1),wo=O("NULL",!0),Io=O("TRUE",!0),go=O("FALSE",!0),yo=O("IN",!0),To=O("IS",!0),Oo=O("LIKE",!0),No=O("ESCAPE",!0),So=O("NOT",!0),Eo=O("AND",!0),xo=O("OR",!0),Co=O("BETWEEN",!0),Do=O("FROM",!0),bo=O("FOR",!0),Mo=O("SUBSTRING",!0),_o=O("EXTRACT",!0),Fo=O("TRIM",!0),Po=O("POSITION",!0),Ao=O("TIMESTAMP",!0),Lo=O("DATE",!0),Ro=O("TIME",!0),Uo=O("LEADING",!0),Vo=O("TRAILING",!0),ko=O("BOTH",!0),zo=O("CAST",!0),Ho=O("AS",!0),$o=O("INTEGER",!0),qo=O("INT",!0),Zo=O("SMALLINT",!0),Yo=O("FLOAT",!0),jo=O("REAL",!0),Wo=O("VARCHAR",!0),Jo=O("TO",!0),Qo=O("INTERVAL",!0),Bo=O("YEAR",!0),Go=O("TIMEZONE_HOUR",!0),Ko=O("TIMEZONE_MINUTE",!0),Xo=O("MONTH",!0),ei=O("DAY",!0),ti=O("HOUR",!0),ni=O("MINUTE",!0),ri=O("SECOND",!0),oi=O("DOW",!0),ii=O("DOY",!0),ui=O("WEEK",!0),ai=O("CASE",!0),li=O("END",!0),si=O("WHEN",!0),ci=O("THEN",!0),fi=O("ELSE",!0),di=O(",",!1),pi=O("(",!1),mi=O(")",!1),hi=Q([" ","	",`
`,"\r"],!1,!1,!1),Et=O("`",!1),xt=Q(["`"],!0,!1,!1);function vi(e){return{type:"expression-list",location:g(),value:e}}function Ct(e,n,i){return{op:n,expr:i,location:g()}}function wi(e,n){return we(e,n)}function Dt(e,n,i){return{op:n,expr:i,location:g()}}function Ii(e,n){return we(e,n)}function gi(e){return ps("NOT",e,g())}function yi(e,n){return n==""||n==null||n==null?e:n.type=="arithmetic"?we(e,n.tail):vn(n.op,e,n.right,n.escape,g())}function bt(e,n){return{op:e,expr:n,location:g()}}function Ti(e){return{type:"arithmetic",tail:e}}function Oi(e,n){return{op:e+"NOT",right:n}}function Ni(e,n){return{op:e,right:n}}function Si(e,n,i){return B(g(),n,i)}function Ei(e,n){return{op:"NOT"+e,right:n}}function xi(e,n,i){return B(g(),n,i)}function Ci(e,n){return{op:e,right:n}}function Di(e){return e[0]+" "+e[2]}function bi(e){return e[0]+" "+e[2]}function Mi(e,n,i){return{op:e,right:n,escape:i.value}}function _i(e,n){return{op:e,right:n,escape:""}}function Fi(e,n){return{op:e,right:n}}function Pi(e,n){return{op:e,right:n}}function Mt(e,n,i){return{op:n,expr:i,location:g()}}function Ai(e,n){return we(e,n)}function _t(e,n,i){return{op:n,expr:i,location:g()}}function Li(e,n){return we(e,n)}function Ri(e){return e.paren=!0,e}function Ui(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:g(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:g(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:g(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:g()}:{type:"column-reference",location:g(),table:"",column:e}}function Vi(e){return{type:"column-reference",location:g(),table:"",column:e,delimited:!0}}function ki(e,n){return e+n.join("")}function zi(e,n){return e+n.join("")}function Hi(e){return e.join("")}function $i(){return'"'}function qi(e){return{type:"parameter",location:g(),value:e[1]}}function Zi(e,n){return B(g(),e,n)}function Yi(e,n){return B(g(),e,n)}function ji(e){return{type:"function",location:g(),name:"extract",args:e}}function Wi(e,n,i){return B(g(),e,n,...i?[i]:[])}function Ji(e,n,i){return B(g(),e,n,i)}function Qi(e){return{type:"function",location:g(),name:"substring",args:e}}function Bi(e,n){return B(g(),e,n)}function Gi(e,n){return B(g(),e,n)}function Ki(e){return{type:"function",location:g(),name:"cast",args:e}}function Xi(){return{type:"data-type",location:g(),value:{type:"integer"}}}function eu(){return{type:"data-type",location:g(),value:{type:"smallint"}}}function tu(){return{type:"data-type",location:g(),value:{type:"float"}}}function nu(){return{type:"data-type",location:g(),value:{type:"real"}}}function ru(){return{type:"data-type",location:g(),value:{type:"date"}}}function ou(){return{type:"data-type",location:g(),value:{type:"timestamp"}}}function iu(){return{type:"data-type",location:g(),value:{type:"time"}}}function uu(e){return{type:"data-type",location:g(),value:{type:"varchar",size:parseInt(e)}}}function au(e,n,i){return B(g(),e,n,i)}function lu(e,n){return B(g(),e,n)}function su(e){return{type:"function",location:g(),name:"trim",args:e}}function cu(e){return{type:"string",location:g(),value:e??"BOTH"}}function fu(e,n){return B(g(),e,n)}function du(e,n){return B(g(),e,n)}function pu(e){return{type:"function",location:g(),name:"position",args:e}}function mu(e,n){return{type:"function",location:g(),name:e,args:n}}function hu(e){return{type:"string",location:g(),value:e}}function vu(e){return e.type==="string"&&ms(e.value),{type:"timestamp",location:g(),value:e.value}}function wu(e){return e.type==="string"&&hs(e.value),{type:"time",location:g(),value:e.value}}function Iu(e,n,i){return{type:"interval",location:g(),value:n,qualifier:i,op:e}}function gu(e,n){return{type:"interval",location:g(),value:e,qualifier:n,op:""}}function yu(e,n){return{type:"interval-qualifier",location:g(),start:e,end:n}}function Tu(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Ou(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Nu(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Su(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function Eu(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function xu(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function Cu(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Du(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function bu(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function Mu(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function _u(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function Fu(){return{type:"string",location:g(),value:"day"}}function Pu(){return{type:"string",location:g(),value:"hour"}}function Au(){return{type:"string",location:g(),value:"minute"}}function Lu(){return{type:"string",location:g(),value:"month"}}function Ru(){return{type:"string",location:g(),value:"year"}}function Uu(e){return parseFloat(e)}function Vu(e){return parseFloat(e)}function ku(e){return e.type==="string"&&vs(e.value),{type:"date",location:g(),value:e.value}}function zu(){return{type:"null",location:g(),value:null}}function Hu(){return{type:"boolean",location:g(),value:!0}}function $u(){return{type:"boolean",location:g(),value:!1}}function Ft(){return"'"}function qu(e){return{type:"string",location:g(),value:e.join("")}}function Zu(e,n){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:null,elseLocation:null}}function Yu(e,n,i){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:i.value,elseLocation:i.location}}function ju(e){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:null,elseLocation:null}}function Wu(e,n){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:n.value,elseLocation:n.location}}function Ju(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Qu(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Bu(e){return{type:"else-clause",location:g(),value:e}}function Gu(e){return{type:"number",location:g(),value:e}}function Ku(e,n,i){return parseFloat(e+n+i)}function Xu(e,n){return parseFloat(e+n)}function ea(e,n){return parseFloat(e+n)}function ta(e){return parseFloat(e)}function na(e,n){return e[0]+n}function ra(e){return"."+(e??"")}function oa(e,n){return e+n}function ia(e){return e.join("")}function ua(e,n){return"e"+(n===null?"":n)}function aa(){return"IN"}function la(){return"IS"}function sa(){return"LIKE"}function ca(){return"ESCAPE"}function fa(){return"NOT"}function da(){return"AND"}function pa(){return"OR"}function ma(){return"BETWEEN"}function ha(){return"FROM"}function va(){return"FOR"}function wa(){return"SUBSTRING"}function Ia(){return"EXTRACT"}function ga(){return"TRIM"}function ya(){return"POSITION"}function Ta(){return"TIMESTAMP"}function Oa(){return"DATE"}function Na(){return"TIME"}function Sa(){return"LEADING"}function Ea(){return"TRAILING"}function xa(){return"BOTH"}function Ca(){return"CAST"}function Da(){return"AS"}function ba(){return"INTEGER"}function Ma(){return"INT"}function _a(){return"SMALLINT"}function Fa(){return"FLOAT"}function Pa(){return"REAL"}function Aa(){return"VARCHAR"}function La(){return"TO"}function Ra(){return"INTERVAL"}function Ua(){return"YEAR"}function Va(){return"TIMEZONE_HOUR"}function ka(){return"TIMEZONE_MINUTE"}function za(){return"MONTH"}function Ha(){return"DAY"}function $a(){return"HOUR"}function qa(){return"MINUTE"}function Za(){return"SECOND"}function Ya(){return"DOW"}function ja(){return"DOY"}function Wa(){return"WEEK"}function Ja(){return"CASE"}function Qa(){return"END"}function Ba(){return"WHEN"}function Ga(){return"THEN"}function Ka(){return"ELSE"}function Xa(e){return e.join("")}let r=0|o.peg$currPos,d=r;const fe=[{line:1,column:1}];let me,X=r,Ee=o.peg$maxFailExpected||[],c=0|o.peg$silentFails;if(o.startRule){if(!(o.startRule in f))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');v=f[o.startRule]}function g(){return xe(d,r)}function qe(e,n){throw nl(e,n=n!==void 0?n:xe(d,r))}function el(e=r){const n=u.codePointAt(e);return n===void 0?"":String.fromCodePoint(n)}function O(e,n){return{type:"literal",text:e,ignoreCase:n}}function Q(e,n,i,a){return{type:"class",parts:e,inverted:n,ignoreCase:i,unicode:a}}function tl(){return{type:"end"}}function Pt(e){let n,i=fe[e];if(i)return i;if(e>=fe.length)n=fe.length-1;else for(n=e;!fe[--n];);for(i=fe[n],i={line:i.line,column:i.column};n<e;)u.charCodeAt(n)===10?(i.line++,i.column=1):i.column++,n++;return fe[e]=i,i}function xe(e,n,i){const a=Pt(e),s=Pt(n);return{source:l,start:{offset:e,line:a.line,column:a.column},end:{offset:n,line:s.line,column:s.column}}}function I(e){r<X||(r>X&&(X=r,Ee=[]),Ee.push(e))}function nl(e,n){return new it(e,null,null,n)}function rl(e,n,i){return new it(it.buildMessage(e,n),e,n,i)}function At(){let e,n;return e=r,m(),n=M(),n!==t?(m(),d=e,e=n):(r=e,e=t),e}function Lt(){let e,n,i,a,s,w,N,x;if(e=r,n=k(),n!==t){for(m(),i=[],a=M();a!==t;)i.push(a),a=r,s=r,w=m(),N=oe(),N!==t?(x=m(),w=[w,N,x],s=w):(r=s,s=t),s!==t?(s=M(),s===t?(r=a,a=t):a=s):a=s;a=m(),s=z(),s!==t?(d=e,e=vi(i)):(r=e,e=t)}else r=e,e=t;return e}function M(){let e,n,i,a,s,w;if(e=r,n=Ze(),n!==t){for(i=[],a=r,m(),s=en(),s!==t?(m(),w=Ze(),w!==t?(d=a,a=Ct(n,s,w)):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,m(),s=en(),s!==t?(m(),w=Ze(),w!==t?(d=a,a=Ct(n,s,w)):(r=a,a=t)):(r=a,a=t);d=e,e=wi(n,i)}else r=e,e=t;return e}function Ze(){let e,n,i,a,s,w;if(e=r,n=Ce(),n!==t){for(i=[],a=r,m(),s=Ae(),s!==t?(m(),w=Ce(),w!==t?(d=a,a=Dt(n,s,w)):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,m(),s=Ae(),s!==t?(m(),w=Ce(),w!==t?(d=a,a=Dt(n,s,w)):(r=a,a=t)):(r=a,a=t);d=e,e=Ii(n,i)}else r=e,e=t;return e}function Ce(){let e,n,i,a,s;return e=r,n=ve(),n===t&&(n=r,u.charCodeAt(r)===33?(i=y,r++):(i=t,c===0&&I(Kr)),i!==t?(a=r,c++,u.charCodeAt(r)===61?(s=T,r++):(s=t,c===0&&I(Xr)),c--,s===t?a=void 0:(r=a,a=t),a!==t?(i=[i,a],n=i):(r=n,n=t)):(r=n,n=t)),n!==t?(i=m(),a=Ce(),a!==t?(d=e,e=gi(a)):(r=e,e=t)):(r=e,e=t),e===t&&(e=ol()),e}function ol(){let e,n,i,a;return e=r,n=ne(),n!==t?(i=r,m(),a=il(),a!==t?i=a:(r=i,i=t),i===t&&(i=null),d=e,e=yi(n,i)):(r=e,e=t),e}function il(){let e;return e=ul(),e===t&&(e=cl(),e===t&&(e=ll(),e===t&&(e=al(),e===t&&(e=sl())))),e}function ul(){let e,n,i,a,s;if(e=r,n=[],i=r,m(),a=Rt(),a!==t?(m(),s=ne(),s!==t?(d=i,i=bt(a,s)):(r=i,i=t)):(r=i,i=t),i!==t)for(;i!==t;)n.push(i),i=r,m(),a=Rt(),a!==t?(m(),s=ne(),s!==t?(d=i,i=bt(a,s)):(r=i,i=t)):(r=i,i=t);else n=t;return n!==t&&(d=e,n=Ti(n)),e=n,e}function Rt(){let e;return u.substr(r,2)===S?(e=S,r+=2):(e=t,c===0&&I(eo)),e===t&&(u.charCodeAt(r)===62?(e=F,r++):(e=t,c===0&&I(to)),e===t&&(u.substr(r,2)===b?(e=b,r+=2):(e=t,c===0&&I(no)),e===t&&(u.substr(r,2)===Z?(e=Z,r+=2):(e=t,c===0&&I(ro)),e===t&&(e=u.charAt(r),Zr.test(e)?r++:(e=t,c===0&&I(oo)),e===t&&(u.substr(r,2)===C?(e=C,r+=2):(e=t,c===0&&I(io))))))),e}function al(){let e,n,i,a;return e=r,n=Kt(),n!==t?(m(),i=ve(),i!==t?(m(),a=ne(),a!==t?(d=e,e=Oi(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Kt(),n!==t?(m(),i=ne(),i!==t?(d=e,e=Ni(n,i)):(r=e,e=t)):(r=e,e=t)),e}function ll(){let e,n,i,a,s,w,N,x;return e=r,n=ve(),n!==t?(m(),i=tn(),i!==t?(a=m(),s=r,w=ne(),w!==t?(m(),N=Ae(),N!==t?(m(),x=ne(),x!==t?(d=s,s=Si(i,w,x)):(r=s,s=t)):(r=s,s=t)):(r=s,s=t),s!==t?(d=e,e=Ei(i,s)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=tn(),n!==t?(m(),i=r,a=ne(),a!==t?(s=m(),w=Ae(),w!==t?(m(),N=ne(),N!==t?(d=i,i=xi(n,a,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i!==t?(d=e,e=Ci(n,i)):(r=e,e=t)):(r=e,e=t)),e}function Ut(){let e,n,i,a,s;return e=r,n=r,i=ve(),i!==t?(a=m(),s=Xt(),s!==t?(i=[i,a,s],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Di(n)),e=n,e===t&&(e=Xt()),e}function Vt(){let e,n,i,a,s;return e=r,n=r,i=ve(),i!==t?(a=m(),s=Be(),s!==t?(i=[i,a,s],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=bi(n)),e=n,e===t&&(e=Be()),e}function sl(){let e,n,i,a,s;return e=r,n=Ut(),n!==t?(m(),i=ae(),i!==t?(m(),a=ql(),a!==t?(m(),s=Qe(),s!==t?(d=e,e=Mi(n,i,s)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ut(),n!==t?(m(),i=ae(),i!==t?(d=e,e=_i(n,i)):(r=e,e=t)):(r=e,e=t)),e}function cl(){let e,n,i;return e=r,n=Vt(),n!==t?(m(),i=Lt(),i!==t?(d=e,e=Fi(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Vt(),n!==t?(m(),i=Je(),i!==t?(d=e,e=Pi(n,i)):(r=e,e=t)):(r=e,e=t)),e}function ne(){let e,n,i,a,s,w;if(e=r,n=Ye(),n!==t){for(i=[],a=r,m(),s=kt(),s!==t?(m(),w=Ye(),w!==t?(d=a,a=Mt(n,s,w)):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,m(),s=kt(),s!==t?(m(),w=Ye(),w!==t?(d=a,a=Mt(n,s,w)):(r=a,a=t)):(r=a,a=t);d=e,e=Ai(n,i)}else r=e,e=t;return e}function kt(){let e;return e=u.charAt(r),Ne.test(e)?r++:(e=t,c===0&&I(Se)),e===t&&(u.substr(r,2)===D?(e=D,r+=2):(e=t,c===0&&I(uo))),e}function Ye(){let e,n,i,a,s,w;if(e=r,n=je(),n!==t){for(i=[],a=r,m(),s=zt(),s!==t?(m(),w=je(),w!==t?(d=a,a=_t(n,s,w)):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,m(),s=zt(),s!==t?(m(),w=je(),w!==t?(d=a,a=_t(n,s,w)):(r=a,a=t)):(r=a,a=t);d=e,e=Li(n,i)}else r=e,e=t;return e}function zt(){let e;return e=u.charAt(r),Yr.test(e)?r++:(e=t,c===0&&I(ao)),e}function je(){let e,n,i,a;return e=Sl(),e===t&&(e=Il(),e===t&&(e=gl(),e===t&&(e=Tl(),e===t&&(e=Ol(),e===t&&(e=yl(),e===t&&(e=Nl(),e===t&&(e=Al(),e===t&&(e=fl(),e===t&&(e=Je(),e===t&&(e=r,n=k(),n!==t?(m(),i=M(),i!==t?(m(),a=z(),a!==t?(d=e,e=Ri(i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t))))))))))),e}function fl(){let e,n;return e=r,n=dl(),n!==t&&(d=e,n=Ui(n)),e=n,e===t&&(e=r,n=ml(),n!==t&&(d=e,n=Vi(n)),e=n),e}function dl(){let e,n;return e=r,n=pl(),n!==t&&(d=e,n=n),e=n,e}function pl(){let e,n,i,a;if(e=r,n=We(),n!==t){for(i=[],a=$t();a!==t;)i.push(a),a=$t();d=e,e=ki(n,i)}else r=e,e=t;return e}function Ht(){let e,n,i,a;if(e=r,n=We(),n!==t){for(i=[],a=E();a!==t;)i.push(a),a=E();d=e,e=zi(n,i)}else r=e,e=t;return e}function We(){let e;return e=u.charAt(r),jr.test(e)?r++:(e=t,c===0&&I(lo)),e}function E(){let e;return e=u.charAt(r),Wr.test(e)?r++:(e=t,c===0&&I(so)),e}function $t(){let e;return e=u.charAt(r),It.test(e)?r++:(e=t,c===0&&I(Tt)),e}function ml(){let e,n,i,a;return e=r,n=De(),n!==t?(i=hl(),a=De(),a!==t?(d=e,e=i):(r=e,e=t)):(r=e,e=t),e}function hl(){let e,n,i;for(e=r,n=[],i=qt();i!==t;)n.push(i),i=qt();return d=e,n=Hi(n),e=n,e}function qt(){let e;return e=wl(),e===t&&(e=vl()),e}function vl(){let e,n,i;return e=r,n=De(),n!==t?(i=De(),i!==t?(d=e,e=$i()):(r=e,e=t)):(r=e,e=t),e}function wl(){let e;return e=u.charAt(r),It.test(e)?r++:(e=t,c===0&&I(Tt)),e}function De(){let e;return e=u.charAt(r),Jr.test(e)?r++:(e=t,c===0&&I(co)),e}function Je(){let e,n,i,a;return e=r,n=r,u.charCodeAt(r)===64?(i=Y,r++):(i=t,c===0&&I(fo)),i!==t?(a=Ht(),a!==t?(i=[i,a],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=qi(n)),e=n,e}function Il(){let e,n,i,a,s,w,N,x;return e=r,n=nn(),n!==t?(m(),i=r,a=k(),a!==t?(m(),s=jt(),s!==t?(m(),w=Ge(),w!==t?(m(),N=M(),N!==t?(m(),x=z(),x!==t?(d=i,i=Zi(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,a=k(),a!==t?(m(),s=jt(),s!==t?(m(),w=oe(),w!==t?(m(),N=M(),N!==t?(m(),x=z(),x!==t?(d=i,i=Yi(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=ji(i)):(r=e,e=t)):(r=e,e=t),e}function gl(){let e,n,i,a,s,w,N,x,ie,Ue,Ie;return e=r,n=Yl(),n!==t?(m(),i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=Ge(),w!==t?(m(),N=M(),N!==t?(m(),x=r,ie=Zl(),ie!==t?(Ue=m(),Ie=M(),Ie!==t?(m(),x=Ie):(r=x,x=t)):(r=x,x=t),x===t&&(x=null),ie=z(),ie!==t?(d=i,i=Wi(s,N,x)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=oe(),w!==t?(m(),N=M(),N!==t?(m(),x=oe(),x!==t?(ie=m(),Ue=M(),Ue!==t?(Ie=z(),Ie!==t?(d=i,i=Ji(s,N,Ue)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=Qi(i)):(r=e,e=t)):(r=e,e=t),e}function yl(){let e,n,i,a,s,w,N,x;return e=r,n=Gl(),n!==t?(m(),i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=Kl(),w!==t?(m(),N=Zt(),N!==t?(m(),x=z(),x!==t?(d=i,i=Bi(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=oe(),w!==t?(m(),N=Zt(),N!==t?(m(),x=z(),x!==t?(d=i,i=Gi(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=Ki(i)):(r=e,e=t)):(r=e,e=t),e}function Zt(){let e,n,i,a,s;return e=r,n=Xl(),n===t&&(n=es()),n!==t&&(d=e,n=Xi()),e=n,e===t&&(e=r,n=ts(),n!==t&&(d=e,n=eu()),e=n,e===t&&(e=r,n=ns(),n!==t&&(d=e,n=tu()),e=n,e===t&&(e=r,n=rs(),n!==t&&(d=e,n=nu()),e=n,e===t&&(e=r,n=on(),n!==t&&(d=e,n=ru()),e=n,e===t&&(e=r,n=rn(),n!==t&&(d=e,n=ou()),e=n,e===t&&(e=r,n=un(),n!==t&&(d=e,n=iu()),e=n,e===t&&(e=r,n=os(),n!==t?(m(),i=k(),i!==t?(m(),a=le(),a!==t?(m(),s=z(),s!==t?(d=e,e=uu(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))))))),e}function Tl(){let e,n,i,a,s,w,N,x,ie;return e=r,n=jl(),n!==t?(m(),i=r,a=k(),a!==t?(m(),s=Yt(),m(),w=M(),w!==t?(m(),N=Ge(),N!==t?(m(),x=M(),x!==t?(m(),ie=z(),ie!==t?(d=i,i=au(s,w,x)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,a=k(),a!==t?(m(),s=Yt(),m(),w=M(),w!==t?(m(),N=z(),N!==t?(d=i,i=lu(s,w)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=su(i)):(r=e,e=t)):(r=e,e=t),e}function Yt(){let e,n;return e=r,n=Jl(),n===t&&(n=Ql(),n===t&&(n=Bl())),n===t&&(n=null),d=e,n=cu(n),e=n,e}function Ol(){let e,n,i,a,s,w,N,x;return e=r,n=Wl(),n!==t?(m(),i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=Be(),w!==t?(m(),N=M(),N!==t?(m(),x=z(),x!==t?(d=i,i=fu(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,a=k(),a!==t?(m(),s=M(),s!==t?(m(),w=oe(),w!==t?(m(),N=M(),N!==t?(m(),x=z(),x!==t?(d=i,i=du(s,N)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=pu(i)):(r=e,e=t)):(r=e,e=t),e}function Nl(){let e,n,i,a;return e=r,n=r,c++,i=nn(),c--,i===t?n=void 0:(r=n,n=t),n!==t?(i=ds(),i!==t?(m(),a=Lt(),a!==t?(d=e,e=mu(i,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function jt(){let e,n;return e=r,n=ln(),n===t&&(n=sn(),n===t&&(n=cn(),n===t&&(n=fn(),n===t&&(n=dn(),n===t&&(n=se(),n===t&&(n=us(),n===t&&(n=as(),n===t&&(n=ls(),n===t&&(n=ss(),n===t&&(n=cs())))))))))),n!==t&&(d=e,n=hu(n)),e=n,e}function Sl(){let e;return e=Qe(),e===t&&(e=Ul(),e===t&&(e=Pl(),e===t&&(e=Fl(),e===t&&(e=_l(),e===t&&(e=El(),e===t&&(e=Cl(),e===t&&(e=xl()))))))),e}function El(){let e,n,i;return e=r,n=rn(),n!==t?(m(),i=ae(),i!==t?(d=e,e=vu(i)):(r=e,e=t)):(r=e,e=t),e}function xl(){let e,n,i;return e=r,n=un(),n!==t?(m(),i=ae(),i!==t?(d=e,e=wu(i)):(r=e,e=t)):(r=e,e=t),e}function Cl(){let e,n,i,a,s;return e=r,n=an(),n!==t?(m(),i=u.charAt(r),Ne.test(i)?r++:(i=t,c===0&&I(Se)),i!==t?(m(),a=ae(),a!==t?(m(),s=Wt(),s!==t?(d=e,e=Iu(i,a,s)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=an(),n!==t?(m(),i=ae(),i!==t?(m(),a=Wt(),a!==t?(d=e,e=gu(i,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Wt(){let e,n,i,a;return e=r,n=Dl(),n!==t?(m(),i=is(),i!==t?(m(),a=bl(),a!==t?(d=e,e=yu(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=Ml()),e}function Dl(){let e,n,i,a,s;return e=r,n=he(),n!==t?(m(),i=k(),i!==t?(m(),a=Me(),a!==t?(m(),s=z(),s!==t?(d=e,e=Tu(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Ou(n)),e=n),e}function bl(){let e,n,i,a,s,w,N;return e=r,n=he(),n!==t&&(d=e,n=Nu(n)),e=n,e===t&&(e=r,n=se(),n!==t?(m(),i=k(),i!==t?(m(),a=Me(),a!==t?(m(),s=oe(),s!==t?(m(),w=be(),w!==t?(m(),N=z(),N!==t?(d=e,e=Su(a,w)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=se(),n!==t?(m(),i=k(),i!==t?(m(),a=Me(),a!==t?(m(),s=z(),s!==t?(d=e,e=Eu(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=se(),n!==t&&(d=e,n=xu()),e=n))),e}function Ml(){let e,n,i,a,s,w,N;return e=r,n=he(),n!==t?(m(),i=k(),i!==t?(m(),a=be(),a!==t?(m(),s=z(),s!==t?(d=e,e=Cu(n,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Du(n)),e=n,e===t&&(e=r,n=se(),n!==t?(m(),i=k(),i!==t?(m(),a=Me(),a!==t?(m(),s=oe(),s!==t?(m(),w=be(),w!==t?(m(),N=z(),N!==t?(d=e,e=bu(a,w)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=se(),n!==t?(m(),i=k(),i!==t?(m(),a=be(),a!==t?(m(),s=z(),s!==t?(d=e,e=Mu(a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=se(),n!==t&&(d=e,n=_u()),e=n)))),e}function he(){let e,n;return e=r,n=cn(),n!==t&&(d=e,n=Fu()),e=n,e===t&&(e=r,n=fn(),n!==t&&(d=e,n=Pu()),e=n,e===t&&(e=r,n=dn(),n!==t&&(d=e,n=Au()),e=n,e===t&&(e=r,n=sn(),n!==t&&(d=e,n=Lu()),e=n,e===t&&(e=r,n=ln(),n!==t&&(d=e,n=Ru()),e=n)))),e}function be(){let e,n;return e=r,n=le(),n!==t&&(d=e,n=Uu(n)),e=n,e}function Me(){let e,n;return e=r,n=le(),n!==t&&(d=e,n=Vu(n)),e=n,e}function _l(){let e,n,i;return e=r,n=on(),n!==t?(m(),i=ae(),i!==t?(d=e,e=ku(i)):(r=e,e=t)):(r=e,e=t),e}function Fl(){let e,n;return e=r,n=zl(),n!==t&&(d=e,n=zu()),e=n,e}function Pl(){let e,n;return e=r,n=Hl(),n!==t&&(d=e,n=Hu()),e=n,e===t&&(e=r,n=$l(),n!==t&&(d=e,n=$u()),e=n),e}function ae(){let e;return e=Qe(),e===t&&(e=Je()),e}function Qe(){let e,n,i,a,s;if(e=r,u.charCodeAt(r)===39?(n=re,r++):(n=t,c===0&&I(Ot)),n===t&&(u.substr(r,2)===vt?(n=vt,r+=2):(n=t,c===0&&I(po))),n!==t){for(i=[],a=r,u.substr(r,2)===Oe?(s=Oe,r+=2):(s=t,c===0&&I(Nt)),s!==t&&(d=a,s=Ft()),a=s,a===t&&(a=u.charAt(r),gt.test(a)?r++:(a=t,c===0&&I(St)));a!==t;)i.push(a),a=r,u.substr(r,2)===Oe?(s=Oe,r+=2):(s=t,c===0&&I(Nt)),s!==t&&(d=a,s=Ft()),a=s,a===t&&(a=u.charAt(r),gt.test(a)?r++:(a=t,c===0&&I(St)));u.charCodeAt(r)===39?(a=re,r++):(a=t,c===0&&I(Ot)),a!==t?(d=e,e=qu(i)):(r=e,e=t)}else r=e,e=t;return e}function Al(){let e;return e=Ll(),e===t&&(e=Rl()),e}function Ll(){let e,n,i,a,s,w,N;if(e=r,n=Le(),n!==t)if(m(),i=M(),i!==t){for(m(),a=[],s=r,w=Fe(),w!==t?(N=m(),s=w):(r=s,s=t);s!==t;)a.push(s),s=r,w=Fe(),w!==t?(N=m(),s=w):(r=s,s=t);s=Re(),s!==t?(d=e,e=Zu(i,a)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t)if(m(),i=M(),i!==t){for(m(),a=[],s=r,w=Fe(),w!==t?(N=m(),s=w):(r=s,s=t);s!==t;)a.push(s),s=r,w=Fe(),w!==t?(N=m(),s=w):(r=s,s=t);s=Jt(),s!==t?(w=m(),N=Re(),N!==t?(d=e,e=Yu(i,a,s)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;return e}function Rl(){let e,n,i,a,s,w;if(e=r,n=Le(),n!==t){for(m(),i=[],a=r,s=_e(),s!==t?(w=m(),a=s):(r=a,a=t);a!==t;)i.push(a),a=r,s=_e(),s!==t?(w=m(),a=s):(r=a,a=t);a=Re(),a!==t?(d=e,e=ju(i)):(r=e,e=t)}else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t){for(m(),i=[],a=r,s=_e(),s!==t?(w=m(),a=s):(r=a,a=t);a!==t;)i.push(a),a=r,s=_e(),s!==t?(w=m(),a=s):(r=a,a=t);a=Jt(),a!==t?(s=m(),w=Re(),w!==t?(d=e,e=Wu(i,a)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function _e(){let e,n,i,a,s;return e=r,n=pn(),n!==t?(m(),i=M(),i!==t?(m(),a=mn(),a!==t?(m(),s=M(),s!==t?(d=e,e=Ju(i,s)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Fe(){let e,n,i,a,s;return e=r,n=pn(),n!==t?(m(),i=M(),i!==t?(m(),a=mn(),a!==t?(m(),s=M(),s!==t?(d=e,e=Qu(i,s)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Jt(){let e,n,i;return e=r,n=fs(),n!==t?(m(),i=M(),i!==t?(d=e,e=Bu(i)):(r=e,e=t)):(r=e,e=t),e}function Ul(){let e,n,i,a;return e=r,n=Vl(),n!==t?(i=r,c++,a=We(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Gu(n)):(r=e,e=t)):(r=e,e=t),e}function Vl(){let e,n,i,a;return e=r,n=Pe(),n!==t?(i=Qt(),i!==t?(a=Bt(),a!==t?(d=e,e=Ku(n,i,a)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Pe(),n!==t?(i=Qt(),i!==t?(d=e,e=Xu(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Pe(),n!==t?(i=Bt(),i!==t?(d=e,e=ea(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Pe(),n!==t&&(d=e,n=ta(n)),e=n))),e}function Pe(){let e,n,i;return e=le(),e===t&&(e=r,n=u.charAt(r),Ne.test(n)?r++:(n=t,c===0&&I(Se)),n!==t?(i=le(),i!==t?(d=e,e=na(n,i)):(r=e,e=t)):(r=e,e=t)),e}function Qt(){let e,n,i;return e=r,u.charCodeAt(r)===46?(n=Yn,r++):(n=t,c===0&&I(mo)),n!==t?(i=le(),i===t&&(i=null),d=e,e=ra(i)):(r=e,e=t),e}function Bt(){let e,n,i;return e=r,n=kl(),n!==t?(i=le(),i!==t?(d=e,e=oa(n,i)):(r=e,e=t)):(r=e,e=t),e}function le(){let e,n,i;if(e=r,n=[],i=Gt(),i!==t)for(;i!==t;)n.push(i),i=Gt();else n=t;return n!==t&&(d=e,n=ia(n)),e=n,e}function Gt(){let e;return e=u.charAt(r),Qr.test(e)?r++:(e=t,c===0&&I(ho)),e}function kl(){let e,n,i;return e=r,n=u.charAt(r),Br.test(n)?r++:(n=t,c===0&&I(vo)),n!==t?(i=u.charAt(r),Ne.test(i)?r++:(i=t,c===0&&I(Se)),i===t&&(i=null),d=e,e=ua(n,i)):(r=e,e=t),e}function zl(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===jn?r+=4:(n=t,c===0&&I(wo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function Hl(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Wn?r+=4:(n=t,c===0&&I(Io)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function $l(){let e,n,i,a;return e=r,n=u.substr(r,5),n.toLowerCase()===Jn?r+=5:(n=t,c===0&&I(go)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function Be(){let e,n,i,a;return e=r,n=u.substr(r,2),n.toLowerCase()===Qn?r+=2:(n=t,c===0&&I(yo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=aa()):(r=e,e=t)):(r=e,e=t),e}function Kt(){let e,n,i,a;return e=r,n=u.substr(r,2),n.toLowerCase()===Bn?r+=2:(n=t,c===0&&I(To)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=la()):(r=e,e=t)):(r=e,e=t),e}function Xt(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Gn?r+=4:(n=t,c===0&&I(Oo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=sa()):(r=e,e=t)):(r=e,e=t),e}function ql(){let e,n,i,a;return e=r,n=u.substr(r,6),n.toLowerCase()===Kn?r+=6:(n=t,c===0&&I(No)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ca()):(r=e,e=t)):(r=e,e=t),e}function ve(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===Xn?r+=3:(n=t,c===0&&I(So)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=fa()):(r=e,e=t)):(r=e,e=t),e}function Ae(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===er?r+=3:(n=t,c===0&&I(Eo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=da()):(r=e,e=t)):(r=e,e=t),e}function en(){let e,n,i,a;return e=r,n=u.substr(r,2),n.toLowerCase()===tr?r+=2:(n=t,c===0&&I(xo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=pa()):(r=e,e=t)):(r=e,e=t),e}function tn(){let e,n,i,a;return e=r,n=u.substr(r,7),n.toLowerCase()===nr?r+=7:(n=t,c===0&&I(Co)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ma()):(r=e,e=t)):(r=e,e=t),e}function Ge(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===rr?r+=4:(n=t,c===0&&I(Do)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ha()):(r=e,e=t)):(r=e,e=t),e}function Zl(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===or?r+=3:(n=t,c===0&&I(bo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=va()):(r=e,e=t)):(r=e,e=t),e}function Yl(){let e,n,i,a;return e=r,n=u.substr(r,9),n.toLowerCase()===ir?r+=9:(n=t,c===0&&I(Mo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=wa()):(r=e,e=t)):(r=e,e=t),e}function nn(){let e,n,i,a;return e=r,n=u.substr(r,7),n.toLowerCase()===ur?r+=7:(n=t,c===0&&I(_o)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ia()):(r=e,e=t)):(r=e,e=t),e}function jl(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===ar?r+=4:(n=t,c===0&&I(Fo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ga()):(r=e,e=t)):(r=e,e=t),e}function Wl(){let e,n,i,a;return e=r,n=u.substr(r,8),n.toLowerCase()===lr?r+=8:(n=t,c===0&&I(Po)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ya()):(r=e,e=t)):(r=e,e=t),e}function rn(){let e,n,i,a;return e=r,n=u.substr(r,9),n.toLowerCase()===sr?r+=9:(n=t,c===0&&I(Ao)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ta()):(r=e,e=t)):(r=e,e=t),e}function on(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===cr?r+=4:(n=t,c===0&&I(Lo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Oa()):(r=e,e=t)):(r=e,e=t),e}function un(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===fr?r+=4:(n=t,c===0&&I(Ro)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Na()):(r=e,e=t)):(r=e,e=t),e}function Jl(){let e,n,i,a;return e=r,n=u.substr(r,7),n.toLowerCase()===dr?r+=7:(n=t,c===0&&I(Uo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Sa()):(r=e,e=t)):(r=e,e=t),e}function Ql(){let e,n,i,a;return e=r,n=u.substr(r,8),n.toLowerCase()===pr?r+=8:(n=t,c===0&&I(Vo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ea()):(r=e,e=t)):(r=e,e=t),e}function Bl(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===mr?r+=4:(n=t,c===0&&I(ko)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=xa()):(r=e,e=t)):(r=e,e=t),e}function Gl(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===hr?r+=4:(n=t,c===0&&I(zo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ca()):(r=e,e=t)):(r=e,e=t),e}function Kl(){let e,n,i,a;return e=r,n=u.substr(r,2),n.toLowerCase()===vr?r+=2:(n=t,c===0&&I(Ho)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Da()):(r=e,e=t)):(r=e,e=t),e}function Xl(){let e,n,i,a;return e=r,n=u.substr(r,7),n.toLowerCase()===wr?r+=7:(n=t,c===0&&I($o)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ba()):(r=e,e=t)):(r=e,e=t),e}function es(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===Ir?r+=3:(n=t,c===0&&I(qo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ma()):(r=e,e=t)):(r=e,e=t),e}function ts(){let e,n,i,a;return e=r,n=u.substr(r,8),n.toLowerCase()===gr?r+=8:(n=t,c===0&&I(Zo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=_a()):(r=e,e=t)):(r=e,e=t),e}function ns(){let e,n,i,a;return e=r,n=u.substr(r,5),n.toLowerCase()===yr?r+=5:(n=t,c===0&&I(Yo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Fa()):(r=e,e=t)):(r=e,e=t),e}function rs(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Tr?r+=4:(n=t,c===0&&I(jo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Pa()):(r=e,e=t)):(r=e,e=t),e}function os(){let e,n,i,a;return e=r,n=u.substr(r,7),n.toLowerCase()===Or?r+=7:(n=t,c===0&&I(Wo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Aa()):(r=e,e=t)):(r=e,e=t),e}function is(){let e,n,i,a;return e=r,n=u.substr(r,2),n.toLowerCase()===Nr?r+=2:(n=t,c===0&&I(Jo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=La()):(r=e,e=t)):(r=e,e=t),e}function an(){let e,n,i,a;return e=r,n=u.substr(r,8),n.toLowerCase()===Sr?r+=8:(n=t,c===0&&I(Qo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ra()):(r=e,e=t)):(r=e,e=t),e}function ln(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Er?r+=4:(n=t,c===0&&I(Bo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ua()):(r=e,e=t)):(r=e,e=t),e}function us(){let e,n,i,a;return e=r,n=u.substr(r,13),n.toLowerCase()===xr?r+=13:(n=t,c===0&&I(Go)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Va()):(r=e,e=t)):(r=e,e=t),e}function as(){let e,n,i,a;return e=r,n=u.substr(r,15),n.toLowerCase()===Cr?r+=15:(n=t,c===0&&I(Ko)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ka()):(r=e,e=t)):(r=e,e=t),e}function sn(){let e,n,i,a;return e=r,n=u.substr(r,5),n.toLowerCase()===Dr?r+=5:(n=t,c===0&&I(Xo)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=za()):(r=e,e=t)):(r=e,e=t),e}function cn(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===br?r+=3:(n=t,c===0&&I(ei)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ha()):(r=e,e=t)):(r=e,e=t),e}function fn(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Mr?r+=4:(n=t,c===0&&I(ti)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=$a()):(r=e,e=t)):(r=e,e=t),e}function dn(){let e,n,i,a;return e=r,n=u.substr(r,6),n.toLowerCase()===_r?r+=6:(n=t,c===0&&I(ni)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=qa()):(r=e,e=t)):(r=e,e=t),e}function se(){let e,n,i,a;return e=r,n=u.substr(r,6),n.toLowerCase()===Fr?r+=6:(n=t,c===0&&I(ri)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Za()):(r=e,e=t)):(r=e,e=t),e}function ls(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===Pr?r+=3:(n=t,c===0&&I(oi)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ya()):(r=e,e=t)):(r=e,e=t),e}function ss(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===Ar?r+=3:(n=t,c===0&&I(ii)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ja()):(r=e,e=t)):(r=e,e=t),e}function cs(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Lr?r+=4:(n=t,c===0&&I(ui)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Wa()):(r=e,e=t)):(r=e,e=t),e}function Le(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Rr?r+=4:(n=t,c===0&&I(ai)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ja()):(r=e,e=t)):(r=e,e=t),e}function Re(){let e,n,i,a;return e=r,n=u.substr(r,3),n.toLowerCase()===Ur?r+=3:(n=t,c===0&&I(li)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Qa()):(r=e,e=t)):(r=e,e=t),e}function pn(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===Vr?r+=4:(n=t,c===0&&I(si)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ba()):(r=e,e=t)):(r=e,e=t),e}function mn(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===kr?r+=4:(n=t,c===0&&I(ci)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ga()):(r=e,e=t)):(r=e,e=t),e}function fs(){let e,n,i,a;return e=r,n=u.substr(r,4),n.toLowerCase()===zr?r+=4:(n=t,c===0&&I(fi)),n!==t?(i=r,c++,a=E(),c--,a===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ka()):(r=e,e=t)):(r=e,e=t),e}function oe(){let e;return u.charCodeAt(r)===44?(e=Hr,r++):(e=t,c===0&&I(di)),e}function k(){let e;return u.charCodeAt(r)===40?(e=$r,r++):(e=t,c===0&&I(pi)),e}function z(){let e;return u.charCodeAt(r)===41?(e=qr,r++):(e=t,c===0&&I(mi)),e}function m(){let e,n;for(e=[],n=hn();n!==t;)e.push(n),n=hn();return e}function hn(){let e;return e=u.charAt(r),Gr.test(e)?r++:(e=t,c===0&&I(hi)),e}function ds(){let e,n,i,a;if(e=r,n=Ht(),n!==t&&(d=e,n=n),e=n,e===t)if(e=r,u.charCodeAt(r)===96?(n=wt,r++):(n=t,c===0&&I(Et)),n!==t){if(i=[],a=u.charAt(r),yt.test(a)?r++:(a=t,c===0&&I(xt)),a!==t)for(;a!==t;)i.push(a),a=u.charAt(r),yt.test(a)?r++:(a=t,c===0&&I(xt));else i=t;i!==t?(u.charCodeAt(r)===96?(a=wt,r++):(a=t,c===0&&I(Et)),a!==t?(d=e,e=Xa(i)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function ps(e,n,i){return{type:"unary-expression",location:i,operator:e,expr:n}}function vn(e,n,i,a,s){const w={type:"binary-expression",location:s,operator:e,left:n,right:i};return a!==void 0&&(w.escape=a),w}function B(e,...n){return{type:"expression-list",location:e,value:n}}function we(e,n){let i=e;for(const{op:a,expr:s,location:{end:w}}of n)i=vn(a,i,s,void 0,{...i.location,end:w});return i}function ms(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&qe("Timestamp literal is invalid")}function hs(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&qe("Time literal is invalid")}function vs(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&qe("Date literal is invalid")}me=v();const Ke=me!==t&&r===u.length;function wn(){throw me!==t&&r<u.length&&I(tl()),rl(Ee,X<u.length?el(X):null,X<u.length?xe(X,X+1):xe(X,X))}return o.peg$library?{peg$result:me,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:Ee,peg$maxFailPos:X,peg$success:Ke,peg$throw:Ke?void 0:wn}:Ke?me:void wn()}class Yc{static parse(o){return Zc(o)}}function $(u,o){if(u!=null)switch(o(u),u.type){case"when-clause":$(u.operand,o),$(u.value,o);break;case"case-expression":for(const t of u.clauses)$(t,o);u.format==="simple"&&$(u.operand,o),u.else!==null&&$(u.else,o);break;case"expression-list":for(const t of u.value)$(t,o);break;case"unary-expression":$(u.expr,o);break;case"binary-expression":$(u.left,o),$(u.right,o);break;case"function":$(u.args,o);break;case"interval":$(u.value,o),$(u.qualifier,o);break;case"interval-qualifier":$(u.start,o),$(u.end,o)}}const jc=new Set(["current_timestamp","current_date","current_time"]);class Wc{constructor(o){this.staticData=o}makeBool(o){return Vn(o)}featureValue(o,t,l,f){return Zn(o,t,l,f)}equalsNull(o){return o===null}applyLike(o,t,l){return ct(o,t,l)}ensureArray(o){return lt(o)}applyIn(o,t){return st(o,t)}currentTimestamp(o){return Hn(o)}currentDate(o){return $n(o)}currentTime(o){return qn(o)}makeSqlInterval(o,t,l){return V.createFromValueAndQualifier(o,t,l)}convertInterval(o){return V.isInterval(o)?o.valueInMilliseconds():o}compare(o,t,l){return W(t,l,o)}calculate(o,t,l,f){return Un(o,t,l,f)}evaluateTime(o){return $e(o)}evaluateTimestamp(o,t,l){return Te(o,t,l)}evaluateDate(o,t){return dt(o,t)}evaluateFunction(o,t,l){return pt(o,t,l)}lookup(o,t){const l=t[o];return l===void 0?null:l}between(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],">=")&&W(o,t[1],"<=")}notbetween(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],"<")||W(o,t[1],">")}ternaryNot(o){return ze(o)}ternaryAnd(o,t){return kn(o,t)}ternaryOr(o,t){return zn(o,t)}}function _(u,...o){return`this.${u}(${o.join(", ")})`}function H(u){return u===void 0?"void 0":JSON.stringify(u)}function Jc({type:u,start:o,end:t}){return`{type: ${H(u)}, start: ${at(o)}, end: ${at(t)}}`}function at({type:u,period:o,precision:t,secondary:l}){return JSON.stringify({type:u,period:o,precision:t,secondary:l})}function Qc({type:u,size:o,withtimezone:t}){return JSON.stringify({type:u,size:o,withtimezone:t})}const Sn="feature",En="lookups",xn="attributeAdapter",Cn="fieldsIndex",de="timeZone",Dn="currentUser";class Bc{constructor(o){this._parseTree=o,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const o=this._compileNode(this._parseTree),t=`
      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}
      return this.convertInterval(${o});
    `;return new Function(Sn,En,xn,Cn,de,Dn,t).bind(new Wc(this._staticData))}_storeStaticData(o){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=o,t}_compileRefStaticData(o){return`this.staticData[${H(o)}]`}_generateTempVar(){const o="temp$"+this._nextTempVarId++;return this._tempVars.add(o),o}_compileSimpleCase(o){const t=this._compileNode(o.operand),l=this._generateTempVar(),f=[];for(const v of o.clauses){const y=_("compare",H("="),l,this._compileNode(v.operand)),T=this._compileNode(v.value);f.push(`${y} ? (${T}) :`)}return o.else!=null?f.push(this._compileNode(o.else)):f.push(H(null)),`(${l} = ${t}, ${f.join(" ")})`}_compileSearchedCase(o){const t=[];for(const l of o.clauses){const f=_("makeBool",this._compileNode(l.operand)),v=this._compileNode(l.value);t.push(`${f} ? (${v}) :`)}return o.else!=null?t.push(this._compileNode(o.else)):t.push(H(null)),t.join(" ")}_compileInExpr(o,t){const l=new Set,f=[];for(const T of t.value)T.type==="number"||T.type==="string"?l.add(T.value):f.push(T);const v=this._compileNode(o),y=_("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:f}));if(l.size>0){const T=this._compileRefStaticData(this._storeStaticData(l)),S=this._generateTempVar();return f.length>0?`(${S} = ${v}, ${T}.has(${S}) || ${_("applyIn",S,y)})`:`(${S} = ${v}, ${S} == null ? null : ${T}.has(${S}))`}return _("applyIn",v,y)}_compileNode(o){switch(o.type){case"interval":return _("makeSqlInterval",this._compileNode(o.value),o.qualifier.type==="interval-qualifier"?Jc(o.qualifier):at(o.qualifier),H(o.op));case"case-expression":return o.format==="simple"?this._compileSimpleCase(o):this._compileSearchedCase(o);case"parameter":return _("lookup",H(o.value.toLowerCase()),En);case"expression-list":return`[${o.value.map(t=>this._compileNode(t)).join(", ")}]`;case"unary-expression":return _("ternaryNot",this._compileNode(o.expr));case"binary-expression":switch(o.operator){case"AND":return _("ternaryAnd",this._compileNode(o.left),this._compileNode(o.right));case"OR":return _("ternaryOr",this._compileNode(o.left),this._compileNode(o.right));case"IS":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return _("equalsNull",this._compileNode(o.left));case"ISNOT":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return`!${_("equalsNull",this._compileNode(o.left))}`;case"IN":return this._compileInExpr(o.left,o.right);case"NOT IN":return _("ternaryNot",this._compileInExpr(o.left,o.right));case"BETWEEN":return _("between",this._compileNode(o.left),this._compileNode(o.right));case"NOTBETWEEN":return _("notbetween",this._compileNode(o.left),this._compileNode(o.right));case"LIKE":return _("applyLike",this._compileNode(o.left),this._compileNode(o.right),H(o.escape));case"NOT LIKE":return _("ternaryNot",_("applyLike",this._compileNode(o.left),this._compileNode(o.right),H(o.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return _("compare",H(o.operator),this._compileNode(o.left),this._compileNode(o.right));case"*":case"-":case"+":case"/":case"||":return _("calculate",H(o.operator),this._compileNode(o.left),this._compileNode(o.right),de);default:throw new h(p.UnsupportedOperator,{operator:o.operator})}case"null":case"boolean":case"string":case"number":return H(o.value);case"time":try{return this._compileRefStaticData(this._storeStaticData($e(o.value)))}catch{return _("evaluateTime",H(o.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(dt(o.value,"unknown")))}catch{return _("evaluateDate",H(o.value),H("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(Te(o.value,"unknown")))}catch{return _("evaluateTimestamp",H(o.value),H("unknown"))}case"current-time":return o.mode==="date"?_("currentDate",de):o.mode==="time"?_("currentTime",de):_("currentTimestamp",de);case"current-user":return Dn;case"column-reference":return _("featureValue",Sn,H(o.column),Cn,xn);case"data-type":return Qc(o.value);case"function":return _("evaluateFunction",H(o.name),this._compileNode(o.args),de)}throw new h(p.UnsupportedSyntax,{node:o.type})}}class ht{static create(o,t={}){return new ht(o,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(o,t,l="UTC",f=null){this.fieldsIndex=t,this.timeZone=l,this.currentUser=f,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=Yc.parse(o);const{isStandardized:v,isAggregate:y,currentUserRequired:T,referencedFieldNames:S}=this._extractExpressionInfo(t);this._referencedFieldNames=S,this.isStandardized=v,this.isAggregate=y,this.currentUserRequired=T}static convertValueToStorageFormat(o,t=null){if(t===null)return G(o)?o.getTime():P(o)?o.toMillis():L(o)?o.toStorageFormat():R(o)?o.toStorageString():A(o)?o.toStorageFormat():o;switch(t){case"date":return G(o)?o.getTime():P(o)?o.toMillis():L(o)?o.toMilliseconds():A(o)?o.toNumber():o;case"date-only":return G(o)?K.fromDateJS(o).toString():L(o)?K.fromSqlTimeStampOffset(o).toString():P(o)?K.fromDateTime(o).toString():o;case"time-only":return G(o)?J.fromDateJS(o).toStorageString():P(o)?J.fromDateTime(o).toStorageString():L(o)?J.fromSqlTimeStampOffset(o).toStorageString():R(o)?o.toStorageString():o;case"timestamp-offset":if(G(o))return te.fromJSDate(o).toStorageFormat();if(P(o))return te.fromDateTime(o).toStorageFormat();if(L(o))return o.toStorageFormat()}return o}get fieldNames(){return this._referencedFieldNames}testSet(o,t=ye,l=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,o,l)}calculateValue(o,t=ye,l=this.currentUser){const f=this._evaluateNode(this.parseTree,o,t,null,l);return V.isInterval(f)?f.valueInMilliseconds()/864e5:f}tryGetCompiledExecutor(){if(this._compiledExecutor!=null)return this._compiledExecutor;if(Is("esri-csp-restrictions"))return null;const o=new Bc(this.parseTree);return this._compiledExecutor=o.compile(),this._compiledExecutor}calculateValueCompiled(o,t=ye,l=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.calculateValue(o,t):f(o,this.parameters,t,this.fieldsIndex,this.timeZone,l??null)}testFeature(o,t=ye,l=this.currentUser){return!!this._evaluateNode(this.parseTree,o,t,null,l)}testFeatureCompiled(o,t=ye,l=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.testFeature(o,t):!!f(o,this.parameters,t,this.fieldsIndex,this.timeZone,l??null)}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,$(this.parseTree,o=>{o.type==="current-time"?this._hasDateFunctions=!0:o.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||jc.has(o.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const o=new Set;return $(this.parseTree,t=>{t.type==="function"&&o.add(t.name.toLowerCase())}),Array.from(o)}getExpressions(){const o=new Map;return $(this.parseTree,t=>{if(t.type==="function"){const l=t.name.toLowerCase(),f=t.args.value[0];if(f.type==="column-reference"){const v=f.column,y=`${l}-${v}`;o.has(y)||o.set(y,{aggregateType:l,field:v})}}}),[...o.values()]}getVariables(){const o=new Set;return $(this.parseTree,t=>{t.type==="parameter"&&o.add(t.value.toLowerCase())}),Array.from(o)}_extractExpressionInfo(o){const t=[],l=new Set;let f=!0,v=!1,y=!1;return $(this.parseTree,T=>{switch(T.type){case"column-reference":{const S=o?.get(T.column);let F,b;S?F=b=S.name??"":(b=T.column,F=b.toLowerCase()),l.has(F)||(l.add(F),t.push(b)),T.column=b;break}case"current-user":y=!0;break;case"function":{const{name:S,args:F}=T,b=F.value.length;f&&(f=js(S,b)),v===!1&&(v=yn(S,b));break}}}),{referencedFieldNames:Array.from(t),isStandardized:f,isAggregate:v,currentUserRequired:y}}_evaluateNode(o,t,l,f,v){let y;switch(o.type){case"interval":{const T=this._evaluateNode(o.value,t,l,f,v);return V.createFromValueAndQualifier(T,o.qualifier,o.op)}case"case-expression":if(o.format==="simple"){const T=this._evaluateNode(o.operand,t,l,f,v);for(let S=0;S<o.clauses.length;S++)if(W(T,this._evaluateNode(o.clauses[S].operand,t,l,f,v),"="))return this._evaluateNode(o.clauses[S].value,t,l,f,v);if(o.else!==null)return this._evaluateNode(o.else,t,l,f,v)}else{for(let T=0;T<o.clauses.length;T++)if(Vn(this._evaluateNode(o.clauses[T].operand,t,l,f,v)))return this._evaluateNode(o.clauses[T].value,t,l,f,v);if(o.else!==null)return this._evaluateNode(o.else,t,l,f,v)}return null;case"parameter":return y=this.parameters[o.value.toLowerCase()],G(y)?U.fromJSDate(y):y!=null&&typeof y=="object"&&"toDateTime"in y?y.toDateTime():y;case"expression-list":{const T=[];for(const S of o.value)T.push(this._evaluateNode(S,t,l,f,v));return T}case"unary-expression":return ze(this._evaluateNode(o.expr,t,l,f,v));case"binary-expression":switch(o.operator){case"AND":return kn(this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v));case"OR":return zn(this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v));case"IS":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(o.left,t,l,f,v)===null;case"ISNOT":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(o.left,t,l,f,v)!==null;case"IN":{const T=lt(this._evaluateNode(o.right,t,l,f,v));return st(this._evaluateNode(o.left,t,l,f,v),T)}case"NOT IN":{const T=lt(this._evaluateNode(o.right,t,l,f,v));return ze(st(this._evaluateNode(o.left,t,l,f,v),T))}case"BETWEEN":{const T=this._evaluateNode(o.left,t,l,f,v),S=this._evaluateNode(o.right,t,l,f,v);return T==null||S[0]==null||S[1]==null?null:W(T,S[0],">=")&&W(T,S[1],"<=")}case"NOTBETWEEN":{const T=this._evaluateNode(o.left,t,l,f,v),S=this._evaluateNode(o.right,t,l,f,v);return T==null||S[0]==null||S[1]==null?null:W(T,S[0],"<")||W(T,S[1],">")}case"LIKE":return ct(this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v),o.escape);case"NOT LIKE":return ze(ct(this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v),o.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return W(this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v),o.operator);case"-":case"+":case"*":case"/":case"||":return Un(o.operator,this._evaluateNode(o.left,t,l,f,v),this._evaluateNode(o.right,t,l,f,v),this.timeZone)}case"null":case"boolean":case"string":case"number":return o.value;case"date":return o.parsedValue??=dt(o.value,"unknown"),o.parsedValue;case"timestamp":return o.parsedValue??=Te(o.value,"unknown"),o.parsedValue;case"time":return $e(o.value);case"current-time":return o.mode==="date"?$n(this.timeZone):o.mode==="time"?qn(this.timeZone):Hn(this.timeZone);case"current-user":return v??null;case"column-reference":return Zn(t,o.column,this.fieldsIndex,l);case"data-type":return o.value;case"function":{if(this.isAggregate&&yn(o.name,o.args.value.length)){const S=[];for(const F of o.args?.value||[]){const b=[];for(const Z of f||[])b.push(this._evaluateNode(F,Z,l,null,v));S.push(b)}return Ss(o.name,S)}const T=this._evaluateNode(o.args,t,l,f,v);return pt(o.name,T,this.timeZone)}}throw new h(p.UnsupportedSyntax,{node:o.type})}}function Vn(u){return u===!0}function lt(u){return Array.isArray(u)?u:[u]}function ze(u){return u!==null?u!==!0:null}function kn(u,o){return u!=null&&o!=null?u===!0&&o===!0:u!==!1&&o!==!1&&null}function zn(u,o){return u!=null&&o!=null?u===!0||o===!0:u===!0||o===!0||null}function st(u,o){if(u==null)return null;let t=!1;for(const l of o)if(l==null)t=null;else{if(u===l){t=!0;break}if(ut(u)&&ut(l)&&(t=W(u,l,"="),t))break}return t}function Hn(u){return He(new Date,u)}function $n(u){return K.fromNow(u)}function qn(u){const o=He(new Date,u);return J.fromDateTime(o)}const bn="-[]/{}()*+?.\\^$|";var ce;function Gc(u,o){const t=o;let l="",f=ce.Normal;for(let v=0;v<u.length;v++){const y=u.charAt(v);switch(f){case ce.Normal:y===t?f=ce.Escaped:bn.includes(y)?l+="\\"+y:l+=y==="%"?".*":y==="_"?".":y;break;case ce.Escaped:bn.includes(y)?l+="\\"+y:l+=y,f=ce.Normal}}return new RegExp("^"+l+"$","m")}function ct(u,o,t){return u==null?null:Gc(o,t).test(u)}function Kc(u){return u&&typeof u.attributes=="object"}function Zn(u,o,t,l){if("getAttributeSQL"in l)return l.getAttributeSQL(u,o);const f=l.getAttribute(u,o);if(f==null)return f;const v=t?.get(o);switch(v?.type){case"esriFieldTypeDate":case"date":return He(new Date(f),t?.getLuxonTimeZone(v.name)??gs.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return K.fromReader(f);case"esriFieldTypeTimeOnly":case"time-only":return J.fromReader(f);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new te(f)}return f}(function(u){u[u.Normal=0]="Normal",u[u.Escaped=1]="Escaped"})(ce||(ce={}));const ye={getAttribute:(u,o)=>(Kc(u)?u.attributes:u)[o]},rf=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{ht as R,rf as W,p as a,te as i,h as n,Ss as u};
