import{O as j,m as $,r as qo}from"./TimeOnly-DSMefxKy-ONWVZn0z.js";import{cF as jo,F as J,K as ur,b_ as Yo,cI as Bo,cJ as Qo,q as Go}from"./main-BNyfiy7F.js";import{t as He,r as qe,a as pe}from"./UnknownTimeZone-C--TOcPG-DgJw7EQC.js";var d;(function(a){a.InvalidFunctionParameters="InvalidFunctionParameters",a.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",a.UnsupportedSqlFunction="UnsupportedSqlFunction",a.UnsupportedOperator="UnsupportedOperator",a.UnsupportedSyntax="UnsupportedSyntax",a.UnsupportedIsRhs="UnsupportedIsRhs",a.UnsupportedIsLhs="UnsupportedIsLhs",a.InvalidDataType="InvalidDataType",a.CannotCastValue="CannotCastValue",a.FunctionNotRecognized="FunctionNotRecognized",a.InvalidTime="InvalidTime",a.InvalidParameterCount="InvalidParameterCount",a.InvalidTimeStamp="InvalidTimeStamp",a.InvalidDate="InvalidDate",a.InvalidOperator="InvalidOperator",a.IllegalInterval="IllegalInterval",a.YearMonthIntervals="YearMonthIntervals",a.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",a.MissingStatisticParameters="MissingStatisticParameters"})(d||(d={}));const Wo={[d.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.UnsupportedOperator]:"Unsupported operator - {operator}",[d.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.UnsupportedSqlFunction]:"Sql function not found = {function}",[d.InvalidDataType]:"Invalid sql data type",[d.InvalidDate]:"Invalid date encountered",[d.InvalidOperator]:"Invalid operator encountered",[d.InvalidTime]:"Invalid time encountered",[d.IllegalInterval]:"Illegal interval",[d.FunctionNotRecognized]:"Function not recognized",[d.InvalidTimeStamp]:"Invalid timestamp encountered",[d.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.YearMonthIntervals]:"Year-Month Intervals not supported",[d.CannotCastValue]:"Cannot cast value to the required data type"};let m=class pr extends Error{constructor(i,u){super(jo(Wo[i],u)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,pr)}};function or(a){return Number.isNaN(a)||a===0?a:Math.trunc(a)}let Q=class oe{constructor(i){this._timeStampOffset=i,this._date=null}toDateTime(){return this._date??=J.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return or(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return or(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return oe.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(i){return new oe(J.fromJSDate(i).toISO({includeOffset:!0}))}static fromDateTime(i){return new oe(i.toISO({includeOffset:!0}))}static fromParts(i,u,t=0,l=0,v=0,g=0,T=0,S=!1,O=0,x=0){const D=`${i.toString().padStart(4,"0")}-${u.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`;let F="";g<10&&(F="0");let X=`${l.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}:${F+g.toString()}`;T!==0&&(X+="."+T.toString().padStart(3,"0"));const ee=`${S?"-":"+"}${O.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`;return new oe(D+"T"+X+ee)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let i=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return i&&(i=i.replace(".000","")),i}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(i){const u=this.toDateTime().plus(i);return oe.fromDateTime(u)}};function Ko(a,i){const u=mr[a.toLowerCase()];if(u==null)throw new m(d.FunctionNotRecognized);if(i.length<u.minParams||i.length>u.maxParams)throw new m(d.InvalidParameterCount,{name:a.toUpperCase()});return u.evaluate(i)}function lr(a,i){const u=mr[a.toLowerCase()];return u!=null&&i>=u.minParams&&i<=u.maxParams}const mr={min:{minParams:1,maxParams:1,evaluate:a=>cr(a[0],"min")},max:{minParams:1,maxParams:1,evaluate:a=>cr(a[0],"max")},avg:{minParams:1,maxParams:1,evaluate:a=>vr(a[0])},sum:{minParams:1,maxParams:1,evaluate:a=>Xo(a[0])},stddev:{minParams:1,maxParams:1,evaluate:a=>el(a[0])},count:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].length},var:{minParams:1,maxParams:1,evaluate:a=>hr(a[0])}};function vr(a){if(a===null)return null;let i=0,u=0;for(let t=0;t<a.length;t++){const l=a[t];if(l!==null){if(!et(l))throw new m(d.InvalidValueForAggregateFunction);u++,i+=l}}return u===0?null:i/a.length}function et(a){return typeof a=="number"}function cr(a,i){if(a===null)return null;let u=null,t=null;for(const l of a){let v=l;v=l instanceof j||l instanceof $?l.toNumber():l instanceof J?l.toMillis():l instanceof Q?l.toMilliseconds():l,(u===null||i==="max"&&t!==null&&v!==null&&t<=v||i==="min"&&t!==null&&v!==null&&t>=v)&&(u=l,t=v)}return u}function Xo(a){if(a===null)return null;let i=0;for(let u=0;u<a.length;u++){const t=a[u];if(t!==null){if(!et(t))throw new m(d.InvalidValueForAggregateFunction);i+=t}}return i}function el(a){if(a===null)return null;const i=hr(a);return i===null?null:Math.sqrt(i)}function hr(a){if(a===null||(a=a.filter(t=>t!==null)).length===0)return null;const i=vr(a);if(i===null)return null;let u=0;for(const t of a){if(!et(t))throw new m(d.InvalidValueForAggregateFunction);u+=(i-t)**2}return u/(a.length-1)}class E{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(i){if(i.precision!==null||i.secondary!==null)throw new m(d.PrimarySecondaryQualifiers)}static _parseSecondsComponent(i,u){if(u.includes(".")){const t=u.split(".");i.second=parseFloat(t[0]),i.millis=parseInt(t[1],10)}else i.second=parseFloat(u)}static createFromMilliseconds(i){const u=new E;return u.second=i/1e3,u}static createFromValueAndQualifier(i,u,t){let l=null;const v=new E;if(v.op=t==="-"?"-":"+",u.type==="interval-period"){E._fixDefaults(u);const g=new RegExp("^[0-9]{1,}$");if(u.period==="year"||u.period==="month")throw new m(d.YearMonthIntervals);if(u.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(i))throw new m(d.IllegalInterval);E._parseSecondsComponent(v,i)}else{if(!g.test(i))throw new m(d.IllegalInterval);v[u.period]=parseFloat(i)}}else{if(E._fixDefaults(u.start),E._fixDefaults(u.end),u.start.period==="year"||u.start.period==="month"||u.end.period==="year"||u.end.period==="month")throw new m(d.YearMonthIntervals);switch(u.start.period){case"day":switch(u.end.period){case"hour":if(l=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!l.test(i))throw new m(d.IllegalInterval);v[u.start.period]=parseFloat(i.split(" ")[0]),v[u.end.period]=parseFloat(i.split(" ")[1]);break;case"minute":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!l.test(i))throw new m(d.IllegalInterval);{v[u.start.period]=parseFloat(i.split(" ")[0]);const g=i.split(" ")[1].split(":");v.hour=parseFloat(g[0]),v.minute=parseFloat(g[1])}break;case"second":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(i))throw new m(d.IllegalInterval);{v[u.start.period]=parseFloat(i.split(" ")[0]);const g=i.split(" ")[1].split(":");v.hour=parseFloat(g[0]),v.minute=parseFloat(g[1]),E._parseSecondsComponent(v,g[2])}break;default:throw new m(d.IllegalInterval)}break;case"hour":switch(u.end.period){case"minute":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!l.test(i))throw new m(d.IllegalInterval);v.hour=parseFloat(i.split(":")[0]),v.minute=parseFloat(i.split(":")[1]);break;case"second":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(i))throw new m(d.IllegalInterval);{const g=i.split(":");v.hour=parseFloat(g[0]),v.minute=parseFloat(g[1]),E._parseSecondsComponent(v,g[2])}break;default:throw new m(d.IllegalInterval)}break;case"minute":if(u.end.period!=="second")throw new m(d.IllegalInterval);if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(i))throw new m(d.IllegalInterval);{const g=i.split(":");v.minute=parseFloat(g[0]),E._parseSecondsComponent(v,g[1])}break;default:throw new m(d.IllegalInterval)}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const tl=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,rl=/^(\d{1,2}):(\d{1,2})$/,nl=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,wr=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,il=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,al=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,sl=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,ul=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Pe(a,i){if(i instanceof Bo)return i===He.instance?J.fromMillis(a.getTime(),{zone:He.instance}):J.fromJSDate(a,{zone:i});switch(i){case"system":case"local":case null:return J.fromJSDate(a);default:return i?.toLowerCase()==="unknown"?J.fromMillis(a.getTime(),{zone:He.instance}):J.fromJSDate(a,{zone:i})}}function V(a){return typeof a=="number"}function Z(a){return typeof a=="string"||a instanceof String}function K(a){return a instanceof E}function q(a){return a instanceof Date}function b(a){return a instanceof J}function A(a){return a instanceof j}function L(a){return a instanceof $}function P(a){return a instanceof Q}function tt(a){let i=tl.exec(a);if(i!==null){const[,u,t,l]=i,v=$.fromParts(parseInt(u,10),parseInt(t,10),parseInt(l,10),0);if(v!==null)return v;throw new m(d.InvalidTime)}if(i=rl.exec(a),i!==null){const[,u,t]=i,l=$.fromParts(parseInt(u,10),parseInt(t,10),0,0);if(l!==null)return l;throw new m(d.InvalidTime)}if(i=nl.exec(a),i!==null){const[,u,t,l,v]=i,g=$.fromParts(parseInt(u,10),parseInt(t,10),parseInt(l,10),parseInt(v,10));if(g!==null)return g;throw new m(d.InvalidTime)}throw new m(d.InvalidTime)}function De(a,i,u=!1){let t=il.exec(a);if(t!==null){const[,l,v,g,T,S,O,x]=t,D=J.fromObject({year:parseInt(l,10),month:parseInt(v,10),day:parseInt(g,10),hour:parseInt(T,10),minute:parseInt(S,10),second:parseInt(O,10),millisecond:x?parseInt(x.replace(".",""),10):0},{zone:qe(i)});if(D.isValid===!1)throw new m(d.InvalidTimeStamp);return D}if(t=al.exec(a),t!==null){const[,l,v,g,T,S,O,x,D,F,X]=t,ee=Q.fromParts(parseInt(l,10),parseInt(v,10),parseInt(g,10),parseInt(T,10),parseInt(S,10),parseInt(O,10),x?parseInt(x.replace(".",""),10):0,D==="-",parseInt(F,10),parseInt(X,10));if(ee.isValid===!1)throw new m(d.InvalidTimeStamp);return ee}if(t=sl.exec(a),t!==null){const[,l,v,g,T,S,O,x,D]=t,F=Q.fromParts(parseInt(l,10),parseInt(v,10),parseInt(g,10),parseInt(T,10),parseInt(S,10),0,0,O==="-",parseInt(x,10),parseInt(D,10));if(F.isValid===!1)throw new m(d.InvalidTimeStamp);return F}if(t=ul.exec(a),t!==null){const[,l,v,g,T,S]=t,O=J.fromObject({year:parseInt(l,10),month:parseInt(v,10),day:parseInt(g,10),hour:parseInt(T,10),minute:parseInt(S,10),second:0},{zone:qe(i)});if(O.isValid===!1)throw new m(d.InvalidTimeStamp);return O}if(t=wr.exec(a),t!==null){const[,l,v,g]=t,T=J.fromObject({year:parseInt(l,10),month:parseInt(v,10),day:parseInt(g,10),hour:0,minute:0,second:0},{zone:qe(i)});if(T.isValid===!1)throw new m(d.InvalidTimeStamp);return T}throw new m(d.InvalidTimeStamp)}function Ir(a,i){const u=wr.exec(a);if(u===null)try{return De(a,i)}catch{throw new m(d.InvalidDate)}const[,t,l,v]=u,g=j.fromParts(parseInt(t,10),parseInt(l,10),parseInt(v,10));if(g===null)throw new m(d.InvalidDate);return g}const ol=321408e5,ll=26784e5,cl=864e5,fl=36e5,dl=6e4;function je(a){return!!b(a)||!!P(a)}function Ge(a){return!!b(a)||!!A(a)||!!P(a)||!!L(a)}function Fe(a){if(b(a))return a.toMillis();if(A(a))return a.toNumber();if(P(a))return a.toMilliseconds();throw new m(d.InvalidDataType)}function z(a,i,u,t){if(a==null||i==null)return null;if(V(a)){if(V(i))return B(a,i,u);if(Z(i))return pl(a,i,u);if(Ge(i))throw new m(d.InvalidOperator);if(A(i))throw new m(d.InvalidOperator)}else if(Z(a)){if(V(i))return ml(a,i,u);if(Z(i))return vl(a,i,u);if(b(i))throw new m(d.InvalidOperator);if(A(i))throw new m(d.InvalidOperator);if(L(i))throw new m(d.InvalidOperator);if(P(i))throw new m(d.InvalidOperator)}else if(b(a)){if(je(i)){if(a instanceof J&&pe(a.zone)){if(i instanceof J&&pe(i.zone)===!1||i instanceof Q)return Ye(a,i,u)}else if(i instanceof J&&pe(i.zone)&&(a instanceof J&&pe(a.zone)===!1||a instanceof Q))return Ye(a,i,u);return B(Fe(a),Fe(i),u)}if(Z(i))throw new m(d.InvalidOperator);if(A(i))return hl(a,i,u);if(L(i))throw new m(d.InvalidOperator);if(V(i))throw new m(d.InvalidOperator)}else if(A(a)){if(P(i))return gl(a,i,u);if(b(i))return Il(a,i,u);if(Z(i))throw new m(d.InvalidOperator);if(A(i))return B(a.toNumber(),i.toNumber(),u);if(L(i))throw new m(d.InvalidOperator);if(V(i))throw new m(d.InvalidOperator)}else if(L(a)){if(L(i))return B(a.toNumber(),i.toNumber(),u);if(Z(i))throw new m(d.InvalidOperator);if(V(i))throw new m(d.InvalidOperator);if(A(i))throw new m(d.InvalidOperator);if(je(i))throw new m(d.InvalidOperator)}else if(P(a)){if(je(i))return i instanceof J&&pe(i.zone)?Ye(a,i,u):B(Fe(a),Fe(i),u);if(Z(i))throw new m(d.InvalidOperator);if(A(i))return wl(a,i,u);if(L(i))throw new m(d.InvalidOperator);if(V(i))throw new m(d.InvalidOperator)}switch(u){case"<>":return a!==i;case"=":return a===i;case">":return a>i;case"<":return a<i;case">=":return a>=i;case"<=":return a<=i}}function B(a,i,u){switch(u){case"<>":return a!==i;case"=":return a===i;case">":return a>i;case"<":return a<i;case">=":return a>=i;case"<=":return a<=i}}function pl(a,i,u){const t=parseFloat(i);if(!isNaN(t))return B(a,t,u);const l=a.toString();switch(u){case"<>":return l!==i;case"=":return l===i;case">":return l>i;case"<":return l<i;case">=":return l>=i;case"<=":return l<=i}}function ml(a,i,u){const t=parseFloat(a);if(!isNaN(t))return B(t,i,u);const l=i.toString();switch(u){case"<>":return a!==l;case"=":return a===l;case">":return a>l;case"<":return a<l;case">=":return a>=l;case"<=":return a<=l}}function vl(a,i,u){switch(u){case"<>":return a!==i;case"=":return a===i;case">":return a>i;case"<":return a<i;case">=":return a>=i;case"<=":return a<=i}}function hl(a,i,u){const t=i.toDateTimeLuxon(a.zone);return B((a=a.startOf("day")).toMillis(),t.toMillis(),u)}function wl(a,i,u){const t=i.toDateTimeLuxon(a.toDateTime().zone);return B((a=a.startOfDay()).toMilliseconds(),t.toMillis(),u)}function Il(a,i,u){const t=a.toDateTimeLuxon(i.zone);return i=i.startOf("day"),B(t.toMillis(),i.toMillis(),u)}function gl(a,i,u){const t=a.toDateTimeLuxon(i.toDateTime().zone);return i=i.startOfDay(),B(t.toMillis(),i.toMilliseconds(),u)}function Ye(a,i,u){a instanceof Q&&(a=a.toDateTime()),i instanceof Q&&(i=i.toDateTime());const t=fr(a),l=fr(i);switch(u){case"<>":return t!==l;case"=":return t===l;case">":return t>l;case"<":return t<l;case">=":return t>=l;case"<=":return t<=l}}function fr(a){return a.year*ol+a.month*ll+a.day*cl+a.hour*fl+a.minute*dl+1e3*a.second+a.millisecond}function rt(a,i,u){const t=yr[a.toLowerCase()];if(t==null)throw new m(d.FunctionNotRecognized);if(i.length<t.minParams||i.length>t.maxParams)throw new m(d.InvalidParameterCount,{name:a.toUpperCase()});return t.evaluate(i,u)}function yl(a,i){const u=yr[a.toLowerCase()];return u!=null&&i>=u.minParams&&i<=u.maxParams}function Le(a){return typeof a=="string"||a instanceof String}function Be(a){return!q(a)&&!A(a)&&!b(a)&&!L(a)&&!P(a)}function gr(a){return A(a)||L(a)?a.toString():P(a)?a.toSQLValue():b(a)?a.millisecond===0?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):q(a)?gr(J.fromJSDate(a)):a.toString()}function Tl(a){if(q(a))return j.fromDateJS(a);if(b(a))return j.fromParts(a.year,a.month,a.day);if(A(a))return a;if(L(a))throw new m(d.CannotCastValue);if(P(a)&&j.fromParts(a.year,a.month,a.day)===null)throw new m(d.CannotCastValue);if(Le(a)){const i=j.fromReader(a);if(i!==null&&i.isValid)return i}throw new m(d.CannotCastValue)}function Nl(a,i,u){if(q(a))return Pe(a,i);if(b(a))return a;if(A(a))return a.toDateTimeLuxon("unknown");if(L(a))throw new m(d.CannotCastValue);if(P(a))return a;if(Le(a))return De(a,"unknown",u);throw new m(d.CannotCastValue)}function Ol(a){if(q(a))return $.fromDateJS(a);if(b(a))return $.fromDateTime(a);if(A(a))throw new m(d.CannotCastValue);if(L(a))return a;if(P(a))return $.fromSqlTimeStampOffset(a);if(Le(a))return tt(a);throw new m(d.CannotCastValue)}const yr={extract:{minParams:2,maxParams:2,evaluate:([a,i])=>{if(i==null)return null;if(q(i))switch(a.toUpperCase()){case"SECOND":return i.getSeconds();case"MINUTE":return i.getMinutes();case"HOUR":return i.getHours();case"DAY":return i.getDate();case"MONTH":return i.getMonth()+1;case"YEAR":return i.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(b(i))switch(a.toUpperCase()){case"SECOND":return i.second;case"MINUTE":return i.minute;case"HOUR":return i.hour;case"DAY":return i.day;case"MONTH":return i.month;case"YEAR":return i.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(A(i))switch(a.toUpperCase()){case"DAY":return i.day;case"MONTH":return i.month;case"YEAR":return i.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(L(i))switch(a.toUpperCase()){case"SECOND":return i.second;case"MINUTE":return i.minute;case"HOUR":return i.hour}else if(P(i))switch(a.toUpperCase()){case"SECOND":return i.second;case"MINUTE":return i.minute;case"HOUR":return i.hour;case"DAY":return i.day;case"MONTH":return i.month;case"YEAR":return i.year;case"TIMEZONE_HOUR":return i.timezoneOffsetHour;case"TIMEZONE_MINUTE":return i.timezoneOffsetMinutes}throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(a.length===2){const[i,u]=a;return i==null||u==null?null:i.toString().substring(u-1)}if(a.length===3){const[i,u,t]=a;return i==null||u==null||t==null?null:t<=0?"":i.toString().substring(u-1,u+t-1)}}},position:{minParams:2,maxParams:2,evaluate:([a,i])=>a==null||i==null?null:i.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{const i=a.length===3,u=i?a[1]:" ",t=i?a[2]:a[1];if(u==null||t==null)return null;const l=`(${Qo(u)})`;switch(a[0]){case"BOTH":return t.replaceAll(new RegExp(`^${l}*|${l}*$`,"g"),"");case"LEADING":return t.replaceAll(new RegExp(`^${l}*`,"g"),"");case"TRAILING":return t.replaceAll(new RegExp(`${l}*$`,"g"),"")}throw new m(d.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0]>0?1:a[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>a[0]==null||a[1]==null?null:a[0]**a[1]},mod:{minParams:2,maxParams:2,evaluate:a=>a[0]==null||a[1]==null?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const i=a[0],u=a.length===2?10**a[1]:1;return i==null?null:Math.round(i*u)/u}},truncate:{minParams:1,maxParams:2,evaluate:a=>a[0]==null?null:a.length===1||a[1]===0?Math.trunc(a[0]):Go("trunc",a[0],-Number(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>Le(a[0])?a[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:a=>{let i="";for(let u=0;u<a.length;u++){if(a[u]==null)return null;i+=a[u].toString()}return i}},lower:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:a=>{for(const i of a)if(i!==null)return i;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,i)=>z(a[0],a[1],"=")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,i)=>{const u=a[0],t=a[1];if(u===null)return null;switch(t.type){case"integer":{if(!Be(u))throw new m(d.CannotCastValue);const l=parseInt(u,10);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"smallint":{if(!Be(u))throw new m(d.CannotCastValue);const l=parseInt(u,10);if(isNaN(l))throw new m(d.CannotCastValue);if(l>32767||l<-32767)throw new m(d.CannotCastValue);return l}case"float":case"real":{if(!Be(u))throw new m(d.CannotCastValue);const l=parseFloat(u);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"time":return Ol(u);case"date":return Tl(u);case"timestamp":return Nl(u,i,t.withtimezone===!0);case"varchar":{const l=gr(u);if(l.length>t.size)throw new m(d.CannotCastValue);return l}default:throw new m(d.InvalidDataType)}}}};function Tr(a,i,u,t){if(a==="||")return rt("concat",[i,u],t);if(i===null||u===null)return null;if(V(i)){if(V(u))return nt(i,u,a);if(K(u))return Al(i,u,a);if(L(u))return kl();if(A(u))return zl();if(P(u))return Zl();if(b(u))return Jl();if(Z(u))return $l(i,u,a);throw new m(d.InvalidOperator)}if(A(i)){if(V(u))return Rl(i,u,a);if(K(u))return Pl(i,u,a);if(L(u))return Wl();if(A(u))return Gl(i,u,a);if(P(u))return Ql(i,u,a);if(b(u))return Bl(i,u,a);if(Z(u))return cc();throw new m(d.InvalidOperator)}if(L(i)){if(V(u))return Ul(i,u,a);if(K(u))return Ml(i,u,a);if(L(u))return ac();if(A(u))return nc();if(P(u))return ic();if(b(u))return rc();if(Z(u))return fc();throw new m(d.InvalidOperator)}if(K(i)){if(V(u))return bl(i,u,a);if(K(u))return Fl(i,u,a);if(L(u))return xl(i,u,a);if(A(u))return Cl(i,u,a);if(P(u))return El(i,u,a);if(b(u))return Sl(i,u,a);if(Z(u))return jl();throw new m(d.InvalidOperator)}if(b(i)){if(V(u))return _l(i,u,a);if(K(u))return Dl(i,u,a);if(L(u))return lc();if(A(u))return uc(i,u,a);if(P(u))return oc(i,u,a);if(b(u))return sc(i,u,a);if(Z(u))return dc();throw new m(d.InvalidOperator)}if(P(i)){if(V(u))return Vl(i,u,a);if(K(u))return Ll(i,u,a);if(L(u))return Kl();if(A(u))return Xl(i,u,a);if(P(u))return tc(i,u,a);if(b(u))return ec(i,u,a);if(Z(u))return pc();throw new m(d.InvalidOperator)}if(Z(i)){if(V(u))return Hl(i,u,a);if(K(u))return Yl();if(L(u))return mc();if(A(u))return vc();if(P(u))return wc();if(b(u))return hc();if(Z(u))return ql(i,u,a);throw new m(d.InvalidOperator)}throw new m(d.InvalidOperator)}function nt(a,i,u){switch(u){case"+":return a+i;case"-":return a-i;case"*":return a*i;case"/":return a/i}throw new m(d.InvalidOperator)}function Sl(a,i,u){switch(u){case"+":return i.plus({milliseconds:a.valueInMilliseconds()});case"-":return a.valueInMilliseconds()-i.toMillis()}throw new m(d.InvalidOperator)}function xl(a,i,u){if(u==="+")return i.plus("milliseconds",a.valueInMilliseconds());throw new m(d.InvalidOperator)}function Cl(a,i,u){if(u==="+")return i.plus("milliseconds",a.valueInMilliseconds());throw new m(d.InvalidOperator)}function Ml(a,i,u){switch(u){case"+":return a.plus("milliseconds",i.valueInMilliseconds());case"-":return a.plus("milliseconds",-1*i.valueInMilliseconds())}throw new m(d.InvalidOperator)}function El(a,i,u){if(u==="+")return i.addMilliseconds(a.valueInMilliseconds());throw new m(d.InvalidOperator)}function Fl(a,i,u){switch(u){case"+":return E.createFromMilliseconds(a.valueInMilliseconds()+i.valueInMilliseconds());case"-":return E.createFromMilliseconds(a.valueInMilliseconds()-i.valueInMilliseconds());case"*":return E.createFromMilliseconds(a.valueInMilliseconds()*i.valueInMilliseconds());case"/":return E.createFromMilliseconds(a.valueInMilliseconds()/i.valueInMilliseconds())}throw new m(d.InvalidOperator)}function bl(a,i,u){switch(u){case"+":return E.createFromMilliseconds(a.valueInMilliseconds()+i);case"-":return E.createFromMilliseconds(a.valueInMilliseconds()-i);case"*":return E.createFromMilliseconds(a.valueInMilliseconds()*i);case"/":return E.createFromMilliseconds(a.valueInMilliseconds()/i)}throw new m(d.InvalidOperator)}function Al(a,i,u){switch(u){case"+":return E.createFromMilliseconds(a+i.valueInMilliseconds());case"-":return E.createFromMilliseconds(a-i.valueInMilliseconds());case"*":return E.createFromMilliseconds(a*i.valueInMilliseconds());case"/":return E.createFromMilliseconds(a/i.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Pl(a,i,u){switch(u){case"+":return a.plus("milliseconds",i.valueInMilliseconds());case"-":return a.plus("milliseconds",-1*i.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Dl(a,i,u){switch(u){case"+":return a.plus({milliseconds:i.valueInMilliseconds()});case"-":return a.minus({milliseconds:i.valueInMilliseconds()})}throw new m(d.InvalidOperator)}function Ll(a,i,u){switch(u){case"+":return a.addMilliseconds(i.valueInMilliseconds());case"-":return a.addMilliseconds(-1*i.valueInMilliseconds())}throw new m(d.InvalidOperator)}function _l(a,i,u){const t=1e3*i*24*60*60;switch(u){case"+":return a.plus({milliseconds:t});case"-":return a.minus({milliseconds:t})}throw new m(d.InvalidOperator)}function Rl(a,i,u){const t=1e3*i*24*60*60;switch(u){case"+":return a.plus("milliseconds",t);case"-":return a.plus("milliseconds",-1*t)}throw new m(d.InvalidOperator)}function Ul(a,i,u){const t=1e3*i*24*60*60;switch(u){case"+":return a.plus("milliseconds",t);case"-":return a.plus("milliseconds",-1*t)}throw new m(d.InvalidOperator)}function Jl(a,i,u){throw new m(d.InvalidOperator)}function Vl(a,i,u){const t=1e3*i*24*60*60;switch(u){case"+":return a.addMilliseconds(t);case"-":return a.addMilliseconds(-1*t)}throw new m(d.InvalidOperator)}function Zl(a,i,u){throw new m(d.InvalidOperator)}function kl(a,i,u){throw new m(d.InvalidOperator)}function zl(a,i,u){throw new m(d.InvalidOperator)}function $l(a,i,u){const t=parseFloat(i);if(isNaN(t))throw new m(d.InvalidOperator);return nt(a,t,u)}function Hl(a,i,u){const t=parseFloat(a);if(isNaN(t))throw new m(d.InvalidOperator);return nt(t,i,u)}function ql(a,i,u){if(u==="+")return a+i;throw new m(d.InvalidOperator)}function jl(a,i,u){throw new m(d.InvalidOperator)}function Yl(a,i,u){throw new m(d.InvalidOperator)}function Bl(a,i,u){if(u==="-")return a.toDateTimeLuxon(i.zone).diff(i).as("days");throw new m(d.InvalidOperator)}function Ql(a,i,u){if(u==="-")return a.toDateTimeLuxon(i.toDateTime().zone).diff(i.toDateTime()).as("days");throw new m(d.InvalidOperator)}function Gl(a,i,u){if(u==="-")return a.toDateTimeLuxon("UTC").diff(i.toDateTimeLuxon("UTC")).as("days");throw new m(d.InvalidOperator)}function Wl(a,i,u){throw new m(d.InvalidOperator)}function Kl(a,i,u){throw new m(d.InvalidOperator)}function Xl(a,i,u){if(u==="-")return a.toDateTime().diff(i.toDateTimeLuxon(a.toDateTime().zone)).as("days");throw new m(d.InvalidOperator)}function ec(a,i,u){if(u==="-")return a.toDateTime().diff(i).as("days");throw new m(d.InvalidOperator)}function tc(a,i,u){if(u==="-")return a.toDateTime().diff(i.toDateTime()).as("days");throw new m(d.InvalidOperator)}function rc(a,i,u){throw new m(d.InvalidOperator)}function nc(a,i,u){throw new m(d.InvalidOperator)}function ic(a,i,u){throw new m(d.InvalidOperator)}function ac(a,i,u){throw new m(d.InvalidOperator)}function sc(a,i,u){if(u==="-")return a.diff(i).as("days");throw new m(d.InvalidOperator)}function uc(a,i,u){if(u==="-")return a.diff(i.toDateTimeLuxon(a.zone)).as("days");throw new m(d.InvalidOperator)}function oc(a,i,u){if(u==="-")return a.diff(i.toDateTime()).as("days");throw new m(d.InvalidOperator)}function lc(a,i,u){throw new m(d.InvalidOperator)}function cc(a,i,u){throw new m(d.InvalidOperator)}function fc(a,i,u){throw new m(d.InvalidOperator)}function dc(a,i,u){throw new m(d.InvalidOperator)}function pc(a,i,u){throw new m(d.InvalidOperator)}function mc(a,i,u){throw new m(d.InvalidOperator)}function vc(a,i,u){throw new m(d.InvalidOperator)}function hc(a,i,u){throw new m(d.InvalidOperator)}function wc(a,i,u){throw new m(d.InvalidOperator)}function Ic(a,i){function u(){this.constructor=a}u.prototype=i.prototype,a.prototype=new u}function se(a,i,u,t){var l=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(l,se.prototype),l.expected=i,l.found=u,l.location=t,l.name="SyntaxError",l}function Qe(a,i,u){return u=u||" ",a.length>i?a:(i-=a.length,a+(u+=u.repeat(i)).slice(0,i))}function gc(a,i){var u,t={},l=(i=i!==void 0?i:{}).grammarSource,v={start:St},g=St,T="!",S="=",O=">=",x=">",D="<=",F="<>",X="!=",ee="||",Cr="@",at="'",st="N'",me="''",Mr=".",Er="null",Fr="true",br="false",Ar="in",Pr="is",Dr="like",Lr="escape",_r="not",Rr="and",Ur="or",Jr="between",Vr="from",Zr="for",kr="substring",zr="extract",$r="trim",Hr="position",qr="timestamp",jr="date",Yr="time",Br="leading",Qr="trailing",Gr="both",Wr="cast",Kr="as",Xr="integer",en="int",tn="smallint",rn="float",nn="real",an="varchar",sn="to",un="interval",on="year",ln="timezone_hour",cn="timezone_minute",fn="month",dn="day",pn="hour",mn="minute",vn="second",hn="case",wn="end",In="when",gn="then",yn="else",Tn=",",Nn="(",On=")",ut="`",Sn=/^[<-=]/,ve=/^[+\-]/,xn=/^[*\/]/,Cn=/^[A-Za-z_\x80-\uFFFF]/,Mn=/^[A-Za-z0-9_]/,ot=/^[A-Za-z0-9_.\x80-\uFFFF]/,En=/^["]/,lt=/^[^']/,Fn=/^[0-9]/,bn=/^[eE]/,An=/^[ \t\n\r]/,ct=/^[^`]/,Pn=y("!",!1),Dn=y("=",!1),Ln=y(">=",!1),_n=y(">",!1),Rn=y("<=",!1),Un=y("<>",!1),Jn=H([["<","="]],!1,!1),Vn=y("!=",!1),he=H(["+","-"],!1,!1),Zn=y("||",!1),kn=H(["*","/"],!1,!1),zn=H([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),$n=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),ft=H([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Hn=H(['"'],!1,!1),qn=y("@",!1),dt=y("'",!1),jn=y("N'",!1),pt=y("''",!1),mt=H(["'"],!0,!1),Yn=y(".",!1),Bn=H([["0","9"]],!1,!1),Qn=H(["e","E"],!1,!1),Gn=y("NULL",!0),Wn=y("TRUE",!0),Kn=y("FALSE",!0),Xn=y("IN",!0),ei=y("IS",!0),ti=y("LIKE",!0),ri=y("ESCAPE",!0),ni=y("NOT",!0),ii=y("AND",!0),ai=y("OR",!0),si=y("BETWEEN",!0),ui=y("FROM",!0),oi=y("FOR",!0),li=y("SUBSTRING",!0),ci=y("EXTRACT",!0),fi=y("TRIM",!0),di=y("POSITION",!0),pi=y("TIMESTAMP",!0),mi=y("DATE",!0),vi=y("TIME",!0),hi=y("LEADING",!0),wi=y("TRAILING",!0),Ii=y("BOTH",!0),gi=y("CAST",!0),yi=y("AS",!0),Ti=y("INTEGER",!0),Ni=y("INT",!0),Oi=y("SMALLINT",!0),Si=y("FLOAT",!0),xi=y("REAL",!0),Ci=y("VARCHAR",!0),Mi=y("TO",!0),Ei=y("INTERVAL",!0),Fi=y("YEAR",!0),bi=y("TIMEZONE_HOUR",!0),Ai=y("TIMEZONE_MINUTE",!0),Pi=y("MONTH",!0),Di=y("DAY",!0),Li=y("HOUR",!0),_i=y("MINUTE",!0),Ri=y("SECOND",!0),Ui=y("CASE",!0),Ji=y("END",!0),Vi=y("WHEN",!0),Zi=y("THEN",!0),ki=y("ELSE",!0),zi=y(",",!1),$i=y("(",!1),Hi=y(")",!1),qi=H([" ","	",`
`,"\r"],!1,!1),vt=y("`",!1),ht=H(["`"],!0,!1),ji=function(e){return e},Yi=function(e){return k(I(),...e)},wt=function(e,r,s){return{op:r,expr:s,location:I()}},Bi=function(e,r){return de(e,r)},It=function(e,r,s){return{op:r,expr:s,location:I()}},Qi=function(e,r){return de(e,r)},Gi=function(e){return ko("NOT",e,I())},Wi=function(e,r){return r==""||r==null||r==null?e:r.type=="arithmetic"?de(e,r.tail):ar(r.op,e,r.right,r.escape,I())},gt=function(e,r){return{op:e,expr:r,location:I()}},Ki=function(e){return{type:"arithmetic",tail:e}},Xi=function(e,r){return{op:e+"NOT",right:r}},ea=function(e,r){return{op:e,right:r}},ta=function(e,r,s){return k(I(),r,s)},ra=function(e,r){return{op:"NOT"+e,right:r}},na=function(e,r,s){return k(I(),r,s)},ia=function(e,r){return{op:e,right:r}},aa=function(e){return e[0]+" "+e[2]},sa=function(e){return e[0]+" "+e[2]},ua=function(e,r,s){return{op:e,right:r,escape:s.value}},oa=function(e,r){return{op:e,right:r,escape:""}},la=function(e,r){return{op:e,right:r}},ca=function(e,r){return{op:e,right:r}},yt=function(e,r,s){return{op:r,expr:s,location:I()}},fa=function(e,r){return de(e,r)},Tt=function(e,r,s){return{op:r,expr:s,location:I()}},da=function(e,r){return de(e,r)},pa=function(e){return e.paren=!0,e},ma=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:I(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:I(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:I(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:I()}:{type:"column-reference",location:I(),table:"",column:e}},va=function(e){return{type:"column-reference",location:I(),table:"",column:e,delimited:!0}},ha=function(e){return e},wa=function(e,r){return e+r.join("")},Ia=function(e,r){return e+r.join("")},ga=function(e){return e},ya=function(e){return e.join("")},Ta=function(){return'"'},Na=function(e){return{type:"parameter",location:I(),value:e[1]}},Oa=function(e,r){return k(I(),e,r)},Sa=function(e,r){return k(I(),e,r)},xa=function(e){return{type:"function",location:I(),name:"extract",args:e}},Ca=function(e,r,s){return k(I(),e,r,...s?[s]:[])},Ma=function(e,r,s){return k(I(),e,r,s)},Ea=function(e){return{type:"function",location:I(),name:"substring",args:e}},Fa=function(e,r){return k(I(),e,r)},ba=function(e,r){return k(I(),e,r)},Aa=function(e){return{type:"function",location:I(),name:"cast",args:e}},Pa=function(){return{type:"data-type",location:I(),value:{type:"integer"}}},Da=function(){return{type:"data-type",location:I(),value:{type:"smallint"}}},La=function(){return{type:"data-type",location:I(),value:{type:"float"}}},_a=function(){return{type:"data-type",location:I(),value:{type:"real"}}},Ra=function(){return{type:"data-type",location:I(),value:{type:"date"}}},Ua=function(){return{type:"data-type",location:I(),value:{type:"timestamp"}}},Ja=function(){return{type:"data-type",location:I(),value:{type:"time"}}},Va=function(e){return{type:"data-type",location:I(),value:{type:"varchar",size:parseInt(e)}}},Za=function(e,r,s){return k(I(),e,r,s)},ka=function(e,r){return k(I(),e,r)},za=function(e){return{type:"function",location:I(),name:"trim",args:e}},$a=function(e){return{type:"string",location:I(),value:e??"BOTH"}},Ha=function(e,r){return k(I(),e,r)},qa=function(e,r){return k(I(),e,r)},ja=function(e){return{type:"function",location:I(),name:"position",args:e}},Ya=function(e,r){return{type:"function",location:I(),name:e,args:r}},Ba=function(e){return{type:"string",location:I(),value:e}},Qa=function(e){return e.type==="string"&&zo(e.value),{type:"timestamp",location:I(),value:e.value}},Ga=function(e){return e.type==="string"&&$o(e.value),{type:"time",location:I(),value:e.value}},Wa=function(e,r,s){return{type:"interval",location:I(),value:r,qualifier:s,op:e}},Ka=function(e,r){return{type:"interval",location:I(),value:e,qualifier:r,op:""}},Xa=function(e,r){return{type:"interval-qualifier",location:I(),start:e,end:r}},es=function(e,r){return{type:"interval-period",location:I(),period:e.value,precision:r,secondary:null}},ts=function(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}},rs=function(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}},ns=function(e,r){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:r}},is=function(e){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:null}},as=function(){return{type:"interval-period",location:I(),period:"second",precision:null,secondary:null}},ss=function(e,r){return{type:"interval-period",location:I(),period:e.value,precision:r,secondary:null}},us=function(e){return{type:"interval-period",location:I(),period:e.value,precision:null,secondary:null}},os=function(e,r){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:r}},ls=function(e){return{type:"interval-period",location:I(),period:"second",precision:e,secondary:null}},cs=function(){return{type:"interval-period",location:I(),period:"second",precision:null,secondary:null}},fs=function(){return{type:"string",location:I(),value:"day"}},ds=function(){return{type:"string",location:I(),value:"hour"}},ps=function(){return{type:"string",location:I(),value:"minute"}},ms=function(){return{type:"string",location:I(),value:"month"}},vs=function(){return{type:"string",location:I(),value:"year"}},hs=function(e){return parseFloat(e)},ws=function(e){return parseFloat(e)},Is=function(e){return e.type==="string"&&Ho(e.value),{type:"date",location:I(),value:e.value}},gs=function(){return{type:"null",location:I(),value:null}},ys=function(){return{type:"boolean",location:I(),value:!0}},Ts=function(){return{type:"boolean",location:I(),value:!1}},Nt=function(){return"'"},Ns=function(e){return{type:"string",location:I(),value:e.join("")}},Os=function(e,r){return{type:"case-expression",location:I(),format:"simple",operand:e,clauses:r,else:null,elseLocation:null}},Ss=function(e,r,s){return{type:"case-expression",location:I(),format:"simple",operand:e,clauses:r,else:s.value,elseLocation:s.location}},xs=function(e){return{type:"case-expression",location:I(),format:"searched",clauses:e,else:null,elseLocation:null}},Cs=function(e,r){return{type:"case-expression",location:I(),format:"searched",clauses:e,else:r.value,elseLocation:r.location}},Ms=function(e,r){return{type:"when-clause",location:I(),operand:e,value:r}},Es=function(e,r){return{type:"when-clause",location:I(),operand:e,value:r}},Fs=function(e){return{type:"else-clause",location:I(),value:e}},bs=function(e){return{type:"number",location:I(),value:e}},As=function(e,r,s){return parseFloat(e+r+s)},Ps=function(e,r){return parseFloat(e+r)},Ds=function(e,r){return parseFloat(e+r)},Ls=function(e){return parseFloat(e)},_s=function(e,r){return e[0]+r},Rs=function(e){return"."+(e??"")},Us=function(e,r){return e+r},Js=function(e){return e.join("")},Vs=function(e,r){return"e"+(r===null?"":r)},Zs=function(){return"IN"},ks=function(){return"IS"},zs=function(){return"LIKE"},$s=function(){return"ESCAPE"},Hs=function(){return"NOT"},qs=function(){return"AND"},js=function(){return"OR"},Ys=function(){return"BETWEEN"},Bs=function(){return"FROM"},Qs=function(){return"FOR"},Gs=function(){return"SUBSTRING"},Ws=function(){return"EXTRACT"},Ks=function(){return"TRIM"},Xs=function(){return"POSITION"},eu=function(){return"TIMESTAMP"},tu=function(){return"DATE"},ru=function(){return"TIME"},nu=function(){return"LEADING"},iu=function(){return"TRAILING"},au=function(){return"BOTH"},su=function(){return"CAST"},uu=function(){return"AS"},ou=function(){return"INTEGER"},lu=function(){return"INT"},cu=function(){return"SMALLINT"},fu=function(){return"FLOAT"},du=function(){return"REAL"},pu=function(){return"VARCHAR"},mu=function(){return"TO"},vu=function(){return"INTERVAL"},hu=function(){return"YEAR"},wu=function(){return"TIMEZONE_HOUR"},Iu=function(){return"TIMEZONE_MINUTE"},gu=function(){return"MONTH"},yu=function(){return"DAY"},Tu=function(){return"HOUR"},Nu=function(){return"MINUTE"},Ou=function(){return"SECOND"},Su=function(){return"CASE"},xu=function(){return"END"},Cu=function(){return"WHEN"},Mu=function(){return"THEN"},Eu=function(){return"ELSE"},Fu=function(e){return e},bu=function(e){return e.join("")},n=0|i.peg$currPos,f=n,ue=[{line:1,column:1}],Y=n,we=i.peg$maxFailExpected||[],c=0|i.peg$silentFails;if(i.startRule){if(!(i.startRule in v))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');g=v[i.startRule]}function I(){return Ie(f,n)}function _e(e,r){throw Pu(e,r=r!==void 0?r:Ie(f,n))}function y(e,r){return{type:"literal",text:e,ignoreCase:r}}function H(e,r,s){return{type:"class",parts:e,inverted:r,ignoreCase:s}}function Au(){return{type:"end"}}function Ot(e){var r,s=ue[e];if(s)return s;if(e>=ue.length)r=ue.length-1;else for(r=e;!ue[--r];);for(s={line:(s=ue[r]).line,column:s.column};r<e;)a.charCodeAt(r)===10?(s.line++,s.column=1):s.column++,r++;return ue[e]=s,s}function Ie(e,r,s){var o=Ot(e),h=Ot(r);return{source:l,start:{offset:e,line:o.line,column:o.column},end:{offset:r,line:h.line,column:h.column}}}function w(e){n<Y||(n>Y&&(Y=n,we=[]),we.push(e))}function Pu(e,r){return new se(e,null,null,r)}function Du(e,r,s){return new se(se.buildMessage(e,r),e,r,s)}function St(){var e,r;return e=n,p(),(r=M())!==t?(p(),f=e,e=ji(r)):(n=e,e=t),e}function xt(){var e,r,s,o,h,C;if(e=n,_()!==t){for(p(),r=[],s=M();s!==t;)r.push(s),s=n,o=n,h=p(),(C=W())!==t?o=h=[h,C,p()]:(n=o,o=t),o!==t&&(o=M())===t?(n=s,s=t):s=o;s=p(),(o=R())!==t?(f=e,e=Yi(r)):(n=e,e=t)}else n=e,e=t;return e}function M(){var e,r,s,o,h,C;if(e=n,(r=Re())!==t){for(s=[],o=n,p(),(h=Ht())!==t?(p(),(C=Re())!==t?(f=o,o=wt(r,h,C)):(n=o,o=t)):(n=o,o=t);o!==t;)s.push(o),o=n,p(),(h=Ht())!==t?(p(),(C=Re())!==t?(f=o,o=wt(r,h,C)):(n=o,o=t)):(n=o,o=t);f=e,e=Bi(r,s)}else n=e,e=t;return e}function Re(){var e,r,s,o,h,C;if(e=n,(r=ge())!==t){for(s=[],o=n,p(),(h=Ce())!==t?(p(),(C=ge())!==t?(f=o,o=It(r,h,C)):(n=o,o=t)):(n=o,o=t);o!==t;)s.push(o),o=n,p(),(h=Ce())!==t?(p(),(C=ge())!==t?(f=o,o=It(r,h,C)):(n=o,o=t)):(n=o,o=t);f=e,e=Qi(r,s)}else n=e,e=t;return e}function ge(){var e,r,s,o,h;return e=n,(r=fe())===t&&(r=n,a.charCodeAt(n)===33?(s=T,n++):(s=t,c===0&&w(Pn)),s!==t?(o=n,c++,a.charCodeAt(n)===61?(h=S,n++):(h=t,c===0&&w(Dn)),c--,h===t?o=void 0:(n=o,o=t),o!==t?r=s=[s,o]:(n=r,r=t)):(n=r,r=t)),r!==t?(s=p(),(o=ge())!==t?(f=e,e=Gi(o)):(n=e,e=t)):(n=e,e=t),e===t&&(e=Lu()),e}function Lu(){var e,r,s,o;return e=n,(r=G())!==t?(s=n,p(),(o=_u())!==t?s=o:(n=s,s=t),s===t&&(s=null),f=e,e=Wi(r,s)):(n=e,e=t),e}function _u(){var e;return(e=Ru())===t&&(e=Zu())===t&&(e=Ju())===t&&(e=Uu())===t&&(e=Vu()),e}function Ru(){var e,r,s,o,h;if(e=n,r=[],s=n,p(),(o=Ct())!==t?(p(),(h=G())!==t?(f=s,s=gt(o,h)):(n=s,s=t)):(n=s,s=t),s!==t)for(;s!==t;)r.push(s),s=n,p(),(o=Ct())!==t?(p(),(h=G())!==t?(f=s,s=gt(o,h)):(n=s,s=t)):(n=s,s=t);else r=t;return r!==t&&(f=e,r=Ki(r)),e=r}function Ct(){var e;return a.substr(n,2)===O?(e=O,n+=2):(e=t,c===0&&w(Ln)),e===t&&(a.charCodeAt(n)===62?(e=x,n++):(e=t,c===0&&w(_n)),e===t&&(a.substr(n,2)===D?(e=D,n+=2):(e=t,c===0&&w(Rn)),e===t&&(a.substr(n,2)===F?(e=F,n+=2):(e=t,c===0&&w(Un)),e===t&&(e=a.charAt(n),Sn.test(e)?n++:(e=t,c===0&&w(Jn)),e===t&&(a.substr(n,2)===X?(e=X,n+=2):(e=t,c===0&&w(Vn))))))),e}function Uu(){var e,r,s,o;return e=n,(r=zt())!==t?(p(),(s=fe())!==t?(p(),(o=G())!==t?(f=e,e=Xi(r,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=zt())!==t?(p(),(s=G())!==t?(f=e,e=ea(r,s)):(n=e,e=t)):(n=e,e=t)),e}function Ju(){var e,r,s,o,h,C,ie,sr;return e=n,(r=fe())!==t?(p(),(s=qt())!==t?(o=p(),h=n,(C=G())!==t?(p(),(ie=Ce())!==t?(p(),(sr=G())!==t?(f=h,h=ta(s,C,sr)):(n=h,h=t)):(n=h,h=t)):(n=h,h=t),h!==t?(f=e,e=ra(s,h)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=qt())!==t?(p(),s=n,(o=G())!==t?(h=p(),(C=Ce())!==t?(p(),(ie=G())!==t?(f=s,s=na(r,o,ie)):(n=s,s=t)):(n=s,s=t)):(n=s,s=t),s!==t?(f=e,e=ia(r,s)):(n=e,e=t)):(n=e,e=t)),e}function Mt(){var e,r,s,o,h;return e=n,r=n,(s=fe())!==t?(o=p(),(h=$t())!==t?r=s=[s,o,h]:(n=r,r=t)):(n=r,r=t),r!==t&&(f=e,r=aa(r)),(e=r)===t&&(e=$t()),e}function Et(){var e,r,s,o,h;return e=n,r=n,(s=fe())!==t?(o=p(),(h=ze())!==t?r=s=[s,o,h]:(n=r,r=t)):(n=r,r=t),r!==t&&(f=e,r=sa(r)),(e=r)===t&&(e=ze()),e}function Vu(){var e,r,s,o;return e=n,(r=Mt())!==t?(p(),(s=te())!==t?(p(),yo()!==t?(p(),(o=ke())!==t?(f=e,e=ua(r,s,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Mt())!==t?(p(),(s=te())!==t?(f=e,e=oa(r,s)):(n=e,e=t)):(n=e,e=t)),e}function Zu(){var e,r,s;return e=n,(r=Et())!==t?(p(),(s=xt())!==t?(f=e,e=la(r,s)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Et())!==t?(p(),(s=Ze())!==t?(f=e,e=ca(r,s)):(n=e,e=t)):(n=e,e=t)),e}function G(){var e,r,s,o,h,C;if(e=n,(r=Ue())!==t){for(s=[],o=n,p(),(h=Ft())!==t?(p(),(C=Ue())!==t?(f=o,o=yt(r,h,C)):(n=o,o=t)):(n=o,o=t);o!==t;)s.push(o),o=n,p(),(h=Ft())!==t?(p(),(C=Ue())!==t?(f=o,o=yt(r,h,C)):(n=o,o=t)):(n=o,o=t);f=e,e=fa(r,s)}else n=e,e=t;return e}function Ft(){var e;return e=a.charAt(n),ve.test(e)?n++:(e=t,c===0&&w(he)),e===t&&(a.substr(n,2)===ee?(e=ee,n+=2):(e=t,c===0&&w(Zn))),e}function Ue(){var e,r,s,o,h,C;if(e=n,(r=Je())!==t){for(s=[],o=n,p(),(h=bt())!==t?(p(),(C=Je())!==t?(f=o,o=Tt(r,h,C)):(n=o,o=t)):(n=o,o=t);o!==t;)s.push(o),o=n,p(),(h=bt())!==t?(p(),(C=Je())!==t?(f=o,o=Tt(r,h,C)):(n=o,o=t)):(n=o,o=t);f=e,e=da(r,s)}else n=e,e=t;return e}function bt(){var e;return e=a.charAt(n),xn.test(e)?n++:(e=t,c===0&&w(kn)),e}function Je(){var e,r;return(e=eo())===t&&(e=Bu())===t&&(e=Qu())===t&&(e=Wu())===t&&(e=Ku())===t&&(e=Gu())===t&&(e=Xu())===t&&(e=co())===t&&(e=ku())===t&&(e=Ze())===t&&(e=n,_()!==t?(p(),(r=M())!==t?(p(),R()!==t?(f=e,e=pa(r)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function ku(){var e,r;return e=n,(r=zu())!==t&&(f=e,r=ma(r)),(e=r)===t&&(e=n,(r=Hu())!==t&&(f=e,r=va(r)),e=r),e}function zu(){var e,r;return e=n,(r=$u())!==t&&(f=e,r=ha(r)),e=r}function $u(){var e,r,s,o;if(e=n,(r=Ve())!==t){for(s=[],o=Pt();o!==t;)s.push(o),o=Pt();f=e,e=wa(r,s)}else n=e,e=t;return e}function At(){var e,r,s,o;if(e=n,(r=Ve())!==t){for(s=[],o=N();o!==t;)s.push(o),o=N();f=e,e=Ia(r,s)}else n=e,e=t;return e}function Ve(){var e;return e=a.charAt(n),Cn.test(e)?n++:(e=t,c===0&&w(zn)),e}function N(){var e;return e=a.charAt(n),Mn.test(e)?n++:(e=t,c===0&&w($n)),e}function Pt(){var e;return e=a.charAt(n),ot.test(e)?n++:(e=t,c===0&&w(ft)),e}function Hu(){var e,r;return e=n,ye()!==t?(r=qu(),ye()!==t?(f=e,e=ga(r)):(n=e,e=t)):(n=e,e=t),e}function qu(){var e,r,s;for(e=n,r=[],s=Dt();s!==t;)r.push(s),s=Dt();return f=e,e=r=ya(r)}function Dt(){var e;return(e=Yu())===t&&(e=ju()),e}function ju(){var e;return e=n,ye()!==t&&ye()!==t?(f=e,e=Ta()):(n=e,e=t),e}function Yu(){var e;return e=a.charAt(n),ot.test(e)?n++:(e=t,c===0&&w(ft)),e}function ye(){var e;return e=a.charAt(n),En.test(e)?n++:(e=t,c===0&&w(Hn)),e}function Ze(){var e,r,s,o;return e=n,r=n,a.charCodeAt(n)===64?(s=Cr,n++):(s=t,c===0&&w(qn)),s!==t&&(o=At())!==t?r=s=[s,o]:(n=r,r=t),r!==t&&(f=e,r=Na(r)),e=r}function Bu(){var e,r,s,o;return e=n,jt()!==t?(p(),r=n,_()!==t?(p(),(s=Rt())!==t?(p(),$e()!==t?(p(),(o=M())!==t?(p(),R()!==t?(f=r,r=Oa(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t),r===t&&(r=n,_()!==t?(p(),(s=Rt())!==t?(p(),W()!==t?(p(),(o=M())!==t?(p(),R()!==t?(f=r,r=Sa(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)),r!==t?(f=e,e=xa(r)):(n=e,e=t)):(n=e,e=t),e}function Qu(){var e,r,s,o,h,C,ie;return e=n,No()!==t?(p(),r=n,_()!==t?(p(),(s=M())!==t?(p(),$e()!==t?(p(),(o=M())!==t?(p(),h=n,To()!==t?(C=p(),(ie=M())!==t?(p(),h=ie):(n=h,h=t)):(n=h,h=t),h===t&&(h=null),R()!==t?(f=r,r=Ca(s,o,h)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t),r===t&&(r=n,_()!==t?(p(),(s=M())!==t?(p(),W()!==t?(p(),(o=M())!==t?(p(),(h=W())!==t?(p(),(C=M())!==t&&(ie=R())!==t?(f=r,r=Ma(s,o,C)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)),r!==t?(f=e,e=Ea(r)):(n=e,e=t)):(n=e,e=t),e}function Gu(){var e,r,s,o;return e=n,Eo()!==t?(p(),r=n,_()!==t?(p(),(s=M())!==t?(p(),Fo()!==t?(p(),(o=Lt())!==t?(p(),R()!==t?(f=r,r=Fa(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t),r===t&&(r=n,_()!==t?(p(),(s=M())!==t?(p(),W()!==t?(p(),(o=Lt())!==t?(p(),R()!==t?(f=r,r=ba(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)),r!==t?(f=e,e=Aa(r)):(n=e,e=t)):(n=e,e=t),e}function Lt(){var e,r,s;return e=n,(r=bo())===t&&(r=Ao()),r!==t&&(f=e,r=Pa()),(e=r)===t&&(e=n,(r=Po())!==t&&(f=e,r=Da()),(e=r)===t&&(e=n,(r=Do())!==t&&(f=e,r=La()),(e=r)===t&&(e=n,(r=Lo())!==t&&(f=e,r=_a()),(e=r)===t&&(e=n,(r=Bt())!==t&&(f=e,r=Ra()),(e=r)===t&&(e=n,(r=Yt())!==t&&(f=e,r=Ua()),(e=r)===t&&(e=n,(r=Qt())!==t&&(f=e,r=Ja()),(e=r)===t&&(e=n,(r=_o())!==t?(p(),_()!==t?(p(),(s=re())!==t?(p(),R()!==t?(f=e,e=Va(s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)))))))),e}function Wu(){var e,r,s,o,h;return e=n,Oo()!==t?(p(),r=n,_()!==t?(p(),s=_t(),p(),(o=M())!==t?(p(),$e()!==t?(p(),(h=M())!==t?(p(),R()!==t?(f=r,r=Za(s,o,h)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t),r===t&&(r=n,_()!==t?(p(),s=_t(),p(),(o=M())!==t?(p(),R()!==t?(f=r,r=ka(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)),r!==t?(f=e,e=za(r)):(n=e,e=t)):(n=e,e=t),e}function _t(){var e,r;return e=n,(r=xo())===t&&(r=Co())===t&&(r=Mo()),r===t&&(r=null),f=e,e=r=$a(r)}function Ku(){var e,r,s,o;return e=n,So()!==t?(p(),r=n,_()!==t?(p(),(s=M())!==t?(p(),ze()!==t?(p(),(o=M())!==t?(p(),R()!==t?(f=r,r=Ha(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t),r===t&&(r=n,_()!==t?(p(),(s=M())!==t?(p(),W()!==t?(p(),(o=M())!==t?(p(),R()!==t?(f=r,r=qa(s,o)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)):(n=r,r=t)),r!==t?(f=e,e=ja(r)):(n=e,e=t)):(n=e,e=t),e}function Xu(){var e,r,s,o;return e=n,r=n,c++,s=jt(),c--,s===t?r=void 0:(n=r,r=t),r!==t&&(s=Zo())!==t?(p(),(o=xt())!==t?(f=e,e=Ya(s,o)):(n=e,e=t)):(n=e,e=t),e}function Rt(){var e,r;return e=n,(r=Wt())===t&&(r=Kt())===t&&(r=Xt())===t&&(r=er())===t&&(r=tr())===t&&(r=ne())===t&&(r=Uo())===t&&(r=Jo()),r!==t&&(f=e,r=Ba(r)),e=r}function eo(){var e;return(e=ke())===t&&(e=mo())===t&&(e=lo())===t&&(e=oo())===t&&(e=uo())===t&&(e=to())===t&&(e=no())===t&&(e=ro()),e}function to(){var e,r;return e=n,Yt()!==t?(p(),(r=te())!==t?(f=e,e=Qa(r)):(n=e,e=t)):(n=e,e=t),e}function ro(){var e,r;return e=n,Qt()!==t?(p(),(r=te())!==t?(f=e,e=Ga(r)):(n=e,e=t)):(n=e,e=t),e}function no(){var e,r,s,o;return e=n,Gt()!==t?(p(),r=a.charAt(n),ve.test(r)?n++:(r=t,c===0&&w(he)),r!==t?(p(),(s=te())!==t?(p(),(o=Ut())!==t?(f=e,e=Wa(r,s,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,Gt()!==t?(p(),(r=te())!==t?(p(),(s=Ut())!==t?(f=e,e=Ka(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ut(){var e,r,s;return e=n,(r=io())!==t?(p(),Ro()!==t?(p(),(s=ao())!==t?(f=e,e=Xa(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=so()),e}function io(){var e,r,s;return e=n,(r=ce())!==t?(p(),_()!==t?(p(),(s=Ne())!==t?(p(),R()!==t?(f=e,e=es(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ce())!==t&&(f=e,r=ts(r)),e=r),e}function ao(){var e,r,s,o;return e=n,(r=ce())!==t&&(f=e,r=rs(r)),(e=r)===t&&(e=n,(r=ne())!==t?(p(),_()!==t?(p(),(s=Ne())!==t?(p(),W()!==t?(p(),(o=Te())!==t?(p(),R()!==t?(f=e,e=ns(s,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ne())!==t?(p(),_()!==t?(p(),(s=Ne())!==t?(p(),R()!==t?(f=e,e=is(s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ne())!==t&&(f=e,r=as()),e=r))),e}function so(){var e,r,s,o;return e=n,(r=ce())!==t?(p(),_()!==t?(p(),(s=Te())!==t?(p(),R()!==t?(f=e,e=ss(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ce())!==t&&(f=e,r=us(r)),(e=r)===t&&(e=n,(r=ne())!==t?(p(),_()!==t?(p(),(s=Ne())!==t?(p(),W()!==t?(p(),(o=Te())!==t?(p(),R()!==t?(f=e,e=os(s,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ne())!==t?(p(),_()!==t?(p(),(s=Te())!==t?(p(),R()!==t?(f=e,e=ls(s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=ne())!==t&&(f=e,r=cs()),e=r)))),e}function ce(){var e,r;return e=n,(r=Xt())!==t&&(f=e,r=fs()),(e=r)===t&&(e=n,(r=er())!==t&&(f=e,r=ds()),(e=r)===t&&(e=n,(r=tr())!==t&&(f=e,r=ps()),(e=r)===t&&(e=n,(r=Kt())!==t&&(f=e,r=ms()),(e=r)===t&&(e=n,(r=Wt())!==t&&(f=e,r=vs()),e=r)))),e}function Te(){var e,r;return e=n,(r=re())!==t&&(f=e,r=hs(r)),e=r}function Ne(){var e,r;return e=n,(r=re())!==t&&(f=e,r=ws(r)),e=r}function uo(){var e,r;return e=n,Bt()!==t?(p(),(r=te())!==t?(f=e,e=Is(r)):(n=e,e=t)):(n=e,e=t),e}function oo(){var e,r;return e=n,(r=wo())!==t&&(f=e,r=gs()),e=r}function lo(){var e,r;return e=n,(r=Io())!==t&&(f=e,r=ys()),(e=r)===t&&(e=n,(r=go())!==t&&(f=e,r=Ts()),e=r),e}function te(){var e;return(e=ke())===t&&(e=Ze()),e}function ke(){var e,r,s,o,h;if(e=n,a.charCodeAt(n)===39?(r=at,n++):(r=t,c===0&&w(dt)),r===t&&(a.substr(n,2)===st?(r=st,n+=2):(r=t,c===0&&w(jn))),r!==t){for(s=[],o=n,a.substr(n,2)===me?(h=me,n+=2):(h=t,c===0&&w(pt)),h!==t&&(f=o,h=Nt()),(o=h)===t&&(o=a.charAt(n),lt.test(o)?n++:(o=t,c===0&&w(mt)));o!==t;)s.push(o),o=n,a.substr(n,2)===me?(h=me,n+=2):(h=t,c===0&&w(pt)),h!==t&&(f=o,h=Nt()),(o=h)===t&&(o=a.charAt(n),lt.test(o)?n++:(o=t,c===0&&w(mt)));a.charCodeAt(n)===39?(o=at,n++):(o=t,c===0&&w(dt)),o!==t?(f=e,e=Ns(s)):(n=e,e=t)}else n=e,e=t;return e}function co(){var e;return(e=fo())===t&&(e=po()),e}function fo(){var e,r,s,o,h;if(e=n,Me()!==t)if(p(),(r=M())!==t){for(p(),s=[],o=n,(h=Se())!==t?(p(),o=h):(n=o,o=t);o!==t;)s.push(o),o=n,(h=Se())!==t?(p(),o=h):(n=o,o=t);(o=Ee())!==t?(f=e,e=Os(r,s)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,Me()!==t)if(p(),(r=M())!==t){for(p(),s=[],o=n,(h=Se())!==t?(p(),o=h):(n=o,o=t);o!==t;)s.push(o),o=n,(h=Se())!==t?(p(),o=h):(n=o,o=t);(o=Jt())!==t?(h=p(),Ee()!==t?(f=e,e=Ss(r,s,o)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function po(){var e,r,s,o;if(e=n,Me()!==t){for(p(),r=[],s=n,(o=Oe())!==t?(p(),s=o):(n=s,s=t);s!==t;)r.push(s),s=n,(o=Oe())!==t?(p(),s=o):(n=s,s=t);(s=Ee())!==t?(f=e,e=xs(r)):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,Me()!==t){for(p(),r=[],s=n,(o=Oe())!==t?(p(),s=o):(n=s,s=t);s!==t;)r.push(s),s=n,(o=Oe())!==t?(p(),s=o):(n=s,s=t);(s=Jt())!==t?(o=p(),Ee()!==t?(f=e,e=Cs(r,s)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Oe(){var e,r,s;return e=n,rr()!==t?(p(),(r=M())!==t?(p(),nr()!==t?(p(),(s=M())!==t?(f=e,e=Ms(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Se(){var e,r,s;return e=n,rr()!==t?(p(),(r=M())!==t?(p(),nr()!==t?(p(),(s=M())!==t?(f=e,e=Es(r,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Jt(){var e,r;return e=n,Vo()!==t?(p(),(r=M())!==t?(f=e,e=Fs(r)):(n=e,e=t)):(n=e,e=t),e}function mo(){var e,r,s,o;return e=n,(r=vo())!==t?(s=n,c++,o=Ve(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=bs(r)):(n=e,e=t)):(n=e,e=t),e}function vo(){var e,r,s,o;return e=n,(r=xe())!==t&&(s=Vt())!==t&&(o=Zt())!==t?(f=e,e=As(r,s,o)):(n=e,e=t),e===t&&(e=n,(r=xe())!==t&&(s=Vt())!==t?(f=e,e=Ps(r,s)):(n=e,e=t),e===t&&(e=n,(r=xe())!==t&&(s=Zt())!==t?(f=e,e=Ds(r,s)):(n=e,e=t),e===t&&(e=n,(r=xe())!==t&&(f=e,r=Ls(r)),e=r))),e}function xe(){var e,r,s;return(e=re())===t&&(e=n,r=a.charAt(n),ve.test(r)?n++:(r=t,c===0&&w(he)),r!==t&&(s=re())!==t?(f=e,e=_s(r,s)):(n=e,e=t)),e}function Vt(){var e,r,s;return e=n,a.charCodeAt(n)===46?(r=Mr,n++):(r=t,c===0&&w(Yn)),r!==t?((s=re())===t&&(s=null),f=e,e=Rs(s)):(n=e,e=t),e}function Zt(){var e,r,s;return e=n,(r=ho())!==t&&(s=re())!==t?(f=e,e=Us(r,s)):(n=e,e=t),e}function re(){var e,r,s;if(e=n,r=[],(s=kt())!==t)for(;s!==t;)r.push(s),s=kt();else r=t;return r!==t&&(f=e,r=Js(r)),e=r}function kt(){var e;return e=a.charAt(n),Fn.test(e)?n++:(e=t,c===0&&w(Bn)),e}function ho(){var e,r,s;return e=n,r=a.charAt(n),bn.test(r)?n++:(r=t,c===0&&w(Qn)),r!==t?(s=a.charAt(n),ve.test(s)?n++:(s=t,c===0&&w(he)),s===t&&(s=null),f=e,e=Vs(r,s)):(n=e,e=t),e}function wo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Er?n+=4:(r=t,c===0&&w(Gn)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?e=r=[r,s]:(n=e,e=t)):(n=e,e=t),e}function Io(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Fr?n+=4:(r=t,c===0&&w(Wn)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?e=r=[r,s]:(n=e,e=t)):(n=e,e=t),e}function go(){var e,r,s,o;return e=n,(r=a.substr(n,5)).toLowerCase()===br?n+=5:(r=t,c===0&&w(Kn)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?e=r=[r,s]:(n=e,e=t)):(n=e,e=t),e}function ze(){var e,r,s,o;return e=n,(r=a.substr(n,2)).toLowerCase()===Ar?n+=2:(r=t,c===0&&w(Xn)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Zs()):(n=e,e=t)):(n=e,e=t),e}function zt(){var e,r,s,o;return e=n,(r=a.substr(n,2)).toLowerCase()===Pr?n+=2:(r=t,c===0&&w(ei)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=ks()):(n=e,e=t)):(n=e,e=t),e}function $t(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Dr?n+=4:(r=t,c===0&&w(ti)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=zs()):(n=e,e=t)):(n=e,e=t),e}function yo(){var e,r,s,o;return e=n,(r=a.substr(n,6)).toLowerCase()===Lr?n+=6:(r=t,c===0&&w(ri)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=$s()):(n=e,e=t)):(n=e,e=t),e}function fe(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===_r?n+=3:(r=t,c===0&&w(ni)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Hs()):(n=e,e=t)):(n=e,e=t),e}function Ce(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===Rr?n+=3:(r=t,c===0&&w(ii)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=qs()):(n=e,e=t)):(n=e,e=t),e}function Ht(){var e,r,s,o;return e=n,(r=a.substr(n,2)).toLowerCase()===Ur?n+=2:(r=t,c===0&&w(ai)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=js()):(n=e,e=t)):(n=e,e=t),e}function qt(){var e,r,s,o;return e=n,(r=a.substr(n,7)).toLowerCase()===Jr?n+=7:(r=t,c===0&&w(si)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Ys()):(n=e,e=t)):(n=e,e=t),e}function $e(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Vr?n+=4:(r=t,c===0&&w(ui)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Bs()):(n=e,e=t)):(n=e,e=t),e}function To(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===Zr?n+=3:(r=t,c===0&&w(oi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Qs()):(n=e,e=t)):(n=e,e=t),e}function No(){var e,r,s,o;return e=n,(r=a.substr(n,9)).toLowerCase()===kr?n+=9:(r=t,c===0&&w(li)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Gs()):(n=e,e=t)):(n=e,e=t),e}function jt(){var e,r,s,o;return e=n,(r=a.substr(n,7)).toLowerCase()===zr?n+=7:(r=t,c===0&&w(ci)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Ws()):(n=e,e=t)):(n=e,e=t),e}function Oo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===$r?n+=4:(r=t,c===0&&w(fi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Ks()):(n=e,e=t)):(n=e,e=t),e}function So(){var e,r,s,o;return e=n,(r=a.substr(n,8)).toLowerCase()===Hr?n+=8:(r=t,c===0&&w(di)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Xs()):(n=e,e=t)):(n=e,e=t),e}function Yt(){var e,r,s,o;return e=n,(r=a.substr(n,9)).toLowerCase()===qr?n+=9:(r=t,c===0&&w(pi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=eu()):(n=e,e=t)):(n=e,e=t),e}function Bt(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===jr?n+=4:(r=t,c===0&&w(mi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=tu()):(n=e,e=t)):(n=e,e=t),e}function Qt(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Yr?n+=4:(r=t,c===0&&w(vi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=ru()):(n=e,e=t)):(n=e,e=t),e}function xo(){var e,r,s,o;return e=n,(r=a.substr(n,7)).toLowerCase()===Br?n+=7:(r=t,c===0&&w(hi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=nu()):(n=e,e=t)):(n=e,e=t),e}function Co(){var e,r,s,o;return e=n,(r=a.substr(n,8)).toLowerCase()===Qr?n+=8:(r=t,c===0&&w(wi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=iu()):(n=e,e=t)):(n=e,e=t),e}function Mo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Gr?n+=4:(r=t,c===0&&w(Ii)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=au()):(n=e,e=t)):(n=e,e=t),e}function Eo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===Wr?n+=4:(r=t,c===0&&w(gi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=su()):(n=e,e=t)):(n=e,e=t),e}function Fo(){var e,r,s,o;return e=n,(r=a.substr(n,2)).toLowerCase()===Kr?n+=2:(r=t,c===0&&w(yi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=uu()):(n=e,e=t)):(n=e,e=t),e}function bo(){var e,r,s,o;return e=n,(r=a.substr(n,7)).toLowerCase()===Xr?n+=7:(r=t,c===0&&w(Ti)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=ou()):(n=e,e=t)):(n=e,e=t),e}function Ao(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===en?n+=3:(r=t,c===0&&w(Ni)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=lu()):(n=e,e=t)):(n=e,e=t),e}function Po(){var e,r,s,o;return e=n,(r=a.substr(n,8)).toLowerCase()===tn?n+=8:(r=t,c===0&&w(Oi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=cu()):(n=e,e=t)):(n=e,e=t),e}function Do(){var e,r,s,o;return e=n,(r=a.substr(n,5)).toLowerCase()===rn?n+=5:(r=t,c===0&&w(Si)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=fu()):(n=e,e=t)):(n=e,e=t),e}function Lo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===nn?n+=4:(r=t,c===0&&w(xi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=du()):(n=e,e=t)):(n=e,e=t),e}function _o(){var e,r,s,o;return e=n,(r=a.substr(n,7)).toLowerCase()===an?n+=7:(r=t,c===0&&w(Ci)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=pu()):(n=e,e=t)):(n=e,e=t),e}function Ro(){var e,r,s,o;return e=n,(r=a.substr(n,2)).toLowerCase()===sn?n+=2:(r=t,c===0&&w(Mi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=mu()):(n=e,e=t)):(n=e,e=t),e}function Gt(){var e,r,s,o;return e=n,(r=a.substr(n,8)).toLowerCase()===un?n+=8:(r=t,c===0&&w(Ei)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=vu()):(n=e,e=t)):(n=e,e=t),e}function Wt(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===on?n+=4:(r=t,c===0&&w(Fi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=hu()):(n=e,e=t)):(n=e,e=t),e}function Uo(){var e,r,s,o;return e=n,(r=a.substr(n,13)).toLowerCase()===ln?n+=13:(r=t,c===0&&w(bi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=wu()):(n=e,e=t)):(n=e,e=t),e}function Jo(){var e,r,s,o;return e=n,(r=a.substr(n,15)).toLowerCase()===cn?n+=15:(r=t,c===0&&w(Ai)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Iu()):(n=e,e=t)):(n=e,e=t),e}function Kt(){var e,r,s,o;return e=n,(r=a.substr(n,5)).toLowerCase()===fn?n+=5:(r=t,c===0&&w(Pi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=gu()):(n=e,e=t)):(n=e,e=t),e}function Xt(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===dn?n+=3:(r=t,c===0&&w(Di)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=yu()):(n=e,e=t)):(n=e,e=t),e}function er(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===pn?n+=4:(r=t,c===0&&w(Li)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Tu()):(n=e,e=t)):(n=e,e=t),e}function tr(){var e,r,s,o;return e=n,(r=a.substr(n,6)).toLowerCase()===mn?n+=6:(r=t,c===0&&w(_i)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Nu()):(n=e,e=t)):(n=e,e=t),e}function ne(){var e,r,s,o;return e=n,(r=a.substr(n,6)).toLowerCase()===vn?n+=6:(r=t,c===0&&w(Ri)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Ou()):(n=e,e=t)):(n=e,e=t),e}function Me(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===hn?n+=4:(r=t,c===0&&w(Ui)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Su()):(n=e,e=t)):(n=e,e=t),e}function Ee(){var e,r,s,o;return e=n,(r=a.substr(n,3)).toLowerCase()===wn?n+=3:(r=t,c===0&&w(Ji)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=xu()):(n=e,e=t)):(n=e,e=t),e}function rr(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===In?n+=4:(r=t,c===0&&w(Vi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Cu()):(n=e,e=t)):(n=e,e=t),e}function nr(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===gn?n+=4:(r=t,c===0&&w(Zi)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Mu()):(n=e,e=t)):(n=e,e=t),e}function Vo(){var e,r,s,o;return e=n,(r=a.substr(n,4)).toLowerCase()===yn?n+=4:(r=t,c===0&&w(ki)),r!==t?(s=n,c++,o=N(),c--,o===t?s=void 0:(n=s,s=t),s!==t?(f=e,e=Eu()):(n=e,e=t)):(n=e,e=t),e}function W(){var e;return a.charCodeAt(n)===44?(e=Tn,n++):(e=t,c===0&&w(zi)),e}function _(){var e;return a.charCodeAt(n)===40?(e=Nn,n++):(e=t,c===0&&w($i)),e}function R(){var e;return a.charCodeAt(n)===41?(e=On,n++):(e=t,c===0&&w(Hi)),e}function p(){var e,r;for(e=[],r=ir();r!==t;)e.push(r),r=ir();return e}function ir(){var e;return e=a.charAt(n),An.test(e)?n++:(e=t,c===0&&w(qi)),e}function Zo(){var e,r,s,o;if(e=n,(r=At())!==t&&(f=e,r=Fu(r)),(e=r)===t)if(e=n,a.charCodeAt(n)===96?(r=ut,n++):(r=t,c===0&&w(vt)),r!==t){if(s=[],o=a.charAt(n),ct.test(o)?n++:(o=t,c===0&&w(ht)),o!==t)for(;o!==t;)s.push(o),o=a.charAt(n),ct.test(o)?n++:(o=t,c===0&&w(ht));else s=t;s!==t?(a.charCodeAt(n)===96?(o=ut,n++):(o=t,c===0&&w(vt)),o!==t?(f=e,e=bu(s)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function ko(e,r,s){return{type:"unary-expression",location:s,operator:e,expr:r}}function ar(e,r,s,o,h){const C={type:"binary-expression",location:h,operator:e,left:r,right:s};return o!==void 0&&(C.escape=o),C}function k(e,...r){return{type:"expression-list",location:e,value:r}}function de(e,r){let s=e;for(const{op:o,expr:h,location:{end:C}}of r)s=ar(o,s,h,void 0,{...s.location,end:C});return s}function zo(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&_e("Timestamp literal is invalid")}function $o(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&_e("Time literal is invalid")}function Ho(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&_e("Date literal is invalid")}if(u=g(),i.peg$library)return{peg$result:u,peg$currPos:n,peg$FAILED:t,peg$maxFailExpected:we,peg$maxFailPos:Y};if(u!==t&&n===a.length)return u;throw u!==t&&n<a.length&&w(Au()),Du(we,Y<a.length?a.charAt(Y):null,Y<a.length?Ie(Y,Y+1):Ie(Y,Y))}Ic(se,Error),se.prototype.format=function(a){var i="Error: "+this.message;if(this.location){var u,t=null;for(u=0;u<a.length;u++)if(a[u].source===this.location.source){t=a[u].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,v=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,g=this.location.source+":"+v.line+":"+v.column;if(t){var T=this.location.end,S=Qe("",v.line.toString().length," "),O=t[l.line-1],x=(l.line===T.line?T.column:O.length+1)-l.column||1;i+=`
 --> `+g+`
`+S+` |
`+v.line+" | "+O+`
`+S+" | "+Qe("",l.column-1," ")+Qe("",x,"^")}else i+=`
 at `+g}return i},se.buildMessage=function(a,i){var u={literal:function(O){return'"'+l(O.text)+'"'},class:function(O){var x=O.parts.map(function(D){return Array.isArray(D)?v(D[0])+"-"+v(D[1]):v(D)});return"["+(O.inverted?"^":"")+x.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(O){return O.description}};function t(O){return O.charCodeAt(0).toString(16).toUpperCase()}function l(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+t(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+t(x)})}function v(O){return O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+t(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+t(x)})}function g(O){return u[O.type](O)}function T(O){var x,D,F=O.map(g);if(F.sort(),F.length>0){for(x=1,D=1;x<F.length;x++)F[x-1]!==F[x]&&(F[D]=F[x],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function S(O){return O?'"'+l(O)+'"':"end of input"}return"Expected "+T(a)+" but "+S(i)+" found."};class yc{static parse(i){return gc(i)}}function U(a,i){if(a!=null)switch(i(a),a.type){case"when-clause":U(a.operand,i),U(a.value,i);break;case"case-expression":for(const u of a.clauses)U(u,i);a.format==="simple"&&U(a.operand,i),a.else!==null&&U(a.else,i);break;case"expression-list":for(const u of a.value)U(u,i);break;case"unary-expression":U(a.expr,i);break;case"binary-expression":U(a.left,i),U(a.right,i);break;case"function":U(a.args,i);break;case"interval":U(a.value,i),U(a.qualifier,i);break;case"interval-qualifier":U(a.start,i),U(a.end,i)}}const Tc=new Set(["current_timestamp","current_date","current_time"]);class be{static makeBool(i){return Nr(i)}static featureValue(i,u,t,l){return xr(i,u,t,l)}static equalsNull(i){return i===null}static applyLike(i,u,t){return Xe(i,u,t)}static ensureArray(i){return We(i)}static applyIn(i,u,t){return Ke(i,u)}static currentTimestamp(i){return Pe(new Date,i)}static currentDate(i){return j.fromNow(i)}static currentTime(i){const u=Pe(new Date,i);return $.fromDateTime(u)}static makeSqlInterval(i,u,t){return E.createFromValueAndQualifier(i,u,t)}static convertInterval(i){return i instanceof E?i.valueInMilliseconds():i}static compare(i,u,t,l){return z(u,t,i)}static calculate(i,u,t,l){return Tr(i,u,t,l)}static evaluateTime(i){return tt(i)}static evaluateTimestamp(i,u,t){return De(i,u,t)}static evaluateDate(i,u){return Ir(i,u)}static evaluateFunction(i,u,t){return rt(i,u,t)}static lookup(i,u){const t=u[i];return t===void 0?null:t}static between(i,u,t){return i==null||u[0]==null||u[1]==null?null:z(i,u[0],">=")&&z(i,u[1],"<=")}static notbetween(i,u,t){return i==null||u[0]==null||u[1]==null?null:z(i,u[0],"<")||z(i,u[1],">")}static ternaryNot(i){return Ae(i)}static ternaryAnd(i,u){return Or(i,u)}static ternaryOr(i,u){return Sr(i,u)}}class it{constructor(i,u,t="UTC",l=null){this.fieldsIndex=u,this.timeZone=t,this.currentUser=l,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=yc.parse(i);const{isStandardized:v,isAggregate:g,currentUserRequired:T,referencedFieldNames:S}=this._extractExpressionInfo(u);this._referencedFieldNames=S,this.isStandardized=v,this.isAggregate=g,this.currentUserRequired=T}static convertValueToStorageFormat(i,u=null){if(u===null)return q(i)?i.getTime():b(i)?i.toMillis():P(i)?i.toStorageFormat():L(i)?i.toStorageString():A(i)?i.toStorageFormat():i;switch(u){case"date":return q(i)?i.getTime():b(i)?i.toMillis():P(i)?i.toMilliseconds():A(i)?i.toNumber():i;case"date-only":return q(i)?j.fromDateJS(i).toString():P(i)?j.fromSqlTimeStampOffset(i).toString():b(i)?j.fromDateTime(i).toString():i;case"time-only":return q(i)?$.fromDateJS(i).toStorageString():b(i)?$.fromDateTime(i).toStorageString():P(i)?$.fromSqlTimeStampOffset(i).toStorageString():L(i)?i.toStorageString():i;case"timestamp-offset":if(q(i))return Q.fromJSDate(i).toStorageFormat();if(b(i))return Q.fromDateTime(i).toStorageFormat();if(P(i))return i.toStorageFormat()}return i}static create(i,u={}){return new it(i,u.fieldsIndex,u.timeZone??void 0,u.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(i,u=le,t=this.currentUser){return!!this._evaluateNode(this.parseTree,null,u,i,t)}calculateValue(i,u=le,t=this.currentUser){const l=this._evaluateNode(this.parseTree,i,u,null,t);return l instanceof E?l.valueInMilliseconds()/864e5:l}calculateValueCompiled(i,u=le,t=this.currentUser){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(i,this.parameters,u,this.fieldsIndex,this.timeZone,t??null):ur("esri-csp-restrictions")?this.calculateValue(i,u):(this._compileMe(),this.parseTree._compiledVersion(i,this.parameters,u,this.fieldsIndex,this.timeZone,t??null))}testFeature(i,u=le,t=this.currentUser){return!!this._evaluateNode(this.parseTree,i,u,null,t)}testFeatureCompiled(i,u=le,t=this.currentUser){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(i,this.parameters,u,this.fieldsIndex,this.timeZone,t??null):ur("esri-csp-restrictions")?this.testFeature(i,u):(this._compileMe(),!!this.parseTree._compiledVersion(i,this.parameters,u,this.fieldsIndex,this.timeZone,t??null))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,U(this.parseTree,i=>{i.type==="current-time"?this._hasDateFunctions=!0:i.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Tc.has(i.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const i=new Set;return U(this.parseTree,u=>{u.type==="function"&&i.add(u.name.toLowerCase())}),Array.from(i)}getExpressions(){const i=new Map;return U(this.parseTree,u=>{if(u.type==="function"){const t=u.name.toLowerCase(),l=u.args.value[0];if(l.type==="column-reference"){const v=l.column,g=`${t}-${v}`;i.has(g)||i.set(g,{aggregateType:t,field:v})}}}),[...i.values()]}getVariables(){const i=new Set;return U(this.parseTree,u=>{u.type==="parameter"&&i.add(u.value.toLowerCase())}),Array.from(i)}_compileMe(){const i="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",i).bind(be)}_extractExpressionInfo(i){const u=[],t=new Set;let l=!0,v=!1,g=!1;return U(this.parseTree,T=>{switch(T.type){case"column-reference":{const S=i?.get(T.column);let O,x;S?O=x=S.name??"":(x=T.column,O=x.toLowerCase()),t.has(O)||(t.add(O),u.push(x)),T.column=x;break}case"current-user":g=!0;break;case"function":{const{name:S,args:O}=T,x=O.value.length;l&&(l=yl(S,x)),v===!1&&(v=lr(S,x));break}}}),{referencedFieldNames:Array.from(u),isStandardized:l,isAggregate:v,currentUserRequired:g}}evaluateNodeToJavaScript(i){switch(i.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(i.value)+", "+JSON.stringify(i.qualifier)+","+JSON.stringify(i.op)+")";case"case-expression":{let u="";if(i.format==="simple"){const t=this.evaluateNodeToJavaScript(i.operand);u="( ";for(let l=0;l<i.clauses.length;l++)u+=" (this.compare('=',"+t+","+this.evaluateNodeToJavaScript(i.clauses[l].operand)+") ? ("+this.evaluateNodeToJavaScript(i.clauses[l].value)+") : ";i.else!==null?u+=this.evaluateNodeToJavaScript(i.else):u+="null",u+=" )"}else{u="( ";for(let t=0;t<i.clauses.length;t++)u+=" this.makeBool("+this.evaluateNodeToJavaScript(i.clauses[t].operand)+")===true ? ("+this.evaluateNodeToJavaScript(i.clauses[t].value)+") : ";i.else!==null?u+=this.evaluateNodeToJavaScript(i.else):u+="null",u+=" )"}return u}case"parameter":return"this.lookup("+JSON.stringify(i.value.toLowerCase())+",lookups)";case"expression-list":{let u="[";for(const t of i.value)u!=="["&&(u+=","),u+=this.evaluateNodeToJavaScript(t);return u+="]",u}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(i.expr)+")";case"binary-expression":switch(i.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+" )";case"IS":if(i.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(i.left)+")";case"ISNOT":if(i.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(i.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(i.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(i.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(i.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(i.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+","+JSON.stringify(i.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+","+JSON.stringify(i.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(i.operator)+","+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(i.operator)+","+this.evaluateNodeToJavaScript(i.left)+","+this.evaluateNodeToJavaScript(i.right)+", timeZone)";default:throw new m(d.UnsupportedOperator,{operator:i.operator})}case"null":case"boolean":case"string":case"number":return JSON.stringify(i.value);case"time":return"this.evaluateTime("+JSON.stringify(i.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(i.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(i.value)+", 'unknown')";case"current-time":return i.mode==="date"?"this.currentDate(timeZone)":i.mode==="time"?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case"current-user":return"currentUser";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(i.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(i.name)+","+this.evaluateNodeToJavaScript(i.args)+", timeZone)"}throw new m(d.UnsupportedSyntax,{node:i.type})}_evaluateNode(i,u,t,l,v){let g;switch(i.type){case"interval":{const T=this._evaluateNode(i.value,u,t,l,v);return E.createFromValueAndQualifier(T,i.qualifier,i.op)}case"case-expression":if(i.format==="simple"){const T=this._evaluateNode(i.operand,u,t,l,v);for(let S=0;S<i.clauses.length;S++)if(z(T,this._evaluateNode(i.clauses[S].operand,u,t,l,v),"=",this.timeZone))return this._evaluateNode(i.clauses[S].value,u,t,l,v);if(i.else!==null)return this._evaluateNode(i.else,u,t,l,v)}else{for(let T=0;T<i.clauses.length;T++)if(Nr(this._evaluateNode(i.clauses[T].operand,u,t,l,v)))return this._evaluateNode(i.clauses[T].value,u,t,l,v);if(i.else!==null)return this._evaluateNode(i.else,u,t,l,v)}return null;case"parameter":return g=this.parameters[i.value.toLowerCase()],q(g)?J.fromJSDate(g):g instanceof qo?g.toDateTime():g;case"expression-list":{const T=[];for(const S of i.value)T.push(this._evaluateNode(S,u,t,l,v));return T}case"unary-expression":return Ae(this._evaluateNode(i.expr,u,t,l,v));case"binary-expression":switch(i.operator){case"AND":return Or(this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v));case"OR":return Sr(this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v));case"IS":if(i.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(i.left,u,t,l,v)===null;case"ISNOT":if(i.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(i.left,u,t,l,v)!==null;case"IN":{const T=We(this._evaluateNode(i.right,u,t,l,v));return Ke(this._evaluateNode(i.left,u,t,l,v),T,this.timeZone)}case"NOT IN":{const T=We(this._evaluateNode(i.right,u,t,l,v));return Ae(Ke(this._evaluateNode(i.left,u,t,l,v),T,this.timeZone))}case"BETWEEN":{const T=this._evaluateNode(i.left,u,t,l,v),S=this._evaluateNode(i.right,u,t,l,v);return T==null||S[0]==null||S[1]==null?null:z(T,S[0],">=",this.timeZone)&&z(T,S[1],"<=",this.timeZone)}case"NOTBETWEEN":{const T=this._evaluateNode(i.left,u,t,l,v),S=this._evaluateNode(i.right,u,t,l,v);return T==null||S[0]==null||S[1]==null?null:z(T,S[0],"<",this.timeZone)||z(T,S[1],">",this.timeZone)}case"LIKE":return Xe(this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v),i.escape);case"NOT LIKE":return Ae(Xe(this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v),i.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return z(this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v),i.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return Tr(i.operator,this._evaluateNode(i.left,u,t,l,v),this._evaluateNode(i.right,u,t,l,v),this.timeZone)}case"null":case"boolean":case"string":case"number":return i.value;case"date":return i.parsedValue??=Ir(i.value,"unknown"),i.parsedValue;case"timestamp":return i.parsedValue??=De(i.value,"unknown"),i.parsedValue;case"time":return tt(i.value);case"current-time":return i.mode==="date"?be.currentDate(this.timeZone):i.mode==="time"?be.currentTime(this.timeZone):be.currentTimestamp(this.timeZone);case"current-user":return v??null;case"column-reference":return xr(u,i.column,this.fieldsIndex,t);case"data-type":return i.value;case"function":{if(this.isAggregate&&lr(i.name,i.args.value.length)){const S=[];for(const O of i.args?.value||[]){const x=[];for(const D of l||[])x.push(this._evaluateNode(O,D,t,null,v));S.push(x)}return Ko(i.name,S)}const T=this._evaluateNode(i.args,u,t,l,v);return rt(i.name,T,this.timeZone)}}throw new m(d.UnsupportedSyntax,{node:i.type})}}function Nr(a){return a===!0}function We(a){return Array.isArray(a)?a:[a]}function Ae(a){return a!==null?a!==!0:null}function Or(a,i){return a!=null&&i!=null?a===!0&&i===!0:a!==!1&&i!==!1&&null}function Sr(a,i){return a!=null&&i!=null?a===!0||i===!0:a===!0||i===!0||null}function Ke(a,i,u){if(a==null)return null;let t=!1;for(const l of i)if(l==null)t=null;else{if(a===l){t=!0;break}if(Ge(a)&&Ge(l)&&(t=z(a,l,"="),t))break}return t}const dr="-[]/{}()*+?.\\^$|";var ae;function Nc(a,i){const u=i;let t="",l=ae.Normal;for(let v=0;v<a.length;v++){const g=a.charAt(v);switch(l){case ae.Normal:g===u?l=ae.Escaped:dr.includes(g)?t+="\\"+g:t+=g==="%"?".*":g==="_"?".":g;break;case ae.Escaped:dr.includes(g)?t+="\\"+g:t+=g,l=ae.Normal}}return new RegExp("^"+t+"$","m")}function Xe(a,i,u){return a==null?null:Nc(i,u).test(a)}function Oc(a){return a&&typeof a.attributes=="object"}function xr(a,i,u,t){const l=t.getAttribute(a,i),v=u?.get(i);return l==null||v?.type!=="esriFieldTypeDate"&&v?.type!=="date"?l==null||v?.type!=="esriFieldTypeDateOnly"&&v?.type!=="date-only"?l==null||v?.type!=="esriFieldTypeTimeOnly"&&v?.type!=="time-only"?l==null||v?.type!=="esriFieldTypeTimestampOffset"&&v?.type!=="timestamp-offset"?l:new Q(l):$.fromReader(l):j.fromReader(l):Pe(new Date(l),u?.getLuxonTimeZone(v.name)??Yo.utcInstance)}(function(a){a[a.Normal=0]="Normal",a[a.Escaped=1]="Escaped"})(ae||(ae={}));const le={getAttribute:(a,i)=>(Oc(a)?a.attributes:a)[i]},Mc=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:it,defaultAttributeAdapter:le},Symbol.toStringTag,{value:"Module"}));export{Mc as W,it as Z,d as a,m as n,Q as r,Ko as u};
