import{ba as M,q as c,$ as z,ko as R,kp as b,ar as g}from"./main-C6fh4Kls.js";import{s as v}from"./projectVectorToVector-DcyiGOWJ-JQJ5bhOd.js";function W(n){return"declaredClass"in n}function m(n){return"declaredClass"in n}function q(n){return"declaredClass"in n}function j(n,a){return n?q(n)?n:new M({layer:a,sourceLayer:a,visible:n.visible,symbol:c(n.symbol),attributes:c(n.attributes),geometry:C(n.geometry)}):null}function C(n){return n==null?null:W(n)?n:z(A(n))}function A(n){const{wkid:a,wkt:t,wkt2:o,latestWkid:l}=n.spatialReference,e={wkid:a,wkt:t,wkt2:o,latestWkid:l};switch(n.type){case"point":{const{x:r,y:s,z:i,m:u}=n;return{x:r,y:s,z:i,m:u,spatialReference:e}}case"polygon":{const{rings:r,hasZ:s,hasM:i}=n;return{rings:f(r),hasZ:s,hasM:i,spatialReference:e}}case"polyline":{const{paths:r,hasZ:s,hasM:i}=n;return{paths:f(r),hasZ:s,hasM:i,spatialReference:e}}case"extent":{const{xmin:r,xmax:s,ymin:i,ymax:u,zmin:y,zmax:d,mmin:x,mmax:k,hasZ:w,hasM:Z}=n;return{xmin:r,xmax:s,ymin:i,ymax:u,zmin:y,zmax:d,mmin:x,mmax:k,hasZ:w,hasM:Z,spatialReference:e}}case"multipoint":{const{points:r,hasZ:s,hasM:i}=n;return{points:p(r)?h(r):r,hasZ:s,hasM:i,spatialReference:e}}default:return}}function f(n){return J(n)?n.map(a=>h(a)):n}function h(n){return n.map(a=>Array.from(a))}function J(n){for(const a of n)if(a.length!==0)return p(a);return!1}function p(n){return n.length>0&&(R(n[0])||b(n[0]))}function N(n,a){if(!n)return null;let t;if(m(n)){if(a==null)return n.clone();if(m(a))return a.copy(n)}return a!=null?(t=a,t.x=n.x,t.y=n.y,t.spatialReference=n.spatialReference,n.hasZ?(t.z=n.z,t.hasZ=n.hasZ):(t.z=void 0,t.hasZ=!1),n.hasM?(t.m=n.m,t.hasM=!0):(t.m=void 0,t.hasM=!1)):(t=v(n.x,n.y,n.z,n.spatialReference),n.hasM&&(t.m=n.m,t.hasM=!0)),t}function O(n){const{wkid:a,wkt:t,wkt2:o,latestWkid:l}=n,e={wkid:a,wkt:t,wkt2:o,latestWkid:l};return g.fromJSON(e)}export{j as A,C as h,N as j,W as m,O as q};
