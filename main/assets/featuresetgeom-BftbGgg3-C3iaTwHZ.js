import{J as S,w as R,M as p,r as a,T as u,n as l}from"./languageUtils-BYxF9hRA-BsnPtRbh.js";import{Y as d}from"./TimeOnly-DSMefxKy-ONWVZn0z.js";import{E as c,I as w}from"./SpatialFilter-BlQBFhwz-DI-o91iG.js";import{d as o}from"./main-BNyfiy7F.js";import{relate as y,crosses as I,touches as F,within as A,overlaps as C,contains as P,intersects as h}from"./geometryEngineAsync-D7oEu5dd-xyJwleaQ.js";import"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import"./shared-D1w-26bA-Ce8JL6uT.js";import"./Field-C6hA1tZj-cd1zkCNB.js";import"./fieldType-CD2CL2hr-C1DvAoGt.js";import"./number-eRKYXfX9-DHsV3MkO.js";import"./Query-BrwMGK8U-CCzP1I20.js";import"./TimeExtent-Cn0Jofqr-BUf77X_H.js";import"./UnknownTimeZone-C--TOcPG-DgJw7EQC.js";import"./arcadeUtils-DpP0k7IY-DnQQVqCN.js";import"./featureConversionUtils-D6hFQ4Af-CqR__5Xd.js";import"./OptimizedFeature-EIithYlr-Cq64mIT3.js";import"./OptimizedFeatureSet-DfZGBuxJ-C08BOAgi.js";import"./FieldsIndex-HmzMbJQG-bu1j8kZQ.js";import"./uuid-Dj9mdEVg-BaKSCiyT.js";import"./WhereClause-DxwoyBMS-Bur5U6H_.js";import"./workers-PiCjreoO-CoeFUD7p.js";function f(n){return n instanceof o}function s(n,t,i,m){return m(n,t,async(v,e,r)=>{if(r.length<2)throw new u(n,l.WrongNumberOfParameters,t);if((r=S(r))[0]===null&&r[1]===null)return!1;if(a(r[0])){if(r[1]instanceof o)return new w({parentfeatureset:r[0],relation:i,relationGeom:r[1]});if(r[1]===null)return new c({parentfeatureset:r[0]});throw new u(n,l.InvalidParameter,t)}if(f(r[0])){if(f(r[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(r[0]),d(r[1]));case"esriSpatialRelIntersects":return h(r[0],r[1]);case"esriSpatialRelContains":return P(r[0],r[1]);case"esriSpatialRelOverlaps":return C(r[0],r[1]);case"esriSpatialRelWithin":return A(r[0],r[1]);case"esriSpatialRelTouches":return F(r[0],r[1]);case"esriSpatialRelCrosses":return I(r[0],r[1])}throw new u(n,l.InvalidParameter,t)}if(a(r[1]))return new w({parentfeatureset:r[1],relation:i,relationGeom:r[0]});if(r[1]===null)return!1;throw new u(n,l.InvalidParameter,t)}if(r[0]===null){if(a(r[1]))return new c({parentfeatureset:r[1]});if(r[1]instanceof o||r[1]===null)return!1}throw new u(n,l.InvalidParameter,t)})}function K(n){n.mode==="async"&&(n.functions.intersects=function(t,i){return s(t,i,"esriSpatialRelIntersects",n.standardFunctionAsync)},n.functions.envelopeintersects=function(t,i){return s(t,i,"esriSpatialRelEnvelopeIntersects",n.standardFunctionAsync)},n.signatures.push({name:"envelopeintersects",min:2,max:2}),n.functions.contains=function(t,i){return s(t,i,"esriSpatialRelContains",n.standardFunctionAsync)},n.functions.overlaps=function(t,i){return s(t,i,"esriSpatialRelOverlaps",n.standardFunctionAsync)},n.functions.within=function(t,i){return s(t,i,"esriSpatialRelWithin",n.standardFunctionAsync)},n.functions.touches=function(t,i){return s(t,i,"esriSpatialRelTouches",n.standardFunctionAsync)},n.functions.crosses=function(t,i){return s(t,i,"esriSpatialRelCrosses",n.standardFunctionAsync)},n.functions.relate=function(t,i){return n.standardFunctionAsync(t,i,async(m,v,e)=>{if(e=S(e),R(e,3,3,t,i),f(e[0])&&f(e[1]))return y(e[0],e[1],p(e[2]));if(e[0]instanceof o&&e[1]===null||e[1]instanceof o&&e[0]===null)return!1;if(a(e[0])&&e[1]===null)return new c({parentfeatureset:e[0]});if(a(e[1])&&e[0]===null)return new c({parentfeatureset:e[1]});if(a(e[0])&&e[1]instanceof o)return e[0].relate(e[1],p(e[2]));if(a(e[1])&&e[0]instanceof o)return e[1].relate(e[0],p(e[2]));if(e[0]===null&&e[1]===null)return!1;throw new u(t,l.InvalidParameter,i)})})}export{K as registerFunctions};
