import{b as l}from"./main-DK5A1thH.js";async function y(e,a){const{data:t}=await l(e,{responseType:"json",query:{f:"json",...a?.customParameters,token:a?.apiKey}});return t}const f=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function g(e,a){const{loadContext:t,...r}=a||{},n=t?await t.fetchServiceMetadata(e,r):await y(e,r);u(n),i(n);const c={serviceJSON:n};if((n.currentVersion??0)<10.5)return c;const o=`${e}/layers`,s=t?await t.fetchServiceMetadata(o,r):await y(o,r);return u(s),i(s),c.layersJSON={layers:s.layers,tables:s.tables},c}function L(e){const{type:a}=e;return!!a&&f.has(a)}function b(e){return e.type==="Table"}function i(e){e.layers=e.layers?.filter(L),e.tables=e.tables?.filter(b)}function p(e){e.type||="Feature Layer"}function d(e){e.type||="Table"}function u(e){e.layers?.forEach(p),e.tables?.forEach(d)}function m(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}export{g as L,m as g,y as o};
