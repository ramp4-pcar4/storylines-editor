import{f_ as q,cE as B,ct as d}from"./main-D7vwjMDX.js";import{X as D}from"./sphere-Cj20syUS-D26RDXx7.js";import{r as l,y as A,N as S,P as M,v as F,_,p as P}from"./vec32-BuqRmYBM-ClpcRCNx.js";import{f as g}from"./plane-B_adY3_o-CH2S3dla.js";function y(t){return t?{origin:q(t.origin),vector:q(t.vector)}:{origin:B(),vector:B()}}function I(t,r){const n=Q.get();return n.origin=t,n.vector=r,n}function j(t,r=y()){return N(t.origin,t.vector,r)}function N(t,r,n=y()){return _(n.origin,t),_(n.vector,r),n}function k(t,r,n=y()){return _(n.origin,t),l(n.vector,r,t),n}function z(t,r){const n=l(g.get(),r,t.origin),u=A(t.vector,n),i=A(t.vector,t.vector),s=d(u/i,0,1),c=l(g.get(),S(g.get(),t.vector,s),n);return A(c,c)}function G(t,r,n){return O(t,r,0,1,n)}function H(t,r,n){return M(n,t.origin,S(n,t.vector,r))}function O(t,r,n,u,i){const{vector:s,origin:c}=t,p=l(g.get(),r,c),f=A(s,p)/F(s);return S(i,s,d(f,n,u)),M(i,i,t.origin)}function J(t,r){if(w(t,I(r.origin,r.direction),!1,x)){const{tA:n,pB:u,distance2:i}=x;if(n>=0&&n<=1)return i;if(n<0)return P(t.origin,u);if(n>1)return P(M(g.get(),t.origin,t.vector),u)}return null}function K(t,r,n){return!!w(t,r,!0,x)&&(_(n,x.pA),!0)}function w(t,r,n,u){const i=t.origin,s=M(g.get(),i,t.vector),c=r.origin,p=M(g.get(),c,r.vector),f=g.get(),o=g.get();if(f[0]=i[0]-c[0],f[1]=i[1]-c[1],f[2]=i[2]-c[2],o[0]=p[0]-c[0],o[1]=p[1]-c[1],o[2]=p[2]-c[2],Math.abs(o[0])<1e-6&&Math.abs(o[1])<1e-6&&Math.abs(o[2])<1e-6)return!1;const e=g.get();if(e[0]=s[0]-i[0],e[1]=s[1]-i[1],e[2]=s[2]-i[2],Math.abs(e[0])<1e-6&&Math.abs(e[1])<1e-6&&Math.abs(e[2])<1e-6)return!1;const T=f[0]*o[0]+f[1]*o[1]+f[2]*o[2],h=o[0]*e[0]+o[1]*e[1]+o[2]*e[2],C=f[0]*e[0]+f[1]*e[1]+f[2]*e[2],E=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],U=(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])*E-h*h;if(Math.abs(U)<1e-6)return!1;let a=(T*h-C*E)/U,v=(T+h*a)/E;n&&(a=d(a,0,1),v=d(v,0,1));const m=g.get(),b=g.get();return m[0]=i[0]+a*e[0],m[1]=i[1]+a*e[1],m[2]=i[2]+a*e[2],b[0]=c[0]+v*o[0],b[1]=c[1]+v*o[1],b[2]=c[2]+v*o[2],u.tA=a,u.tB=v,u.pA=m,u.pB=b,u.distance2=P(m,b),!0}const x={tA:0,tB:0,pA:B(),pB:B(),distance2:0},Q=new D(()=>y());export{N as C,O as D,y as M,j as O,k as Q,z as R,G as S,H as T,J as U,K as V};
