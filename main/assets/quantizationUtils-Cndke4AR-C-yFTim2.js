import"./main-DK5A1thH.js";function O(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function q(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function w(t){if(q(t))return t;const{originPosition:n,scale:r,translate:o}=t,l=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[l,n==="lowerLeft"?s:-s,r[2]??1,r[3]??1],translate:[o[0]??0,o[1]??0,o[2]??0,o[3]??0]}}function p({scale:t,translate:n},r){return Math.round((r-n[0])/t[0])}function M({scale:t,translate:n},r){return Math.round((r-n[1])/t[1])}function m({scale:t,translate:n},r){return Math.round(((r??0)-n[2])/t[2])}function Z({scale:t,translate:n},r){return r?Math.round((r-n[3])/t[3]):0}function j(t,n){return t&&n?D:t&&!n?B:!t&&n?C:v}const v=(t,n)=>{const r=[];if(!n.length)return null;const o=n[0];let l=p(t,o[0]),s=M(t,o[1]);r.push([l,s]);for(let u=1;u<n.length;u++){const[e,c]=n[u],a=p(t,e),i=M(t,c);a===l&&i===s||r.push([a-l,i-s]),l=a,s=i}return r},B=(t,n)=>{const r=[];if(!n.length)return null;const o=n[0];let l=p(t,o[0]),s=M(t,o[1]),u=m(t,o[2]);r.push([l,s,u]);for(let e=1;e<n.length;e++){const[c,a,i]=n[e],h=p(t,c),f=M(t,a),g=m(t,i);h===l&&f===s&&g===u||r.push([h-l,f-s,g]),l=h,s=f,u=g}return r},C=(t,n)=>{const r=[];if(!n.length)return null;const o=n[0];let l=p(t,o[0]),s=M(t,o[1]),u=Z(t,o[2]);r.push([l,s,u]);for(let e=1;e<n.length;e++){const[c,a,i]=n[e],h=p(t,c),f=M(t,a),g=Z(t,i);h===l&&f===s&&g===u||r.push([h-l,f-s,g]),l=h,s=f,u=g}return r},D=(t,n)=>{const r=[];if(!n.length)return null;const o=n[0];let l=p(t,o[0]),s=M(t,o[1]),u=m(t,o[2]),e=Z(t,o[3]);r.push([l,s,u,e]);for(let c=1;c<n.length;c++){const[a,i,h,f]=n[c],g=p(t,a),x=M(t,i),A=m(t,h),d=Z(t,f);g===l&&x===s&&A===u&&d===e||r.push([g-l,x-s,A,d]),l=g,s=x,u=A,e=d}return r};function E(t,n,r,o){const l=[],s=j(r,o);for(let u=0;u<n.length;u++){const e=s(t,n[u]);e&&e.length>=3&&l.push(e)}return l.length?l:null}function G(t,n,r,o){const l=[],s=j(r,o);for(let u=0;u<n.length;u++){const e=s(t,n[u]);e&&e.length>=2&&l.push(e)}return l.length?l:null}function L({scale:t,translate:n},r){return r*t[0]+n[0]}function z({scale:t,translate:n},r){return r*t[1]+n[1]}function P({scale:t,translate:n},r){return(r??0)*t[2]+n[2]}function y({scale:t,translate:n},r){return r?r*t[3]+n[3]:0}function b(t,n){return t&&n?K:t&&!n?I:!t&&n?J:H}const H=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const o=n[0];let l=L(t,o[0]),s=z(t,o[1]);r[0]=[l,s];const{scale:u,originPosition:e}=t,c=u[0],a=e==="lowerLeft"?u[1]:-u[1];for(let i=1;i<n.length;i++){const[h,f]=n[i];l+=c*h,s+=a*f,r[i]=[l,s]}return r},I=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const o=n[0];let l=L(t,o[0]),s=z(t,o[1]);r[0]=[l,s,P(t,o[2])];const{scale:u,originPosition:e}=t,c=u[0],a=e==="lowerLeft"?u[1]:-u[1];for(let i=1;i<n.length;i++){const[h,f,g]=n[i];l+=c*h,s+=a*f,r[i]=[l,s,P(t,g)]}return r},J=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const o=n[0];let l=L(t,o[0]),s=z(t,o[1]);r[0]=[l,s,y(t,o[2])];const{scale:u,originPosition:e}=t,c=u[0],a=e==="lowerLeft"?u[1]:-u[1];for(let i=1;i<n.length;i++){const[h,f,g]=n[i];l+=c*h,s+=a*f,r[i]=[l,s,y(t,g)]}return r},K=(t,n)=>{const r=new Array(n.length);if(!n.length)return r;const o=n[0];let l=L(t,o[0]),s=z(t,o[1]);r[0]=[l,s,P(t,o[2]),y(t,o[3])];const{scale:u,originPosition:e}=t,c=u[0],a=e==="lowerLeft"?u[1]:-u[1];for(let i=1;i<n.length;i++){const[h,f,g,x]=n[i];l+=c*h,s+=a*f,r[i]=[l,s,P(t,g),y(t,x)]}return r};function k(t,n,r){const o=new Array(r.length);for(let l=0;l<r.length;l++)o[l]=n(t,r[l]);return o}function Q(t,n,r){const o=w(t);return n.x=p(o,r.x),n.y=M(o,r.y),r.z!=null&&(n.z=m(o,r.z)),r.m!=null&&(n.m=Z(o,r.m)),n}function R(t,n,r){const o=E(w(t),r.rings,r.hasZ,r.hasM);return o?(n.rings=o,n.hasZ=r.hasZ??!1,n.hasM=r.hasM??!1,n):null}function S(t,n,r){const o=G(w(t),r.paths,r.hasZ,r.hasM);return o?(n.paths=o,n.hasZ=r.hasZ??!1,n.hasM=r.hasM??!1,n):null}function T(t,n,r,o=r?.hasZ??!1,l=r?.hasM??!1){if(r!=null){const s=w(t);n.points=b(o,l)(s,r.points),n.hasZ=o,n.hasM=l}return n}function U(t,n,r,o=r?.z!=null,l=r?.m!=null){if(r==null)return n;const s=w(t);return n.x=L(s,r.x),n.y=z(s,r.y),o&&(n.z=P(s,r.z)),l&&(n.m=y(s,r.m)),n}function V(t,n,r,o=r?.hasZ??!1,l=r?.hasM??!1){if(r!=null){const s=w(t);n.rings=k(s,b(o,l),r.rings),n.hasZ=o,n.hasM=l}return n}function F(t,n,r,o=r?.hasZ??!1,l=r?.hasM??!1){if(r!=null){const s=w(t);n.paths=k(s,b(o,l),r.paths),n.hasZ=o,n.hasM=l}return n}export{O as C,M,Q as N,R as O,S as Q,T as R,U as S,V as T,F as V,p,w};
