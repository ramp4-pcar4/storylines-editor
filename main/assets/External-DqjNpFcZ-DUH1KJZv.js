import{cf as h,u as f,N as m}from"./main-COUzu-Id.js";import{l as y,e as v}from"./infoFor3D-BeWnZejW-DJyBSoCy.js";class T{constructor(t,e,r){this.assetName=t,this.assetMimeType=e,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&h(this.parts,t.parts,(e,r)=>e.equals(r))}isOnService(t){return this.parts.every(e=>e.isOnService(t))}makeHash(){let t="";for(const e of this.parts)t+=e.partHash;return t}async toBlob(t){const{parts:e}=this;if(e.length===1)return e[0].toBlob(t);const r=await Promise.all(e.map(n=>n.toBlob(t)));return f(t),new Blob(r)}}class w{constructor(t,e){this.partUrl=t,this.partHash=e}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await m(this.partUrl,{responseType:"blob"});return f(t),e}}function B(s){return N(s?.source)}const u=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function N(s){switch(s?.type){case"client":return Array.isArray(s.files)?s.files.some(i):i(s.files);case"service":return s.assets.some(i);case"loadable":return!0;default:return!1}}function i(s){if(s instanceof File){const{type:t,name:e}=s;return u.test(t)||l.test(e)}return u.test(s.assetMimeType)||l.test(s.assetName)}function H(s,t){if(!s)return!1;const{source:e}=s;return b(e,t)}function M(s,t){if(s===t)return!0;const{source:e}=s,{source:r}=t;if(e===r)return!0;if(e.type==="service"&&r.type==="service"){if(e.assets.length!==r.assets.length)return!1;const n=(a,c)=>a.assetName<c.assetName?-1:a.assetName>c.assetName?1:0,o=[...e.assets].sort(n),p=[...r.assets].sort(n);for(let a=0;a<o.length;++a)if(!o[a].equals(p[a]))return!1;return!0}return!1}function b(s,t){return s.type==="service"&&s.assets.every(e=>e.isOnService(t))}function O(s,t){return s instanceof File?y(s,t):v(s.assetMimeType,s.assetName,t)}function U(s){switch(s.type){case"client":return Array.isArray(s.files)?s.files:[s.files];case"service":return s.assets;case"loadable":return}}function q(s){return!!s.original}export{O as H,U as M,B as N,q as O,H as d,w as g,T as v,M as w};
