import{l as E}from"./vec2f64-CEUyUoff-BBc0aQ6D.js";import{B as C,F as A,M as _,G as O,c as s,U}from"./enums-DBi1-Mm2-CUS1pvQe.js";import{H as T,O as h}from"./Texture-DXSFJsEu-02_Cw8VC.js";function L(n,t,e="nearest",i=!1){const r=!(i&&t.pixelType==="u8"),u=r?A.FLOAT:A.UNSIGNED_BYTE,a=t.pixels==null||t.pixels.length===0?null:r?t.getAsRGBAFloat():t.getAsRGBA(),f=n.capabilities.textureFloatLinear,o=new T;return o.width=t.width,o.height=t.height,o.internalFormat=r?C.RGBA32F:U.RGBA,o.samplingMode=!f||e!=="bilinear"&&e!=="cubic"?_.NEAREST:_.LINEAR,o.dataType=u,o.wrapMode=O.CLAMP_TO_EDGE,new h(n,o,a)}function M(n,t){const{spacing:e,offsets:i,coefficients:r,size:[u,a]}=t,f=e[0]>1,o=new T;o.width=f?4*u:u,o.height=a,o.internalFormat=C.RGBA32F,o.dataType=A.FLOAT,o.samplingMode=_.NEAREST,o.wrapMode=O.CLAMP_TO_EDGE;const l=new Float32Array(f?u*a*16:2*i.length);if(f&&r!=null)for(let c=0,m=0;c<r.length;c++)l[m++]=r[c],c%3==2&&(l[m++]=1);else for(let c=0;c<a;c++)for(let m=0;m<u;m++){const g=4*(c*u+m),p=2*(m*a+c);l[g]=i[p],l[g+1]=i[p+1],l[g+3]=i[p]===-1?0:1}return new h(n,o,l)}function x(n,t){const e=new T;return e.internalFormat=U.RGBA,e.width=t.length/4,e.height=1,e.samplingMode=_.NEAREST,e.wrapMode=O.CLAMP_TO_EDGE,new h(n,e,t)}function G(n,t,e,i=1,r=!0){return{u_flipY:r,u_applyTransform:!!n,u_opacity:i,u_transformSpacing:n?n.spacing:E,u_transformGridSize:n?n.size:E,u_targetImageSize:t,u_srcImageSize:e}}function V(n,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:n?n.length/4-1:0}}function k(n,t){return{u_scale:n,u_offset:t}}function N(n){return{u_bandCount:n.bandCount,u_minOutput:n.minOutput,u_maxOutput:n.maxOutput,u_minCutOff:n.minCutOff,u_maxCutOff:n.maxCutOff,u_factor:n.factor,u_useGamma:n.useGamma,u_gamma:n.gamma,u_gammaCorrection:n.gammaCorrection}}function v(n){return{u_hillshadeType:n.hillshadeType,u_sinZcosAs:n.sinZcosAs,u_sinZsinAs:n.sinZsinAs,u_cosZs:n.cosZs,u_weights:n.weights,u_factor:n.factor,u_minValue:n.minValue,u_maxValue:n.maxValue}}function B(n,t){const e=n.gl,i=t.glName,r=new Map;if(i==null)return r;const u=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);let a;for(let f=0;f<u;f++)a=e.getActiveUniform(i,f),a&&r.set(a.name,{location:e.getUniformLocation(i,a.name),info:a});return r}function I(n,t,e){Object.keys(e).forEach(i=>{const r=t.get(i)||t.get(i+"[0]");r&&d(n,i,e[i],r)})}function R(n,t,e,i){e.length===i.length&&(i.some(r=>r==null)||e.some(r=>r==null)||e.forEach((r,u)=>{t.setUniform1i(r,u),n.bindTexture(i[u],u)}))}function d(n,t,e,i){if(i===null||e==null)return!1;const{info:r}=i;switch(r.type){case s.FLOAT:r.size>1?n.setUniform1fv(t,e):n.setUniform1f(t,e);break;case s.FLOAT_VEC2:n.setUniform2fv(t,e);break;case s.FLOAT_VEC3:n.setUniform3fv(t,e);break;case s.FLOAT_VEC4:n.setUniform4fv(t,e);break;case s.FLOAT_MAT3:n.setUniformMatrix3fv(t,e);break;case s.FLOAT_MAT4:n.setUniformMatrix4fv(t,e);break;case s.INT:r.size>1?n.setUniform1iv(t,e):n.setUniform1i(t,e);break;case s.BOOL:n.setUniform1i(t,e?1:0);break;case s.INT_VEC2:case s.BOOL_VEC2:n.setUniform2iv(t,e);break;case s.INT_VEC3:case s.BOOL_VEC3:n.setUniform3iv(t,e);break;case s.INT_VEC4:case s.BOOL_VEC4:n.setUniform4iv(t,e);break;default:return!1}return!0}export{V as F,v as G,M as L,N as M,R as N,x as U,B as V,G as b,I as k,L as w,k as x};
