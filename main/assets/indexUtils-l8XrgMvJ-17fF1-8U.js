import{cG as c,mv as m,mw as y,mx as d,cI as p,u as g,my as h,N as _,t as w,h as b,kg as A}from"./main-vBMuZyvK.js";import{k as B}from"./asyncUtils-BPUlNCrX-CSo1jvBZ.js";import{w as I,E as N}from"./Indices-BuIC5D20-rfdHpsuC.js";import{T as u}from"./enums-wEDHPbCF-Cf76M5_x.js";function T(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,a=2,r=a){const o=t.length/2;let n=0,i=0;if(!c(t)||m(t)){for(let f=0;f<o;++f)e[n]=t[i],e[n+1]=t[i+1],n+=a,i+=r;return}const s=y(t);if(d(t))for(let f=0;f<o;++f)e[n]=Math.max(t[i]/s,-1),e[n+1]=Math.max(t[i+1]/s,-1),n+=a,i+=r;else for(let f=0;f<o;++f)e[n]=t[i]/s,e[n+1]=t[i+1]/s,n+=a,i+=r}function R(e,t,a,r){const o=e.typedBuffer,n=e.typedBufferStride,i=r?.count??e.count;let s=(r?.dstIndex??0)*n;for(let f=0;f<i;++f)o[s]=t,o[s+1]=a,s+=n}Object.freeze(Object.defineProperty({__proto__:null,fill:R,normalizeIntegerBuffer:l,normalizeIntegerBufferView:T},Symbol.toStringTag,{value:"Module"}));class v{constructor(t){this._streamDataRequester=t}async loadJSON(t,a){return this._load("json",t,a)}async loadBinary(t,a){return p(t)?(g(a),h(t)):this._load("binary",t,a)}async loadImage(t,a){return this._load("image",t,a)}async _load(t,a,r){if(this._streamDataRequester==null)return(await _(a,{responseType:S[t]})).data;const o=await B(this._streamDataRequester.request(a,t,r));if(o.ok===!0)return o.value;throw w(o.error),new b("glt-loader-request-error",`Request for resource failed: ${o.error}`)}}const S={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function E(e,t){switch(t){case u.TRIANGLES:return G(e);case u.TRIANGLE_STRIP:return j(e);case u.TRIANGLE_FAN:return q(e)}}function G(e){return typeof e=="number"?I(e):A(e)?new Uint16Array(e):e}function j(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const a=t-2,r=N(3*a);if(typeof e=="number"){let o=0;for(let n=0;n<a;n+=1)n%2==0?(r[o++]=n,r[o++]=n+1,r[o++]=n+2):(r[o++]=n+1,r[o++]=n,r[o++]=n+2)}else{let o=0;for(let n=0;n<a;n+=1)n%2==0?(r[o++]=e[n],r[o++]=e[n+1],r[o++]=e[n+2]):(r[o++]=e[n+1],r[o++]=e[n],r[o++]=e[n+2])}return r}function q(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const a=t-2,r=a<=65536?new Uint16Array(3*a):new Uint32Array(3*a);if(typeof e=="number"){let s=0;for(let f=0;f<a;++f)r[s++]=0,r[s++]=f+1,r[s++]=f+2;return r}const o=e[0];let n=e[1],i=0;for(let s=0;s<a;++s){const f=e[s+2];r[i++]=o,r[i++]=n,r[i++]=f,n=f}return r}export{E as N,v as T,T as c,l,R as y};
