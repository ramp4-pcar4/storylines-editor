import{cn as B,cE as N,gN as x,ct as H}from"./main-D7vwjMDX.js";import{y as s,b as y,r as M,N as b,P as Q,A as l,X as A,l as _,T as v}from"./vec32-BuqRmYBM-ClpcRCNx.js";import"./vec42-D8CJyqHG-DnfLTeQH.js";import{n as J}from"./mat3f64-Dh9_zhFu-BIT-k8Dm.js";import{n as z}from"./mat4f64-BaJwL7tQ-k0uMm8LY.js";import{e as G}from"./quatf64-C16JxGFv-BKWK1F8U.js";import{o as W}from"./vec2f64-CEUyUoff-BBc0aQ6D.js";import{o as Y}from"./vec4f64-CjUMzAyX-DPYbdAom.js";let S=class E{constructor(r){this._create=r,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&B(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const r=2*this._itemsPtr;this._items.length>r&&(this._items.length=r),this._itemsPtr=0}static createVec2f64(){return new E(W)}static createVec3f64(){return new E(N)}static createVec4f64(){return new E(Y)}static createMat3f64(){return new E(J)}static createMat4f64(){return new E(z)}static createQuatf64(){return new E(G)}get test(){}};const Mt=S.createVec2f64(),f=S.createVec3f64(),Z=S.createVec4f64();S.createMat3f64();const _t=S.createMat4f64(),St=S.createQuatf64();function mt(t,r,e){const c=s(t,r)/s(t,t);return b(e,t,c)}function L(t,r){return s(t,r)/y(t)}function gt(t,r){const e=s(t,r)/(y(t)*y(r));return-x(e)}function Dt(t,r,e){_(P,t),_(d,r);const c=s(P,d),i=x(c),a=A(P,P,d);return s(a,e)<0?2*Math.PI-i:i}const P=N(),d=N();function lt(t){const r=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],c=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(r,e,c))}function Ot(t,r){const e=Math.sqrt(r[0]*r[0]+r[4]*r[4]+r[8]*r[8]),c=Math.sqrt(r[1]*r[1]+r[5]*r[5]+r[9]*r[9]),i=Math.sqrt(r[2]*r[2]+r[6]*r[6]+r[10]*r[10]);return l(t,e,c,i),t}function tt(t,r,e){Math.abs(t[0])>Math.abs(t[1])?l(r,0,1,0):l(r,1,0,0),A(e,t,r),A(r,e,t),_(e,e),_(r,r)}function K(t=D){return[t[0],t[1],t[2],t[3]]}function Ut(t=D[0],r=D[1],e=D[2],c=D[3]){return j(t,r,e,c,Z.get())}function rt(t,r){return j(r[0],r[1],r[2],r[3],t)}function Pt(t){return t}function j(t,r,e,c,i=K()){return i[0]=t,i[1]=r,i[2]=e,i[3]=c,i}function et(t,r,e){const c=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],i=Math.abs(c-1)>1e-5&&c>1e-12?1/Math.sqrt(c):1;return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function ct(t,r,e,c=K()){const i=e[0]-r[0],a=e[1]-r[1],n=e[2]-r[2],o=t[0]-r[0],O=t[1]-r[1],U=t[2]-r[2],m=a*U-n*O,q=n*o-i*U,V=i*O-a*o,X=m*m+q*q+V*V,$=Math.abs(X-1)>1e-5&&X>1e-12?1/Math.sqrt(X):1;return c[0]=m*$,c[1]=q*$,c[2]=V*$,c[3]=-(c[0]*t[0]+c[1]*t[1]+c[2]*t[2]),c}function k(t,r,e,c=0,i=Math.floor(e*(1/3)),a=Math.floor(e*(2/3))){if(e<3)return!1;r(g,c);let n=i,o=!1;for(;n<e-1&&!o;)r(T,n),n++,o=!v(g,T);if(!o)return!1;for(n=Math.max(n,a),o=!1;n<e&&!o;)r(h,n),n++,M(C,g,T),_(C,C),M(p,T,h),_(p,p),o=!v(g,h)&&!v(T,h)&&Math.abs(s(C,p))<it;return o?(ct(g,T,h,t),!0):(c!==0||i!==1||a!==2)&&k(t,r,e,0,1,2)}function Ct(t,r,e=!0){const c=r.length/3;return k(t,(i,a)=>l(i,r[3*a+0],r[3*a+1],r[3*a+2]),e?c-1:c)}const it=.99619469809,g=N(),T=N(),h=N(),C=N(),p=N();function pt(t,r,e){return r!==t&&rt(t,r),t[3]=-s(t,e),t}function At(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}function bt(t,r,e,c){return A(h,r,t),et(e,h,c)}function Ft(t,r,e,c){return R(w(t,r,M(f.get(),e,r),nt,c))}function Rt(t,r,e){return r!=null&&R(w(t,r.origin,r.direction,at,e))}function wt(t,r,e){return R(w(t,r.origin,r.vector,I.NONE,e))}function qt(t,r,e){return R(w(t,r.origin,r.vector,I.CLAMP,e))}function Vt(t,r){return F(t,r)>=0}function Xt(t,r){const e=s(t,r.ray.direction),c=-F(t,r.ray.origin);if(e>-1e-6&&e<1e-6)return c>0;const i=c/e;return e>0?i<r.c1&&(r.c1=i):i>r.c0&&(r.c0=i),r.c0<=r.c1}function $t(t,r,e){const c=b(f.get(),t,-t[3]),i=ot(t,M(f.get(),r,c),f.get());return Q(e,i,c),e}function vt(t,r,e,c){const i=t,a=f.get(),n=f.get();tt(i,a,n);const o=M(f.get(),e,r),O=L(a,o),U=L(n,o),m=L(i,o);return l(c,O,U,m)}function ot(t,r,e){const c=b(f.get(),t,s(t,r));return M(e,r,c),e}function Lt(t,r){return Math.abs(F(t,r))}function F(t,r){return s(t,r)+t[3]}var u;function R(t){return t===u.INTERSECTS_INSIDE_OUT||t===u.INTERSECTS_OUTSIDE_IN}function w(t,r,e,c,i){const a=s(t,e),n=F(t,r);if(a===0)return n>=0?u.INSIDE:u.OUTSIDE;let o=-n/a;return c&I.CLAMP&&(o=H(o,0,1)),!(c&I.INFINITE_MIN)&&o<0||!(c&I.INFINITE_MAX)&&o>1?n>=0?u.INSIDE:u.OUTSIDE:(Q(i,r,b(i,e,o)),n>=0?u.INTERSECTS_INSIDE_OUT:u.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(u||(u={}));const D=[0,0,1,0];var I;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(I||(I={}));const nt=I.INFINITE_MIN|I.INFINITE_MAX,at=I.INFINITE_MAX;export{tt as $,et as B,L as C,wt as D,Pt as E,j as H,lt as I,Z as J,ct as K,At as M,Ut as N,F as O,Vt as P,K as Q,bt as S,$t as U,pt as _,Lt as a,Ot as b,_t as c,qt as d,Mt as e,f,Rt as g,Ct as h,St as i,rt as j,k,Xt as l,Ft as m,mt as o,vt as p,gt as r,Dt as u};
