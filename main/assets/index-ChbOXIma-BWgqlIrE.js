const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./point-icon-BSJft8AI-CVNqAoG-.js","./main-DK5A1thH.js","./main-BRDqyNC1.css","./polyline-icon-CqjafPK0-CNEbi0ZQ.js","./polygon-icon-BrXtjiJl-Cl48WYuR.js","./circle-icon-DrE2wWqh-CCSWTQJL.js","./rectangle-icon-D8mTZj4O-iZbfRzZH.js","./edit-icon-C_tqZ1EG-pgFx_Q8M.js"])))=>i.map(i=>d[i]);
import{fh as x,fg as $,fi as S,fV as I,fk as k,fl as z,h8 as C,fn as P,fo as n,fA as m,fN as y,fq as E,fr as c,ft as d,fT as f,h9 as h,fm as A,fK as w,fL as V,fp as b,fM as M,fs as H,fv as N,fx as B,fy as J,fz as O,fB as Z,fu as L,fP as q,_}from"./main-DK5A1thH.js";import{y as K}from"./draw-store-C1_quxsr-BJsbni5r.js";const j={},G={class:"border-b p-0 self-center w-2/3"};function Q(g,a){return n(),m("span",G)}const D=x(j,[["render",Q]]),U=$({__name:"zoom-nav",setup(g){const{t:a}=k(),t=z("iApi"),e=C(400,!0,()=>t.geo.map.zoomIn()),o=C(400,!0,()=>t.geo.map.zoomOut());return(s,r)=>{const l=P("mapnav-button");return n(),m("div",null,[y(l,{onClickFunction:d(e),tooltip:d(a)("mapnav.zoomIn")},{default:E(()=>r[0]||(r[0]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[c("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),c("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"]),y(D),y(l,{onClickFunction:d(o),tooltip:d(a)("mapnav.zoomOut")},{default:E(()=>r[1]||(r[1]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[c("path",{d:"M19 13H5v-2h14v2z"}),c("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"])])}}}),X={class:"mapnav-section bg-white-75 hover:bg-white"},Y=$({__name:"draw-nav-section",setup(g){const a=z("iApi"),{t}=k(),e=K(),o=[{type:"point",icon:f(h(()=>_(()=>import("./point-icon-BSJft8AI-CVNqAoG-.js"),__vite__mapDeps([0,1,2]),import.meta.url)))},{type:"polyline",icon:f(h(()=>_(()=>import("./polyline-icon-CqjafPK0-CNEbi0ZQ.js"),__vite__mapDeps([3,1,2]),import.meta.url)))},{type:"polygon",icon:f(h(()=>_(()=>import("./polygon-icon-BrXtjiJl-Cl48WYuR.js"),__vite__mapDeps([4,1,2]),import.meta.url)))},{type:"circle",icon:f(h(()=>_(()=>import("./circle-icon-DrE2wWqh-CCSWTQJL.js"),__vite__mapDeps([5,1,2]),import.meta.url)))},{type:"rectangle",icon:f(h(()=>_(()=>import("./rectangle-icon-D8mTZj4O-iZbfRzZH.js"),__vite__mapDeps([6,1,2]),import.meta.url)))}],s=A(()=>{const p=o.filter(i=>e.supportedTypes.some(v=>v.type===i.type));return p.push({type:"edit",icon:f(h(()=>_(()=>import("./edit-icon-C_tqZ1EG-pgFx_Q8M.js"),__vite__mapDeps([7,1,2]),import.meta.url)))}),p}),r=p=>{e.activeTool===p?e.setActiveTool(null):e.setActiveTool(p)},l=()=>{a.geo.map.setMouseFocus()};return(p,i)=>{const v=P("mapnav-button");return n(),m("div",X,[(n(!0),m(w,null,V(s.value,u=>(n(),b(v,{key:u.type,onMousedown:l,onClickFunction:()=>r(u.type),tooltip:d(t)(`draw.${u.type}.tooltip`),class:H({"active-tool":d(e).activeTool===u.type})},{default:E(()=>[(n(),b(M(u.icon),{class:"fill-current w-32 h-20"}))]),_:2},1032,["onClickFunction","tooltip","class"]))),128))])}}}),W=x(Y,[["__scopeId","data-v-033c1fd2"]]),ee={class:"mapnav absolute right-0 bottom-0 pb-36 sm:pb-48 pr-12"},te=["content"],oe={class:"mapnav-section bg-white-75 hover:bg-white"},ae=$({__name:"mapnav",setup(g){const a=z("iApi"),t=I(),{t:e}=k(),o=N(),s=A(()=>a.getConfig().fixtures.mapnav.items.some(i=>i==="draw")),r=()=>{o.value._tippy.hide()},l=i=>{i.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()};B(()=>{o.value?.addEventListener("blur",r),o.value?.addEventListener("keyup",l)}),J(()=>{o.value?.removeEventListener("blur",r),o.value?.removeEventListener("keyup",l)});const p=A(()=>t.order.map(i=>t.items[i]).filter(i=>i.componentId&&i.id!=="draw"));return(i,v)=>{const u=O("focus-list"),F=O("tippy");return n(),m("div",ee,[Z((n(),m("div",{class:"flex flex-col",content:d(e)("panels.controls.items"),ref_key:"el",ref:o},[s.value?(n(),m(w,{key:0},[y(W),v[0]||(v[0]=c("span",{class:"py-1"},null,-1))],64)):L("",!0),y(U,{class:"mapnav-section bg-white-75 hover:bg-white"}),v[1]||(v[1]=c("span",{class:"py-1"},null,-1)),c("div",oe,[(n(!0),m(w,null,V(p.value,(T,R)=>(n(),m(w,{key:T.id+"button"},[(n(),b(M(T.id+"-nav-button"))),R!==p.value.length-1?(n(),b(D,{key:0,class:"mapnav-divider"})):L("",!0)],64))),128))])],8,te)),[[u],[F,{trigger:"manual",placement:"top-end",touch:!1,maxWidth:190}]])])}}}),ne=x(ae,[["__scopeId","data-v-96b1b7dc"]]);class se extends q{mapnavStore=I(this.$vApp.$pinia);get config(){return super.config}_parseConfig(a){if(!a)return;const t=a.items.map(e=>({id:e}));this.mapnavStore.items=t.reduce((e,o)=>(e[o.id]=o,e),{}),this.mapnavStore.order=t.map(e=>e.id),this._validateItems()}_validateItems(){const a=["geolocator","zoom","home","fullscreen"];this.mapnavStore.order.forEach(t=>{(this.$iApi.fixture.exists(t)||a.includes(t))&&(this.mapnavStore.items[t].componentId=`${t}-nav-button`)})}}const ie={en:{"mapnav.zoomIn":"Zoom In","mapnav.zoomOut":"Zoom Out","mapnav.home":"Home","mapnav.fullscreen":"Full Screen","mapnav.geolocator":"Your Location","mapnav.geolocator.error.permission":"The location request was denied. Please check your browser permission settings.","mapnav.geolocator.error.internal":"Your location could not be found."},fr:{"mapnav.zoomIn":"Zoom avant","mapnav.zoomOut":"Zoom arrière","mapnav.home":"Accueil","mapnav.fullscreen":"Plein Écran","mapnav.geolocator":"Votre position","mapnav.geolocator.error.permission":"Demande de localisation refusée. Veuillez vérifier les paramètres d'autorisation de votre navigateur.","mapnav.geolocator.error.internal":"Votre emplacement n'a pu être trouvé."}};class pe extends se{async added(){Object.entries(ie).forEach(s=>this.$iApi.$i18n.mergeLocaleMessage(...s));const{destroy:a,el:t}=this.mount(ne,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,s=>this._parseConfig(s)),o=this.$iApi.event.on(S.COMPONENT,()=>{this._parseConfig(this.config)});this.removed=()=>{e(),this.$iApi.event.off(o);const s=I(this.$vApp.$pinia),r={...s.items};Object.keys(r).forEach(l=>s.removeItem(l)),s.$reset(),a()}}}export{pe as default};
