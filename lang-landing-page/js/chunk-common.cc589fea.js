(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t){},"03f0":function(e,t,i){},"0988":function(e,t,i){"use strict";i("3a36")},1:function(e,t,i){e.exports=i("cd49")},1057:function(e,t,i){},"12a8":function(e,t,i){"use strict";i("e136")},"15ae":function(e,t,i){},"1fb1":function(e,t,i){"use strict";i("34da")},"2e56":function(e,t,i){},"34da":function(e,t,i){},"38c8":function(e,t,i){},"3a36":function(e,t,i){},"3d6d":function(e,t){var i=[{key:"chapters.title",enValue:"Chapters",enValid:"1",frValue:"Chapitres",frValid:"1"},{key:"chapters.return",enValue:"Return to top",enValid:"1",frValue:"Retournez en haut",frValid:"1"},{key:"chapters.menu",enValue:"Toggle menu",enValid:"1",frValue:"Menu à bascule",frValid:"1"},{key:"scrollguard.desc",enValue:"Use ctrl + scroll to zoom the map",enValid:"1",frValue:"Utilisez les touches Ctrl et + pour faire un zoom de la carte",frValid:"1"},{key:"story.window.title",enValue:"RAMP Storylines",enValid:"1",frValue:"Scénarios de la PCAR",frValid:"1"},{key:"story.date",enValue:"Date modified:",enValid:"1",frValue:"Date de modification:",frValid:"1"},{key:"story.error",enValue:"An error occurred while loading this Storylines product. See developer console for more information.",enValid:"1",frValue:"Une erreur est survenue pendant le chargement ce scénarios produit. Voir la console du promoteur pour obtenir de plus amples renseignements.",frValid:"1"},{key:"image.fullscreen",enValue:"Full Screen",enValid:"1",frValue:"Plein Écran",frValid:"1"},{key:"dynamic.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"0"},{key:"dynamic.textSection",enValue:"Text Section",enValid:"1",frValue:"Section de texte",frValid:"1"},{key:"dynamic.panel.collection",enValue:"Panel Collection",enValid:"1",frValue:"Collection de panneaux",frValid:"1"},{key:"dynamic.panel.id",enValue:"Panel ID",enValid:"1",frValue:"No d’identification du panneau",frValid:"1"},{key:"dynamic.panel.type",enValue:"Panel Type",enValid:"1",frValue:"Type de panneaux",frValid:"1"},{key:"dynamic.panel.actions",enValue:"Panel Actions",enValid:"1",frValue:"Actions du panneau",frValid:"1"},{key:"dynamic.panel.idTaken",enValue:"Panel ID is already",enValid:"1",frValue:"Le nom du panneau est déjà utilisé",frValid:"1"},{key:"dynamic.panel.editor",enValue:"Panel Editor:",enValid:"1",frValue:"Éditeur de panneaux:",frValid:"1"},{key:"timeslider.expand",enValue:"Expand",enValid:"1",frValue:"Développer",frValid:"1"},{key:"timeslider.minimize",enValue:"Minimize",enValid:"1",frValue:"Réduire",frValid:"1"},{key:"timeslider.play",enValue:"Play",enValid:"1",frValue:"Lecture",frValid:"1"},{key:"timeslider.pause",enValue:"Pause",enValid:"1",frValue:"Pause",frValid:"1"},{key:"fullscreen.activate",enValue:"Enter Fullscreen",enValid:"1",frValue:"Afficher le mode plein écran",frValid:"1"},{key:"fullscreen.deactivate",enValue:"Exit Fullscreen",enValid:"1",frValue:"Quitter le mode plein écran",frValid:"1"},{key:"editor.lang.en",enValue:"English",enValid:"1",frValue:"Anglais",frValid:"1"},{key:"editor.lang.fr",enValue:"French",enValid:"1",frValue:"Français",frValid:"1"},{key:"editor.feedback",enValue:"Send Us Feedback",enValid:"1",frValue:"Envoyez-nous vos commentaires",frValid:"0"},{key:"editor.feedback.subject",enValue:"Storylines Editor Feedback",enValid:"1",frValue:"Commentaires de l'éditeur de scénarios",frValid:"0"},{key:"editor.window.title",enValue:"RAMP Storylines Editor",enValid:"1",frValue:"Éditeur de scénarios de la PCAR",frValid:"1"},{key:"editor.createProduct",enValue:"Create New Storylines Product",enValid:"1",frValue:"Créer un nouveau produit de scénarios",frValid:"1"},{key:"editor.editProduct",enValue:"Edit Existing Storylines Product",enValid:"1",frValue:"Modifier un produit de scénarios",frValid:"1"},{key:"editor.editMetadata",enValue:"Edit Project Metadata",enValid:"1",frValue:"Modifier les métadonnées d’un projet",frValid:"1"},{key:"editor.productDetails",enValue:"Storylines product details",enValid:"1",frValue:"Détails du produit de scénarios",frValid:"1"},{key:"editor.metadata.instructions",enValue:'Fill in metadata details about your new Storylines product. Use the "Preview" button to see what your slides will look like.',enValid:"1",frValue:"Inscrivez les métadonnées de votre nouveau produit de scénario. Utilisez la fonction « Afficher l’aperçu » pour voir à quoi ressemblent vos diapositives.",frValid:"1"},{key:"editor.uuid",enValue:"UUID",enValid:"1",frValue:"IDUU",frValid:"1"},{key:"editor.uuid.exists",enValue:"UUID already exists. Saving this will overwrite existing product.",enValid:"1",frValue:"L’IDUU existe déjà. Enregistrer ce produit écrasera le produit existant.",frValid:"1"},{key:"editor.title",enValue:"Title",enValid:"1",frValue:"Titre",frValid:"1"},{key:"editor.logo",enValue:"Logo",enValid:"1",frValue:"Logo",frValid:"1"},{key:"editor.logoPreview",enValue:"Logo Preview",enValid:"1",frValue:"Aperçu du logo",frValid:"1"},{key:"editor.logoAltText",enValue:"Logo Alt Text",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.logoAltText.desc",enValue:"For accessibility purposes, provide description text for the logo.",enValid:"1",frValue:"Pour des raisons d'accessibilité, fournissez un texte descriptif pour le logo.",frValid:"0"},{key:"editor.contextLink",enValue:"Context Link",enValid:"1",frValue:"Lien contextuel",frValid:"1"},{key:"editor.contextLink.info",enValue:"Context link shows up at the bottom of the page to provide additional resources for interested users.",enValid:"1",frValue:"Le lien contextuel apparaît au bas de la page et fournit des ressources supplémentaires aux utilisateurs intéressés.",frValid:"1"},{key:"editor.contextLabel",enValue:"Context Label",enValid:"1",frValue:"Étiquette de contexte",frValid:"1"},{key:"editor.contextLabel.info",enValue:"Context label shows up before the context link to explain what the link is for",enValid:"1",frValue:"L’étiquette de contexte apparaît avant le lien contextuel et explique à quoi sert le lien.",frValid:"1"},{key:"editor.dateModified",enValue:"Date Modified",enValid:"1",frValue:"Date de modification",frValid:"1"},{key:"editor.load",enValue:"Load",enValid:"1",frValue:"Charger",frValid:"1"},{key:"editor.loadPrevious",enValue:"Load Previous",enValid:"1",frValue:"[FR] Load Previous",frValid:"0"},{key:"editor.viewHistory",enValue:"View Previous",enValid:"1",frValue:"[FR] View Previous",frValid:"0"},{key:"editor.browse",enValue:"Browse",enValid:"1",frValue:"Parcourir",frValid:"1"},{key:"editor.remove",enValue:"Remove",enValid:"1",frValue:"Supprimer",frValid:"1"},{key:"editor.back",enValue:"Back",enValid:"1",frValue:"Retour",frValid:"1"},{key:"editor.next",enValue:"Next",enValid:"1",frValue:"Suivant",frValid:"1"},{key:"editor.preview",enValue:"Preview",enValid:"1",frValue:"Afficher l’aperçu",frValid:"1"},{key:"editor.confirm",enValue:"Confirm",enValid:"1",frValue:"Confirmer",frValid:"1"},{key:"editor.cancel",enValue:"Cancel",enValid:"1",frValue:"Annuler",frValid:"1"},{key:"editor.unsavedChanges",enValue:"Unsaved changes",enValid:"1",frValue:"Modifications non enregistrées",frValid:"1"},{key:"editor.saveChanges",enValue:"Save Changes",enValid:"1",frValue:"Enregistrer les modifications",frValid:"1"},{key:"editor.label.or",enValue:"or",enValid:"1",frValue:"ou",frValid:"1"},{key:"editor.label.browse",enValue:"browse",enValid:"1",frValue:"parcourir",frValid:"1"},{key:"editor.label.upload",enValue:"to upload",enValid:"1",frValue:"téléverser",frValid:"1"},{key:"editor.savingChanges",enValue:"Saving...",enValid:"1",frValue:"Enregistrement...",frValid:"1"},{key:"editor.resetChanges",enValue:"Reset Changes",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.refreshChanges.modal",enValue:"Are you sure you want to reload the product? All unsaved changes will be lost.",enValid:"1",frValue:"Voulez-vous vraiment recharger ce produit? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.changeLang.modal",enValue:"Are you sure you want to switch languages? Unsaved changes may be lost.",enValid:"1",frValue:"Voulez-vous vraiment changer de langue? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.frenchConfig",enValue:"View French Config",enValid:"1",frValue:"Afficher la configuration en français",frValid:"1"},{key:"editor.englishConfig",enValue:"View English Config",enValid:"1",frValue:"Afficher la configuration en anglais",frValid:"1"},{key:"editor.returnToLanding",enValue:"Return to Landing",enValid:"1",frValue:"Retour à la page d’accueil",frValid:"1"},{key:"editor.image.delete",enValue:"Delete Image",enValid:"1",frValue:"Supprimer l'image",frValid:"1"},{key:"editor.image.label.drag",enValue:"Drag your images here",enValid:"1",frValue:"Faites glisser vos images ici",frValid:"1"},{key:"editor.image.label.caption",enValue:"Caption",enValid:"1",frValue:"Légende",frValid:"1"},{key:"editor.image.reorder",enValue:"Click and drag to reorder images",enValid:"1",frValue:"Cliquez sur les images et faites-les glisser pour changer l’ordre.",frValid:"1"},{key:"editor.image.altTag",enValue:"Alt tag",enValid:"1",frValue:"Texte de remplacement",frValid:"1"},{key:"editor.image.slideshowCaption",enValue:"Slideshow Caption",enValid:"1",frValue:"Légende du diaporama",frValid:"1"},{key:"editor.image.loadingError",enValue:"An error occurred when trying to load image",enValid:"1",frValue:"Une erreur est survenue lors du chargement de l’image.",frValid:"1"},{key:"editor.video.title",enValue:"Video Title",enValid:"1",frValue:"Titre de la vidéo",frValid:"1"},{key:"editor.video.label.drag",enValue:"Drag your video file here",enValid:"1",frValue:"Glissez votre fichier vidéo ici",frValid:"1"},{key:"editor.video.label.captions",enValue:"Video Captions",enValid:"1",frValue:"Sous-titres",frValid:"1"},{key:"editor.video.label.transcript",enValue:"Video Transcript",enValid:"1",frValue:"Transcription",frValid:"1"},{key:"editor.video.label.upload",enValue:"Upload",enValid:"1",frValue:"Télécharger",frValid:"1"},{key:"editor.video.delete",enValue:"Delete Video",enValid:"1",frValue:"Supprimer la vidéo",frValid:"1"},{key:"editor.video.pasteUrl",enValue:"Paste the URL to a video",enValid:"1",frValue:"Paste the URL to a video",frValid:"0"},{key:"editor.chart.delete",enValue:"Delete Chart",enValid:"1",frValue:"Supprimer le graphique",frValid:"1"},{key:"editor.chart.label.name",enValue:"Name",enValid:"1",frValue:"Nom",frValid:"1"},{key:"editor.chart.label.edit",enValue:"Edit",enValid:"1",frValue:"Éditer",frValid:"1"},{key:"editor.chart.label.empty",enValue:"Empty",enValid:"1",frValue:"Vide",frValid:"1"},{key:"editor.chart.label.create",enValue:"Add new chart",enValid:"1",frValue:"Ajouter un nouveau graphique",frValid:"1"},{key:"editor.chart.label.info",enValue:"Interactive chart",enValid:"1",frValue:"[FR] Interactive chart",frValid:"0"},{key:"editor.chart.label.nameExists",enValue:"There is already an existing chart with the name {name}.",enValid:"1",frValue:"There is already an existing chart with the name {name}.",frValid:"0"},{key:"editor.chart.label.info",enValue:"Interactive charts ({num})",enValid:"1",frValue:"Graphiques interactifs ({num})",frValid:"1"},{key:"editor.chart.delete.confirm",enValue:"Are you sure you want to delete the chart {name}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer le graphique {nom}?",frValid:"1"},{key:"editor.map.title",enValue:"Map title",enValid:"1",frValue:"Titre de la carte",frValid:"1"},{key:"editor.map.edit.cancel",enValue:"Cancel editing",enValid:"1",frValue:"Annuler les modifications",frValid:"1"},{key:"editor.map.edit",enValue:"Map editor",enValid:"1",frValue:"Éditeur de carte",frValid:"1"},{key:"editor.map.label.name",enValue:"Map config name",enValid:"1",frValue:"Nom de la configuration de la carte",frValid:"1"},{key:"editor.map.label.create",enValue:"Create New Configuration File",enValid:"1",frValue:"Créer un nouveau fichier de configuration",frValid:"1"},{key:"editor.map.label.edit",enValue:"Edit Map Configuration",enValid:"1",frValue:"Modifier la configuration de la carte",frValid:"1"},{key:"editor.map.scrollguard.enable",enValue:"Enable scrollguard",enValid:"1",frValue:"Activer le contrôle du défilement",frValid:"1"},{key:"editor.map.timeslider.enable",enValue:"Enable Time Slider:",enValid:"1",frValue:"Activer le curseur temporel:",frValid:"1"},{key:"editor.map.timeslider.edit",enValue:"Edit Time Slider Config",enValid:"1",frValue:"Modifier la configuration du curseur temporel",frValid:"1"},{key:"editor.map.timeslider.range",enValue:"Range:",enValid:"1",frValue:"Tranche:",frValid:"1"},{key:"editor.map.timeslider.start",enValue:"Start:",enValid:"1",frValue:"Début:",frValid:"1"},{key:"editor.map.timeslider.attribute",enValue:"Attribute:",enValid:"1",frValue:"Caractéristique:",frValid:"1"},{key:"editor.map.timeslider.layers",enValue:"(OPTIONAL) Comma separated Layer IDs:",enValid:"1",frValue:"(OPTIONAL) Comma separated Layer IDs:",frValid:"0"},{key:"editor.map.timeslider.to",enValue:"to",enValid:"1",frValue:"to",frValid:"0"},{key:"editor.map.timeslider.warning",enValue:"⚠️Warning! Please ensure that:",enValid:"1",frValue:"⚠️Avertissement! Veuillez vous assurer de ce qui suit:",frValid:"1"},{key:"editor.map.timeslider.warning.bullet1",enValue:"All range and start values are positive integers.",enValid:"1",frValue:"Toutes les valeurs de la tranche et du début sont des nombres entiers positifs.",frValid:"1"},{key:"editor.map.timeslider.warning.bullet2",enValue:'The "to" value is greater than or equal to the "from" value.',enValid:"1",frValue:"La valeur « À » est supérieure ou égale à la valeur « De ».",frValid:"1"},{key:"editor.map.timeslider.warning.end",enValue:"Otherwise, your time slider config cannot be saved.",enValid:"1",frValue:"Autrement",frValid:" la configuration du curseur temporel ne pourra pas être enregistrée."},{key:"editor.slideshow.label.info",enValue:"Slideshow items ({num})",enValid:"1",frValue:"[FR] Slideshow items ({num})",frValid:"0"},{key:"editor.slideshow.label.create",enValue:"Add new item",enValid:"1",frValue:"[FR] Add new item",frValid:"0"},{key:"editor.slideshow.label.edit",enValue:"Edit existing item",enValid:"1",frValue:"[FR] Edit existing item",frValid:"0"},{key:"editor.slideshow.label.type",enValue:"Type",enValid:"1",frValue:"[FR] Type",frValid:"0"},{key:"editor.slideshow.label.add",enValue:"Add",enValid:"1",frValue:"[FR] Add",frValid:"0"},{key:"editor.slides.title",enValue:"SLIDES",enValid:"1",frValue:"DIAPOSITIVES",frValid:"1"},{key:"editor.slides.addSlide",enValue:"New Slide",enValid:"1",frValue:"Nouvelle diapositive",frValid:"1"},{key:"editor.slides.copyFromLang",enValue:"Copy slides from the other language",enValid:"1",frValue:"Copier les diapositives de l’autre langue",frValid:"1"},{key:"editor.slides.deleteSlide.confirm",enValue:"Are you sure you want to delete the slide {title}?",enValid:"1",frValue:"Voulez-vous vraiment supprimer la diapositive {titre}?",frValid:"1"},{key:"editor.slides.changeSlide.confirm",enValue:"Are you sure you want to change the slide {title}? All unsaved progress will be lost.",enValid:"1",frValue:"Voulez-vous vraiment modifier la diapositive {titre}? Toute modification non enregistrée sera perdue.",frValid:"1"},{key:"editor.slides.makeFull",enValue:"Make the right panel the full slide",enValid:"1",frValue:"Mettre la diapositive complète dans le panneau de droite",frValid:"1"},{key:"editor.slides.centerPanel",enValue:"Center panel content",enValid:"1",frValue:"Contenu de la diapositive centrale",frValid:"0"},{key:"editor.slides.centerSlide",enValue:"Center slide content",enValid:"1",frValue:"Contenu du panneau central",frValid:"0"},{key:"editor.slides.copyAll",enValue:"Copy all",enValid:"1",frValue:"Copier tout",frValid:"1"},{key:"editor.slides.copy",enValue:"Copy",enValid:"1",frValue:"Copier",frValid:"1"},{key:"editor.slides.slide",enValue:"Slide",enValid:"1",frValue:"Diapositive",frValid:"1"},{key:"editor.slides.previousSlide",enValue:"Previous slide",enValid:"1",frValue:"Diapositive précédente",frValid:"1"},{key:"editor.slides.nextSlide",enValue:"Next slide",enValid:"1",frValue:"Diapositive suivante",frValid:"1"},{key:"editor.slides.leftPanel",enValue:"Left panel",enValid:"1",frValue:"Panneau de gauche",frValid:"1"},{key:"editor.slides.rightPanel",enValue:"Right panel",enValid:"1",frValue:"Panneau de droite",frValid:"1"},{key:"editor.slides.fullscreenPanel",enValue:"Fullscreen panel",enValid:"1",frValue:"Panneau plein écran",frValid:"1"},{key:"editor.slides.advanced",enValue:"Advanced",enValid:"1",frValue:"Avancé",frValid:"0"},{key:"editor.slides.contentType",enValue:"Content type",enValid:"1",frValue:"Type de contenu",frValid:"1"},{key:"editor.slides.content",enValue:"Content",enValid:"1",frValue:"Contenu",frValid:"1"},{key:"editor.slides.select",enValue:"Please select a slide to edit",enValid:"1",frValue:"Veuillez sélectionner une diapositive à modifier",frValid:"1"},{key:"editor.slides.panel.body",enValue:"Panel body",enValid:"1",frValue:"Corps du panneau",frValid:"1"},{key:"editor.slides.panel.title",enValue:"Panel title",enValid:"1",frValue:"Titre du panneau",frValid:"1"},{key:"editor.slides.intro",enValue:"Intro subtitle",enValid:"1",frValue:"Sous-titre de l’introduction",frValid:"1"},{key:"editor.slides.title",enValue:"Intro title",enValid:"1",frValue:"Titre de l’introduction",frValid:"1"},{key:"editor.tocOrientation",enValue:"Table of Contents Orientation",enValid:"1",frValue:"Orientation de la table des matières",frValid:"0"},{key:"editor.tocOrientation.info",enValue:"The table of contents orientation will be set to vertical in mobile view.",enValid:"1",frValue:"L'orientation de la table des matières sera définie sur verticale en vue mobile.",frValid:"0"},{key:"editor.tocOrientation.vertical",enValue:"Vertical",enValid:"1",frValue:"Vertical",frValid:"0"},{key:"editor.tocOrientation.horizontal",enValue:"Horizontal",enValid:"1",frValue:"Horizontal",frValid:"0"},{key:"editor.landing.greeting",enValue:"Hello",enValid:"1",frValue:"Bonjour",frValid:"1"}];i.columns=["key","enValue","enValid","frValue","frValid"],e.exports=i},"3e63":function(e,t,i){"use strict";i("76b2")},"5d54":function(e,t,i){"use strict";i("15ae")},6394:function(e,t,i){"use strict";i("1057")},6942:function(e,t,i){"use strict";i("7997")},"712c":function(e,t,i){"use strict";i("7632")},"717e":function(e,t,i){"use strict";i("dbf3")},7632:function(e,t,i){},"76b2":function(e,t,i){},7861:function(e,t,i){"use strict";i("a956")},7997:function(e,t,i){},"81ef":function(e,t,i){"use strict";i("891e")},8592:function(e,t,i){"use strict";i("c6c8")},"891e":function(e,t,i){},"8b64":function(e,t,i){"use strict";i("2e56")},"8ee6":function(e,t,i){},"9cb7":function(e,t,i){"use strict";i("03f0")},a0ea:function(e){e.exports=JSON.parse('{"startingFixtures":["export","geosearch","overviewmap","basemap","legend","mapnav","help","appbar","help","grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"],"configs":{"en":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/en/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/en/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/en/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/en/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":"The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"The Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Simple","description":"Canada Base Map - Simple","altText":"Canada base map - Simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Elevation (CBME)","description":"The Canada Base Map - Elevation (CBME) web mapping services of the Earth Sciences Sector at Natural Resources Canada, is intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Elevation (CBME)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Canada Base Map - Transportation (CBMT)","description":" The Canada Base Map - Transportation (CBMT) web mapping services of the Earth Sciences Sector at Natural Resources Canada, are intended primarily for online mapping application users and developers.","altText":"Canada Base Map - Transportation (CBMT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Imagery","description":"World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide.","altText":"World Imagery","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Physical Map","description":"This map presents the Natural Earth physical map at 1.24km per pixel for the world and 500m for the coterminous United States.","altText":"World Physical Map","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Shaded Relief","description":"This map portrays surface elevation as shaded relief. This map is used as a basemap layer to add shaded relief to other GIS maps, such as the ArcGIS Online World Street Map.","altText":"World Shaded Relief","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Street Map","description":"This worldwide street map presents highway-level data for the world.","altText":"ESWorld Street Map","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Terrain Base","description":"This map is designed to be used as a base map by GIS professionals to overlay other thematic layers such as demographics or land cover.","altText":"World Terrain Base","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"World Topographic Map","description":"This map is designed to be used as a basemap by GIS professionals and as a reference map by anyone.","altText":"World Topographic Map","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}},"fr":{"version":"4.0","fixtures":{"geosearch":{"serviceUrls":{"geoNames":"https://geogratis.gc.ca/services/geoname/fr/geonames.json","geoLocation":"https://geogratis.gc.ca/services/geolocation/fr/locate?q=","geoProvince":"https://geogratis.gc.ca/services/geoname/fr/codes/province.json","geoTypes":"https://geogratis.gc.ca/services/geoname/fr/codes/concise.json"},"settings":{"categories":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"sortOrder":["CITY","HAM","IR","LTM","MUN1","MUN2","PROV","STM","TERR","TOWN","UTM","VILG","UNP"],"maxResults":1000,"officialOnly":true}},"export":{"title":{"selected":true,"selectable":true,"value":""},"map":{"selected":true,"selectable":true},"mapElements":{"selected":true,"selectable":true},"legend":{"selected":true,"selectable":true},"footnote":{"selected":true,"selectable":true,"value":""}},"overviewmap":{"basemaps":{},"startMinimized":true,"expandFactor":1.5},"legend":{"root":{"name":"I\'m root","children":[]},"headerControls":["groupToggle","visibilityToggle"]},"mapnav":{"zoomOption":"buttons","items":["fullscreen","geolocator","home","help"]},"help":{"location":"./help","panelWidth":350},"appbar":{"items":["legend","geosearch","basemap","export","help"]}},"layers":[],"map":{"initialBasemapId":"baseNrCan","caption":{"mapCoords":{"disabled":false,"formatter":"LAT_LONG_DMS"},"scaleBar":{"disabled":false,"imperialScale":false}},"extentSets":[{"id":"EXT_NRCAN_Lambert_3978","default":{"xmin":-5281457,"xmax":3049492,"ymin":-983440,"ymax":4482193,"spatialReference":{"wkid":3978}}},{"id":"EXT_ESRI_World_AuxMerc_3857","default":{"xmin":-16632697.354854,"xmax":-5007771.626060756,"ymin":5022907.964742964,"ymax":10015875.184845109,"spatialReference":{"wkid":102100,"latestWkid":3857}}}],"lodSets":[{"id":"LOD_NRCAN_Lambert_3978","lods":[{"level":0,"resolution":38364.660062653464,"scale":145000000},{"level":1,"resolution":22489.62831258996,"scale":85000000},{"level":2,"resolution":13229.193125052918,"scale":50000000},{"level":3,"resolution":7937.5158750317505,"scale":30000000},{"level":4,"resolution":4630.2175937685215,"scale":17500000},{"level":5,"resolution":2645.8386250105837,"scale":10000000},{"level":6,"resolution":1587.5031750063501,"scale":6000000},{"level":7,"resolution":926.0435187537042,"scale":3500000},{"level":8,"resolution":529.1677250021168,"scale":2000000},{"level":9,"resolution":317.50063500127004,"scale":1200000},{"level":10,"resolution":185.20870375074085,"scale":700000},{"level":11,"resolution":111.12522225044451,"scale":420000},{"level":12,"resolution":66.1459656252646,"scale":250000},{"level":13,"resolution":38.36466006265346,"scale":145000},{"level":14,"resolution":22.48962831258996,"scale":85000},{"level":15,"resolution":13.229193125052918,"scale":50000},{"level":16,"resolution":7.9375158750317505,"scale":30000},{"level":17,"resolution":4.6302175937685215,"scale":17500}]},{"id":"LOD_ESRI_World_AuxMerc_3857","lods":[{"level":0,"resolution":19567.87924099992,"scale":73957190.948944},{"level":1,"resolution":9783.93962049996,"scale":36978595.474472},{"level":2,"resolution":4891.96981024998,"scale":18489297.737236},{"level":3,"resolution":2445.98490512499,"scale":9244648.868618},{"level":4,"resolution":1222.992452562495,"scale":4622324.434309},{"level":5,"resolution":611.4962262813797,"scale":2311162.217155},{"level":6,"resolution":305.74811314055756,"scale":1155581.108577},{"level":7,"resolution":152.87405657041106,"scale":577790.554289},{"level":8,"resolution":76.43702828507324,"scale":288895.277144},{"level":9,"resolution":38.21851414253662,"scale":144447.638572},{"level":10,"resolution":19.10925707126831,"scale":72223.819286},{"level":11,"resolution":9.554628535634155,"scale":36111.909643},{"level":12,"resolution":4.77731426794937,"scale":18055.954822},{"level":13,"resolution":2.388657133974685,"scale":9027.977411},{"level":14,"resolution":1.1943285668550503,"scale":4513.988705},{"level":15,"resolution":0.5971642835598172,"scale":2256.994353},{"level":16,"resolution":0.29858214164761665,"scale":1128.497176},{"level":17,"resolution":0.14929107082380833,"scale":564.248588},{"level":18,"resolution":0.07464553541190416,"scale":282.124294},{"level":19,"resolution":0.03732276770595208,"scale":141.062147},{"level":20,"resolution":0.01866138385297604,"scale":70.5310735}]}],"tileSchemas":[{"id":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Lambert Maps","extentSetId":"EXT_NRCAN_Lambert_3978","lodSetId":"LOD_NRCAN_Lambert_3978","thumbnailTileUrls":[],"hasNorthPole":true},{"id":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Web Mercator Maps","extentSetId":"EXT_ESRI_World_AuxMerc_3857","lodSetId":"LOD_ESRI_World_AuxMerc_3857","thumbnailTileUrls":[],"hasNorthPole":false}],"basemaps":[{"id":"baseNrCan","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada – transport (CBCT) avec étiquettes","description":"La carte de base du Canada – transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada – transport (CBCT)","layers":[{"id":"CBCT","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBCT3978/MapServer","opacity":1}]},{"id":"baseSimple","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - simple","description":"La carte de base du Canada - simple","altText":"La carte de base du Canada - simple","layers":[{"id":"SMR","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/Simple/MapServer","opacity":1},{"id":"SMW","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_TXT_3978/MapServer","opacity":1}]},{"id":"baseCBME_CBCE_HS_RO_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - élevation (CBCE)","description":"La carte de base du Canada - élevation (CBCE) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - élevation (CBCE)","layers":[{"id":"CBME_CBCE_HS_RO_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBME_CBCE_HS_RO_3978/MapServer","opacity":1}]},{"id":"baseCBMT_CBCT_GEOM_3978","tileSchemaId":"EXT_NRCAN_Lambert_3978#LOD_NRCAN_Lambert_3978","name":"Carte de base du Canada - transport (CBCT)","description":"La carte de base du Canada - transport (CBCT) du Secteur des sciences de la Terre de Ressources naturelles Canada est un service Internet qui s\'adresse principalement aux utilisateurs et développeurs d\'applications cartographiques en ligne.","altText":"La carte de base du Canada - transport (CBCT)","layers":[{"id":"CBMT_CBCT_GEOM_3978","layerType":"esri-tile","url":"https://maps-cartes.services.geo.ca/server2_serveur2/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer","opacity":1}]},{"id":"baseEsriWorld","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Imagerie mondiale","description":"L\'imagerie mondiale fournit une imagerie satellitaire et aérienne dans de nombreuses régions du monde avec une résolution de 1 mètres et moins et des images satellitaires de résolution inférieure dans le monde entier.","altText":"L\'imagerie mondiale","layers":[{"id":"World_Imagery","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer","opacity":1}]},{"id":"baseEsriPhysical","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde physique","description":"La carte du monde physique représente l\'aspect physique naturel de la Terre à 1.24 kilomètres par pixel pour le monde et à 500 mètres pour les États-Unis.","altText":"La carte du monde physique","layers":[{"id":"World_Physical_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer","opacity":1}]},{"id":"baseEsriRelief","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde en relief ombragé","description":"La carte du monde en relief ombragé représente l\'élévation de la surface de la terre comme un relief ombragé. Cette carte est utilisée comme couche de fond afin d\'ajouter un relief ombragé à d\'autres cartes SIG, comme la carte ArcGIS Online World Street Map.","altText":"La carte du monde en relief ombragé","layers":[{"id":"World_Shaded_Relief","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer","opacity":1}]},{"id":"baseEsriStreet","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde routier","description":"La carte du monde routier présente des données au niveau des autoroutes pour le monde.","altText":"La carte du monde routier","layers":[{"id":"World_Street_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer","opacity":1}]},{"id":"baseEsriTerrain","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde terrain","description":"La carte du monde terrain est conçue pour être utilisée comme une carte de base par les professionnels du SIG pour superposer d\'autres couches thématiques comme la démographie ou la couverture terrestre.","altText":"La carte du monde terrain","layers":[{"id":"World_Terrain_Base","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer","opacity":1}]},{"id":"baseEsriTopo","tileSchemaId":"EXT_ESRI_World_AuxMerc_3857#LOD_ESRI_World_AuxMerc_3857","name":"Monde topographique","description":"La carte du monde topographique est conçue pour être utilisé comme une carte de base par les professionnels du SIG et comme une carte de référence par quiconque.","altText":"La carte du monde topographique","layers":[{"id":"World_Topo_Map","layerType":"esri-tile","url":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer","opacity":1}]}]},"panels":{"open":[{"id":"legend"}]},"system":{"animate":true,"exposeOid":false,"exposeMeasurements":true,"proxyUrl":"https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"}}}}')},a360:function(e,t,i){},a7e9:function(e,t,i){"use strict";i("c946")},a828:function(e,t,i){"use strict";i("d1aa")},a956:function(e,t,i){},b318:function(e,t,i){"use strict";i("caec")},b5ca:function(e,t,i){"use strict";i("8ee6")},c62e:function(e,t,i){},c6c8:function(e,t,i){},c946:function(e,t,i){},caec:function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);var a=i("7a23");const l={id:"app",class:"storyramp-app bg-white"};function o(e,t,i,o,r,n){const s=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:e.$route.path}))])}var r=i("9ab4"),n=i("1b40"),s=i("be92");const c=Object(s["b"])("user",{state:()=>({userProfile:{}}),actions:{async fetchUserProfile(){const e="https://localhost:44371";try{const t=await fetch(e+"/api/user/profile",{method:"GET",credentials:"include"});if(t.ok){const e=await t.json();this.userProfile=e}else console.error("Failed to fetch the user profile.")}catch(t){console.error("Error fetching user profile: ",t)}}}});class d extends n["c"]{onRouteUpdate(e){var t;this.$i18n.locale=null!==(t=e.params.lang)&&void 0!==t?t:"en",e.params.lang&&(document.title=this.$t(e.meta.title))}mounted(){c(this.$pinia)}}Object(r["a"])([Object(n["d"])("$route",{immediate:!0})],d.prototype,"onRouteUpdate",null);i("a828");var u=i("6b0d"),b=i.n(u);const m=b()(d,[["render",o]]);var p=m,h=i("ce1f");h["b"].registerHooks(["beforeRouterEnter","beforeRouteLeave","beforeRouteUpdate"]);const g={class:"relative"},f={class:"absolute top-0 right-0 bg-white text-black p-2"},v={class:"flex flex-col items-center"},O={class:"text-2xl font-bold mt-4"},j={class:"flex justify-center mt-12 mb-32"},y={class:"lang-selector border-4 border-gray-400 border-solid mx-8"},V=Object(a["createElementVNode"])("button",{class:"text-2xl text-white font-bold"},"English",-1),S={class:"lang-selector border-4 border-gray-400 border-solid mx-8"},C=Object(a["createElementVNode"])("button",{class:"text-2xl text-white font-bold"},"Français",-1);function x(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",g,[Object(a["createElementVNode"])("div",f,Object(a["toDisplayString"])(e.$t("editor.landing.greeting"))+" "+Object(a["toDisplayString"])(e.userName)+"! ",1),Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("h1",O,Object(a["toDisplayString"])(e.title),1),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",y,[Object(a["createVNode"])(n,{to:{name:"home",params:{lang:"en"}},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[V]),_:1})]),Object(a["createElementVNode"])("div",S,[Object(a["createVNode"])(n,{to:{name:"home",params:{lang:"fr"}},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[C]),_:1})])])])])}var E=i("ade3");class w extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"title",document.title)}get userName(){const e=c();return e.userProfile.userName||"Guest"}}i("a7e9");const k=b()(w,[["render",x]]);var N=k;const T={class:"relative"},_={class:"absolute top-0 right-0 bg-white text-black p-2"},$={class:"flex justify-center"},L={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},M={class:"text-2xl font-bold"},B={class:"home-btn-container border-4 border-gray-400 border-solid m-24"},I={class:"text-2xl font-bold"};function D(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",T,[Object(a["createElementVNode"])("div",_,Object(a["toDisplayString"])(e.$t("editor.landing.greeting"))+" "+Object(a["toDisplayString"])(e.userName)+"! ",1),Object(a["createElementVNode"])("div",$,[Object(a["createElementVNode"])("div",L,[Object(a["createVNode"])(n,{to:{name:"metadataNew"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",M,"+ "+Object(a["toDisplayString"])(e.$t("editor.createProduct")),1)]),_:1})]),Object(a["createElementVNode"])("div",B,[Object(a["createVNode"])(n,{to:{name:"metadataExisting"},class:"flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",I,Object(a["toDisplayString"])(e.$t("editor.editProduct")),1)]),_:1})])])])}class F extends n["c"]{get userName(){const e=c();return e.userProfile.userName||"Guest"}}i("5d54");const P=b()(F,[["render",D]]);var R=P;const A={class:"editor-container"},U={class:"px-20 py-5"},z={class:"flex"},W={class:"flex flex-1 text-2xl font-bold mb-5"},H={class:"flex items-center border py-5 w-5/6"},q={class:"editor-label"},X={key:0,class:"text-red-500"},J={class:"relative w-1/3 inline-block"},G={class:"absolute z-10 w-full bg-white border border-gray-200 mt-1"},Z=["onMousedown"],Y={key:0,class:"text-yellow-500 rounded p-1 ml-2"},Q=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m2.095 19.886 9.248-16.5c.133-.237.384-.384.657-.384.272 0 .524.147.656.384l9.248 16.5c.064.115.096.241.096.367 0 .385-.309.749-.752.749h-18.496c-.44 0-.752-.36-.752-.749 0-.126.031-.252.095-.367zm9.907-6.881c-.414 0-.75.336-.75.75v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5c0-.414-.336-.75-.75-.75zm-.002-3c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z","fill-rule":"nonzero"})])],-1),K={class:"align-center inline-block select-none"},ee={key:3,class:"inline-flex align-middle mb-1"},te={key:4,class:"ml-10"},ie=["onClick"],ae=["disabled"],le=Object(a["createElementVNode"])("br",null,null,-1),oe={class:"mb-4"},re={class:"editor-h3"},ne={class:"flex mt-8"},se={class:"ml-auto"},ce={class:"editor-button"},de=["onClick"],ue={slot:"header",class:"text-lg font-bold"},be={class:"w-full flex justify-end"};function me(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("metadata-content"),c=Object(a["resolveComponent"])("router-link"),d=Object(a["resolveComponent"])("confirmation-modal"),u=Object(a["resolveComponent"])("vue-final-modal"),b=Object(a["resolveComponent"])("editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,[e.loadEditor?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("div",z,[Object(a["createElementVNode"])("div",W,Object(a["toDisplayString"])(e.editExisting?e.$t("editor.editProduct"):e.$t("editor.createProduct")),1),Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=t=>e.swapLang())},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),1)]),Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("label",q,["uuid"in e.reqFields?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",X,"*")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.uuid"))+": ",1)]),Object(a["createElementVNode"])("div",J,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",onFocus:t[1]||(t[1]=t=>e.showDropdown=!0),onBlur:t[2]||(t[2]=t=>e.showDropdown=!1),onInput:t[3]||(t[3]=t=>{e.error=!1,e.reqFields.uuid=!0,e.checkUuid()}),"onUpdate:modelValue":t[4]||(t[4]=t=>e.uuid=t),class:Object(a["normalizeClass"])(["editor-input w-full mt-0",{"input-error":e.error||!e.reqFields.uuid}])},null,34),[[a["vModelText"],e.uuid]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",G,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.getStorylines,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.uuid,onMousedown:Object(a["withModifiers"])(i=>e.selectUuid(t.uuid),["prevent"]),class:Object(a["normalizeClass"])(["p-2 hover:bg-gray-100 cursor-pointer",t.isUserStoryline?"bg-gray-200":""])},Object(a["toDisplayString"])(t.uuid),43,Z))),128))])],512),[[a["vShow"],e.showDropdown]])]),e.warning?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Y,[Q,Object(a["createElementVNode"])("span",K,Object(a["toDisplayString"])(e.$t("editor.uuid.exists")),1)])):Object(a["createCommentVNode"])("",!0),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[5]||(t[5]=(...t)=>e.generateRemoteConfig&&e.generateRemoteConfig(...t)),class:Object(a["normalizeClass"])(["editor-button bg-black text-white hover:bg-gray-800",{"input-error":e.error}])},Object(a["toDisplayString"])(e.$t("editor.load")),3)):Object(a["createCommentVNode"])("",!0),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:2,onClick:t[6]||(t[6]=(...t)=>e.fetchHistory&&e.fetchHistory(...t)),class:Object(a["normalizeClass"])(["bg-black editor-button text-white hover:bg-gray-800",{"input-error":e.error}])},Object(a["toDisplayString"])(e.$t("editor.viewHistory")),3)):Object(a["createCommentVNode"])("",!0),"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,[Object(a["createVNode"])(n,{size:"24px",color:"#009CD1",class:"mx-2 my-auto"})])):Object(a["createCommentVNode"])("",!0),e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",te,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.storylineHistory,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.id,onClick:i=>e.selectHistory(t),class:Object(a["normalizeClass"])(["p-2 cursor-pointer",{"bg-blue-200":e.selectedHistory&&t.id===e.selectedHistory.id}])},Object(a["toDisplayString"])(e.formatDate(t.created)),11,ie))),128))]),Object(a["createElementVNode"])("button",{disabled:!e.selectedHistory||e.selectedHistory.storylineUUID!==e.uuid,class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[7]||(t[7]=t=>e.loadHistory())},Object(a["toDisplayString"])(e.$t("editor.loadPrevious")),9,ae)])):Object(a["createCommentVNode"])("",!0)]),le,Object(a["createElementVNode"])("div",oe,[Object(a["createElementVNode"])("h3",re,Object(a["toDisplayString"])(e.$t("editor.productDetails")),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.$t("editor.metadata.instructions")),1)]),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"])]),Object(a["createElementVNode"])("div",ne,[e.editExisting?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[8]||(t[8]=t=>e.saveMetadata(!0)),class:"editor-button"},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",se,[Object(a["createVNode"])(c,{to:{name:"home"},target:""},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",ce,Object(a["toDisplayString"])(e.$t("editor.back")),1)]),_:1}),Object(a["createElementVNode"])("button",{onClick:t[9]||(t[9]=t=>e.warning?e.$vfm.open("confirm-uuid-overwrite"):e.continueToEditor()),class:"editor-button bg-black text-white"},Object(a["toDisplayString"])(e.$t("editor.next")),1),Object(a["createVNode"])(d,{name:"confirm-uuid-overwrite",message:e.$t(`Are you sure you want to overwrite product '${e.uuid}'?`),onOk:t[10]||(t[10]=t=>e.continueToEditor())},null,8,["message"])])])],64)),e.loadEditor&&"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(b,{key:1,configs:e.configs,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,metadata:e.metadata,slides:e.slides,configLang:e.configLang,saving:e.saving,unsavedChanges:e.unsavedChanges,onSaveChanges:e.generateConfig,onSaveStatus:e.updateSaveStatus,onRefreshConfig:e.refreshConfig,ref:"mainEditor"},{langModal:Object(a["withCtx"])(i=>[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:Object(a["withModifiers"])(t=>i.unsavedChanges?e.$vfm.open("change-lang"):e.swapLang(),["stop"])},Object(a["toDisplayString"])("en"===e.configLang?e.$t("editor.frenchConfig"):e.$t("editor.englishConfig")),9,de),Object(a["createVNode"])(d,{name:"change-lang",message:e.$t("editor.changeLang.modal"),onOk:t[11]||(t[11]=t=>e.swapLang())},null,8,["message"])]),metadataModal:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{modalId:"metadata-edit-modal","content-class":"flex flex-col max-h-full overflow-y-auto max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",ue,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1),Object(a["createVNode"])(s,{metadata:e.metadata,onMetadataChanged:e.updateMetadata,onLogoChanged:e.onFileChange,onLogoSourceChanged:e.onLogoSourceInput},null,8,["metadata","onMetadataChanged","onLogoChanged","onLogoSourceChanged"]),Object(a["createElementVNode"])("div",be,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[12]||(t[12]=t=>e.saveMetadata(!1))}," Done ")])]),_:1})]),_:1},8,["configs","configFileStructure","sourceCounts","metadata","slides","configLang","saving","unsavedChanges","onSaveChanges","onSaveStatus","onRefreshConfig"])):Object(a["createCommentVNode"])("",!0)])}i("14d9"),i("88a7"),i("271a"),i("5494");var pe=i("0a4f"),he=i("2926"),ge=i("327a");const fe=e=>(Object(a["pushScopeId"])("data-v-2fa54ed4"),e=e(),Object(a["popScopeId"])(),e),ve={class:"sticky top-20 h-auto self-start flex-grow m-5"},Oe={key:0},je={class:"flex"},ye={class:"flex flex-col w-full"},Ve=fe(()=>Object(a["createElementVNode"])("label",{class:"editor-label"},"Slide title:",-1)),Se={class:"flex"},Ce=fe(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),xe=["disabled"],Ee=["disabled"],we={class:"flex mt-3"},ke={class:"mx-2 font-bold"},Ne=["disabled"],Te={class:"mx-2 font-bold"},_e=["disabled"],$e={class:"mx-2 font-bold"},Le=["disabled"],Me=fe(()=>Object(a["createElementVNode"])("br",null,null,-1)),Be={key:0,class:"flex border-b border-black"},Ie=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span><span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span>',2),De={class:"align-middle inline-block pl-1"},Fe=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1zm-16.5.5h15v15h-15z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span><span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span>',2),Pe={class:"align-middle inline-block pl-1"},Re={class:"align-middle inline-block pl-1"},Ae={key:1,class:"border-b border-black"},Ue=Object(a["createStaticVNode"])('<span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span><span class="align-middle inline-block" data-v-2fa54ed4><svg clip-rule="evenodd" fill-rule="evenodd" width="15" height="15" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-2fa54ed4><path d="m21 4c0-.478-.379-1-1-1h-16c-.62 0-1 .519-1 1v16c0 .621.52 1 1 1h16c.478 0 1-.379 1-1z" fill-rule="nonzero" data-v-2fa54ed4></path></svg></span>',2),ze={class:"align-middle inline-block pl-1"},We={class:"align-middle inline-block pl-1"},He={class:"flex mt-4"},qe={class:"font-bold text-xl"},Xe=fe(()=>Object(a["createElementVNode"])("span",{class:"ml-auto flex-grow"},null,-1)),Je={key:0,class:"flex flex-col mr-8"},Ge={class:"editor-label text-left text-lg"},Ze=["value"],Ye=["value"],Qe={key:1,class:"flex h-full mt-4 justify-center text-gray-600 text-xl"};function Ke(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("custom-editor"),s=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ve,[e.currentSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Oe,[Object(a["createElementVNode"])("div",je,[Object(a["createElementVNode"])("div",ye,[Ve,Object(a["createElementVNode"])("div",Se,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.currentSlide.title=t),placeholder:"Add a title",class:"editor-input w-2/3"},null,512),[[a["vModelText"],e.currentSlide.title]]),Ce,Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex-1),["stop"])),disabled:0===e.slideIndex,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.previousSlide")),9,xe),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>e.selectSlide(e.slideIndex+1),["stop"])),disabled:e.isLast,class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.slides.nextSlide")),9,Ee)]),Object(a["createElementVNode"])("div",we,[Object(a["createElementVNode"])("span",ke,Object(a["toDisplayString"])(e.$t("editor.slides.makeFull")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[3]||(t[3]=t=>e.rightOnly=t),disabled:e.rightOnly&&"dynamic"===e.determineEditorType(e.currentSlide.panel[e.panelIndex]),onChange:t[4]||(t[4]=Object(a["withModifiers"])(t=>e.$vfm.open("right-only-"+e.slideIndex),["stop"]))},null,40,Ne),[[a["vModelCheckbox"],e.rightOnly]]),Object(a["createElementVNode"])("span",Te,Object(a["toDisplayString"])(e.$t("editor.slides.centerSlide")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[5]||(t[5]=t=>e.centerSlide=t),disabled:e.centerPanel,onChange:t[6]||(t[6]=Object(a["withModifiers"])(t=>e.toggleCenterSlide(),["stop"]))},null,40,_e),[[a["vModelCheckbox"],e.centerSlide]]),Object(a["createElementVNode"])("span",$e,Object(a["toDisplayString"])(e.$t("editor.slides.centerPanel")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",class:"editor-input rounded-none cursor-pointer w-4 h-4","onUpdate:modelValue":t[7]||(t[7]=t=>e.centerPanel=t),disabled:e.centerSlide,onChange:t[8]||(t[8]=Object(a["withModifiers"])(t=>e.toggleCenterPanel(),["stop"]))},null,40,Le),[[a["vModelCheckbox"],e.centerPanel]])])])]),Me,2===e.currentSlide.panel.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Be,[Object(a["createElementVNode"])("button",{onClick:t[9]||(t[9]=()=>{e.panelIndex=0,e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",0!=e.panelIndex||e.advancedEditorView?"border-white":"border-black"])},[Ie,Object(a["createElementVNode"])("span",De,Object(a["toDisplayString"])(e.$t("editor.slides.leftPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[10]||(t[10]=()=>{e.panelIndex=1,e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",1!=e.panelIndex||e.advancedEditorView?"border-white":"border-black"])},[Fe,Object(a["createElementVNode"])("span",Pe,Object(a["toDisplayString"])(e.$t("editor.slides.rightPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[11]||(t[11]=()=>{e.advancedEditorView=!0,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-black":"border-white"])},[Object(a["createElementVNode"])("span",Re,Object(a["toDisplayString"])(e.$t("editor.slides.advanced")),1)],2)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ae,[Object(a["createElementVNode"])("button",{onClick:t[12]||(t[12]=()=>{e.advancedEditorView=!1,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-white":"border-black"])},[Ue,Object(a["createElementVNode"])("span",ze,Object(a["toDisplayString"])(e.$t("editor.slides.fullscreenPanel")),1)],2),Object(a["createElementVNode"])("button",{onClick:t[13]||(t[13]=()=>{e.advancedEditorView=!0,e.saveChanges()}),class:Object(a["normalizeClass"])(["editor-button border-t border-l border-r",e.advancedEditorView?"border-black":"border-white"])},[Object(a["createElementVNode"])("span",We,Object(a["toDisplayString"])(e.$t("editor.slides.advanced")),1)],2)])),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",He,[Object(a["createElementVNode"])("span",qe,Object(a["toDisplayString"])(e.$t("editor.slides.content"))+":",1),Xe,!e.advancedEditorView||e.rightOnly?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Je,[Object(a["createElementVNode"])("label",Ge,Object(a["toDisplayString"])(e.$t("editor.slides.contentType"))+":",1),Object(a["createElementVNode"])("select",{ref:"typeSelector",onInput:t[14]||(t[14]=t=>{e.$vfm.open("change-slide-"+e.slideIndex),e.newType=t.target.value}),value:e.determineEditorType(e.currentSlide.panel[e.panelIndex])},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors).filter(e=>"loading"!==e),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,Ye))),128))],40,Ze)])):Object(a["createCommentVNode"])("",!0)]),e.advancedEditorView?(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:0,ref:"editor",config:e.currentSlide,slideIndex:e.slideIndex,onSlideEdit:t[15]||(t[15]=t=>e.$emit("slide-edit")),onConfigEdited:t[16]||(t[16]=(t,i=!1)=>e.$emit("custom-slide-updated",t,i))},null,8,["config","slideIndex"])):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.currentSlide.panel[e.panelIndex])]),{ref:"editor",key:e.panelIndex+e.determineEditorType(e.currentSlide.panel[e.panelIndex]),panel:e.currentSlide.panel[e.panelIndex],configFileStructure:e.configFileStructure,lang:e.lang,uid:e.uid,sourceCounts:e.sourceCounts,centerSlide:e.centerSlide,dynamicSelected:e.dynamicSelected,onSlideEdit:t[17]||(t[17]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","uid","sourceCounts","centerSlide","dynamicSelected"]))])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qe,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.slides.select")),1)])),Object(a["createVNode"])(s,{name:"change-slide-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[18]||(t[18]=t=>{e.changePanelType(e.determineEditorType(e.currentSlide.panel[e.panelIndex]),e.newType),e.toggleCenterPanel(),e.toggleCenterSlide()}),onCancel:e.cancelTypeChange},null,8,["name","message","onCancel"]),Object(a["createVNode"])(s,{name:"right-only-"+e.slideIndex,message:e.$t("editor.slides.changeSlide.confirm",{title:e.currentSlide.title}),onOk:t[19]||(t[19]=t=>e.toggleRightOnly()),onCancel:t[20]||(t[20]=t=>e.rightOnly=!e.rightOnly)},null,8,["name","message"])])}var et;(function(e){e["Text"]="text",e["Image"]="image",e["Map"]="map",e["Chart"]="chart",e["Video"]="video",e["Audio"]="audio",e["Slideshow"]="slideshow",e["Dynamic"]="dynamic",e["Loading"]="loading"})(et||(et={}));const tt={class:"block"},it={class:"flex items-center"},at={class:"font-bold px-4"},lt=["disabled"],ot={class:"flex items-center"},rt=Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),nt={class:"px-2"},st=Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1),ct={key:0,class:"m-4"},dt={class:"italic text-gray-400"},ut={class:"flex flex-wrap list-none"};function bt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ChartPreview"),s=Object(a["resolveComponent"])("draggable"),c=Object(a["resolveComponent"])("confirmation-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",tt,[Object(a["createElementVNode"])("div",it,[Object(a["createElementVNode"])("span",at,Object(a["toDisplayString"])(e.$t("editor.chart.label.info",{num:e.chartConfigs.length})),1),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:"modal-btn",onClick:t[0]||(t[0]=t=>e.clearEditor()),disabled:!e.allowMany&&e.chartConfigs.length>0},[Object(a["createElementVNode"])("div",ot,[rt,Object(a["createElementVNode"])("span",nt,Object(a["toDisplayString"])(e.$t("editor.chart.label.create")),1)])],8,lt)]),st,0===e.chartConfigs.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ct,[Object(a["createElementVNode"])("span",dt,Object(a["toDisplayString"])(e.$t("editor.chart.label.empty")),1)])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createElementVNode"])("ul",ut,[Object(a["createVNode"])(s,{modelValue:e.chartConfigs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.chartConfigs=t),handle:".handle",onUpdate:e.onChartsEdited,class:"w-full flex flex-wrap list-none","item-key":"name"},{item:Object(a["withCtx"])(({element:t,index:i})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${t.name}-${i}`,chart:t,configFileStructure:e.configFileStructure,sourceCounts:e.sourceCounts,lang:e.lang,onEdit:e.editChart,onDelete:a=>e.$vfm.open(`${t.name}-${i}`)},null,8,["chart","configFileStructure","sourceCounts","lang","onEdit","onDelete"]))]),_:1},8,["modelValue","onUpdate"])],512),[[a["vShow"],e.chartConfigs.length]]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.chartConfigs,(t,i)=>(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:`${t.name}-${i}`,name:`${t.name}-${i}`,message:e.$t("editor.chart.delete.confirm",{name:t.name}),onOk:i=>e.deleteChart(t)},null,8,["name","message","onOk"]))),128))])}const mt=e=>(Object(a["pushScopeId"])("data-v-fb53f8a4"),e=e(),Object(a["popScopeId"])(),e),pt={class:"chart-item items-center mt-8 mx-5 overflow-hidden"},ht={class:"relative border-solid border-2 items-center justify-center text-center w-full"},gt=["content"],ft=mt(()=>Object(a["createElementVNode"])("svg",{class:"absolute transform -translate-x-1/2 -translate-y-1/2",height:"22px",width:"22px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),vt=[ft],Ot=mt(()=>Object(a["createElementVNode"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full bottom-2 -right-1 p-0 z-10 handle"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M8,18 C9.1045695,18 10,18.8954305 10,20 C10,21.1045695 9.1045695,22 8,22 C6.8954305,22 6,21.1045695 6,20 C6,18.8954305 6.8954305,18 8,18 Z M16,18 C17.1045695,18 18,18.8954305 18,20 C18,21.1045695 17.1045695,22 16,22 C14.8954305,22 14,21.1045695 14,20 C14,18.8954305 14.8954305,18 16,18 Z M8,10 C9.1045695,10 10,10.8954305 10,12 C10,13.1045695 9.1045695,14 8,14 C6.8954305,14 6,13.1045695 6,12 C6,10.8954305 6.8954305,10 8,10 Z M16,10 C17.1045695,10 18,10.8954305 18,12 C18,13.1045695 17.1045695,14 16,14 C14.8954305,14 14,13.1045695 14,12 C14,10.8954305 14.8954305,10 16,10 Z M8,2 C9.1045695,2 10,2.8954305 10,4 C10,5.1045695 9.1045695,6 8,6 C6.8954305,6 6,5.1045695 6,4 C6,2.8954305 6.8954305,2 8,2 Z M16,2 C17.1045695,2 18,2.8954305 18,4 C18,5.1045695 17.1045695,6 16,6 C14.8954305,6 14,5.1045695 14,4 C14,2.8954305 14.8954305,2 16,2 Z"})])],-1)),jt={class:"flex mt-4 items-center"},yt={class:"editor-label name-label font-bold flex-2"},Vt={class:"font-normal"},St=["id"],Ct={class:"flex items-center"},xt=mt(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M 18 2 L 15.585938 4.4140625 L 19.585938 8.4140625 L 22 6 L 18 2 z M 14.076172 5.9238281 L 3 17 L 3 21 L 7 21 L 18.076172 9.9238281 L 14.076172 5.9238281 z"})],-1)),Et={class:"px-2"};function wt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("storylines-chart"),s=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",pt,[Object(a["createElementVNode"])("div",ht,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-2 left-0 p-0 z-10 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.chart)),content:e.$t("editor.chart.delete")},vt,8,gt)),[[s,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Ot,e.loading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(n,{class:"w-full h-full",config:e.chartConfig,key:e.chartIdx,configFileStructure:e.configFileStructure,onLoaded:e.loadChart},null,8,["config","configFileStructure","onLoaded"]))]),Object(a["createElementVNode"])("div",jt,[Object(a["createElementVNode"])("label",yt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.chart.label.name"))+": ",1),Object(a["createElementVNode"])("span",Vt,Object(a["toDisplayString"])(e.chartName),1)]),Object(a["createElementVNode"])("button",{class:"editor-button chart-btn bg-gray-100 cursor-pointer hover:bg-gray-200",id:`edit-${e.chart.name}-btn`},[Object(a["createElementVNode"])("div",Ct,[xt,Object(a["createElementVNode"])("span",Et,Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),1)])],8,St)])])}class kt extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"chart",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"loading",!0),Object(E["a"])(this,"chartIdx",0),Object(E["a"])(this,"chartConfig",{}),Object(E["a"])(this,"chartName",""),Object(E["a"])(this,"modalEditor",void 0)}mounted(){this.chartConfig=this.chart,this.chartName=this.chart.name||"",this.loading=!1}loadChart(e){var t;if(!this.modalEditor){if(this.modalEditor=highed.ModalEditor(`edit-${this.chartName}-btn`,{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"},defaultChartOptions:e},e=>{const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0&&t.title.text!=this.chart.name)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,config:t,src:""};this.$emit("edit",{oldChart:this.chart,newChart:e}),this.chartConfig=e,this.chartName=e.name,this.chartIdx+=1}}),void 0!==(null===(t=e.data)||void 0===t?void 0:t.csv)){const t=e.data.csv;this.modalEditor.editor.dataTable.loadCSV({csv:t})}else this.convertSeriesToCSV(e);this.modalEditor.editor.chart.options.setAll(e)}}convertSeriesToCSV(e){var t;if("pie"===(null===(t=e.chart)||void 0===t?void 0:t.type)){const t=null===e||void 0===e?void 0:e.series.data;if(t){var i;const a=[`${null===e||void 0===e?void 0:e.series.name};${null===e||void 0===e||null===(i=e.yAxis)||void 0===i?void 0:i.title.text}`,...t.map(e=>`${e.name};${e.y}`)];this.modalEditor.editor.dataTable.loadCSV({csv:a.join("\n")})}}else if(null!==e&&void 0!==e&&e.series&&null!==e&&void 0!==e&&e.series.length){let t=null===e||void 0===e?void 0:e.series.map(e=>[e.name,...e.data]);if(void 0!==e.xAxis){var a,l;const i=[null===(a=e.xAxis)||void 0===a||null===(a=a.title)||void 0===a?void 0:a.text].concat(null===(l=e.xAxis)||void 0===l?void 0:l.categories);t.unshift(i)}let i=t[0].map((e,i)=>t.map(e=>e[i]).join(";"));this.modalEditor.editor.dataTable.loadCSV({csv:i.join("\n")})}}}Object(r["a"])([Object(n["b"])()],kt.prototype,"chart",void 0),Object(r["a"])([Object(n["b"])()],kt.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],kt.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],kt.prototype,"lang",void 0);i("6942");const Nt=b()(kt,[["render",wt],["__scopeId","data-v-fb53f8a4"]]);var Tt=Nt;const _t={slot:"header",class:"text-lg font-bold"},$t={class:"w-full flex justify-end"};function Lt(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(n,{modalId:e.name,class:"flex justify-center items-center","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white dark:bg-gray-900 border dark:border-gray-700 rounded-lg space-y-2"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",_t,Object(a["toDisplayString"])(e.message),1),Object(a["createElementVNode"])("div",$t,[Object(a["createElementVNode"])("button",{class:"editor-button confirm-button hover:bg-gray-800",onClick:t[0]||(t[0]=Object(a["withModifiers"])((...t)=>e.onOk&&e.onOk(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.confirm")),1),Object(a["createElementVNode"])("button",{class:"editor-button cancel-button hover:bg-gray-100",onClick:t[1]||(t[1]=Object(a["withModifiers"])((...t)=>e.onCancel&&e.onCancel(...t),["stop"]))},Object(a["toDisplayString"])(e.$t("editor.cancel")),1)])]),_:1},8,["modalId"])}let Mt=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"message",void 0),Object(E["a"])(this,"name",void 0)}onOk(){this.$emit("ok"),this.$vfm.close(this.name)}onCancel(){this.$emit("Cancel"),this.$vfm.close(this.name)}};Object(r["a"])([Object(n["b"])()],Mt.prototype,"message",void 0),Object(r["a"])([Object(n["b"])()],Mt.prototype,"name",void 0),Mt=Object(r["a"])([Object(n["a"])({components:{"vue-final-modal":he["a"]}})],Mt);var Bt=Mt;i("3e63");const It=b()(Bt,[["render",Lt],["__scopeId","data-v-6c4487c4"]]);var Dt=It,Ft=i("b76a"),Pt=i.n(Ft);let Rt=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"allowMany",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"edited",!1),Object(E["a"])(this,"chartConfigs",[]),Object(E["a"])(this,"modalEditor",{})}mounted(){highed.ready(()=>{this.modalEditor=highed.ModalEditor("modal-btn",{allowDone:!0,features:"import templates customize done",importer:{options:"plugins csv json"}},e=>{this.createNewChart(e.toString())})});const e=this.panel.type===et.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];if(this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles+="text-align: left;";else if(!this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles=(e[t].customStyles||"").replace("text-align: left;","");void 0!==e&&e.length&&(this.chartConfigs=e.map(e=>{let t="";if(e.options&&e.options.title)t=e.options.title;else{const i=e.src.match(/.*\/(.*)$/);t=i?i[1].replace(/\.[^/.]+$/,"").replace(/\./g," "):e.src}return{name:t,...e}}))}clearEditor(){let e={title:{text:"Chart "+(this.chartConfigs.length+1)},subtitle:{text:""},credits:{enabled:!1}};e="en"===this.lang?Object.assign({},e,{lang:{thousandsSep:","}}):Object.assign({},e,{lang:{thousandsSep:" "}}),this.modalEditor.editor.chart.options.setAll(e);const t='"Column 1";"Column 2"\n" "";" "';this.modalEditor.editor.dataTable.loadCSV({csv:t})}createNewChart(e){const t=JSON.parse(e),i=`${this.configFileStructure.uuid}/charts/${this.lang}/${t.title.text}.json`;if(this.sourceCounts[i]>0)alert(this.$t("editor.chart.label.nameExists",{name:t.title.text})),setTimeout(()=>this.modalEditor.show(),100);else{const e={name:t.title.text,src:i};this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1,this.configFileStructure.charts[this.lang].file(t.title.text+".json",JSON.stringify(t,null,4)),this.chartConfigs.push(e)}this.onChartsEdited()}editChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.oldChart.name);if(-1!==t){const i=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.oldChart.name}.json`;this.sourceCounts[i]-=1,0===this.sourceCounts[i]&&this.configFileStructure.charts[this.lang].remove(e.oldChart.name+".json");const a=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`;this.sourceCounts[a]?this.sourceCounts[a]+=1:this.sourceCounts[a]=1,this.configFileStructure.charts[this.lang].file(e.newChart.name+".json",JSON.stringify(e.newChart.config,null,4)),e.newChart.src=`${this.configFileStructure.uuid}/charts/${this.lang}/${e.newChart.name}.json`,this.chartConfigs[t]={name:e.newChart.name,src:e.newChart.src}}this.onChartsEdited()}deleteChart(e){const t=this.chartConfigs.findIndex(t=>t.name===e.name);-1!==t&&(this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]-=1,0===this.sourceCounts[`${this.configFileStructure.uuid}/charts/${this.lang}/${e.name}.json`]&&this.configFileStructure.charts[this.lang].remove(e.name+".json"),this.chartConfigs.splice(t,1)),this.onChartsEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.chartConfigs.length)this.panel.type=et.Chart,this.panel.src="";else if(1===this.chartConfigs.length){this.panel.type=et.Chart;const e=this.chartConfigs[0];Object.keys(e).forEach(t=>{this.panel[t]=e[t]})}else this.panel.type=et.Slideshow,this.panel.items=this.chartConfigs.map(e=>({...e,type:et.Chart}));this.edited=!1}onChartsEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],Rt.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Rt.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Rt.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Rt.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],Rt.prototype,"allowMany",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Rt.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Rt.prototype,"dynamicSelected",void 0),Rt=Object(r["a"])([Object(n["a"])({components:{ChartPreview:Tt,"confirmation-modal":Dt,draggable:Pt.a}})],Rt);var At=Rt;i("6394");const Ut=b()(At,[["render",bt]]);var zt=Ut;const Wt={class:"mt-4"};function Ht(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("json-editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Wt,[Object(a["createVNode"])(n,{modelValue:e.updatedConfig,"onUpdate:modelValue":t[0]||(t[0]=t=>e.updatedConfig=t),lang:"en",mode:"text","show-btns":!0,expandedOnStart:!0,onJsonChange:t[1]||(t[1]=t=>{e.updatedConfig=t,e.edited=!0,e.$emit("slide-edit")}),onJsonSave:e.onJsonSave},null,8,["modelValue","onJsonSave"])])}var qt=i("c45b");let Xt=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"config",void 0),Object(E["a"])(this,"slideIndex",void 0),Object(E["a"])(this,"schemaUrl","./StorylinesSlideSchema.json"),Object(E["a"])(this,"updatedConfig",""),Object(E["a"])(this,"edited",!1),Object(E["a"])(this,"jsonValidator",i("a41b").Validator),Object(E["a"])(this,"validator",new this.jsonValidator),Object(E["a"])(this,"storylinesSchema","")}mounted(){fetch(this.schemaUrl).then(e=>{e.json().then(e=>{this.storylinesSchema=e},e=>{console.error(e)})}),this.updatedConfig=this.config}onJsonSave(){const e=this.validator.validate(this.updatedConfig,this.storylinesSchema);e.valid?this.$emit("config-edited",this.updatedConfig,!0):(alert("Attempted to save a custom config that violates the Storylines schema."),console.error(e.errors))}saveChanges(){this.$emit("config-edited",this.updatedConfig),this.edited=!1}};Object(r["a"])([Object(n["b"])()],Xt.prototype,"config",void 0),Object(r["a"])([Object(n["b"])()],Xt.prototype,"slideIndex",void 0),Xt=Object(r["a"])([Object(n["a"])({components:{"json-editor":qt["a"]}})],Xt);var Jt=Xt;i("8b64");const Gt=b()(Jt,[["render",Ht],["__scopeId","data-v-cbea9ddc"]]);var Zt=Gt;const Yt=e=>(Object(a["pushScopeId"])("data-v-6bfac069"),e=e(),Object(a["popScopeId"])(),e),Qt={class:"block"},Kt={class:"editor-label flex drag-label cursor-pointer"},ei=Yt(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M14 9l-2.519 4-2.481-1.96-5 6.96h16l-6-9zm8-5v16h-20v-16h20zm2-2h-24v20h24v-20zm-20 6c0-1.104.896-2 2-2s2 .896 2 2c0 1.105-.896 2-2 2s-2-.895-2-2z"})])],-1)),ti={class:"align-middle inline-block"},ii={class:"text-blue-400 font-bold"},ai=["multiple"],li={key:1,class:"flex justify-center"},oi={class:"flex mt-4 items-center w-full text-left"},ri={class:"editor-label text-label"},ni=["onUpdate:modelValue"],si={class:"flex mt-4 items-center w-full text-left"},ci={class:"editor-label text-label"},di=["onUpdate:modelValue"],ui={class:"flex items-center w-full text-left"},bi={class:"editor-label text-label"};function mi(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("ImagePreview"),s=Object(a["resolveComponent"])("draggable");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qt,[e.allowMany||!e.allowMany&&0===e.imagePreviews.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(["upload-image flex items-center justify-center m-5 p-12 bg-blue-100 border-4 border-dashed border-blue-300",{dragging:e.isDragging}]),onDragover:t[1]||(t[1]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[2]||(t[2]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.dropImages(t),["prevent"]))},[Object(a["createElementVNode"])("label",Kt,[ei,Object(a["createElementVNode"])("span",ti,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.image.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",ii,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{type:"file",class:"cursor-pointer",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t)),multiple:!!e.allowMany},null,40,ai)])])],34)):Object(a["createCommentVNode"])("",!0),e.allowMany||!e.allowMany&&0===e.imagePreviews.length?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("span",li,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.image.reorder")),1)],512)),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])(s,{modelValue:e.imagePreviews,"onUpdate:modelValue":t[6]||(t[6]=t=>e.imagePreviews=t),class:"flex flex-wrap list-none border my-4",onUpdate:e.onImagesEdited,"item-key":"id"},{item:Object(a["withCtx"])(({element:i,index:l})=>[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:`${i.id}-${l}`,imageFile:i,onDelete:e.deleteImage},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",oi,[Object(a["createElementVNode"])("label",ri,Object(a["toDisplayString"])(e.$t("editor.image.altTag"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.altText=e,onChange:t[4]||(t[4]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,ni),[[a["vModelText"],i.altText]])]),Object(a["createElementVNode"])("div",si,[Object(a["createElementVNode"])("label",ci,Object(a["toDisplayString"])(e.$t("editor.image.label.caption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-4/5",type:"text","onUpdate:modelValue":e=>i.caption=e,onChange:t[5]||(t[5]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,40,di),[[a["vModelText"],i.caption]])])]),_:2},1032,["imageFile","onDelete"]))]),_:1},8,["modelValue","onUpdate"]),[[a["vShow"],!e.imagePreviewsLoading&&e.imagePreviews.length]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",ui,[Object(a["createElementVNode"])("label",bi,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-3/5",type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.slideshowCaption=t),onChange:t[8]||(t[8]=(...t)=>e.onImagesEdited&&e.onImagesEdited(...t))},null,544),[[a["vModelText"],e.slideshowCaption]])],512),[[a["vShow"],e.imagePreviews.length>1]])])}const pi=e=>(Object(a["pushScopeId"])("data-v-62a221fc"),e=e(),Object(a["popScopeId"])(),e),hi={class:"image-item items-center my-8 mx-4 overflow-hidden"},gi={class:"relative items-center justify-center text-center w-full grabbable"},fi=["content"],vi=pi(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),Oi=[vi],ji={class:"flex-grow image-container"},yi=["title","src","alt"];function Vi(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",hi,[Object(a["createElementVNode"])("div",gi,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.imageFile)),content:e.$t("editor.image.delete")},Oi,8,fi)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",ji,[Object(a["createElementVNode"])("img",{class:"image-file object-cover",title:e.imageFile.id,src:e.imageFile.src,alt:e.imageFile.altText},null,8,yi)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}class Si extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"imageFile",void 0)}}Object(r["a"])([Object(n["b"])()],Si.prototype,"imageFile",void 0);i("81ef");const Ci=b()(Si,[["render",Vi],["__scopeId","data-v-62a221fc"]]);var xi=Ci;let Ei=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"allowMany",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"dragging",!1),Object(E["a"])(this,"edited",!1),Object(E["a"])(this,"imagePreviewsLoading",!1),Object(E["a"])(this,"imagePreviewPromises",[]),Object(E["a"])(this,"imagePreviews",[]),Object(E["a"])(this,"slideshowCaption","")}get isDragging(){return this.dragging}mounted(){const e=this.panel.type===et.Slideshow?this.panel.items:this.panel.src?[this.panel]:[];if(this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles+="text-align: left;";else if(!this.centerSlide&&this.dynamicSelected)for(const t in e)e[t].customStyles=(e[t].customStyles||"").replace("text-align: left;","");void 0!==e&&e.length&&(this.imagePreviewsLoading=!0,e.map(e=>{const t=""+e.src.substring(e.src.indexOf("/")+1),i=e.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&this.imagePreviewPromises.push(a.async("blob").then(t=>({...e,id:i||e.src,src:URL.createObjectURL(t)})))}),Promise.all(this.imagePreviewPromises).then(e=>{this.imagePreviews=e,this.imagePreviewsLoading=!1}),this.slideshowCaption=this.panel.caption)}onFileChange(e){const t=Array.from(e.target.files);this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.onImagesEdited()}dropImages(e){if(null!==e.dataTransfer){let t=[...e.dataTransfer.files];this.allowMany||(t=[t[0]]),this.imagePreviews.push(...t.map(e=>{const t=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[t]?this.sourceCounts[t]+=1:this.sourceCounts[t]=1;let i=URL.createObjectURL(e);return{id:e.name,altText:"",caption:"",src:i}})),this.dragging=!1}this.onImagesEdited()}deleteImage(e){const t=this.imagePreviews.findIndex(t=>t.id===e.id);if(-1!==t){const e=`${this.configFileStructure.uuid}/assets/${this.lang}/${this.imagePreviews[t].id}`;this.sourceCounts[e]-=1,0===this.sourceCounts[e]&&(this.configFileStructure.assets[this.lang].remove(this.imagePreviews[t].id),URL.revokeObjectURL(this.imagePreviews[t].src)),this.imagePreviews.splice(t,1)}this.onImagesEdited()}saveChanges(){if(this.edited)if(Object.keys(this.panel).forEach(e=>{delete this.panel[e]}),0===this.imagePreviews.length)this.panel.type=et.Image,this.panel.src="";else if(1===this.imagePreviews.length){this.panel.type=et.Image;const e=this.imagePreviews[0];Object.keys(e).forEach(t=>{"id"!==t&&(this.panel[t]=e[t])}),this.panel.src=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`}else{var e;this.panel.type=et.Slideshow,this.panel.caption=null!==(e=this.slideshowCaption)&&void 0!==e?e:void 0,this.panel.items=this.imagePreviews.map(e=>({...e,src:`${this.configFileStructure.uuid}/assets/${this.lang}/${e.id}`,type:et.Image}))}this.edited=!1}onImagesEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],Ei.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Ei.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Ei.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Ei.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!0})],Ei.prototype,"allowMany",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Ei.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Ei.prototype,"dynamicSelected",void 0),Ei=Object(r["a"])([Object(n["a"])({components:{ImagePreview:xi,draggable:Pt.a}})],Ei);var wi=Ei;i("1fb1");const ki=b()(wi,[["render",mi],["__scopeId","data-v-6bfac069"]]);var Ni=ki;const Ti={class:"flex flex-col mt-4"},_i={class:"editor-label text-left"},$i={class:"editor-label text-left mt-2"};function Li(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("v-md-editor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ti,[Object(a["createElementVNode"])("label",_i,Object(a["toDisplayString"])(e.$t("editor.slides.panel.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("label",$i,Object(a["toDisplayString"])(e.$t("editor.slides.panel.body"))+":",1),Object(a["createVNode"])(n,{modelValue:e.panel.content,"onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.content=t),height:"400px","left-toolbar":"undo redo clear | h bold italic strikethrough quote subsuper | ul ol table hr | addLink image code | save",toolbar:e.toolbar},null,8,["modelValue","toolbar"])])}class Mi extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"toolbar",{subsuper:{title:"Superscript/Subscript",text:"T",menus:[{name:"Superscript",text:"Superscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sup>${t}</sup>`,selected:e}})}},{name:"Subscript",text:"Subscript",action(e){e.insert(e=>{const t=e||"";return{text:`<sub>${t}</sub>`,selected:e}})}}]},addLink:{title:"Insert Link",icon:"v-md-icon-link",menus:[{name:"Add External Link (New Tab)",text:"Add External Link (New Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`[${t}](http://)`,selected:e}})}},{name:"Add External Link (Same Tab)",text:"Add External Link (Same Tab)",action(e){e.insert(e=>{const t=e||"";return{text:`<a href='http://' target='_self'>${t}</a>`,selected:e}})}},{name:"Add Dynamic Link",text:"Add Dynamic Link",action(e){e.insert(e=>{const t=e||"";return{text:`<a panel='panel-id-here'>${t}</a>`,selected:e}})}}]}})}mounted(){this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;",""))}}Object(r["a"])([Object(n["b"])()],Mi.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Mi.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],Mi.prototype,"dynamicSelected",void 0);i("9cb7");const Bi=b()(Mi,[["render",Li],["__scopeId","data-v-2b0acfc1"]]);var Ii=Bi;const Di=e=>(Object(a["pushScopeId"])("data-v-370d3551"),e=e(),Object(a["popScopeId"])(),e),Fi={class:"flex flex-col"},Pi={class:"editor-label text-left"},Ri={class:"editor-label mt-6"},Ai=Di(()=>Object(a["createElementVNode"])("span",{class:"mx-4"},null,-1)),Ui=Di(()=>Object(a["createElementVNode"])("br",null,null,-1)),zi={key:1,class:"mb-4"},Wi={class:"ramp-editor mt-5",ref:"editor",style:{width:"70vw",height:"80vh"}},Hi={slot:"header",class:"text-lg font-bold"},qi={class:"w-full flex justify-end"},Xi=["disabled"];function Ji(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("time-slider-editor"),s=Object(a["resolveComponent"])("vue-final-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Fi,[Object(a["createElementVNode"])("label",Pi,Object(a["toDisplayString"])(e.$t("editor.map.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.panel.title=t)},null,512),[[a["vModelText"],e.panel.title]]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",Ri,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.enable")),1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"checkbox",onChange:t[1]||(t[1]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.usingTimeSlider=t)},null,544),[[a["vModelCheckbox"],e.usingTimeSlider]]),Ai,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[3]||(t[3]=t=>e.$vfm.open("time-slider-edit-modal")),class:"editor-button bg-black text-white hover:bg-gray-800 mt-3"},Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1)):Object(a["createCommentVNode"])("",!0),Ui,e.usingTimeSlider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",zi)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Wi,null,512)]),Object(a["createVNode"])(s,{modalId:"time-slider-edit-modal","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",Hi,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.edit")),1),Object(a["createVNode"])(n,{config:e.timeSliderConf,error:e.timeSliderError,onTimeSliderChanged:e.onTimeSliderInput},null,8,["config","error","onTimeSliderChanged"]),Object(a["createElementVNode"])("div",qi,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["editor-button",e.timeSliderError?"":"bg-black text-white hover:bg-gray-800"]),disabled:e.timeSliderError,onClick:t[4]||(t[4]=(...t)=>e.saveTimeSlider&&e.saveTimeSlider(...t))}," Done ",10,Xi)])]),_:1})])}var Gi=i("a0ea");const Zi=e=>(Object(a["pushScopeId"])("data-v-587d3314"),e=e(),Object(a["popScopeId"])(),e),Yi={class:"px-5"},Qi={class:"flex items-center"},Ki={class:"editor-label"},ea=["value"],ta={class:"mx-3"},ia=["value"],aa=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),la={class:"flex items-center"},oa={class:"editor-label"},ra=["value"],na={class:"mx-3"},sa=["value"],ca=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),da={key:0,class:"border-black border-2 p-3 w-2/3"},ua={class:"editor-label w-full"},ba=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ma={class:"list-disc my-2 ml-8"},pa={key:1},ha={class:"editor-label"},ga=["value"],fa=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),va={class:"editor-label"},Oa=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),ja=["value"],ya=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1)),Va=Zi(()=>Object(a["createElementVNode"])("br",null,null,-1));function Sa(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Yi,[Object(a["createElementVNode"])("div",Qi,[Object(a["createElementVNode"])("label",Ki,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.range")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[0],onInput:t[0]||(t[0]=t=>e.$emit("time-slider-changed","range",0,t.target.value))},null,40,ea),Object(a["createElementVNode"])("span",ta,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.range[1],onInput:t[1]||(t[1]=t=>e.$emit("time-slider-changed","range",1,t.target.value))},null,40,ia)]),aa,Object(a["createElementVNode"])("div",la,[Object(a["createElementVNode"])("label",oa,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.start")),1),Object(a["createElementVNode"])("input",{class:"editor-input ml-3",type:"number",value:e.config.start[0],onInput:t[2]||(t[2]=t=>e.$emit("time-slider-changed","start",0,t.target.value))},null,40,ra),Object(a["createElementVNode"])("span",na,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.to")),1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"number",value:e.config.start[1],onInput:t[3]||(t[3]=t=>e.$emit("time-slider-changed","start",1,t.target.value))},null,40,sa)]),ca,e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",da,[Object(a["createElementVNode"])("label",ua,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning")),1),ba,Object(a["createElementVNode"])("ul",ma,[Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet1")),1),Object(a["createElementVNode"])("li",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.bullet2")),1)]),Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.warning.end")),1)])):Object(a["createCommentVNode"])("",!0),e.error?(Object(a["openBlock"])(),Object(a["createElementBlock"])("br",pa)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",ha,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.attribute")),1),Object(a["createElementVNode"])("input",{class:"editor-input",value:e.config.attribute,onInput:t[4]||(t[4]=t=>e.$emit("time-slider-changed","attribute",void 0,t.target.value))},null,40,ga)]),fa,Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",va,Object(a["toDisplayString"])(e.$t("editor.map.timeslider.layers")),1),Oa,Object(a["createElementVNode"])("input",{class:"editor-input w-full",value:e.config.layers||"",onInput:t[5]||(t[5]=t=>e.$emit("time-slider-changed","layers",void 0,t.target.value))},null,40,ja)]),ya,Va])}class Ca extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"config",void 0),Object(E["a"])(this,"error",void 0)}}Object(r["a"])([Object(n["b"])()],Ca.prototype,"config",void 0),Object(r["a"])([Object(n["b"])()],Ca.prototype,"error",void 0);i("717e");const xa=b()(Ca,[["render",Sa],["__scopeId","data-v-587d3314"]]);var Ea=xa,wa=i("ce19");i("fb28");let ka=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"rampEditorApi",""),Object(E["a"])(this,"newFileName",""),Object(E["a"])(this,"usingTimeSlider",!1),Object(E["a"])(this,"timeSliderError",!1),Object(E["a"])(this,"timeSliderConf",{range:[],start:[],attribute:""}),Object(E["a"])(this,"status","default"),Object(E["a"])(this,"strippedFileName","")}mounted(){var e,t,i,a,l,o;this.usingTimeSlider=!!this.panel.timeSlider,this.status=""!==this.panel.config?"default":"creating",this.strippedFileName=""!==this.panel.config?this.panel.config.split("/")[2].split(".")[0]:"",this.timeSliderConf=JSON.parse(JSON.stringify({range:null!==(e=null===(t=this.panel.timeSlider)||void 0===t?void 0:t.range)&&void 0!==e?e:[1e3,(new Date).getFullYear()],start:null!==(i=null===(a=this.panel.timeSlider)||void 0===a?void 0:a.start)&&void 0!==i?i:[1e3,(new Date).getFullYear()],attribute:null!==(l=null===(o=this.panel.timeSlider)||void 0===o?void 0:o.attribute)&&void 0!==l?l:""})),window.addEventListener("ramp4-config-edited",this.onConfigEdit),this.validateTimeSlider(),"creating"===this.status&&this.createNewConfig(),this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;","")),this.openEditor()}beforeDestroy(){window.removeEventListener("ramp4-config-edited",this.onConfigEdit)}createNewConfig(){this.panel.config=`${this.configFileStructure.uuid}/ramp-config/${this.configFileStructure.uuid}-map-${this.getNumberOfMaps()+1}.json`,this.strippedFileName=this.panel.config.split("/")[2].split(".")[0],this.sourceCounts[this.panel.config]?this.sourceCounts[this.panel.config]+=1:this.sourceCounts[this.panel.config]=1,this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(Gi,null,4)),this.status="default"}openEditor(){if(""!==this.panel.config&&(this.status="editing",this.panel.config)){const e=""+this.panel.config.substring(this.panel.config.indexOf("/")+1),t=this.configFileStructure.zip.file(e);t?t.async("string").then(e=>{const t=JSON.parse(e);this.rampEditorApi=Object(wa["a"])(this.$refs.editor,t)}):fetch(this.panel.config).then(e=>{e.json().then(e=>{let t=JSON.stringify(e);const i=JSON.parse(t);this.rampEditorApi=Object(wa["a"])(this.$refs.editor,i)})})}}saveTimeSlider(){this.timeSliderError&&this.usingTimeSlider||(this.panel.timeSlider=this.usingTimeSlider?this.timeSliderConf:void 0),this.$emit("slide-edit"),this.$vfm.close("time-slider-edit-modal")}saveChanges(){this.configFileStructure.rampConfig.file(this.strippedFileName+".json",JSON.stringify(this.rampEditorApi.getConfig(),null,4))}onConfigEdit(){this.$emit("slide-edit")}onTimeSliderInput(e,t,i){"layers"===e?i&&""!==i?this.timeSliderConf["layers"]=i.split(",").map(e=>e.trim()):delete this.timeSliderConf["layers"]:"attribute"===e?this.timeSliderConf[e]=i:this.timeSliderConf[e][t]=Number(i),this.validateTimeSlider()}validateTimeSlider(){this.timeSliderError=this.timeSliderConf.range.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.start.some(e=>e<0||!Number.isInteger(e))||this.timeSliderConf.range[1]<this.timeSliderConf.range[0]||this.timeSliderConf.start[1]<this.timeSliderConf.start[0]}getNumberOfMaps(){let e=0;return this.configFileStructure.rampConfig.forEach(t=>{e+=1}),e}};Object(r["a"])([Object(n["b"])()],ka.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],ka.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],ka.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],ka.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!1})],ka.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],ka.prototype,"dynamicSelected",void 0),ka=Object(r["a"])([Object(n["a"])({components:{"time-slider-editor":Ea,"vue-final-modal":he["a"]}})],ka);var Na=ka;i("b318");const Ta=b()(Na,[["render",Ji],["__scopeId","data-v-370d3551"]]);var _a=Ta;const $a=e=>(Object(a["pushScopeId"])("data-v-55712d61"),e=e(),Object(a["popScopeId"])(),e),La={class:"block"},Ma={class:"flex mt-4 items-center w-full text-left"},Ba={class:"editor-label text-label"},Ia={class:"flex editor-label drag-label cursor-pointer"},Da=$a(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block pr-4"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 -2 30 30"},[Object(a["createElementVNode"])("path",{d:"M599,692 C597.896,692 597,692.896 597,694 L597,698 L575,698 L575,694 C575,692.896 574.104,692 573,692 C571.896,692 571,692.896 571,694 L571,701 C571,701.479 571.521,702 572,702 L600,702 C600.604,702 601,701.542 601,701 L601,694 C601,692.896 600.104,692 599,692 L599,692 Z M582,684 L584,684 L584,693 C584,694.104 584.896,695 586,695 C587.104,695 588,694.104 588,693 L588,684 L590,684 C590.704,684 591.326,684.095 591.719,683.7 C592.11,683.307 592.11,682.668 591.719,682.274 L586.776,676.283 C586.566,676.073 586.289,675.983 586.016,675.998 C585.742,675.983 585.465,676.073 585.256,676.283 L580.313,682.274 C579.921,682.668 579.921,683.307 580.313,683.7 C580.705,684.095 581.608,684 582,684 L582,684 Z",transform:"translate(-571.000000, -676.000000)"})])],-1)),Fa={class:"align-middle inline-block"},Pa={class:"text-blue-400 font-bold"},Ra={class:"flex mt-4 items-center w-full text-left"},Aa={class:"editor-label text-label"},Ua={key:1,ref:"videoUrl",class:"editor-input w-3/5",type:"search"};function za(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("VideoPreview");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",La,[Object(a["createElementVNode"])("div",Ma,[Object(a["createElementVNode"])("label",Ba,Object(a["toDisplayString"])(e.$t("editor.video.title"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-3/5",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.videoPreview.title=t),onChange:t[1]||(t[1]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t))},null,544),[[a["vModelText"],e.videoPreview.title]])]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(["upload-video flex justify-center text-center m-5 p-12 bg-gray-100 border-4 border-dashed border-gray-300",{dragging:e.isDragging}]),onDragover:t[3]||(t[3]=Object(a["withModifiers"])(()=>e.dragging=!0,["prevent"])),onDragleave:t[4]||(t[4]=Object(a["withModifiers"])(()=>e.dragging=!1,["prevent"])),onDrop:t[5]||(t[5]=Object(a["withModifiers"])(t=>e.dropVideo(t),["prevent"]))},[Object(a["createElementVNode"])("label",Ia,[Da,Object(a["createElementVNode"])("span",Fa,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.$t("editor.video.label.drag")),1),Object(a["createElementVNode"])("div",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.label.or"))+" ",1),Object(a["createElementVNode"])("span",Pa,Object(a["toDisplayString"])(e.$t("editor.label.browse")),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$t("editor.label.upload")),1)])]),Object(a["createElementVNode"])("input",{ref:"videoFileInput",type:"file",class:"cursor-pointer",onChange:t[2]||(t[2]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544)])])],34),Object(a["createElementVNode"])("div",Ra,[Object(a["createElementVNode"])("label",Aa,Object(a["toDisplayString"])(e.$t("editor.label.or")+" "+e.$t("editor.video.pasteUrl"))+":",1),"local"!==e.videoPreview.videoType?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",{key:0,ref:"videoUrl",class:"editor-input w-3/5",type:"search","onUpdate:modelValue":t[6]||(t[6]=t=>e.videoPreview.src=t)},null,512)),[[a["vModelText"],e.videoPreview.src]]):(Object(a["openBlock"])(),Object(a["createElementBlock"])("input",Ua,null,512)),Object(a["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...t)=>e.uploadVideoUrl&&e.uploadVideoUrl(...t)),class:"editor-button bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.video.label.upload")),1)]),e.videoPreviewLoading||0===Object.keys(e.videoPreview).length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:"flex flex-wrap justify-center list-none border my-4",onUpdate:t[8]||(t[8]=(...t)=>e.onVideoEdited&&e.onVideoEdited(...t)),"item-key":"id"},[(Object(a["openBlock"])(),Object(a["createBlock"])(n,{key:""+e.videoPreview.id,file:e.videoPreview,fileType:e.fileType,lang:e.lang,onDelete:e.deleteVideo},null,8,["file","fileType","lang","onDelete"]))],32))])}const Wa=e=>(Object(a["pushScopeId"])("data-v-0fb80f1a"),e=e(),Object(a["popScopeId"])(),e),Ha={class:"my-8 mx-4 overflow-hidden w-full"},qa={class:"relative text-center w-full grabbable"},Xa=["content"],Ja=Wa(()=>Object(a["createElementVNode"])("svg",{height:"24px",width:"24px",viewBox:"0 0 352 512",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)),Ga=[Ja],Za={class:"video-container"},Ya=["src","height","width"],Qa=["title","height","width"],Ka=["type","src"],el=["src","srclang","label"];function tl(e,t,i,l,o,r){const n=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ha,[Object(a["createElementVNode"])("div",qa,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"bg-white absolute h-6 w-6 leading-5 rounded-full top-0 right-0 p-0 cursor-pointer",onClick:t[0]||(t[0]=()=>e.$emit("delete",e.file)),content:e.$t("editor.video.delete")},Ga,8,Xa)),[[n,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Object(a["createElementVNode"])("div",Za,["YouTube"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("iframe",{key:0,class:"w-3/5",src:e.file.src,height:e.file.height?e.file.height:400,width:e.file.width,allowfullscreen:""},null,8,Ya)):Object(a["createCommentVNode"])("",!0),"local"===e.file.videoType||"external"===e.file.videoType?(Object(a["openBlock"])(),Object(a["createElementBlock"])("video",{key:1,class:"w-3/5",title:e.file.title,height:e.file.height?e.file.height:500,width:e.file.width,controls:""},[Object(a["createElementVNode"])("source",{type:e.fileType,src:e.file.src},null,8,Ka),e.file.caption?(Object(a["openBlock"])(),Object(a["createElementBlock"])("track",{key:0,kind:"captions",src:e.file.caption,srclang:e.lang,label:e.langs[e.lang]},null,8,el)):Object(a["createCommentVNode"])("",!0)],8,Qa)):Object(a["createCommentVNode"])("",!0)])]),Object(a["renderSlot"])(e.$slots,"default",{},void 0,!0)])}var il=i("d4cd"),al=i.n(il);class ll extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"file",void 0),Object(E["a"])(this,"fileType",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"md",new al.a({html:!0})),Object(E["a"])(this,"langs",{en:"English",fr:"French"}),Object(E["a"])(this,"expandTranscript",!1),Object(E["a"])(this,"rawTranscript",""),Object(E["a"])(this,"transcriptContent","")}}Object(r["a"])([Object(n["b"])()],ll.prototype,"file",void 0),Object(r["a"])([Object(n["b"])()],ll.prototype,"fileType",void 0),Object(r["a"])([Object(n["b"])()],ll.prototype,"lang",void 0);i("f622");const ol=b()(ll,[["render",tl],["__scopeId","data-v-0fb80f1a"]]);var rl=ol;let nl=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"dragging",!1),Object(E["a"])(this,"edited",!1),Object(E["a"])(this,"fileType",""),Object(E["a"])(this,"videoPreviewLoading",!1),Object(E["a"])(this,"videoPreviewPromise",void 0),Object(E["a"])(this,"videoPreview",{}),Object(E["a"])(this,"slideshowCaption","")}get isDragging(){return this.dragging}mounted(){if(this.panel.src)if("local"===this.panel.videoType){var e;this.videoPreviewLoading=!0;const t=""+this.panel.src.substring(this.panel.src.indexOf("/")+1),i=this.panel.src.replace(/^.*[\\/]/,""),a=this.configFileStructure.zip.file(t);a&&(this.videoPreviewPromise=a.async("blob").then(e=>({...this.panel,id:i||this.panel.src,src:URL.createObjectURL(e)}))),null===(e=this.videoPreviewPromise)||void 0===e||e.then(e=>{this.videoPreview=e,this.videoPreviewLoading=!1}),this.slideshowCaption=this.panel.caption}else this.videoPreview={id:this.panel.src,title:this.panel.title,videoType:"YouTube"===this.panel.videoType?"YouTube":"external",src:this.panel.src};this.centerSlide&&this.dynamicSelected?this.panel.customStyles+="text-align: left !important;":!this.centerSlide&&this.dynamicSelected&&(this.panel.customStyles=(this.panel.customStyles||"").replace("text-align: left !important;",""))}addUploadedFile(e,t){const i=`${this.configFileStructure.uuid}/assets/${this.lang}/${e.name}`;this.configFileStructure.assets[this.lang].file(e.name,e),this.sourceCounts[i]?this.sourceCounts[i]+=1:this.sourceCounts[i]=1;const a=URL.createObjectURL(e);"src"===t?(this.videoPreview={id:e.name,title:this.videoPreview.title||e.name,videoType:"local",src:a},this.findFileType(e.name)):this.videoPreview[t]=a,this.edited=!0,this.$emit("slide-edit")}onFileChange(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"src"),this.onVideoEdited()}findFileType(e){if("external"===this.videoPreview.videoType||"local"===this.videoPreview.videoType){const t=e.substring(e.lastIndexOf("/")+1),i=t.split(".").pop();this.fileType="video/"+i}}extractYoutubeId(e){const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,i=e.match(t);return i&&11===i[2].length?i[2]:null}uploadVideoUrl(){let e=this.$refs.videoUrl.value;const t=e.toLowerCase().includes("youtube");t&&(e=e.replace("/watch?v=","/embed/")),this.videoPreview={id:e,title:this.videoPreview.title||e,videoType:e.includes("youtube")?"YouTube":"external",src:e},this.edited=!0,this.$emit("slide-edit")}updateCaptions(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"caption")}updateTranscript(e){const t=Array.from(e.target.files)[0];this.addUploadedFile(t,"transcript")}dropVideo(e){if(null!==e.dataTransfer){const t=[...e.dataTransfer.files][0];this.addUploadedFile(t,"src"),this.dragging=!1}this.onVideoEdited()}deleteVideo(){this.$refs.videoFileInput.value="",this.videoPreview={},this.onVideoEdited()}saveChanges(){this.edited&&this.videoPreview&&(this.panel.title=this.videoPreview.title,this.panel.videoType=this.videoPreview.videoType,this.panel.src="local"===this.videoPreview.videoType?`${this.configFileStructure.uuid}/assets/${this.lang}/${this.videoPreview.id}`:this.videoPreview.src,this.panel.caption=this.videoPreview.caption?this.videoPreview.caption:"",this.panel.transcript=this.videoPreview.transcript?this.videoPreview.transcript:""),this.edited=!1}onVideoEdited(){this.edited=!0,this.$emit("slide-edit")}};Object(r["a"])([Object(n["b"])()],nl.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],nl.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],nl.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],nl.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])({default:!1})],nl.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])({default:!1})],nl.prototype,"dynamicSelected",void 0),nl=Object(r["a"])([Object(n["a"])({components:{VideoPreview:rl,draggable:Pt.a}})],nl);var sl=nl;i("e2f6");const cl=b()(sl,[["render",za],["__scopeId","data-v-55712d61"]]);var dl=cl;const ul=e=>(Object(a["pushScopeId"])("data-v-069da0d5"),e=e(),Object(a["popScopeId"])(),e),bl={class:"block"},ml={class:"flex items-center"},pl={class:"font-bold px-4"},hl={class:"flex items-center"},gl=ul(()=>Object(a["createElementVNode"])("svg",{height:"18px",width:"18px",viewBox:"0 0 23 21",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)),fl={class:"px-2"},vl=ul(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),Ol={class:"flex items-center w-full text-left"},jl={class:"editor-label text-label"},yl=ul(()=>Object(a["createElementVNode"])("br",null,null,-1)),Vl={class:"w-2/3 mt-5"},Sl={class:"table-header"},Cl=ul(()=>Object(a["createElementVNode"])("th",null,null,-1)),xl=["onClick"],El=["onClick"],wl=ul(()=>Object(a["createElementVNode"])("br",null,null,-1)),kl=ul(()=>Object(a["createElementVNode"])("br",null,null,-1)),Nl={key:0},Tl={class:"text-xl font-bold"},_l=ul(()=>Object(a["createElementVNode"])("hr",{class:"border-solid border-t-2 border-gray-300 my-2"},null,-1)),$l={key:0},Ll={class:"mb-5 text-left"},Ml=["value"],Bl=["value"],Il={class:"mt-3 w-full flex justify-end"},Dl={key:1},Fl={class:"mt-3 w-full flex justify-end"};function Pl(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",bl,[Object(a["createElementVNode"])("div",ml,[Object(a["createElementVNode"])("span",pl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.info",{num:e.panel.items.length})),1),Object(a["createElementVNode"])("button",{class:"editor-button bg-gray-100 cursor-pointer hover:bg-gray-200",onClick:t[0]||(t[0]=t=>e.editingStatus="create")},[Object(a["createElementVNode"])("div",hl,[gl,Object(a["createElementVNode"])("span",fl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.create")),1)])])]),vl,Object(a["createElementVNode"])("div",Ol,[Object(a["createElementVNode"])("label",jl,Object(a["toDisplayString"])(e.$t("editor.image.slideshowCaption"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input w-1/3",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.panel.caption=t)},null,512),[[a["vModelText"],e.panel.caption]]),yl]),Object(a["createElementVNode"])("table",Vl,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",Sl,[Cl,Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)])]),Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.items,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(i+1)+".",1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.type),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:t=>e.editItem(i),class:"underline"},"Edit",8,xl),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:t=>e.deleteItem(i),class:"underline"},"Remove",8,El)])]))),128))])]),wl,kl,"none"!==e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Nl,[Object(a["createElementVNode"])("h2",Tl,Object(a["toDisplayString"])(e.$t("editor.slideshow.label."+e.editingStatus)),1),_l,Object(a["createElementVNode"])("div",null,["create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$l,[Object(a["createElementVNode"])("label",Ll,Object(a["toDisplayString"])(e.$t("editor.slideshow.label.type"))+":",1),Object(a["createElementVNode"])("select",{onInput:t[2]||(t[2]=(...t)=>e.onTypeInput&&e.onTypeInput(...t)),value:e.newSlideType},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e,value:e},Object(a["toDisplayString"])(e),9,Bl))),128))],40,Ml),"create"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.newSlideType]),{key:0,ref:"slideEditor",panel:JSON.parse(JSON.stringify(e.startingConfig[e.newSlideType])),configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Il,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[3]||(t[3]=t=>e.saveItem(!0))},Object(a["toDisplayString"])(e.$t("editor.slideshow.label.add")),1)])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Dl,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.panel.items[e.editingIdx].type]),{ref:"slideEditor",panel:e.panel.items[e.editingIdx],configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,key:e.editingIdx+e.panel.items[e.editingIdx].type,allowMany:!1},null,8,["panel","configFileStructure","lang","sourceCounts"])),Object(a["createElementVNode"])("div",Fl,[Object(a["createElementVNode"])("button",{class:"editor-button bg-black text-white hover:bg-gray-800",onClick:t[4]||(t[4]=t=>e.saveItem())},Object(a["toDisplayString"])(e.$t("editor.saveChanges")),1)])]))])])):Object(a["createCommentVNode"])("",!0)])}let Rl=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"editors",{text:"text-editor",image:"image-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"}),Object(E["a"])(this,"startingConfig",{text:{type:et.Text,title:"",content:""},dynamic:{type:et.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:et.Slideshow,items:[]},chart:{type:et.Chart,src:""},image:{type:et.Image,src:""},map:{type:et.Map,config:"",title:"",scrollguard:!0},video:{type:et.Video,title:"",videoType:"",src:""}}),Object(E["a"])(this,"editingIdx",-1),Object(E["a"])(this,"newSlideName",""),Object(E["a"])(this,"newSlideType","text"),Object(E["a"])(this,"editingStatus","none")}onTypeInput(e){this.newSlideType=e.target.value}editItem(e){this.saveChanges(),this.editingIdx=e,this.editingStatus="edit"}deleteItem(e){const t=this.panel.items.find((t,i)=>i===e);switch(null===t||void 0===t?void 0:t.type){case"map":{const e=t;this.sourceCounts[e.config]-=1,0===this.sourceCounts[e.config]&&this.configFileStructure.zip.remove(""+e.config.substring(e.config.indexOf("/")+1));break}case"chart":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"image":{const e=t;this.sourceCounts[e.src]-=1,0===this.sourceCounts[e.src]&&this.configFileStructure.zip.remove(""+e.src.substring(e.src.indexOf("/")+1));break}case"text":break}this.panel.items=this.panel.items.filter((t,i)=>i!==e),this.editingIdx===e&&(this.editingIdx=-1,this.editingStatus="none")}saveItem(e=!1){let t;e?(t=this.$refs.slideEditor.panel,this.panel.items.push(t)):t=this.$refs.slideEditor.panel,t.type!==et.Text&&void 0!==this.$refs.slideEditor&&"function"===typeof this.$refs.slideEditor.saveChanges&&(this.$refs.slideEditor.saveChanges(),t.type===et.Map&&this.$emit("slide-edit")),this.editingStatus="none"}saveChanges(){}};Object(r["a"])([Object(n["b"])()],Rl.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],Rl.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Rl.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],Rl.prototype,"sourceCounts",void 0),Rl=Object(r["a"])([Object(n["a"])({components:{"chart-editor":zt,"image-editor":Ni,"text-editor":Ii,"map-editor":_a,"video-editor":dl}})],Rl);var Al=Rl;i("12a8");const Ul=b()(Al,[["render",Pl],["__scopeId","data-v-069da0d5"]]);var zl=Ul;const Wl={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}};function Hl(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Wl,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])}let ql=class extends n["c"]{};ql=Object(r["a"])([Object(n["a"])({components:{spinner:pe["a"]}})],ql);var Xl=ql;const Jl=b()(Xl,[["render",Hl]]);var Gl=Jl;const Zl={class:"block"},Yl={class:"flex"},Ql={key:0},Kl={key:1},eo={class:"w-2/3 mt-5"},to={class:"table-header"},io=["onClick"],ao=["onClick"],lo={class:"table-add-row"},oo={class:"flex flex-col items-center"},ro={key:0},no=["disabled"],so={key:0},co=Object(a["createElementVNode"])("br",null,null,-1),uo=Object(a["createElementVNode"])("hr",null,null,-1),bo=Object(a["createElementVNode"])("br",null,null,-1),mo={class:"font-bold text-xl"},po=Object(a["createElementVNode"])("br",null,null,-1);function ho(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Zl,[Object(a["createElementVNode"])("div",Yl,[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=()=>e.changePanel("text")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"===e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.textSection")),3),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=()=>e.changePanel("panels")),class:Object(a["normalizeClass"])(["editor-button border hover:bg-gray-100","text"!==e.editingStatus?"border-black":"border-gray-300"])},Object(a["toDisplayString"])(e.$t("dynamic.panel.collection")),3)]),"text"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ql,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])("text-editor"),{key:"text",panel:e.panel,configFileStructure:e.configFileStructure,lang:e.lang},null,8,["panel","configFileStructure","lang"]))])):Object(a["createCommentVNode"])("",!0),"panels"===e.editingStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Kl,[Object(a["createElementVNode"])("table",eo,[Object(a["createElementVNode"])("tr",to,[Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.id")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.type")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.$t("dynamic.panel.actions")),1)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.panel.children,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{class:"table-contents",key:i},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.determineEditorType(t.panel)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",{onClick:()=>e.switchSlide(i)},Object(a["toDisplayString"])(e.$t("editor.chart.label.edit")),9,io),Object(a["createTextVNode"])(" | "),Object(a["createElementVNode"])("span",{onClick:()=>e.removeSlide(t,i)},Object(a["toDisplayString"])(e.$t("editor.remove")),9,ao)])]))),128)),Object(a["createElementVNode"])("tr",lo,[Object(a["createElementVNode"])("th",oo,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"editor-input",type:"text",placeholder:"Enter Panel ID","onUpdate:modelValue":t[2]||(t[2]=t=>e.newSlideName=t)},null,512),[[a["vModelText"],e.newSlideName]]),e.idUsed?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",ro,Object(a["toDisplayString"])(e.$t("dynamic.panel.idTaken")),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("th",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.newSlideType=t)},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object.keys(e.editors),e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{key:e},Object(a["toDisplayString"])(e),1))),128))],512),[[a["vModelSelect"],e.newSlideType]])]),Object(a["createElementVNode"])("th",null,[Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[4]||(t[4]=(...t)=>e.createNewSlide&&e.createNewSlide(...t)),disabled:e.idUsed},"Add New",8,no)])])]),-1!==e.editingSlide?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",so,[co,uo,bo,Object(a["createElementVNode"])("span",mo,Object(a["toDisplayString"])(e.$t("dynamic.panel.editor")),1),po,(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.editors[e.determineEditorType(e.panel.children[e.editingSlide].panel)]),{ref:"slide",key:e.editingSlide+e.determineEditorType(e.panel.children[e.editingSlide].panel),panel:e.panel.children[e.editingSlide].panel,configFileStructure:e.configFileStructure,lang:e.lang,sourceCounts:e.sourceCounts,centerSlide:e.centerSlide,dynamicSelected:e.dynamicSelected,onSlideEdit:t[5]||(t[5]=t=>e.$emit("slide-edit"))},null,40,["panel","configFileStructure","lang","sourceCounts","centerSlide","dynamicSelected"]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])}var go;let fo=go=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"panel",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"centerSlide",void 0),Object(E["a"])(this,"dynamicSelected",void 0),Object(E["a"])(this,"editors",{text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor"}),Object(E["a"])(this,"startingConfig",{text:{type:et.Text,title:"",content:""},dynamic:{type:et.Dynamic,title:"",titleTag:"",content:"",children:[]},slideshow:{type:et.Slideshow,items:[],userCreated:!0},image:{type:et.Image,src:""},chart:{type:et.Chart,src:""},map:{type:et.Map,config:"",title:"",scrollguard:!1},video:{type:et.Video,title:"",videoType:"",src:""}}),Object(E["a"])(this,"editingStatus","text"),Object(E["a"])(this,"editingSlide",-1),Object(E["a"])(this,"newSlideName",""),Object(E["a"])(this,"newSlideType","text")}get idUsed(){return this.panel.children.some(e=>e.id===this.newSlideName)}changePanel(e){"text"!==this.editingStatus&&this.saveChanges(),this.editingStatus=e}switchSlide(e){this.saveChanges(),this.editingSlide=e}removeSlide(e,t){switch(null===e||void 0===e?void 0:e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSlide(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}}t&&(this.panel.children=this.panel.children.filter((e,i)=>i!==t),this.editingSlide===t&&(this.editingSlide=-1))}createNewSlide(){if(!this.newSlideName)return;const e={id:this.newSlideName,panel:JSON.parse(JSON.stringify(this.startingConfig[this.newSlideType]))};this.newSlideName="",this.panel.children.push(e)}determineEditorType(e){if(e.type!==et.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return et.Slideshow;const t=e.items.every(e=>e.type===et.Chart);if(t)return et.Chart;const i=e.items.every(e=>e.type===et.Image);return i?et.Image:et.Slideshow}saveChanges(){void 0!==this.$refs.slide&&"function"===typeof this.$refs.slide.saveChanges&&this.$refs.slide.saveChanges()}};Object(r["a"])([Object(n["b"])()],fo.prototype,"panel",void 0),Object(r["a"])([Object(n["b"])()],fo.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],fo.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],fo.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],fo.prototype,"centerSlide",void 0),Object(r["a"])([Object(n["b"])()],fo.prototype,"dynamicSelected",void 0),fo=go=Object(r["a"])([Object(n["a"])({components:{"chart-editor":zt,"image-editor":Ni,"text-editor":Ii,"slideshow-editor":zl,"dynamic-editor":go,"map-editor":_a,"video-editor":dl}})],fo);var vo=fo;i("0988");const Oo=b()(vo,[["render",ho]]);var jo=Oo;let yo=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"config",void 0),Object(E["a"])(this,"currentSlide",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"uid",void 0),Object(E["a"])(this,"slideIndex",void 0),Object(E["a"])(this,"isLast",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"panelIndex",0),Object(E["a"])(this,"advancedEditorView",!1),Object(E["a"])(this,"newType",""),Object(E["a"])(this,"rightOnly",!1),Object(E["a"])(this,"centerSlide",!1),Object(E["a"])(this,"centerPanel",!1),Object(E["a"])(this,"dynamicSelected",!1),Object(E["a"])(this,"editors",{text:"text-editor",image:"image-editor",slideshow:"slideshow-editor",chart:"chart-editor",map:"map-editor",video:"video-editor",loading:"loading-page",dynamic:"dynamic-editor"})}onSlideChange(){this.currentSlide&&(this.rightOnly=1===this.currentSlide.panel.length)}changePanelType(e,t){const i={text:{type:et.Text,title:"",content:""},dynamic:{type:et.Dynamic,title:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].title:"",titleTag:"",content:this.currentSlide.panel[0]&&"text"===e?this.currentSlide.panel[0].content:"",children:[]},slideshow:{type:et.Slideshow,items:[],userCreated:!0},image:{type:et.Image,src:""},chart:{type:et.Chart,src:""},map:{type:et.Map,config:"",title:"",scrollguard:!1},video:{type:et.Video,title:"",videoType:"",src:""}};this.currentSlide.panel.forEach(e=>this.removeSourceCounts(e)),"dynamic"===t?(this.panelIndex=0,this.currentSlide["panel"]=[i[t]],this.dynamicSelected=!0):this.currentSlide.panel[this.panelIndex]=i[t]}removeSourceCounts(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceCounts(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceCounts(e.panel)});break}case"text":break}}saveChanges(){void 0!==this.$refs.editor&&"function"===typeof this.$refs.editor.saveChanges&&this.$refs.editor.saveChanges()}selectSlide(e){this.$emit("slide-change",e)}cancelTypeChange(){this.$refs.typeSelector.value=this.determineEditorType(this.currentSlide.panel[this.panelIndex])}determineEditorType(e){if(e.type!==et.Slideshow)return e.type;if(0===e.items.length||e.userCreated)return et.Slideshow;const t=e.items.every(e=>e.type===et.Chart);if(t)return et.Chart;const i=e.items.every(e=>e.type===et.Image);return i?et.Image:et.Slideshow}toggleRightOnly(){this.saveChanges(),this.rightOnly?(this.panelIndex=0,this.currentSlide["panel"]=[this.currentSlide.panel[1]]):this.currentSlide["panel"]=[Object.assign({},{type:et.Text,title:"",content:""}),Object.assign({},this.currentSlide.panel[0])]}toggleCenterSlide(){"dynamic"===this.determineEditorType(this.currentSlide.panel[this.panelIndex])?this.centerSlide?this.currentSlide.panel[0].customStyles="text-align: right;":this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""):this.rightOnly?this.centerSlide?this.currentSlide.panel[0].customStyles="text-align: center;":(this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""),this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: left;",""),this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: center;","")):this.centerSlide?(this.currentSlide.panel[0].customStyles="text-align: right;",this.currentSlide.panel[1].customStyles="text-align: left;"):(this.currentSlide.panel[0].customStyles=(this.currentSlide.panel[0].customStyles||"").replace("text-align: right;",""),this.currentSlide.panel[1].customStyles=(this.currentSlide.panel[1].customStyles||"").replace("text-align: left;",""))}toggleCenterPanel(){if(this.centerPanel)for(const e in this.currentSlide.panel)this.currentSlide.panel[e].customStyles="text-align: center;";else for(const e in this.currentSlide.panel)this.currentSlide.panel[e].customStyles=(this.currentSlide.panel[e].customStyles||"").replace("text-align: center;","")}};Object(r["a"])([Object(n["b"])()],yo.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"uid",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"isLast",void 0),Object(r["a"])([Object(n["b"])()],yo.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["d"])("currentSlide",{deep:!0})],yo.prototype,"onSlideChange",null),yo=Object(r["a"])([Object(n["a"])({components:{"chart-editor":zt,"custom-editor":Zt,"image-editor":Ni,"text-editor":Ii,"map-editor":_a,"video-editor":dl,"slideshow-editor":zl,"loading-page":Gl,"dynamic-editor":jo,"confirmation-modal":Dt}})],yo);var Vo=yo;i("712c");const So=b()(Vo,[["render",Ke],["__scopeId","data-v-2fa54ed4"]]);var Co=So;const xo=e=>(Object(a["pushScopeId"])("data-v-04c71bb5"),e=e(),Object(a["popScopeId"])(),e),Eo={class:"flex toc-header p-2 mt-10"},wo={class:"flex items-center justify-center font-bold"},ko=xo(()=>Object(a["createElementVNode"])("span",{class:"flex-1"},null,-1)),No=xo(()=>Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1)),To=xo(()=>Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"})])],-1)),_o={class:"align-middle inline-block"},$o=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),Lo=[$o],Mo={slot:"header",class:"text-xl font-bold"},Bo={class:"flex flex-col"},Io={class:"text-lg font-bold my-6"},Do={class:"flex"},Fo=["value"],Po={class:"max-h-screen overflow-y-auto"},Ro=["onClick"],Ao={class:"self-center overflow-ellipsis whitespace-nowrap overflow-hidden flex-grow ml-2"},Uo={class:"font-bold overflow-hidden"},zo={class:"flex"},Wo={class:"flex flex-col"},Ho=["onClick"],qo=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[Object(a["createElementVNode"])("path",{d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})],-1)),Xo=[qo],Jo=["onClick"],Go=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[Object(a["createElementVNode"])("path",{d:"M5 22q-.825 0-1.413-.587Q3 20.825 3 20V6h2v14h11v2Zm4-4q-.825 0-1.412-.587Q7 16.825 7 16V4q0-.825.588-1.413Q8.175 2 9 2h9q.825 0 1.413.587Q20 3.175 20 4v12q0 .825-.587 1.413Q18.825 18 18 18Zm0-2h9V4H9v12Zm0 0V4v12Z"})],-1)),Zo=[Go],Yo={class:"flex flex-col mr-2 ml-1 my-1"},Qo=["onClick","disabled"],Ko=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),er=[Ko],tr=["onClick","disabled"],ir=xo(()=>Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",height:"20",width:"20"},[Object(a["createElementVNode"])("path",{d:"m2 16 8-12 8 12Z"})],-1)),ar=[ir];function lr(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("vue-final-modal"),s=Object(a["resolveComponent"])("confirmation-modal"),c=Object(a["resolveComponent"])("draggable"),d=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",Eo,[Object(a["createElementVNode"])("span",wo,Object(a["toDisplayString"])(e.$t("editor.slides.title")),1),ko,No,Object(a["createElementVNode"])("button",{class:"editor-button",onClick:t[0]||(t[0]=(...t)=>e.addNewSlide&&e.addNewSlide(...t))},[To,Object(a["createElementVNode"])("span",_o,Object(a["toDisplayString"])(e.$t("editor.slides.addSlide")),1)]),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:"editor-button",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.$vfm.open("copy-from-other-lang"),["stop"]))},Lo)),[[d,{delay:"200",placement:"right",content:e.$t("editor.slides.copyFromLang"),animateFill:!0}]]),Object(a["createVNode"])(n,{modalId:"copy-from-other-lang","content-class":"flex flex-col max-w-xl mx-4 p-4 bg-white border rounded-lg space-y-2",class:"flex justify-center items-center"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",Mo,Object(a["toDisplayString"])(e.$t("editor.slides.copyFromLang")),1),Object(a["createElementVNode"])("div",Bo,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button w-32 h-12 ml-0",onClick:t[2]||(t[2]=t=>e.copyAllFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides))},Object(a["toDisplayString"])(e.$t("editor.slides.copyAll")),1),Object(a["createElementVNode"])("span",Io,Object(a["toDisplayString"])(e.$t("editor.or")),1),Object(a["createElementVNode"])("div",Do,[Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedForCopying=t),class:"overflow-ellipsis copy-select"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides,(t,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("option",{value:i,key:t.title+i},Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+": "+t.title),9,Fo))),128))],512),[[a["vModelSelect"],e.selectedForCopying]]),Object(a["createElementVNode"])("button",{class:"editor-toc-button",onClick:t[4]||(t[4]=t=>e.copyFromOtherLang(e.configFileStructure.configs["en"===e.lang?"fr":"en"].slides[e.selectedForCopying]))},Object(a["toDisplayString"])(e.$t("editor.slides.copy")),1)])])]),_:1})]),Object(a["createElementVNode"])("ul",Po,[Object(a["createVNode"])(c,{modelValue:e.slides,"onUpdate:modelValue":t[5]||(t[5]=t=>e.slides=t),onUpdate:t[6]||(t[6]=t=>e.$emit("slides-updated",e.slides)),"item-key":"title"},{item:Object(a["withCtx"])(({element:t,index:i})=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{class:Object(a["normalizeClass"])(["toc-slide border-t flex px-2 cursor-pointer hover:bg-gray-100",e.currentSlide===t?"bg-gray-100":""]),onClick:t=>e.selectSlide(i),key:t.title+i},[Object(a["createElementVNode"])("div",Ao,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("editor.slides.slide"))+" "+Object(a["toDisplayString"])(i+1)+": ",1),Object(a["createElementVNode"])("span",Uo,Object(a["toDisplayString"])(t.title||"Add a title"),1)]),Object(a["createElementVNode"])("div",zo,[Object(a["createElementVNode"])("div",Wo,[Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.$vfm.open("delete-slide-"+i),["stop"])},Xo,8,Ho),Object(a["createElementVNode"])("button",{class:"slide-toc-button",onClick:Object(a["withModifiers"])(t=>e.copySlide(i),["stop"])},Zo,8,Jo)]),Object(a["createElementVNode"])("div",Yo,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button",0==i?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveUp(i),["stop"]),disabled:0==i},er,10,Qo),Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["slide-toc-button rotate-180 transform",i==e.slides.length-1?"text-gray-500 cursor-not-allowed":""]),onClick:Object(a["withModifiers"])(t=>e.moveDown(i),["stop"]),disabled:i==e.slides.length-1},ar,10,tr)])]),Object(a["createVNode"])(s,{name:"delete-slide-"+i,message:e.$t("editor.slides.deleteSlide.confirm",{title:t.title}),onOk:t=>e.removeSlide(i)},null,8,["name","message","onOk"])],10,Ro)),[[d,{delay:"200",placement:"right",content:t.title,animateFill:!0}]])]),_:1},8,["modelValue"])])])}var or=i("9675"),rr=i.n(or);let nr=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"slides",void 0),Object(E["a"])(this,"currentSlide",void 0),Object(E["a"])(this,"slideIndex",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"lang",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"selectedForCopying",0)}selectSlide(e){this.$emit("slide-change",e)}addNewSlide(){this.slides.push({title:"",panel:[{type:"text",title:"",content:""},{type:"text",title:"",content:""}]}),this.selectSlide(this.slides.length-1),this.$emit("slides-updated",this.slides)}copyFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,rr()(e)),this.$emit("slides-updated",this.slides))}copyAllFromOtherLang(e){e&&(this.slides.splice(this.slides.length,0,...e.map(e=>rr()(e))),this.$emit("slides-updated",this.slides))}copySlide(e){this.slides.splice(e+1,0,rr()(this.slides[e])),this.$emit("slides-updated",this.slides)}removeSlide(e){e===this.slideIndex&&this.$emit("slide-change",-1),this.removeSourceCounts(e),this.slides.splice(e,1),this.$emit("slides-updated",this.slides)}removeSourceCounts(e){var t;const i=null===(t=this.slides.find((t,i)=>i===e))||void 0===t?void 0:t.panel;null===i||void 0===i||i.forEach(e=>this.removeSourceHelper(e))}removeSourceHelper(e){switch(e.type){case"map":{const t=e;this.sourceCounts[t.config]-=1,0===this.sourceCounts[t.config]&&this.configFileStructure.zip.remove(""+t.config.substring(t.config.indexOf("/")+1));break}case"image":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"chart":{const t=e;this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1));break}case"slideshow":{const t=e;t.items.forEach(e=>{this.removeSourceHelper(e)});break}case"video":{const t=e;"local"===t.videoType&&(this.sourceCounts[t.src]-=1,0===this.sourceCounts[t.src]&&this.configFileStructure.zip.remove(""+t.src.substring(t.src.indexOf("/")+1)));break}case"dynamic":{const t=e;t.children.forEach(e=>{this.removeSourceHelper(e.panel)});break}case"text":break}}moveUp(e){this.moveDown(e-1)}moveDown(e){this.slides.splice(e+1,0,this.slides.splice(e,1)[0]),this.$emit("slides-updated",this.slides)}};Object(r["a"])([Object(n["b"])()],nr.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],nr.prototype,"currentSlide",void 0),Object(r["a"])([Object(n["b"])()],nr.prototype,"slideIndex",void 0),Object(r["a"])([Object(n["b"])()],nr.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],nr.prototype,"lang",void 0),Object(r["a"])([Object(n["b"])()],nr.prototype,"sourceCounts",void 0),nr=Object(r["a"])([Object(n["a"])({components:{"slide-editor":Co,"confirmation-modal":Dt,"vue-final-modal":he["a"],draggable:Pt.a}})],nr);var sr=nr;i("7861");const cr=b()(sr,[["render",lr],["__scopeId","data-v-04c71bb5"]]);var dr=cr;const ur={class:"editor-label mb-5"},br=["value"],mr=Object(a["createElementVNode"])("br",null,null,-1),pr={class:"editor-label mb-5"},hr=["value"],gr={class:"editor-label mb-5"},fr=["value"],vr=Object(a["createElementVNode"])("br",null,null,-1),Or={key:0},jr={class:"editor-label"},yr=["src"],Vr={key:1,class:"image-preview"},Sr={class:"editor-label mb-5"},Cr=["value"],xr=Object(a["createElementVNode"])("br",null,null,-1),Er={class:"editor-label"},wr=["value"],kr=Object(a["createElementVNode"])("br",null,null,-1),Nr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Tr={class:"inline-block"},_r=Object(a["createElementVNode"])("br",null,null,-1),$r={class:"editor-label"},Lr=["value"],Mr=Object(a["createElementVNode"])("br",null,null,-1),Br=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Ir={class:"inline-block"},Dr=Object(a["createElementVNode"])("br",null,null,-1),Fr={class:"editor-label"},Pr=["value"],Rr=Object(a["createElementVNode"])("br",null,null,-1),Ar=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Ur={class:"inline-block"},zr=Object(a["createElementVNode"])("br",null,null,-1),Wr={class:"editor-label mr-15"},Hr={value:"vertical"},qr={value:"horizontal"},Xr=Object(a["createElementVNode"])("br",null,null,-1),Jr=Object(a["createElementVNode"])("label",{class:"editor-label mb-5"},null,-1),Gr={class:"inline-block"},Zr=Object(a["createElementVNode"])("br",null,null,-1),Yr={class:"editor-label mb-5"},Qr=["value"],Kr=Object(a["createElementVNode"])("br",null,null,-1),en=Object(a["createElementVNode"])("br",null,null,-1);function tn(e,t,i,l,o,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("label",ur,Object(a["toDisplayString"])(e.$t("editor.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"title",value:e.metadata.title,onChange:t[0]||(t[0]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/3"},null,40,br),mr,Object(a["createElementVNode"])("label",pr,Object(a["toDisplayString"])(e.$t("editor.slides.title"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introTitle",value:e.metadata.introTitle,onChange:t[1]||(t[1]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,hr),Object(a["createElementVNode"])("label",gr,Object(a["toDisplayString"])(e.$t("editor.slides.intro"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"introSubtitle",value:e.metadata.introSubtitle,onChange:t[2]||(t[2]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-1/4"},null,40,fr),vr,e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Or,[Object(a["createElementVNode"])("label",jr,Object(a["toDisplayString"])(e.$t("editor.logoPreview"))+":",1),e.metadata.logoPreview&&"error"!=e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:0,src:e.metadata.logoPreview,class:"image-preview"},null,8,yr)):Object(a["createCommentVNode"])("",!0),"error"==e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Vr,Object(a["toDisplayString"])(e.$t("editor.image.loadingError")),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("label",Sr,Object(a["toDisplayString"])(e.$t("editor.logo"))+":",1),Object(a["createElementVNode"])("input",{type:"text",onChange:t[3]||(t[3]=t=>e.$emit("logo-source-changed",t)),value:e.metadata.logoName,class:"editor-input w-1/4"},null,40,Cr),Object(a["createElementVNode"])("button",{onClick:t[4]||(t[4]=Object(a["withModifiers"])((...t)=>e.openFileSelector&&e.openFileSelector(...t),["stop"])),class:"editor-button bg-black text-white hover:bg-gray-800"},Object(a["toDisplayString"])(e.$t("editor.browse")),1),e.metadata.logoName||e.metadata.logoPreview?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[5]||(t[5]=Object(a["withModifiers"])((...t)=>e.removeLogo&&e.removeLogo(...t),["stop"])),class:"editor-button border border-black"},Object(a["toDisplayString"])(e.$t("editor.remove")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("input",{type:"file",id:"logoUpload",onChange:t[6]||(t[6]=t=>e.$emit("logo-changed",t)),class:"editor-input w-1/4",style:{display:"none"}},null,32),xr,Object(a["createElementVNode"])("label",Er,Object(a["toDisplayString"])(e.$t("editor.logoAltText"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"logoAltText",value:e.metadata.logoAltText,onChange:t[7]||(t[7]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,wr),kr,Nr,Object(a["createElementVNode"])("p",Tr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.logoAltText.desc")),1)]),_r,Object(a["createElementVNode"])("label",$r,Object(a["toDisplayString"])(e.$t("editor.contextLink"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLink",value:e.metadata.contextLink,onChange:t[8]||(t[8]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,Lr),Mr,Br,Object(a["createElementVNode"])("p",Ir,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLink.info")),1)]),Dr,Object(a["createElementVNode"])("label",Fr,Object(a["toDisplayString"])(e.$t("editor.contextLabel"))+":",1),Object(a["createElementVNode"])("input",{type:"text",name:"contextLabel",value:e.metadata.contextLabel,onChange:t[9]||(t[9]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),class:"editor-input w-2/3"},null,40,Pr),Rr,Ar,Object(a["createElementVNode"])("p",Ur,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.contextLabel.info")),1)]),zr,Object(a["createElementVNode"])("label",Wr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation"))+":",1),Object(a["withDirectives"])(Object(a["createElementVNode"])("select",{class:"border-solid border border-black p-1",name:"tocOrientation",id:"toc",onChange:t[10]||(t[10]=(...t)=>e.metadataChanged&&e.metadataChanged(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.metadata.tocOrientation=t)},[Object(a["createElementVNode"])("option",Hr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.vertical")),1),Object(a["createElementVNode"])("option",qr,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.horizontal")),1)],544),[[a["vModelSelect"],e.metadata.tocOrientation]]),Xr,Jr,Object(a["createElementVNode"])("p",Gr,[Object(a["createElementVNode"])("i",null,Object(a["toDisplayString"])(e.$t("editor.tocOrientation.info")),1)]),Zr,Object(a["createElementVNode"])("label",Yr,Object(a["toDisplayString"])(e.$t("editor.dateModified"))+":",1),Object(a["createElementVNode"])("input",{class:"editor-input",type:"date",name:"dateModified",value:e.metadata.dateModified,onChange:t[12]||(t[12]=(...t)=>e.metadataChanged&&e.metadataChanged(...t))},null,40,Qr),Kr,en])}class an extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"metadata",void 0)}openFileSelector(){var e;null===(e=document.getElementById("logoUpload"))||void 0===e||e.click()}metadataChanged(e){this.$emit("metadata-changed",e.target.name,e.target.value)}removeLogo(){this.metadata.logoName="",this.metadata.logoPreview=""}}Object(r["a"])([Object(n["b"])()],an.prototype,"metadata",void 0);const ln=b()(an,[["render",tn]]);var on=ln;const rn={class:"editor-container"},nn={class:"editor-header sticky flex items-center border-b border-black bg-gray-200 py-2 px-2 z-10"},sn={class:"mx-1"},cn=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18.001",viewBox:"0 0 18 18.001"},[Object(a["createElementVNode"])("path",{id:"logout-Icon-SVG-098767893",d:"M5.808,13.782v1.406A2.816,2.816,0,0,0,8.621,18h7.067A2.816,2.816,0,0,0,18.5,15.188V2.813A2.816,2.816,0,0,0,15.687,0H8.621A2.816,2.816,0,0,0,5.808,2.813V4.219a.7.7,0,0,0,1.406,0V2.813A1.408,1.408,0,0,1,8.621,1.406h7.067a1.408,1.408,0,0,1,1.406,1.406V15.188a1.408,1.408,0,0,1-1.406,1.406H8.621a1.408,1.408,0,0,1-1.406-1.406V13.782a.7.7,0,0,0-1.406,0ZM1.014,7.793,2.589,6.218a.7.7,0,0,1,.994.994l-1.12,1.12h8.443a.7.7,0,1,1,0,1.406H2.463l1.12,1.12a.7.7,0,1,1-.994.994L1.014,10.279A1.76,1.76,0,0,1,1.014,7.793Zm0,0",transform:"translate(-0.5)"})],-1),dn={class:"ml-3 flex flex-col"},un={class:"font-semibold text-lg"},bn=Object(a["createElementVNode"])("span",{class:"ml-auto"},null,-1),mn=Object(a["createElementVNode"])("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18px",height:"18px"},[Object(a["createElementVNode"])("path",{d:"M 2 2 L 4.9394531 4.9394531 C 3.1262684 6.7482143 2 9.2427079 2 12 C 2 17.514 6.486 22 12 22 C 17.514 22 22 17.514 22 12 C 22 6.486 17.514 2 12 2 L 12 4 C 16.411 4 20 7.589 20 12 C 20 16.411 16.411 20 12 20 C 7.589 20 4 16.411 4 12 C 4 9.7940092 4.9004767 7.7972757 6.3496094 6.3496094 L 9 9 L 9 2 L 2 2 z"})],-1),pn={class:"font-normal ml-1"},hn={key:0,class:"border-2 border-red-700 text-red-700 rounded p-1 mr-2"},gn=Object(a["createElementVNode"])("span",{class:"align-middle inline-block mr-1 pb-1 fill-current"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",class:"fill-red-600",width:"18",height:"18","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m12.002 21.534c5.518 0 9.998-4.48 9.998-9.998s-4.48-9.997-9.998-9.997c-5.517 0-9.997 4.479-9.997 9.997s4.48 9.998 9.997 9.998zm0-1.5c-4.69 0-8.497-3.808-8.497-8.498s3.807-8.497 8.497-8.497 8.498 3.807 8.498 8.497-3.808 8.498-8.498 8.498zm0-6.5c-.414 0-.75-.336-.75-.75v-5.5c0-.414.336-.75.75-.75s.75.336.75.75v5.5c0 .414-.336.75-.75.75zm-.002 3c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z","fill-rule":"nonzero"})])],-1),fn={class:"align-center inline-block select-none"},vn=["disabled"],On={class:"inline-block"},jn={key:0,class:"align-middle inline-block px-1"},yn={class:"flex"},Vn={class:"w-80 flex-shrink-0 border-r border-black editor-toc"},Sn={class:"flex items-center justify-center border-b p-2"},Cn=Object(a["createElementVNode"])("span",{class:"align-middle inline-block px-1"},[Object(a["createElementVNode"])("svg",{"clip-rule":"evenodd","fill-rule":"evenodd",width:"16",height:"16","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[Object(a["createElementVNode"])("path",{d:"m4.481 15.659c-1.334 3.916-1.48 4.232-1.48 4.587 0 .528.46.749.749.749.352 0 .668-.137 4.574-1.492zm1.06-1.061 3.846 3.846 11.321-11.311c.195-.195.293-.45.293-.707 0-.255-.098-.51-.293-.706-.692-.691-1.742-1.74-2.435-2.432-.195-.195-.451-.293-.707-.293-.254 0-.51.098-.706.293z","fill-rule":"nonzero"})])],-1),xn={class:"align-middle inline-block"},En={class:"footer text-right pr-5 editor-button"},wn=["href"];function kn(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("spinner"),c=Object(a["resolveComponent"])("slide-toc"),d=Object(a["resolveComponent"])("slide-editor"),u=Object(a["resolveComponent"])("confirmation-modal"),b=Object(a["resolveDirective"])("tippy");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",rn,[Object(a["createElementVNode"])("div",nn,[Object(a["createElementVNode"])("span",sn,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(n,{to:{name:"home"},class:"mt-1 flex justify-center h-full w-full",target:""},{default:Object(a["withCtx"])(()=>[cn]),_:1})),[[b,{delay:"200",placement:"right",content:e.$t("editor.returnToLanding"),animateFill:!0}]])]),Object(a["createElementVNode"])("div",dn,[Object(a["createElementVNode"])("span",un,Object(a["toDisplayString"])(e.metadata.title),1),Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(e.metadata.title?"text-xs":"")},"UUID: "+Object(a["toDisplayString"])(e.uuid),3)]),bn,e.unsavedChanges?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=t=>e.$vfm.open("reload-config")),class:"editor-button border-2 border-red-700 text-red-700 rounded p-1 mr-2"},[mn,Object(a["createElementVNode"])("span",pn,Object(a["toDisplayString"])(e.$t("editor.resetChanges")),1)])),[[b,{delay:"200",placement:"bottom",content:e.$t("editor.resetChanges"),animateFill:!0}]]):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(a["Transition"],{name:"fade"},{default:Object(a["withCtx"])(()=>[e.unsavedChanges?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",hn,[gn,Object(a["createElementVNode"])("span",fn,Object(a["toDisplayString"])(e.$t("editor.unsavedChanges")),1)])):Object(a["createCommentVNode"])("",!0)]),_:1}),Object(a["renderSlot"])(e.$slots,"langModal",Object(a["normalizeProps"])(Object(a["guardReactiveProps"])({unsavedChanges:e.unsavedChanges}))),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...t)=>e.preview&&e.preview(...t)),class:"editor-button bg-white border border-black hover:bg-gray-100"},Object(a["toDisplayString"])(e.$t("editor.preview")),1),Object(a["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...t)=>e.saveChanges&&e.saveChanges(...t)),class:"editor-button bg-black text-white hover:bg-gray-900",disabled:e.saving},[Object(a["createElementVNode"])("span",On,Object(a["toDisplayString"])(e.saving?e.$t("editor.savingChanges"):e.$t("editor.saveChanges")),1),e.saving?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",jn,[Object(a["createVNode"])(s,{size:"16px",color:"#009cd1",class:"ml-1 mb-1"})])):Object(a["createCommentVNode"])("",!0)],8,vn)]),Object(a["createElementVNode"])("div",yn,[Object(a["createElementVNode"])("div",Vn,[Object(a["createElementVNode"])("div",Sn,[Object(a["createElementVNode"])("button",{class:"editor-toc-button editor-button",onClick:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.$vfm.open("metadata-edit-modal"),["stop"]))},[Cn,Object(a["createElementVNode"])("span",xn,Object(a["toDisplayString"])(e.$t("editor.editMetadata")),1)])]),Object(a["createVNode"])(c,{slides:e.slides,currentSlide:e.currentSlide,slideIndex:e.slideIndex,onSlideChange:e.selectSlide,onSlidesUpdated:e.updateSlides,configFileStructure:e.configFileStructure,lang:e.configLang,sourceCounts:e.sourceCounts},null,8,["slides","currentSlide","slideIndex","onSlideChange","onSlidesUpdated","configFileStructure","lang","sourceCounts"])]),Object(a["createVNode"])(d,{ref:"slide",configFileStructure:e.configFileStructure,currentSlide:e.currentSlide,lang:e.configLang,slideIndex:e.slideIndex,isLast:e.slideIndex===e.slides.length-1,uid:e.uuid,onSlideChange:e.selectSlide,onSlideEdit:e.onSlidesEdited,onCustomSlideUpdated:e.updateCustomSlide,sourceCounts:e.sourceCounts},null,8,["configFileStructure","currentSlide","lang","slideIndex","isLast","uid","onSlideChange","onSlideEdit","onCustomSlideUpdated","sourceCounts"])]),Object(a["createElementVNode"])("div",En,[Object(a["createElementVNode"])("a",{href:"mailto:applicationsdecartographieweb-webmappingapplications@ec.gc.ca?subject="+e.$t("editor.feedback.subject")},Object(a["toDisplayString"])(e.$t("editor.feedback")),9,wn)]),Object(a["renderSlot"])(e.$slots,"metadataModal"),Object(a["createVNode"])(u,{name:"reload-config",message:e.$t("editor.refreshChanges.modal"),onOk:t[4]||(t[4]=t=>e.$emit("refresh-config"))},null,8,["message"])])}let Nn=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"configs",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"sourceCounts",void 0),Object(E["a"])(this,"metadata",void 0),Object(E["a"])(this,"slides",void 0),Object(E["a"])(this,"configLang",void 0),Object(E["a"])(this,"saving",void 0),Object(E["a"])(this,"unsavedChanges",void 0),Object(E["a"])(this,"uuid",""),Object(E["a"])(this,"logoImage",void 0),Object(E["a"])(this,"loadSlides",void 0),Object(E["a"])(this,"currentSlide",""),Object(E["a"])(this,"slideIndex",-1)}onSlidesEdited(){this.$emit("save-status",!0)}onMetadataEdited(){this.$emit("save-status",!0)}created(){this.loadSlides=this.slides,this.uuid=this.$route.params.uid,window.addEventListener("beforeunload",this.beforeWindowUnload)}mounted(){const e=new IntersectionObserver(([e])=>e.target.classList.toggle("z-40",e.intersectionRatio<1),{threshold:[1]});e.observe(document.querySelector(".editor-header"))}beforeDestroy(){window.removeEventListener("beforeunload",this.beforeWindowUnload)}selectSlide(e){void 0!==this.$refs.slide&&this.$nextTick(()=>{this.$refs.slide.saveChanges()}),this.currentSlide={title:"",panel:[{type:"loading-page"},{type:"loading-page"}]},setTimeout(()=>{this.currentSlide=-1===e?"":this.loadSlides[e],this.slideIndex=e,this.$refs.slide.panelIndex=0,this.$refs.slide.advancedEditorView=!1,window.scrollTo(0,0)},5)}updateCustomSlide(e,t){this.currentSlide=e,t&&(this.slides[this.slideIndex]=e,this.$emit("save-changes"))}updateSlides(e){this.loadSlides=e,this.slideIndex=this.loadSlides.indexOf(this.currentSlide)}preview(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),setTimeout(()=>{const e=this.$router.resolve({name:"preview"}),t=window.open(e.href,"_blank");t.props={config:JSON.parse(JSON.stringify(this.configs[this.configLang])),configFileStructure:this.configFileStructure}},5)}saveChanges(){void 0!==this.$refs.slide&&this.$refs.slide.saveChanges(),this.$emit("save-changes")}beforeWindowUnload(e){this.unsavedChanges&&!window.confirm()&&e.preventDefault()}};Object(r["a"])([Object(n["b"])()],Nn.prototype,"configs",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"configFileStructure",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"sourceCounts",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"metadata",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"slides",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"configLang",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"saving",void 0),Object(r["a"])([Object(n["b"])()],Nn.prototype,"unsavedChanges",void 0),Object(r["a"])([Object(n["d"])("slides",{deep:!0})],Nn.prototype,"onSlidesEdited",null),Object(r["a"])([Object(n["d"])("metadata",{deep:!0})],Nn.prototype,"onMetadataEdited",null),Nn=Object(r["a"])([Object(n["a"])({components:{"metadata-content":on,"confirmation-modal":Dt,spinner:pe["a"],"slide-editor":Co,"slide-toc":dr}})],Nn);var Tn=Nn;i("fa3e");const _n=b()(Tn,[["render",kn]]);var $n=_n;const Ln=i("c4e3"),Mn=i("bc3a").default,{v4:Bn}=i("e144");let In=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"editExisting",void 0),Object(E["a"])(this,"configs",{en:void 0,fr:void 0}),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"loadExisting",!1),Object(E["a"])(this,"reloadExisting",!1),Object(E["a"])(this,"loadStatus","waiting"),Object(E["a"])(this,"loadEditor",!1),Object(E["a"])(this,"error",!1),Object(E["a"])(this,"warning",!1),Object(E["a"])(this,"configLang","en"),Object(E["a"])(this,"showDropdown",!1),Object(E["a"])(this,"storylineHistory",[]),Object(E["a"])(this,"selectedHistory",null),Object(E["a"])(this,"saving",!1),Object(E["a"])(this,"unsavedChanges",!1),Object(E["a"])(this,"apiUrl","http://localhost:6040"),Object(E["a"])(this,"uuid",""),Object(E["a"])(this,"logoImage",void 0),Object(E["a"])(this,"metadata",{title:"",introTitle:"",introSubtitle:"",logoPreview:"",logoName:"",logoAltText:"",contextLink:"",contextLabel:"",tocOrientation:"",dateModified:""}),Object(E["a"])(this,"reqFields",{uuid:!0}),Object(E["a"])(this,"slides",[]),Object(E["a"])(this,"sourceCounts",{})}created(){var e;if(this.loadExisting=this.editExisting,this.uuid=null!==(e=this.$route.params.uid)&&void 0!==e?e:this.loadExisting?void 0:Bn(),this.configLang=this.$route.params.lang||"en",this.configs={en:void 0,fr:void 0},this.configFileStructure=void 0,!this.loadExisting){const e=new Date,t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");this.metadata.dateModified=`${t}-${i}-${a}`,this.metadata.tocOrientation="vertical"}if("editor"===this.$route.name){this.loadEditor=!0;const e=this.$route.meta.data;if(e&&e.configs&&e.configFileStructure){var t;this.configs=e.configs,this.configFileStructure=e.configFileStructure,this.metadata=e.metadata,this.slides=e.slides,this.sourceCounts=e.sourceCounts,this.loadExisting=e.existing,this.unsavedChanges=e.unsavedChanges;const a=null===(t=this.configs[this.configLang])||void 0===t||null===(t=t.introSlide.logo)||void 0===t?void 0:t.src,l=`assets/${this.configLang}/${this.metadata.logoName}`;if(a){var i;const e=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(l);e?e.async("blob").then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=URL.createObjectURL(e),this.loadStatus="loaded"}):(this.metadata.logoName=a,fetch(a).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],this.metadata.logoName),this.metadata.logoPreview=a,this.loadStatus="loaded"})}))}else this.loadStatus="loaded";return}}this.$route.params.uid&&this.generateRemoteConfig()}generateNewConfig(){const e=new Ln;this.configs[this.configLang]=this.configHelper();const t=this.configs[this.configLang];if(this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`}else t.introSlide.logo.src="";t.slides=[];const a="en"===this.configLang?"fr":"en";this.configs[a]=rr()(t),this.configs[a].lang=a;const l=JSON.stringify(this.configs[a],null,4),o=`${this.uuid}_${this.configLang}.json`,r=JSON.stringify(t,null,4);e.file(o,r),e.file(`${this.uuid}_${a}.json`,l),this.configFileStructureHelper(e,this.logoImage)}configHelper(){return{title:this.metadata.title,lang:this.configLang,introSlide:{logo:{src:""},title:this.metadata.introTitle,subtitle:this.metadata.introSubtitle},slides:[],contextLabel:this.metadata.contextLabel,contextLink:this.metadata.contextLink,tocOrientation:this.metadata.tocOrientation,dateModified:this.metadata.dateModified}}generateRemoteConfig(){this.loadStatus="loading",fetch(this.apiUrl+"/retrieve/"+this.uuid).then(e=>{if(404===e.status){var t;ge["a"].error(`The requested UUID '${null!==(t=this.uuid)&&void 0!==t?t:""}' does not exist.`),this.error=!0,this.loadStatus="waiting",this.clearConfig()}else{const t=new Ln;e.blob().then(e=>{t.loadAsync(e).then(()=>{this.configFileStructureHelper(t)})})}fetch(this.apiUrl+"/retrieveMessages").then(e=>{if(e.ok)return e.json()}).then(e=>{Mn.post("#{NET_API_URL}#/api/log/create",{messages:e.messages}).catch(e=>console.log(e.response||e))}).catch(e=>console.log(e.response||e))}).catch(()=>{ge["a"].error("Failed to load product, no response from server"),this.loadStatus="loaded"})}fetchHistory(){void 0===this.uuid&&ge["a"].error("You must first enter a UUID")}selectHistory(e){this.selectedHistory=e}formatDate(e){const t=new Date(e),i=new Date(t.toLocaleString("en-US",{timeZone:"America/Toronto"})),a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"America/Toronto"};return new Intl.DateTimeFormat("en-US",a).format(i)}loadHistory(){this.selectedHistory,0}findSources(e){["en","fr"].forEach(t=>{var i,a;null!==(i=e[t])&&void 0!==i&&null!==(i=i.introSlide.logo)&&void 0!==i&&i.src&&this.incrementSourceCount(e[t].introSlide.logo.src),null===(a=e[t])||void 0===a||a.slides.forEach(e=>{e.panel.forEach(e=>{this.panelSourceHelper(e)})})})}panelSourceHelper(e){switch(e.type){case"dynamic":e.children.forEach(e=>{this.panelSourceHelper(e.panel)});break;case"slideshow":e.items.forEach(e=>{this.panelSourceHelper(e)});break;case"chart":this.incrementSourceCount(e.src);break;case"image":this.incrementSourceCount(e.src);break;case"video":"local"===e.videoType&&this.incrementSourceCount(e.src);break;case"audio":this.incrementSourceCount(e.src);break;case"map":this.incrementSourceCount(e.config);break;case"text":break;default:break}}incrementSourceCount(e){this.sourceCounts[e]?this.sourceCounts[e]+=1:this.sourceCounts[e]=1}configFileStructureHelper(e,t){const i=e.folder("assets"),a=e.folder("charts"),l=e.folder("ramp-config");this.configFileStructure={uuid:this.uuid,zip:e,configs:this.configs,assets:{en:i.folder("en"),fr:i.folder("fr")},charts:{en:a.folder("en"),fr:a.folder("fr")},rampConfig:l},void 0!==t&&this.configFileStructure.assets[this.configLang].file(null===t||void 0===t?void 0:t.name,t),this.loadConfig()}async loadConfig(e){if(e)this.useConfig(e);else{try{var t,i;const e=null===(t=this.configFileStructure)||void 0===t?void 0:t.zip.file(this.uuid+"_en.json"),a=null===(i=this.configFileStructure)||void 0===i?void 0:i.zip.file(this.uuid+"_fr.json");await(null===e||void 0===e?void 0:e.async("string").then(e=>{this.configs["en"]=JSON.parse(e)})),await(null===a||void 0===a?void 0:a.async("string").then(e=>{this.configs["fr"]=JSON.parse(e)}))}catch{var a;return ge["a"].error(`The requested product '${null!==(a=this.uuid)&&void 0!==a?a:""}' is malformed.`),this.loadStatus="waiting",void this.clearConfig()}this.loadExisting?(this.loadStatus="waiting",ge["a"].success("Successfully loaded storyline!")):this.loadStatus="loaded",this.configs[this.configLang]&&(this.useConfig(this.configs[this.configLang]),this.findSources(this.configs),this.reloadExisting?(this.loadEditor=!0,this.generateConfig(),this.updateEditorPath()):this.loadExisting||(this.loadEditor=!0,this.updateEditorPath()))}}useConfig(e){var t;this.metadata.title=e.title,this.metadata.introTitle=e.introSlide.title,this.metadata.introSubtitle=e.introSlide.subtitle,this.metadata.contextLink=e.contextLink,this.metadata.contextLabel=e.contextLabel,this.metadata.tocOrientation=e.tocOrientation,this.metadata.dateModified=e.dateModified,this.slides=e.slides;const i=null===(t=e.introSlide.logo)||void 0===t?void 0:t.src;if(i){var a,l;this.metadata.logoAltText=null!==(a=e.introSlide.logo)&&void 0!==a&&a.altText?e.introSlide.logo.altText:"";const t=""+i.substring(i.indexOf("/")+1),o=""+i.split("/")[i.split("/").length-1],r=null===(l=this.configFileStructure)||void 0===l?void 0:l.zip.file(t);r?r.async("blob").then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=URL.createObjectURL(e),this.metadata.logoName=o,this.loadStatus="loaded"}):(this.metadata.logoName=i,fetch(i).then(e=>{404!==e.status&&e.blob().then(e=>{this.logoImage=new File([e],o),this.metadata.logoPreview=i,this.loadStatus="loaded"})}))}}generateConfig(){var e,t;this.saving=!0;const i=`${this.uuid}_${this.configLang}.json`,a=JSON.stringify(this.configs[this.configLang],null,4);return null===(e=this.configFileStructure)||void 0===e||e.zip.file(i,a),null===(t=this.configFileStructure)||void 0===t||t.zip.generateAsync({type:"blob"}).then(e=>{const t=new FormData;t.append("data",e,this.uuid+".zip");const i={"Content-Type":"multipart/form-data"};Mn.post(this.apiUrl+"/upload",t,{headers:i}).then(e=>{const t=e.data;t.files,t.status,this.unsavedChanges=!1,this.loadExisting=!0,ge["a"].success("Successfully saved changes!")}).catch(()=>{ge["a"].error("Failed to save changes.")}).finally(()=>{setTimeout(()=>{this.saving=!1},500)})}),this.configFileStructure}updateMetadata(e,t){this.metadata[e]=t,this.unsavedChanges=!0}saveMetadata(e=!1){const t=this.configs[this.configLang];if(void 0!==t){if(t.title=this.metadata.title,t.introSlide.title=this.metadata.introTitle,t.introSlide.subtitle=this.metadata.introSubtitle,t.contextLink=this.metadata.contextLink,t.contextLabel=this.metadata.contextLabel,t.tocOrientation=this.metadata.tocOrientation,t.dateModified=this.metadata.dateModified,void 0===t.introSlide.logo&&(t.introSlide.logo={src:"",altText:""}),t.introSlide.logo.altText=this.metadata.logoAltText,this.metadata.logoName)if(this.metadata.logoName.includes("http"))t.introSlide.logo.src=this.metadata.logoName;else{var i,a,l;t.introSlide.logo.src=`${this.uuid}/assets/${this.configLang}/${null===(i=this.logoImage)||void 0===i?void 0:i.name}`,null===(a=this.configFileStructure)||void 0===a||a.assets[this.configLang].file(null===(l=this.logoImage)||void 0===l?void 0:l.name,this.logoImage)}else t.introSlide.logo.src="";e&&this.generateConfig();const o=c();o.fetchUserProfile()}this.$vfm.close("metadata-edit-modal")}clearConfig(){this.metadata={title:"",introTitle:"",introSubtitle:"",contextLink:"",contextLabel:"",dateModified:"",logoPreview:"",logoName:"",logoAltText:"",tocOrientation:""},this.configs={en:void 0,fr:void 0},this.slides=[]}swapLang(){this.configLang="en"===this.configLang?"fr":"en",this.configs[this.configLang]&&(this.loadConfig(this.configs[this.configLang]),this.loadEditor&&(this.$refs.mainEditor.updateSlides(this.slides),this.$nextTick(()=>{this.$refs.mainEditor.selectSlide(-1)})))}checkUuid(){this.loadExisting||fetch(this.apiUrl+"/retrieve/"+this.uuid).then(e=>{404!==e.status&&(this.warning=!0),fetch(this.apiUrl+"/retrieveMessages").then(e=>{if(e.ok)return e.json()}).then(e=>{Mn.post("#{NET_API_URL}#/api/log/create",{messages:e.messages}).catch(e=>console.log(e.response||e))}).catch(e=>console.log(e.response||e))}),this.warning=!1}beforeRouteUpdate(e,t,i){this.uuid=e.params.uid,this.$i18n.locale=e.params.lang,i()}onLogoSourceInput(e){const t=e=>{const t=new Image;return t.src=e,new Promise(e=>{t.onerror=()=>e(!1),t.onload=()=>e(!0)})};this.metadata.logoName=e.target.value,t(this.metadata.logoName).then(e=>{e?(this.metadata.logoPreview=this.metadata.logoName,ge["a"].success("Successfully loaded logo image.")):(this.metadata.logoPreview="error",ge["a"].error("Failed to load logo image."))})}onFileChange(e){const t=e.target.files[0];this.logoImage=t,this.metadata.logoPreview=URL.createObjectURL(t),this.metadata.logoName=t.name}updateEditorPath(){"editor"!==this.$route.name&&(this.$router.beforeEach(e=>{"editor"===e.name&&(e.meta.data={configLang:this.configLang,configs:this.configs,configFileStructure:this.configFileStructure,sourceCounts:this.sourceCounts,metadata:this.metadata,slides:this.slides,existing:this.editExisting,unsavedChanges:this.unsavedChanges})}),this.$router.push({name:"editor",params:{uid:this.uuid}}))}checkRequiredFields(){return this.reqFields.uuid=!!this.uuid,!Object.values(this.reqFields).some(e=>!e)||(ge["a"].error("Please fill out the required fields before proceeding."),!1)}continueToEditor(){var e;this.checkRequiredFields()&&(this.loadExisting?void 0!==this.configs[this.configLang]&&this.uuid===(null===(e=this.configFileStructure)||void 0===e?void 0:e.uuid)?(this.loadEditor=!0,this.saveMetadata(!1),this.updateEditorPath()):ge["a"].error("No config exists for storylines product."):this.uuid?this.generateNewConfig():(ge["a"].error("Missing required field: UUID"),this.error=!0))}updateSaveStatus(e){this.unsavedChanges=e}refreshConfig(){this.loadExisting?(this.reloadExisting=!0,this.loadExisting=!1,this.generateRemoteConfig()):(this.reloadExisting=!1,this.generateNewConfig())}beforeRouteLeave(e,t,i){const a="editor"===this.$route.name,l="Leave the page? Changes made may not be saved.";this.unsavedChanges&&a&&!window.confirm(l)?i(!1):i()}get getStorylines(){var e,t;const i=c(),a=(null===(e=i.userProfile.storylines)||void 0===e?void 0:e.map(e=>({...e,isUserStoryline:!0})))||[],l=(null===(t=i.userProfile.allStorylines)||void 0===t?void 0:t.filter(e=>!a.some(t=>t.uuid===e.uuid)))||[];let o=[...a,...l];return this.uuid&&(o=o.filter(e=>e.uuid.toLowerCase().includes(this.uuid.toLowerCase()))),o}selectUuid(e){this.uuid=e,this.showDropdown=!1}};Object(r["a"])([Object(n["b"])({default:!0})],In.prototype,"editExisting",void 0),In=Object(r["a"])([Object(n["a"])({components:{Editor:$n,"confirmation-modal":Dt,"metadata-content":on,spinner:pe["a"],"slide-editor":Co,"slide-toc":dr,"vue-final-modal":he["a"]}})],In);var Dn=In;i("8592");const Fn=b()(Dn,[["render",me]]);var Pn=Fn;const Rn={key:0},An={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},Un={key:1},zn={key:0,class:"storyramp-app bg-white"},Wn={id:"story-header",class:"story-header sticky top-0 flex border-b border-black bg-gray-200 py-2 px-2 justify-between"},Hn={class:"w-mobile-full truncate"},qn={class:"font-semibold text-lg m-1"},Xn={class:"w-full mx-auto pb-10",id:"story"},Jn={class:"p-8 pt-2 text-right text-sm"},Gn=["href"],Zn=Object(a["createElementVNode"])("a",{href:"https://github.com/ramp4-pcar4/storylines-editor",target:"_NEW",class:"font-semibold text-blue-700"},"ramp4-pcar4/storylines-editor",-1),Yn={key:0,class:"storyramp-modified"};function Qn(e,t,i,l,o,r){const n=Object(a["resolveComponent"])("spinner"),s=Object(a["resolveComponent"])("storylines-intro"),c=Object(a["resolveComponent"])("storylines-content");return"loading"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Rn,[Object(a["createElementVNode"])("div",An,[Object(a["createVNode"])(n,{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])])):"loaded"===e.loadStatus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Un,[void 0!==e.config?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",zn,[Object(a["createElementVNode"])("header",Wn,[Object(a["createElementVNode"])("div",Hn,[Object(a["createElementVNode"])("span",qn,Object(a["toDisplayString"])(e.config.title),1)])]),Object(a["createVNode"])(s,{config:e.config.introSlide,configFileStructure:e.configFileStructure},null,8,["config","configFileStructure"]),Object(a["createElementVNode"])("div",Xn,[Object(a["createVNode"])(c,{config:e.config,configFileStructure:e.configFileStructure,lang:e.lang,plugin:!0,headerHeight:e.headerHeight,onStep:e.updateActiveIndex},null,8,["config","configFileStructure","lang","headerHeight","onStep"])]),Object(a["createElementVNode"])("footer",Jn,[Object(a["createTextVNode"])(" Context: "),Object(a["createElementVNode"])("a",{class:"text-blue-700 font-semibold",href:e.config.contextLink,target:"_NEW"},Object(a["toDisplayString"])(e.config.contextLabel),9,Gn),Object(a["createTextVNode"])(" | "),Zn]),e.config.dateModified?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Yn,Object(a["toDisplayString"])(e.$t("story.date"))+" "+Object(a["toDisplayString"])(e.config.dateModified),1)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)}let Kn=class extends n["c"]{constructor(...e){super(...e),Object(E["a"])(this,"config",void 0),Object(E["a"])(this,"configFileStructure",void 0),Object(E["a"])(this,"savedProduct",!1),Object(E["a"])(this,"loadStatus","loading"),Object(E["a"])(this,"activeChapterIndex",-1),Object(E["a"])(this,"lang","en"),Object(E["a"])(this,"headerHeight",0),Object(E["a"])(this,"uid",""),Object(E["a"])(this,"apiUrl","http://localhost:6040"),Object(E["a"])(this,"configs",{en:void 0,fr:void 0})}created(){const e=this.$route.params.uid,t=this.$route.params.lang,a=i("c4e3"),l=i("bc3a").default;e?(this.savedProduct=!0,fetch(this.apiUrl+"/retrieve/"+e).then(i=>{if(404===i.status)console.error(`There does not exist a saved product with UID ${e}.`);else{const l=new a;i.blob().then(i=>{l.loadAsync(i).then(()=>{const i=l.folder("assets"),a=l.folder("charts"),o=l.folder("ramp-config");this.configFileStructure={uuid:e,zip:l,configs:this.configs,assets:{en:i.folder("en"),fr:i.folder("fr")},charts:{en:a.folder("en"),fr:a.folder("fr")},rampConfig:o};const r=`${e}_${t}.json`;l.file(r).async("string").then(e=>{const t=JSON.parse(e);this.config=t,this.loadStatus="loaded",document.title=this.config.title+" - Canada.ca"})})})}fetch(this.apiUrl+"/retrieveMessages").then(e=>{l.post("#{NET_API_URL}#/api/log/create",{messages:e.data.messages}).catch(e=>console.log(e.response||e))})})):(this.config=window.props.config,this.configFileStructure=window.props.configFileStructure,this.loadStatus="loaded");const o=document.documentElement;o.setAttribute("lang",this.lang),this.$i18n.locale=this.lang}updateActiveIndex(e){this.activeChapterIndex=e;const t=document.getElementById("story-header");t&&(this.headerHeight=t.clientHeight)}};Kn=Object(r["a"])([Object(n["a"])({components:{spinner:pe["a"]}})],Kn);var es=Kn;i("b5ca");const ts=b()(es,[["render",Qn]]);var is=ts,as=i("6605");const ls=[{path:"/",name:"landing",component:N,meta:{title:"editor.window.title"}},{path:"/:lang/editor",name:"home",component:R,meta:{title:"editor.window.title"}},{path:"/:lang/editor/:uid",redirect:e=>"/"+e.params.lang+"/editor-metadata/"+e.params.uid},{path:"/:lang/editor-metadata",name:"metadataExisting",component:Pn,props:{editExisting:!0},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata",name:"metadataNew",component:Pn,props:{editExisting:!1},meta:{title:"editor.window.title"}},{path:"/:lang/editor-metadata/:uid",component:Pn,meta:{title:"editor.window.title"}},{path:"/:lang/editor-main/:uid",name:"editor",component:Pn,props:!0,meta:{title:"editor.window.title"}},{path:"/:lang/editor-preview",component:is,name:"preview",props:!0,meta:{title:"story.window.title"}},{path:"/:lang/editor-preview/:uid",component:is,meta:{title:"story.window.title"}}],os=Object(as["a"])({routes:ls,history:Object(as["b"])(),scrollBehavior:function(e){if(e.hash)return{selector:decodeURIComponent(e.hash),behavior:"smooth"}}});var rs=os,ns=(i("38c8"),i("13d5"),i("9ca6"));const ss=i("3d6d"),cs=document.documentElement.getAttribute("lang");function ds(e){return e.reduce((e,t)=>(e.en[t.key]=t.enValue,e.fr[t.key]=t.frValue,e),{en:{},fr:{}})}const us=Object(ns["a"])({legacy:!1,locale:cs||void 0,fallbackLocale:"en",globalInjection:!0,messages:ds(ss)});var bs=i("ee2d"),ms=i.n(bs),ps=(i("fefe"),i("603a")),hs=i.n(ps),gs=(i("fbc4"),i("3b16")),fs=i.n(gs),vs=i("1487"),Os=i.n(vs),js=(i("40e8"),i("c4e7")),ys=(i("52df"),i("e748"),i("4452")),Vs=i.n(ys),Ss=(i("e896"),i("c883")),Cs=i.n(Ss);i("91a9");ms.a.lang.use("en-US",fs.a),ms.a.use(hs.a,{Hljs:Os.a});const xs=Object(he["b"])(),Es=Object(a["createApp"])(p),ws=Object(s["a"])();Es.use(ws).use(rs).use(us).use(js["a"],{directive:"tippy",component:"tippy"}).use(Vs.a).use(ge["a"]).use(Cs.a).use(ms.a).use(xs),Es.mount("#app")},d1aa:function(e,t,i){},dbf3:function(e,t,i){},e136:function(e,t,i){},e2f6:function(e,t,i){"use strict";i("c62e")},e5e3:function(e,t,i){},f622:function(e,t,i){"use strict";i("e5e3")},fa3e:function(e,t,i){"use strict";i("a360")}}]);
//# sourceMappingURL=chunk-common.cc589fea.js.map