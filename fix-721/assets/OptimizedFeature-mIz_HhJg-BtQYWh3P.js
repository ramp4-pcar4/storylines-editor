import{p as F}from"./memoryEstimations-DeWfxwaV-CoK5G6KM.js";import{c as p}from"./OptimizedGeometry-pzfNw1AT-BnwWoags.js";function O(e,t){return e?t?4:3:t?3:2}function _(e,t,o,n){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const r=e.coords,s=[],u=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:l,coords:I}=t,g=O(o,n);let m=0;for(const i of l){const c=w(u,I,m,i,o,n);c&&s.push(c),m+=i*g}if(s.sort((i,c)=>{let f=i[2]-c[2];return f===0&&o&&(f=i[4]-c[4]),f}),s.length){let i=6*s[0][2];r[0]=s[0][0]/i,r[1]=s[0][1]/i,o&&(i=6*s[0][4],r[2]=i!==0?s[0][3]/i:0),(r[0]<u[0]||r[0]>u[1]||r[1]<u[2]||r[1]>u[3]||o&&(r[2]<u[4]||r[2]>u[5]))&&(r.length=0)}if(!r.length){const i=t.lengths[0]?A(I,0,l[0],o,n):null;if(!i)return null;r[0]=i[0],r[1]=i[1],o&&i.length>2&&(r[2]=i[2])}return e}function w(e,t,o,n,r,s){const u=O(r,s);let l=o,I=o+u,g=0,m=0,i=0,c=0,f=0;for(let E=0,Y=n-1;E<Y;E++,l+=u,I+=u){const h=t[l],N=t[l+1],b=t[l+2],d=t[I],T=t[I+1],S=t[I+2];let y=h*T-d*N;c+=y,g+=(h+d)*y,m+=(N+T)*y,r&&(y=h*S-d*b,i+=(b+S)*y,f+=y),h<e[0]&&(e[0]=h),h>e[1]&&(e[1]=h),N<e[2]&&(e[2]=N),N>e[3]&&(e[3]=N),r&&(b<e[4]&&(e[4]=b),b>e[5]&&(e[5]=b))}if(c>0&&(c*=-1),f>0&&(f*=-1),!c)return null;const a=[g,m,.5*c];return r&&(a[3]=i,a[4]=.5*f),a}function A(e,t,o,n,r){const s=O(n,r);let u=t,l=t+s,I=0,g=0,m=0,i=0;for(let c=0,f=o-1;c<f;c++,u+=s,l+=s){const a=e[u],E=e[u+1],Y=e[u+2],h=e[l],N=e[l+1],b=e[l+2],d=n?M(a,E,Y,h,N,b):G(a,E,h,N);if(d)if(I+=d,n){const T=j(a,E,Y,h,N,b);g+=d*T[0],m+=d*T[1],i+=d*T[2]}else{const T=P(a,E,h,N);g+=d*T[0],m+=d*T[1]}}return I>0?n?[g/I,m/I,i/I]:[g/I,m/I]:o>0?n?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function G(e,t,o,n){const r=o-e,s=n-t;return Math.sqrt(r*r+s*s)}function M(e,t,o,n,r,s){const u=n-e,l=r-t,I=s-o;return Math.sqrt(u*u+l*l+I*I)}function P(e,t,o,n){return[e+.5*(o-e),t+.5*(n-t)]}function j(e,t,o,n,r,s){return[e+.5*(n-e),t+.5*(r-t),o+.5*(s-o)]}class V{constructor(t=null,o={},n,r,s=0){this.geometry=t,this.attributes=o,this.centroid=n,this.objectId=r,this.displayId=s}static fromJSON(t){const o=t.geometry?p.fromJSON(t.geometry):null,n=t.centroid?p.fromJSON(t.centroid):null,r=t.objectId;return new V(o,t.attributes,n,r)}weakClone(){const t=new V(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t}clone(){const t=this.geometry?.clone(),o=new V(t,{...this.attributes},this.centroid?.clone(),this.objectId);return o.displayId=this.displayId,o}ensureCentroid(t){return this.centroid??=_(new p,this.geometry,t.hasZ,t.hasM),this.centroid}get usedMemory(){return 128+F(this.attributes)+(this.geometry?.usedMemory??0)}}function C(e){return!!e.geometry?.coords?.length}export{V as F,_ as V,C as q};
